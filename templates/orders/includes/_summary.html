<!-- Summary Section -->
<div class="lg:sticky lg:top-8 h-fit">
  <div class="bg-white dark:bg-gray-800 rounded-xl shadow-xl overflow-hidden">
    <div class="p-6 border-b border-gray-100 dark:border-gray-700">
      <h2 class="text-xl font-bold text-gray-900 dark:text-white">Order Summary</h2>
    </div>
    <div class="p-6">
      <div class="space-y-4">
        <template x-for="(item, index) in cartItems" :key="item.id">
          <div class="flex items-center space-x-4">
            <div class="w-24 h-24 flex-none shrink-0 rounded-lg overflow-hidden border border-gray-300 dark:border-gray-700">
              <img :src="item.product.image" alt="" class="w-24 h-24 object-cover" />
            </div>
            <div class="flex-grow">
              <p class="text-sm font-medium text-gray-900 dark:text-white" x-text="item.product.name"></p>
              <div class="text-xs text-gray-600 dark:text-gray-400 mt-1">
                <template x-if="item.color">
                  <p>Color: <span :style="`background-color: ${item.color.hex || item.color.name.toLowerCase()}; display: inline-block; width: 12px; height: 12px; border-radius: 50%; vertical-align: middle; margin-right: 4px; border: 1px solid #ccc;`"></span><span x-text="item.color.name"></span></p>
                </template>
                <template x-if="item.size">
                  <p>Size: <span x-text="item.size.name"></span></p>
                </template>
                <template x-if="item.fabric">
                  <p>Fabric: <span x-text="item.fabric.name"></span></p>
                </template>
              </div>
              
              <!-- Editable Quantity -->
              <div class="flex items-center space-x-2 mt-1">
                <label for="" class="text-sm text-gray-600 dark:text-gray-400">Quantity:</label>
                <input type="number" min="1" 
                       class="w-16 text-center rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"
                       x-model.number="item.quantity" 
                       @input="updateOrderSummary()" />
                <button @click="removeItem(index)" 
                        class="text-red-500 hover:text-red-700 text-sm" 
                        aria-label="Remove item">
                  &times;
                </button>
              </div>
            </div>
            <div>
          </div>
        </template>
      </div>

      <div class="border-t border-gray-200 dark:border-gray-700 mt-6 pt-6 space-y-3">
        <div class="flex justify-between">
          <span class="text-gray-600 dark:text-gray-300">Subtotal</span>
          <span class="text-gray-900 dark:text-white">৳<span x-text="subtotal.toFixed(2)"></span></span>
        </div>
        <div class="flex justify-between">
          <span class="text-gray-600 dark:text-gray-300">Shipping</span>
          <span class="text-gray-900 dark:text-white">৳<span x-text="parseFloat(shipping || 0).toFixed(2)"></span></span>
        </div>
        <div class="flex justify-between">
          <span class="text-gray-600 dark:text-gray-300">VAT (<span x-text="(taxRate * 100).toFixed(0)"></span>%)</span>
          <span class="text-gray-900 dark:text-white">৳<span x-text="tax.toFixed(2)"></span></span>
        </div>
        <div class="flex justify-between">
          <span class="text-gray-600 dark:text-gray-300">Discount</span>
          <span class="text-green-600 dark:text-green-400">-৳<span x-text="discount.toFixed(2)"></span></span>
        </div>
        <div class="flex justify-between border-t border-gray-200 dark:border-gray-700 pt-3">
          <span class="text-lg font-medium text-gray-900 dark:text-white">Total</span>
          <span class="text-lg font-bold text-gray-900 dark:text-white">
            ৳<span x-text="(parseFloat(subtotal || 0) + parseFloat(shipping || 0) + parseFloat(tax || 0) - parseFloat(discount || 0)).toFixed(2)"></span>
          </span>
        </div>
      </div>
    </div>
  </div>
</div>
