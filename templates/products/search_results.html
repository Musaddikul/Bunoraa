{% extends "base.html" %}
{% load i18n %}
{% load static %}
{% load currency_filters %}

{% block page_name %}search{% endblock %}

{% block title %}{% translate "Search Results" %}{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <!-- Search Header -->
    <div class="mb-8">
        <h1 class="text-2xl font-bold mb-2">{% translate "Search Results" %}</h1>
        <p class="text-gray-600">
            {% if products %}
            {% blocktrans count counter=products|length %}Found {{ counter }} result for "{{ query }}"{% plural %}Found {{ counter }} results for "{{ query }}"{% endblocktrans %}
            {% else %}
            {% translate "No results found for" %} "{{ query }}"
            {% endif %}
        </p>
    </div>
    
    <!-- Results Grid -->
    {% if products %}
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        {% for product in products %}
        {% include 'products/partials/product_card_simple.html' %}
        {% endfor %}
    </div>
    
    <!-- Pagination -->
    {% if is_paginated %}
    <div class="mt-8 flex justify-center">
        <nav class="flex items-center space-x-2">
            {% if page_obj.has_previous %}
            <a href="?q={{ query }}&page={{ page_obj.previous_page_number }}" class="px-3 py-1 border rounded hover:bg-gray-100">
                <i class="fas fa-chevron-left"></i>
            </a>
            {% endif %}

            {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
            <span class="px-3 py-1 border border-primary-600 bg-primary-600 text-white rounded">{{ num }}</span>
            {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
            <a href="?q={{ query }}&page={{ num }}" class="px-3 py-1 border rounded hover:bg-gray-100">{{ num }}</a>
            {% endif %}
            {% endfor %}

            {% if page_obj.has_next %}
            <a href="?q={{ query }}&page={{ page_obj.next_page_number }}" class="px-3 py-1 border rounded hover:bg-gray-100">
                <i class="fas fa-chevron-right"></i>
            </a>
            {% endif %}
        </nav>
    </div>
    {% endif %}
    {% else %}
    <div class="text-center py-12">
        <img src="{% static 'images/no-results.svg' %}" alt="No results" class="mx-auto h-40 mb-6">
        <h3 class="text-xl font-medium text-gray-500">{% translate "No products match your search" %}</h3>
        <p class="text-gray-500 mt-2">{% translate "Try different keywords or browse our" %} <a href="{% url 'products:all_products' %}" class="text-primary-600 hover:text-primary-800">{% translate "product catalog" %}</a></p>
    </div>
    {% endif %}
</div>
{% endblock %}