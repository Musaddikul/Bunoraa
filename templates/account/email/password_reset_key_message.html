{% load account %}
{% user_display user as user_display %}

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Password Reset for {{ current_site.name }}</title>
    <style type="text/css">
        body { margin: 0; padding: 0; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }
        table { border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; }
        img { border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; -ms-interpolation-mode: bicubic; }
        p { display: block; margin: 13px 0; }
        a { text-decoration: none; }

        /* Dark Mode Styles */
        @media (prefers-color-scheme: dark) {
            .dark-mode-bg { background-color: #1a202c !important; }
            .dark-mode-text { color: #e2e8f0 !important; }
            .dark-mode-card { background-color: #2d3748 !important; }
            .dark-mode-border { border-color: #4a5568 !important; }
            .dark-mode-button { background-color: #6b46c1 !important; color: #ffffff !important; }
            .dark-mode-link { color: #9f7aea !important; }
        }

        /* Fallback for Outlook */
        [data-ogsc] .dark-mode-bg { background-color: #1a202c !important; }
        [data-ogsc] .dark-mode-text { color: #e2e8f0 !important; }
        [data-ogsc] .dark-mode-card { background-color: #2d3748 !important; }
        [data-ogsc] .dark-mode-border { border-color: #4a5568 !important; }
        [data-ogsc] .dark-mode-button { background-color: #6b46c1 !important; color: #ffffff !important; }
        [data-ogsc] .dark-mode-link { color: #9f7aea !important; }

        /* Primary color from tailwind.config.js: #7c2d12 */
        .primary-color { color: #7c2d12; }
        .primary-bg { background-color: #7c2d12; }
        .primary-hover-bg:hover { background-color: #5a220d; }
    </style>
</head>
<body style="margin: 0; padding: 0; background-color: #f7fafc; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';" class="dark-mode-bg">
    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="min-width: 100%;">
        <tr>
            <td style="padding: 20px 0 30px 0;">
                <table align="center" border="0" cellpadding="0" cellspacing="0" width="600" style="border-collapse: collapse; border-spacing: 0; padding: 0; width: 600px; max-width: 600px;" class="dark-mode-card" bgcolor="#ffffff">
                    <tr>
                        <td align="center" style="padding: 40px 0 30px 0; background-color: #f7fafc;" class="dark-mode-bg">
                            <a href="{{ current_site.domain }}" target="_blank" style="text-decoration: none;">
                                <img src="https://bunonmart.com/static/images/logo.png" alt="{{ current_site.name }} Logo" width="150" style="display: block; border: none;" />
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 30px 30px 40px 30px; border: 1px solid #e2e8f0;" class="dark-mode-border">
                            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                                <tr>
                                    <td style="color: #1a202c; font-size: 24px; line-height: 28px; font-weight: bold; padding-bottom: 20px; text-align: center;" class="dark-mode-text">
                                        Password Reset Request
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color: #4a5568; font-size: 16px; line-height: 24px; padding-bottom: 20px;" class="dark-mode-text">
                                        Hello {{ user_display }},
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color: #4a5568; font-size: 16px; line-height: 24px; padding-bottom: 20px;" class="dark-mode-text">
                                        You are receiving this e-mail because you (or someone else) has requested a password reset for your account at <strong>{{ current_site.name }}</strong>.
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color: #4a5568; font-size: 16px; line-height: 24px; padding-bottom: 30px;" class="dark-mode-text">
                                        To reset your password, please click the button below:
                                    </td>
                                </tr>
                                <tr>
                                    <td align="center" style="padding-bottom: 30px;">
                                        <table border="0" cellspacing="0" cellpadding="0">
                                            <tr>
                                                <td align="center" class="primary-bg dark-mode-button" style="border-radius: 8px;" bgcolor="#7c2d12">
                                                    <a href="{{ password_reset_url }}" target="_blank" style="font-size: 16px; font-family: Helvetica, Arial, sans-serif; color: #ffffff; text-decoration: none; border-radius: 8px; padding: 15px 25px; border: 1px solid #7c2d12; display: inline-block; font-weight: bold;" class="primary-hover-bg">
                                                        Reset Your Password
                                                    </a>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color: #4a5568; font-size: 16px; line-height: 24px; padding-bottom: 20px;" class="dark-mode-text">
                                        If you did not request this, please ignore this e-mail. Your password will remain unchanged.
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color: #4a5568; font-size: 16px; line-height: 24px;" class="dark-mode-text">
                                        Thank you for using {{ current_site.name }}!
                                    </td>
                                </tr>
                                <tr>
                                    <td style="color: #4a5568; font-size: 16px; line-height: 24px; padding-top: 20px; border-top: 1px solid #e2e8f0;" class="dark-mode-text dark-mode-border">
                                        The {{ current_site.name }} Team
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 30px; text-align: center; font-size: 12px; color: #a0aec0;" class="dark-mode-text">
                            &copy; {% now "Y" %} {{ current_site.name }}. All rights reserved.
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>