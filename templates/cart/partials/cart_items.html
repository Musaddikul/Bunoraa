{# cart/templates/cart/partials/cart_items.html #}
{# This partial assumes 'grouped_items_by_seller' is passed in context from the view #}

<div id="cart-items-list" class="space-y-6">
  {% if grouped_items_by_seller %}
    {% for seller_group in grouped_items_by_seller %}
      {% include "cart/partials/_seller_group.html" with seller=seller_group.seller active_items=seller_group.items item_total=seller_group.item_total subtotal=seller_group.subtotal %}
    {% endfor %}

    <div class="flex justify-end mt-6">
      <form hx-post="{% url 'cart:empty' %}"
            hx-target="#cart-section-wrapper"
            hx-swap="outerHTML"
            class="inline-block">
        {% csrf_token %}
        <button type="submit" class="px-6 py-3 bg-red-500 text-white rounded-lg shadow-md hover:bg-red-600 transition-colors font-medium">
          <i class="fas fa-trash-alt mr-2"></i> Empty Cart
        </button>
      </form>
    </div>
  {% else %}
    {# This case should ideally be handled by the parent detail.html #}
    {# but kept here as a fallback #}
    {% include "cart/partials/_empty_cart.html" %}
  {% endif %}
</div>
