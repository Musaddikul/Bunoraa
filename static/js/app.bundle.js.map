{
  "version": 3,
  "sources": ["components/utils.js", "components/BaseComponent.js", "components/Alert.js", "components/AlertDialog.js", "components/Avatar.js", "components/Badge.js", "components/Button.js", "components/ButtonGroup.js", "components/Breadcrumb.js", "components/Card.js", "components/Carousel.js", "components/Chart.js", "components/Checkbox.js", "components/Collapsible.js", "components/Command.js", "components/Combobox.js", "components/ContextMenu.js", "components/DatePicker.js", "components/Dialog.js", "components/DropdownMenu.js", "components/Drawer.js", "components/Empty.js", "components/Form.js", "components/HoverCard.js", "components/Input.js", "components/InputGroup.js", "components/InputOTP.js", "components/Item.js", "components/Label.js", "components/Kbd.js", "components/NativeSelect.js", "components/Tooltip.js", "components/Toggle.js", "components/ToggleGroup.js", "components/Toast.js", "utils/lazyHydrate.js", "pages/account.js", "pages/cart.js", "pages/category.js", "pages/checkout.js", "pages/contact.js", "pages/faq.js", "components/CategoryCard.js", "pages/home.js", "pages/legal.js", "pages/orders.js", "pages/preorders.js", "pages/product.js", "pages/search.js", "pages/wishlist.js", "app.js"],
  "sourcesContent": ["/**\n * Utilities and helpers for UI components\n */\n\n// CSS utilities for Tailwind classes\nconst css = {\n  // Layout\n  flex: 'flex',\n  inlineFlex: 'inline-flex',\n  block: 'block',\n  inlineBlock: 'inline-block',\n  hidden: 'hidden',\n  grid: 'grid',\n  \n  // Positioning\n  absolute: 'absolute',\n  relative: 'relative',\n  fixed: 'fixed',\n  sticky: 'sticky',\n  \n  // Sizing\n  w: (val) => `w-${val}`,\n  h: (val) => `h-${val}`,\n  wFull: 'w-full',\n  hFull: 'h-full',\n  \n  // Spacing\n  p: (val) => `p-${val}`,\n  m: (val) => `m-${val}`,\n  gap: (val) => `gap-${val}`,\n  \n  // Colors\n  textBlack: 'text-black',\n  textWhite: 'text-white',\n  textGray: (shade = '600') => `text-gray-${shade}`,\n  bgWhite: 'bg-white',\n  bgGray: (shade = '100') => `bg-gray-${shade}`,\n  bgPrimary: 'bg-blue-600',\n  \n  // Borders\n  border: 'border',\n  borderGray: 'border-gray-200',\n  rounded: 'rounded',\n  roundedLg: 'rounded-lg',\n  \n  // Shadows and effects\n  shadow: 'shadow',\n  shadowLg: 'shadow-lg',\n  \n  // Opacity\n  opacity50: 'opacity-50',\n  \n  // Transform\n  scale: (val) => `scale-${val}`,\n  \n  // Transitions\n  transition: 'transition',\n  duration200: 'duration-200',\n  easeOut: 'ease-out',\n};\n\n/**\n * Merge class names intelligently\n */\nfunction clsx(...classes) {\n  return classes\n    .flat()\n    .filter(c => c && typeof c === 'string')\n    .join(' ');\n}\n\n/**\n * Create element with classes\n */\nfunction createElement(tag = 'div', { id = '', className = '', attrs = {}, html = '', text = '' } = {}) {\n  const el = document.createElement(tag);\n  \n  if (id) el.id = id;\n  if (className) el.className = className;\n  if (text) el.textContent = text;\n  if (html) el.innerHTML = html;\n  \n  Object.entries(attrs).forEach(([key, value]) => {\n    if (value === true) {\n      el.setAttribute(key, '');\n    } else if (value !== false && value !== null) {\n      el.setAttribute(key, value);\n    }\n  });\n  \n  return el;\n}\n\n/**\n * Add event listeners with automatic cleanup\n */\nfunction addListener(el, event, handler, options = {}) {\n  if (!el) return;\n  el.addEventListener(event, handler, options);\n  \n  return () => el.removeEventListener(event, handler, options);\n}\n\n/**\n * Debounce function\n */\nfunction debounce(func, wait = 300) {\n  let timeout;\n  return function(...args) {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func.apply(this, args), wait);\n  };\n}\n\n/**\n * Throttle function\n */\nfunction throttle(func, limit = 300) {\n  let inThrottle;\n  return function(...args) {\n    if (!inThrottle) {\n      func.apply(this, args);\n      inThrottle = true;\n      setTimeout(() => inThrottle = false, limit);\n    }\n  };\n}\n\n/**\n * Get computed style value\n */\nfunction getComputedValue(el, property) {\n  return window.getComputedStyle(el).getPropertyValue(property);\n}\n\n/**\n * Toggle attribute on element\n */\nfunction toggleAttr(el, attr, value = '') {\n  if (el.hasAttribute(attr)) {\n    el.removeAttribute(attr);\n  } else {\n    el.setAttribute(attr, value);\n  }\n}\n\n/**\n * Focus trap utility\n */\nfunction createFocusTrap(container) {\n  const focusableElements = container.querySelectorAll(\n    'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n  );\n  \n  const firstElement = focusableElements[0];\n  const lastElement = focusableElements[focusableElements.length - 1];\n  \n  return {\n    init() {\n      container.addEventListener('keydown', (e) => {\n        if (e.key !== 'Tab') return;\n        \n        if (e.shiftKey) {\n          if (document.activeElement === firstElement) {\n            e.preventDefault();\n            lastElement.focus();\n          }\n        } else {\n          if (document.activeElement === lastElement) {\n            e.preventDefault();\n            firstElement.focus();\n          }\n        }\n      });\n    },\n    destroy() {\n      // Cleanup if needed\n    }\n  };\n}\n\n/**\n * Keyboard event utilities\n */\nconst keyboard = {\n  isEnter: (e) => e.key === 'Enter',\n  isEscape: (e) => e.key === 'Escape',\n  isArrowUp: (e) => e.key === 'ArrowUp',\n  isArrowDown: (e) => e.key === 'ArrowDown',\n  isArrowLeft: (e) => e.key === 'ArrowLeft',\n  isArrowRight: (e) => e.key === 'ArrowRight',\n  isSpace: (e) => e.key === ' ',\n  isTab: (e) => e.key === 'Tab',\n};\n\n/**\n * Animation utilities\n */\nfunction animate(el, keyframes, options = {}) {\n  return el.animate(keyframes, {\n    duration: 300,\n    easing: 'ease-out',\n    fill: 'forwards',\n    ...options\n  });\n}\n\n/**\n * Storage utilities\n */\nconst storage = {\n  set: (key, value) => localStorage.setItem(key, JSON.stringify(value)),\n  get: (key) => {\n    try {\n      return JSON.parse(localStorage.getItem(key));\n    } catch {\n      return null;\n    }\n  },\n  remove: (key) => localStorage.removeItem(key),\n  clear: () => localStorage.clear(),\n};\n\n/**\n * UUID generator\n */\nfunction generateId() {\n  return 'id-' + Math.random().toString(36).substr(2, 9) + Date.now().toString(36);\n}\n\n/**\n * Check if element is in viewport\n */\nfunction isInViewport(el) {\n  const rect = el.getBoundingClientRect();\n  return (\n    rect.top >= 0 &&\n    rect.left >= 0 &&\n    rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n    rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n  );\n}\n\n/**\n * Create modal backdrop\n */\nfunction createBackdrop(className = '') {\n  const backdrop = createElement('div', {\n    className: clsx(\n      'fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-200',\n      className\n    ),\n    attrs: { 'data-backdrop': 'true' }\n  });\n  return backdrop;\n}\n\n/**\n * Escape HTML\n */\nfunction escapeHtml(text) {\n  const map = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#039;'\n  };\n  return text.replace(/[&<>\"']/g, m => map[m]);\n}\n\n/**\n * Format currency\n */\nfunction formatCurrency(amount, currency = null, locale = navigator.language) {\n  // If currency string code provided, use Intl\n  if (typeof currency === 'string' && currency.length === 3) {\n    try {\n      return new Intl.NumberFormat(locale, { style: 'currency', currency }).format(Number(amount));\n    } catch (e) {\n      return Number(amount).toFixed(2);\n    }\n  }\n\n  // If no currency provided, use global window configuration\n  if (!currency && typeof window !== 'undefined' && window.BUNORAA_CURRENCY) {\n    currency = window.BUNORAA_CURRENCY;\n  }\n\n  if (!currency) return String(amount);\n\n  const symbol = currency.symbol || '';\n  const decimals = typeof currency.decimal_places === 'number' ? currency.decimal_places : 2;\n  const thousand = currency.thousand_separator || ',';\n  const dec_sep = currency.decimal_separator || '.';\n  const symbol_pos = currency.symbol_position || 'before';\n\n  const num = Number(amount);\n  if (Number.isNaN(num)) return String(amount);\n\n  const fixed = num.toFixed(decimals);\n  const parts = fixed.split('.');\n  let intPart = parts[0];\n  const decPart = parts[1] || '';\n\n  intPart = intPart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, thousand);\n  const formattedNumber = decimals > 0 ? intPart + dec_sep + decPart : intPart;\n\n  return symbol_pos === 'before' ? (symbol + formattedNumber) : (formattedNumber + ' ' + symbol);\n}\n\n/**\n * Format date\n */\nfunction formatDate(date, format = 'short') {\n  const options = {\n    short: { year: 'numeric', month: 'short', day: 'numeric' },\n    long: { year: 'numeric', month: 'long', day: 'numeric' },\n    time: { hour: '2-digit', minute: '2-digit' }\n  };\n  return new Date(date).toLocaleDateString('en-US', options[format] || options.short);\n}\n\nexport {\n  css,\n  clsx,\n  createElement,\n  addListener,\n  debounce,\n  throttle,\n  getComputedValue,\n  toggleAttr,\n  createFocusTrap,\n  keyboard,\n  animate,\n  storage,\n  generateId,\n  isInViewport,\n  createBackdrop,\n  escapeHtml,\n  formatCurrency,\n  formatDate\n};\n", "/**\n * Base Component Class\n * Provides common functionality for all UI components\n */\n\nimport { clsx, createElement, addListener, generateId } from './utils.js';\n\nexport class BaseComponent {\n  constructor(options = {}) {\n    this.id = options.id || generateId();\n    this.element = null;\n    this.listeners = [];\n    this.isInitialized = false;\n    this.config = options;\n  }\n\n  /**\n   * Create the component element\n   */\n  create(tag = 'div', { className = '', attrs = {}, html = '' } = {}) {\n    this.element = createElement(tag, {\n      id: this.id,\n      className,\n      attrs,\n      html\n    });\n    return this.element;\n  }\n\n  /**\n   * Mount component to DOM\n   */\n  mount(selector) {\n    if (!this.element) {\n      return false;\n    }\n\n    const target = typeof selector === 'string' \n      ? document.querySelector(selector) \n      : selector;\n\n    if (!target) {\n      return false;\n    }\n\n    target.appendChild(this.element);\n    this.isInitialized = true;\n    return true;\n  }\n\n  /**\n   * Add event listener with cleanup\n   */\n  on(event, handler, options = {}) {\n    if (!this.element) return;\n    \n    const cleanup = addListener(this.element, event, handler, options);\n    this.listeners.push(cleanup);\n    return cleanup;\n  }\n\n  /**\n   * Add delegated event listener\n   */\n  delegate(selector, event, handler) {\n    if (!this.element) return;\n\n    const listener = (e) => {\n      const target = e.target.closest(selector);\n      if (target) handler.call(target, e);\n    };\n\n    this.element.addEventListener(event, listener);\n    this.listeners.push(() => this.element.removeEventListener(event, listener));\n  }\n\n  /**\n   * Add class to element\n   */\n  addClass(...classes) {\n    if (this.element) {\n      this.element.classList.add(...classes);\n    }\n  }\n\n  /**\n   * Remove class from element\n   */\n  removeClass(...classes) {\n    if (this.element) {\n      this.element.classList.remove(...classes);\n    }\n  }\n\n  /**\n   * Toggle class on element\n   */\n  toggleClass(className, force) {\n    if (this.element) {\n      this.element.classList.toggle(className, force);\n    }\n  }\n\n  /**\n   * Check if element has class\n   */\n  hasClass(className) {\n    return this.element?.classList.contains(className) ?? false;\n  }\n\n  /**\n   * Set attribute\n   */\n  attr(name, value) {\n    if (!this.element) return;\n    \n    if (value === undefined) {\n      return this.element.getAttribute(name);\n    }\n    \n    if (value === null || value === false) {\n      this.element.removeAttribute(name);\n    } else if (value === true) {\n      this.element.setAttribute(name, '');\n    } else {\n      this.element.setAttribute(name, value);\n    }\n  }\n\n  /**\n   * Set multiple attributes\n   */\n  attrs(attributes) {\n    Object.entries(attributes).forEach(([key, value]) => {\n      this.attr(key, value);\n    });\n  }\n\n  /**\n   * Set text content\n   */\n  text(content) {\n    if (this.element) {\n      this.element.textContent = content;\n    }\n  }\n\n  /**\n   * Set HTML content\n   */\n  html(content) {\n    if (this.element) {\n      this.element.innerHTML = content;\n    }\n  }\n\n  /**\n   * Append child element\n   */\n  append(element) {\n    if (this.element && element) {\n      this.element.appendChild(element instanceof BaseComponent ? element.element : element);\n    }\n  }\n\n  /**\n   * Prepend child element\n   */\n  prepend(element) {\n    if (this.element && element) {\n      this.element.prepend(element instanceof BaseComponent ? element.element : element);\n    }\n  }\n\n  /**\n   * Show element\n   */\n  show() {\n    if (this.element) {\n      this.element.style.display = '';\n      this.element.removeAttribute('hidden');\n    }\n  }\n\n  /**\n   * Hide element\n   */\n  hide() {\n    if (this.element) {\n      this.element.style.display = 'none';\n    }\n  }\n\n  /**\n   * Toggle visibility\n   */\n  toggle(force) {\n    if (this.element) {\n      if (force === undefined) {\n        force = this.element.style.display === 'none';\n      }\n      force ? this.show() : this.hide();\n    }\n  }\n\n  /**\n   * Get computed style\n   */\n  getStyle(property) {\n    if (!this.element) return null;\n    return window.getComputedStyle(this.element).getPropertyValue(property);\n  }\n\n  /**\n   * Set style\n   */\n  setStyle(property, value) {\n    if (this.element) {\n      this.element.style[property] = value;\n    }\n  }\n\n  /**\n   * Set multiple styles\n   */\n  setStyles(styles) {\n    Object.entries(styles).forEach(([key, value]) => {\n      this.setStyle(key, value);\n    });\n  }\n\n  /**\n   * Focus element\n   */\n  focus() {\n    if (this.element) {\n      this.element.focus();\n    }\n  }\n\n  /**\n   * Blur element\n   */\n  blur() {\n    if (this.element) {\n      this.element.blur();\n    }\n  }\n\n  /**\n   * Get position relative to viewport\n   */\n  getPosition() {\n    if (!this.element) return null;\n    return this.element.getBoundingClientRect();\n  }\n\n  /**\n   * Destroy component and cleanup\n   */\n  destroy() {\n    // Remove all event listeners\n    this.listeners.forEach(cleanup => cleanup?.());\n    this.listeners = [];\n\n    // Remove element from DOM\n    if (this.element?.parentNode) {\n      this.element.parentNode.removeChild(this.element);\n    }\n\n    this.element = null;\n    this.isInitialized = false;\n  }\n\n  /**\n   * Initialize component (override in subclasses)\n   */\n  init() {\n    if (this.element && !this.isInitialized) {\n      this.isInitialized = true;\n    }\n  }\n\n  /**\n   * Render component (override in subclasses)\n   */\n  render() {\n    return this.element;\n  }\n}\n", "/**\n * Alert Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx, createElement } from './utils.js';\n\nexport class Alert extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.title = options.title || '';\n    this.message = options.message || '';\n    this.type = options.type || 'default'; // default, success, warning, error, info\n    this.icon = options.icon || null;\n    this.closeable = options.closeable || false;\n    this.className = options.className || '';\n  }\n\n  create() {\n    const typeConfig = {\n      default: {\n        bg: 'bg-blue-50',\n        border: 'border-blue-200',\n        title: 'text-blue-900',\n        message: 'text-blue-800',\n        icon: '\u24D8'\n      },\n      success: {\n        bg: 'bg-green-50',\n        border: 'border-green-200',\n        title: 'text-green-900',\n        message: 'text-green-800',\n        icon: '\u2713'\n      },\n      warning: {\n        bg: 'bg-yellow-50',\n        border: 'border-yellow-200',\n        title: 'text-yellow-900',\n        message: 'text-yellow-800',\n        icon: '\u26A0'\n      },\n      error: {\n        bg: 'bg-red-50',\n        border: 'border-red-200',\n        title: 'text-red-900',\n        message: 'text-red-800',\n        icon: '\u2715'\n      },\n      info: {\n        bg: 'bg-cyan-50',\n        border: 'border-cyan-200',\n        title: 'text-cyan-900',\n        message: 'text-cyan-800',\n        icon: '\u2139'\n      }\n    };\n\n    const config = typeConfig[this.type] || typeConfig.default;\n    const baseClasses = 'p-4 rounded-lg border-2';\n\n    const alertElement = super.create('div', {\n      className: clsx(baseClasses, config.bg, config.border, this.className),\n      attrs: { role: 'alert' }\n    });\n\n    let html = '';\n    \n    // Icon and title\n    if (this.title || this.icon) {\n      html += `<div class=\"flex items-center gap-3 mb-2\">`;\n      if (this.icon || true) {\n        html += `<span class=\"text-xl font-bold ${config.title}\">${this.icon || config.icon}</span>`;\n      }\n      if (this.title) {\n        html += `<h4 class=\"font-semibold ${config.title}\">${this.title}</h4>`;\n      }\n      html += `</div>`;\n    }\n\n    // Message\n    if (this.message) {\n      html += `<p class=\"${config.message}\">${this.message}</p>`;\n    }\n\n    // Close button\n    if (this.closeable) {\n      html += `<button class=\"absolute top-4 right-4 text-gray-400 hover:text-gray-600\" aria-label=\"Close alert\">\u00D7</button>`;\n    }\n\n    alertElement.innerHTML = html;\n\n    if (this.closeable) {\n      const closeBtn = alertElement.querySelector('button');\n      closeBtn?.addEventListener('click', () => {\n        this.destroy();\n      });\n    }\n\n    return alertElement;\n  }\n\n  setMessage(message) {\n    this.message = message;\n    if (this.element) {\n      const msgEl = this.element.querySelector('p');\n      if (msgEl) {\n        msgEl.textContent = message;\n      }\n    }\n  }\n}\n", "/**\r\n * Alert Dialog Component\r\n */\r\n\r\nimport { BaseComponent } from './BaseComponent.js';\r\nimport { clsx, createBackdrop, createFocusTrap } from './utils.js';\r\n\r\nexport class AlertDialog extends BaseComponent {\r\n  constructor(options = {}) {\r\n    super(options);\r\n    \r\n    this.title = options.title || '';\r\n    this.message = options.message || '';\r\n    this.confirmText = options.confirmText || 'Confirm';\r\n    this.cancelText = options.cancelText || 'Cancel';\r\n    this.type = options.type || 'warning'; // warning, danger, info\r\n    this.onConfirm = options.onConfirm || null;\r\n    this.onCancel = options.onCancel || null;\r\n    this.open = options.open || false;\r\n  }\r\n\r\n  create() {\r\n    const containerElement = super.create('div', {\r\n      className: clsx(\r\n        'fixed inset-0 z-50 flex items-center justify-center',\r\n        this.open ? '' : 'hidden'\r\n      ),\r\n      attrs: {\r\n        role: 'alertdialog',\r\n        'aria-modal': 'true',\r\n        'aria-labelledby': `${this.id}-title`,\r\n        'aria-describedby': `${this.id}-message`\r\n      }\r\n    });\r\n\r\n    // Backdrop\r\n    const backdrop = createBackdrop();\r\n    containerElement.appendChild(backdrop);\r\n\r\n    // Dialog content\r\n    const dialogElement = document.createElement('div');\r\n    dialogElement.className = 'bg-white rounded-lg shadow-lg relative z-50 w-full max-w-md mx-4';\r\n\r\n    // Header\r\n    const header = document.createElement('div');\r\n    header.className = 'px-6 py-4 border-b border-gray-200';\r\n\r\n    const title = document.createElement('h2');\r\n    title.id = `${this.id}-title`;\r\n    title.className = 'text-lg font-semibold text-gray-900';\r\n    title.textContent = this.title;\r\n    header.appendChild(title);\r\n\r\n    dialogElement.appendChild(header);\r\n\r\n    // Message\r\n    const messageDiv = document.createElement('div');\r\n    messageDiv.id = `${this.id}-message`;\r\n    messageDiv.className = 'px-6 py-4 text-gray-700';\r\n    messageDiv.textContent = this.message;\r\n    dialogElement.appendChild(messageDiv);\r\n\r\n    // Footer with buttons\r\n    const footer = document.createElement('div');\r\n    footer.className = 'px-6 py-4 bg-gray-50 border-t border-gray-200 flex gap-3 justify-end rounded-b-lg';\r\n\r\n    const cancelBtn = document.createElement('button');\r\n    cancelBtn.className = 'px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-colors duration-200';\r\n    cancelBtn.textContent = this.cancelText;\r\n    cancelBtn.addEventListener('click', () => this.handleCancel());\r\n    footer.appendChild(cancelBtn);\r\n\r\n    const confirmBtn = document.createElement('button');\r\n    const confirmBtnClasses = this.type === 'danger'\r\n      ? 'bg-red-600 text-white hover:bg-red-700'\r\n      : 'bg-blue-600 text-white hover:bg-blue-700';\r\n    confirmBtn.className = clsx('px-4 py-2 rounded-md transition-colors duration-200', confirmBtnClasses);\r\n    confirmBtn.textContent = this.confirmText;\r\n    confirmBtn.addEventListener('click', () => this.handleConfirm());\r\n    footer.appendChild(confirmBtn);\r\n\r\n    dialogElement.appendChild(footer);\r\n    containerElement.appendChild(dialogElement);\r\n\r\n    this.focusTrap = createFocusTrap(dialogElement);\r\n    return containerElement;\r\n  }\r\n\r\n  open() {\r\n    if (!this.element) this.create();\r\n    \r\n    this.open = true;\r\n    this.element.classList.remove('hidden');\r\n    this.focusTrap.init();\r\n    document.body.style.overflow = 'hidden';\r\n  }\r\n\r\n  close() {\r\n    this.open = false;\r\n    this.element?.classList.add('hidden');\r\n    document.body.style.overflow = '';\r\n  }\r\n\r\n  handleConfirm() {\r\n    if (this.onConfirm) {\r\n      this.onConfirm();\r\n    }\r\n    this.close();\r\n  }\r\n\r\n  handleCancel() {\r\n    if (this.onCancel) {\r\n      this.onCancel();\r\n    }\r\n    this.close();\r\n  }\r\n}\r\n", "/**\n * Avatar Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx, createElement } from './utils.js';\n\nexport class Avatar extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.src = options.src || '';\n    this.alt = options.alt || '';\n    this.initials = options.initials || '';\n    this.size = options.size || 'md'; // xs, sm, md, lg, xl\n    this.className = options.className || '';\n    this.fallbackBg = options.fallbackBg || 'bg-blue-600';\n  }\n\n  create() {\n    const sizeClasses = {\n      xs: 'w-6 h-6 text-xs',\n      sm: 'w-8 h-8 text-sm',\n      md: 'w-10 h-10 text-base',\n      lg: 'w-12 h-12 text-lg',\n      xl: 'w-16 h-16 text-xl'\n    };\n\n    const baseClasses = 'rounded-full overflow-hidden flex items-center justify-center flex-shrink-0 font-semibold';\n\n    if (this.src) {\n      const avatarElement = super.create('img', {\n        className: clsx(baseClasses, sizeClasses[this.size], this.className),\n        attrs: {\n          src: this.src,\n          alt: this.alt,\n          role: 'img'\n        }\n      });\n      return avatarElement;\n    } else if (this.initials) {\n      const avatarElement = super.create('div', {\n        className: clsx(\n          baseClasses,\n          sizeClasses[this.size],\n          'text-white',\n          this.fallbackBg,\n          this.className\n        ),\n        text: this.initials.toUpperCase()\n      });\n      return avatarElement;\n    } else {\n      const avatarElement = super.create('div', {\n        className: clsx(baseClasses, sizeClasses[this.size], 'bg-gray-300', this.className),\n        html: '<svg class=\"w-full h-full text-gray-500\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"/></svg>'\n      });\n      return avatarElement;\n    }\n  }\n\n  setSrc(src, alt = '') {\n    this.src = src;\n    this.alt = alt;\n    if (this.element && this.element.tagName === 'IMG') {\n      this.element.src = src;\n      this.element.alt = alt;\n    }\n  }\n\n  setInitials(initials, bgColor = '') {\n    this.initials = initials;\n    if (bgColor) this.fallbackBg = bgColor;\n    if (this.element) {\n      this.element.textContent = initials.toUpperCase();\n      if (bgColor && this.element.className.includes('bg-')) {\n        const bgClass = this.element.className.match(/bg-\\S+/)[0];\n        this.element.classList.remove(bgClass);\n        this.element.classList.add(bgColor);\n      }\n    }\n  }\n}\n", "/**\n * Badge Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx } from './utils.js';\n\nexport class Badge extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.label = options.label || 'Badge';\n    this.variant = options.variant || 'default'; // default, primary, success, warning, destructive, outline\n    this.size = options.size || 'md'; // sm, md, lg\n    this.className = options.className || '';\n  }\n\n  create() {\n    const baseClasses = 'inline-flex items-center rounded font-semibold whitespace-nowrap';\n    \n    const variantClasses = {\n      default: 'bg-gray-100 text-gray-800',\n      primary: 'bg-blue-100 text-blue-800',\n      success: 'bg-green-100 text-green-800',\n      warning: 'bg-yellow-100 text-yellow-800',\n      destructive: 'bg-red-100 text-red-800',\n      outline: 'border border-gray-300 text-gray-700'\n    };\n\n    const sizeClasses = {\n      sm: 'px-2 py-1 text-xs',\n      md: 'px-3 py-1 text-sm',\n      lg: 'px-4 py-2 text-base'\n    };\n\n    const badgeElement = super.create('span', {\n      className: clsx(\n        baseClasses,\n        variantClasses[this.variant],\n        sizeClasses[this.size],\n        this.className\n      )\n    });\n\n    badgeElement.textContent = this.label;\n    return badgeElement;\n  }\n\n  setLabel(label) {\n    this.label = label;\n    if (this.element) {\n      this.element.textContent = label;\n    }\n  }\n}\n", "/**\n * Button Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx } from './utils.js';\n\nexport class Button extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.label = options.label || 'Button';\n    this.variant = options.variant || 'default'; // default, primary, secondary, destructive, outline, ghost\n    this.size = options.size || 'md'; // sm, md, lg\n    this.disabled = options.disabled || false;\n    this.onClick = options.onClick || null;\n    this.className = options.className || '';\n  }\n\n  create() {\n    const baseClasses = 'px-4 py-2 font-medium rounded transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2';\n    \n    const variantClasses = {\n      default: 'bg-gray-200 text-gray-900 hover:bg-gray-300',\n      primary: 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500',\n      secondary: 'bg-green-600 text-white hover:bg-green-700 focus:ring-green-500',\n      destructive: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500',\n      outline: 'border-2 border-gray-300 text-gray-900 hover:bg-gray-50',\n      ghost: 'text-gray-900 hover:bg-gray-100'\n    };\n\n    const sizeClasses = {\n      sm: 'px-2 py-1 text-sm',\n      md: 'px-4 py-2 text-base',\n      lg: 'px-6 py-3 text-lg'\n    };\n\n    const buttonElement = super.create('button', {\n      className: clsx(\n        baseClasses,\n        variantClasses[this.variant],\n        sizeClasses[this.size],\n        this.className\n      ),\n      attrs: { disabled: this.disabled }\n    });\n\n    buttonElement.textContent = this.label;\n\n    if (this.onClick) {\n      this.on('click', this.onClick);\n    }\n\n    return buttonElement;\n  }\n\n  setLabel(label) {\n    this.label = label;\n    if (this.element) {\n      this.element.textContent = label;\n    }\n  }\n\n  setDisabled(disabled) {\n    this.disabled = disabled;\n    this.attr('disabled', disabled ? '' : null);\n  }\n\n  setLoading(loading) {\n    this.setDisabled(loading);\n    if (loading) {\n      this.html('<span class=\"flex items-center gap-2\"><span class=\"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin\"></span>Loading...</span>');\n    } else {\n      this.text(this.label);\n    }\n  }\n}\n", "/**\n * Button Group Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx } from './utils.js';\n\nexport class ButtonGroup extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.buttons = options.buttons || []; // Array of button objects\n    this.orientation = options.orientation || 'horizontal'; // horizontal, vertical\n    this.size = options.size || 'md';\n    this.className = options.className || '';\n  }\n\n  create() {\n    const orientationClass = this.orientation === 'vertical' ? 'flex-col' : 'flex-row';\n    const baseClasses = 'inline-flex border border-gray-300 rounded-md overflow-hidden';\n\n    const groupElement = super.create('div', {\n      className: clsx('flex', orientationClass, baseClasses, this.className),\n      attrs: { role: 'group' }\n    });\n\n    this.buttons.forEach((btnConfig, index) => {\n      const btn = document.createElement('button');\n      btn.textContent = btnConfig.label || 'Button';\n      btn.className = clsx(\n        'px-4 py-2 font-medium text-gray-700 hover:bg-gray-50 transition-colors duration-200',\n        index > 0 ? (this.orientation === 'vertical' ? 'border-t border-gray-300' : 'border-l border-gray-300') : '',\n        btnConfig.disabled ? 'opacity-50 cursor-not-allowed' : ''\n      );\n      btn.disabled = btnConfig.disabled || false;\n\n      if (btnConfig.onClick) {\n        btn.addEventListener('click', btnConfig.onClick);\n      }\n\n      groupElement.appendChild(btn);\n    });\n\n    return groupElement;\n  }\n\n  addButton(label, onClick) {\n    if (this.element) {\n      const btn = document.createElement('button');\n      btn.textContent = label;\n      btn.className = clsx(\n        'px-4 py-2 font-medium text-gray-700 hover:bg-gray-50 transition-colors duration-200 border-l border-gray-300'\n      );\n      if (onClick) {\n        btn.addEventListener('click', onClick);\n      }\n      this.element.appendChild(btn);\n    }\n  }\n}\n", "/**\r\n * Breadcrumb Component\r\n */\r\n\r\nimport { BaseComponent } from './BaseComponent.js';\r\nimport { clsx, createElement } from './utils.js';\r\n\r\nexport class Breadcrumb extends BaseComponent {\r\n  constructor(options = {}) {\r\n    super(options);\r\n    \r\n    this.items = options.items || []; // Array of {label, href}\r\n    this.className = options.className || '';\r\n  }\r\n\r\n  create() {\r\n    const baseClasses = 'flex items-center gap-2';\r\n\r\n    const breadcrumbElement = super.create('nav', {\r\n      className: clsx(baseClasses, this.className),\r\n      attrs: { 'aria-label': 'Breadcrumb' }\r\n    });\r\n\r\n    this.items.forEach((item, index) => {\r\n      if (index > 0) {\r\n        const separator = createElement('span', {\r\n          className: 'text-gray-400 mx-1',\r\n          text: '/'\r\n        });\r\n        breadcrumbElement.appendChild(separator);\r\n      }\r\n\r\n      if (index === this.items.length - 1) {\r\n        const span = createElement('span', {\r\n          className: 'text-gray-700 font-medium',\r\n          text: item.label,\r\n          attrs: { 'aria-current': 'page' }\r\n        });\r\n        breadcrumbElement.appendChild(span);\r\n      } else {\r\n        const link = createElement('a', {\r\n          className: 'text-blue-600 hover:text-blue-800 hover:underline transition-colors duration-200',\r\n          text: item.label,\r\n          attrs: { href: item.href || '#' }\r\n        });\r\n        breadcrumbElement.appendChild(link);\r\n      }\r\n    });\r\n\r\n    return breadcrumbElement;\r\n  }\r\n\r\n  addItem(label, href = '#') {\r\n    if (this.element) {\r\n      if (this.element.children.length > 0) {\r\n        const separator = createElement('span', {\r\n          className: 'text-gray-400 mx-1',\r\n          text: '/'\r\n        });\r\n        this.element.appendChild(separator);\r\n      }\r\n\r\n      const link = createElement('a', {\r\n        className: 'text-blue-600 hover:text-blue-800 hover:underline transition-colors duration-200',\r\n        text: label,\r\n        attrs: { href }\r\n      });\r\n      this.element.appendChild(link);\r\n      this.items.push({ label, href });\r\n    }\r\n  }\r\n}\r\n", "/**\n * Card Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx, createElement } from './utils.js';\n\nexport class Card extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.title = options.title || '';\n    this.subtitle = options.subtitle || '';\n    this.content = options.content || '';\n    this.footer = options.footer || '';\n    this.className = options.className || '';\n    this.hoverable = options.hoverable !== false;\n  }\n\n  create() {\n    const baseClasses = 'bg-white rounded-lg border border-gray-200 overflow-hidden';\n    const hoverClass = this.hoverable ? 'hover:shadow-lg transition-shadow duration-300' : '';\n\n    const cardElement = super.create('div', {\n      className: clsx(baseClasses, hoverClass, this.className)\n    });\n\n    // Header\n    if (this.title) {\n      const headerElement = createElement('div', {\n        className: 'px-6 py-4 border-b border-gray-200 bg-gray-50'\n      });\n\n      let html = `<h3 class=\"text-lg font-semibold text-gray-900\">${this.title}</h3>`;\n      if (this.subtitle) {\n        html += `<p class=\"text-sm text-gray-600 mt-1\">${this.subtitle}</p>`;\n      }\n\n      headerElement.innerHTML = html;\n      cardElement.appendChild(headerElement);\n    }\n\n    // Content\n    if (this.content) {\n      const contentElement = createElement('div', {\n        className: 'px-6 py-4',\n        html: this.content\n      });\n      cardElement.appendChild(contentElement);\n    }\n\n    // Footer\n    if (this.footer) {\n      const footerElement = createElement('div', {\n        className: 'px-6 py-4 border-t border-gray-200 bg-gray-50',\n        html: this.footer\n      });\n      cardElement.appendChild(footerElement);\n    }\n\n    return cardElement;\n  }\n\n  setContent(content) {\n    this.content = content;\n    if (this.element) {\n      const contentDiv = this.element.querySelector('.px-6.py-4:not(.border-b):not(.border-t)');\n      if (contentDiv) {\n        contentDiv.innerHTML = content;\n      }\n    }\n  }\n\n  addContent(element) {\n    if (this.element) {\n      const contentDiv = this.element.querySelector('.px-6.py-4:not(.border-b):not(.border-t)');\n      if (contentDiv) {\n        contentDiv.appendChild(element instanceof BaseComponent ? element.element : element);\n      }\n    }\n  }\n}\n", "/**\n * Carousel Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx, createElement } from './utils.js';\n\nexport class Carousel extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.items = options.items || []; // Array of {src, alt, title}\n    this.autoplay = options.autoplay || true;\n    this.interval = options.interval || 5000;\n    this.className = options.className || '';\n    this.currentIndex = 0;\n    this.autoplayTimer = null;\n  }\n\n  create() {\n    const containerElement = super.create('div', {\n      className: clsx('relative w-full bg-black rounded-lg overflow-hidden', this.className)\n    });\n\n    // Slides\n    const slidesElement = createElement('div', {\n      className: 'relative w-full h-96 overflow-hidden'\n    });\n\n    this.items.forEach((item, index) => {\n      const slide = createElement('div', {\n        className: clsx(\n          'absolute inset-0 transition-opacity duration-500',\n          index === this.currentIndex ? 'opacity-100' : 'opacity-0'\n        )\n      });\n\n      const img = document.createElement('img');\n      img.src = item.src;\n      img.alt = item.alt || '';\n      img.className = 'w-full h-full object-cover';\n\n      slide.appendChild(img);\n\n      if (item.title) {\n        const titleElement = createElement('div', {\n          className: 'absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-4',\n          html: `<p class=\"text-white font-semibold\">${item.title}</p>`\n        });\n        slide.appendChild(titleElement);\n      }\n\n      slidesElement.appendChild(slide);\n    });\n\n    containerElement.appendChild(slidesElement);\n\n    // Navigation buttons\n    const prevBtn = createElement('button', {\n      className: 'absolute left-4 top-1/2 transform -translate-y-1/2 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-all',\n      html: '\u276E'\n    });\n\n    prevBtn.addEventListener('click', () => {\n      this.previous();\n    });\n\n    const nextBtn = createElement('button', {\n      className: 'absolute right-4 top-1/2 transform -translate-y-1/2 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-all',\n      html: '\u276F'\n    });\n\n    nextBtn.addEventListener('click', () => {\n      this.next();\n    });\n\n    containerElement.appendChild(prevBtn);\n    containerElement.appendChild(nextBtn);\n\n    // Dots\n    const dotsElement = createElement('div', {\n      className: 'absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2 z-10'\n    });\n\n    this.items.forEach((_, index) => {\n      const dot = createElement('button', {\n        className: clsx(\n          'w-2 h-2 rounded-full transition-all',\n          index === this.currentIndex ? 'bg-white w-8' : 'bg-gray-500'\n        ),\n        attrs: { 'data-index': index }\n      });\n\n      dot.addEventListener('click', () => {\n        this.goTo(index);\n      });\n\n      dotsElement.appendChild(dot);\n    });\n\n    containerElement.appendChild(dotsElement);\n\n    this.slidesElement = slidesElement;\n    this.dotsElement = dotsElement;\n\n    if (this.autoplay) {\n      this.startAutoplay();\n    }\n\n    return containerElement;\n  }\n\n  next() {\n    this.currentIndex = (this.currentIndex + 1) % this.items.length;\n    this.updateSlides();\n  }\n\n  previous() {\n    this.currentIndex = (this.currentIndex - 1 + this.items.length) % this.items.length;\n    this.updateSlides();\n  }\n\n  goTo(index) {\n    this.currentIndex = index;\n    this.updateSlides();\n    if (this.autoplay) {\n      this.resetAutoplay();\n    }\n  }\n\n  updateSlides() {\n    const slides = this.slidesElement.querySelectorAll('div');\n    const dots = this.dotsElement.querySelectorAll('button');\n\n    slides.forEach((slide, index) => {\n      slide.className = clsx(\n        'absolute inset-0 transition-opacity duration-500',\n        index === this.currentIndex ? 'opacity-100' : 'opacity-0'\n      );\n    });\n\n    dots.forEach((dot, index) => {\n      dot.className = clsx(\n        'w-2 h-2 rounded-full transition-all',\n        index === this.currentIndex ? 'bg-white w-8' : 'bg-gray-500'\n      );\n    });\n  }\n\n  startAutoplay() {\n    this.autoplayTimer = setInterval(() => {\n      this.next();\n    }, this.interval);\n  }\n\n  stopAutoplay() {\n    if (this.autoplayTimer) {\n      clearInterval(this.autoplayTimer);\n    }\n  }\n\n  resetAutoplay() {\n    this.stopAutoplay();\n    if (this.autoplay) {\n      this.startAutoplay();\n    }\n  }\n\n  destroy() {\n    this.stopAutoplay();\n    super.destroy();\n  }\n}\n", "/**\n * Chart Component (Simple bar/line chart)\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx, createElement } from './utils.js';\n\nexport class Chart extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.type = options.type || 'bar'; // bar, line\n    this.data = options.data || []; // Array of {label, value}\n    this.title = options.title || '';\n    this.height = options.height || '300px';\n    this.className = options.className || '';\n  }\n\n  create() {\n    const containerElement = super.create('div', {\n      className: clsx('bg-white rounded-lg border border-gray-200 p-4', this.className)\n    });\n\n    // Title\n    if (this.title) {\n      const titleElement = createElement('h3', {\n        className: 'text-lg font-semibold text-gray-900 mb-4',\n        text: this.title\n      });\n      containerElement.appendChild(titleElement);\n    }\n\n    // Canvas or SVG\n    const svgElement = this.createSVG();\n    containerElement.appendChild(svgElement);\n\n    return containerElement;\n  }\n\n  createSVG() {\n    const maxValue = Math.max(...this.data.map(d => d.value));\n    const width = 400;\n    const height = 200;\n    const padding = 40;\n\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.setAttribute('viewBox', `0 0 ${width} ${height}`);\n    svg.setAttribute('class', 'w-full');\n\n    if (this.type === 'bar') {\n      const barWidth = (width - padding * 2) / this.data.length;\n\n      this.data.forEach((d, i) => {\n        const barHeight = (d.value / maxValue) * (height - padding * 2);\n        const x = padding + i * barWidth + barWidth * 0.25;\n        const y = height - padding - barHeight;\n\n        const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n        rect.setAttribute('x', x);\n        rect.setAttribute('y', y);\n        rect.setAttribute('width', barWidth * 0.5);\n        rect.setAttribute('height', barHeight);\n        rect.setAttribute('fill', '#3b82f6');\n        rect.setAttribute('class', 'hover:fill-blue-700 transition-colors');\n\n        svg.appendChild(rect);\n\n        // Label\n        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n        text.setAttribute('x', x + barWidth * 0.25);\n        text.setAttribute('y', height - 10);\n        text.setAttribute('text-anchor', 'middle');\n        text.setAttribute('font-size', '12');\n        text.setAttribute('fill', '#6b7280');\n        text.textContent = d.label;\n        svg.appendChild(text);\n      });\n    }\n\n    return svg;\n  }\n\n  setData(data) {\n    this.data = data;\n    if (this.element && this.element.parentNode) {\n      const newElement = this.create();\n      this.element.parentNode.replaceChild(newElement, this.element);\n      this.element = newElement;\n    }\n  }\n}\n", "/**\n * Checkbox Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx } from './utils.js';\n\nexport class Checkbox extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.label = options.label || '';\n    this.checked = options.checked || false;\n    this.disabled = options.disabled || false;\n    this.required = options.required || false;\n    this.name = options.name || '';\n    this.className = options.className || '';\n    this.onChange = options.onChange || null;\n  }\n\n  create() {\n    const baseClasses = 'flex items-center gap-2';\n\n    const containerElement = super.create('div', {\n      className: clsx(baseClasses, this.className)\n    });\n\n    const checkboxClasses = 'w-5 h-5 border-2 border-gray-300 rounded cursor-pointer transition-colors duration-200 checked:bg-blue-600 checked:border-blue-600 disabled:opacity-50 disabled:cursor-not-allowed';\n\n    const inputElement = document.createElement('input');\n    inputElement.type = 'checkbox';\n    inputElement.className = checkboxClasses;\n    inputElement.checked = this.checked;\n    inputElement.disabled = this.disabled;\n    inputElement.required = this.required;\n    if (this.name) inputElement.name = this.name;\n\n    containerElement.appendChild(inputElement);\n\n    if (this.label) {\n      const labelElement = document.createElement('label');\n      labelElement.className = 'cursor-pointer select-none';\n      labelElement.textContent = this.label;\n      containerElement.appendChild(labelElement);\n\n      labelElement.addEventListener('click', () => {\n        inputElement.click();\n      });\n    }\n\n    if (this.onChange) {\n      inputElement.addEventListener('change', this.onChange);\n    }\n\n    this.inputElement = inputElement;\n    return containerElement;\n  }\n\n  isChecked() {\n    return this.inputElement?.checked || false;\n  }\n\n  setChecked(checked) {\n    this.checked = checked;\n    if (this.inputElement) {\n      this.inputElement.checked = checked;\n    }\n  }\n\n  setDisabled(disabled) {\n    this.disabled = disabled;\n    if (this.inputElement) {\n      this.inputElement.disabled = disabled;\n    }\n  }\n\n  toggle() {\n    this.setChecked(!this.isChecked());\n  }\n}\n", "/**\r\n * Collapsible Component\r\n */\r\n\r\nimport { BaseComponent } from './BaseComponent.js';\r\nimport { clsx, createElement } from './utils.js';\r\n\r\nexport class Collapsible extends BaseComponent {\r\n  constructor(options = {}) {\r\n    super(options);\r\n    \r\n    this.title = options.title || '';\r\n    this.content = options.content || '';\r\n    this.open = options.open || false;\r\n    this.className = options.className || '';\r\n    this.onChange = options.onChange || null;\r\n  }\r\n\r\n  create() {\r\n    const containerElement = super.create('div', {\r\n      className: clsx('border border-gray-200 rounded-lg overflow-hidden', this.className)\r\n    });\r\n\r\n    // Header/Trigger\r\n    const triggerElement = createElement('button', {\r\n      className: clsx(\r\n        'w-full px-4 py-3 flex items-center justify-between',\r\n        'hover:bg-gray-50 transition-colors duration-200 text-left'\r\n      ),\r\n      attrs: { 'aria-expanded': this.open }\r\n    });\r\n\r\n    const titleSpan = createElement('span', {\r\n      className: 'font-semibold text-gray-900',\r\n      text: this.title\r\n    });\r\n\r\n    const chevron = createElement('span', {\r\n      className: clsx(\r\n        'w-5 h-5 transition-transform duration-300',\r\n        this.open ? 'rotate-180' : ''\r\n      ),\r\n      html: '\u25BC'\r\n    });\r\n\r\n    triggerElement.appendChild(titleSpan);\r\n    triggerElement.appendChild(chevron);\r\n\r\n    triggerElement.addEventListener('click', () => {\r\n      this.toggle();\r\n    });\r\n\r\n    containerElement.appendChild(triggerElement);\r\n\r\n    // Content\r\n    const contentElement = createElement('div', {\r\n      className: clsx(\r\n        'overflow-hidden transition-all duration-300',\r\n        this.open ? 'max-h-96' : 'max-h-0',\r\n        'border-t border-gray-200'\r\n      )\r\n    });\r\n\r\n    const innerContent = createElement('div', {\r\n      className: 'px-4 py-3',\r\n      html: this.content\r\n    });\r\n\r\n    contentElement.appendChild(innerContent);\r\n    containerElement.appendChild(contentElement);\r\n\r\n    this.triggerElement = triggerElement;\r\n    this.contentElement = contentElement;\r\n    this.chevron = chevron;\r\n\r\n    return containerElement;\r\n  }\r\n\r\n  toggle() {\r\n    this.open = !this.open;\r\n    this.updateUI();\r\n    if (this.onChange) {\r\n      this.onChange(this.open);\r\n    }\r\n  }\r\n\r\n  open() {\r\n    if (!this.open) {\r\n      this.open = true;\r\n      this.updateUI();\r\n      if (this.onChange) {\r\n        this.onChange(true);\r\n      }\r\n    }\r\n  }\r\n\r\n  close() {\r\n    if (this.open) {\r\n      this.open = false;\r\n      this.updateUI();\r\n      if (this.onChange) {\r\n        this.onChange(false);\r\n      }\r\n    }\r\n  }\r\n\r\n  updateUI() {\r\n    this.triggerElement.setAttribute('aria-expanded', this.open);\r\n    this.contentElement.className = clsx(\r\n      'overflow-hidden transition-all duration-300',\r\n      this.open ? 'max-h-96' : 'max-h-0',\r\n      'border-t border-gray-200'\r\n    );\r\n    this.chevron.className = clsx(\r\n      'w-5 h-5 transition-transform duration-300',\r\n      this.open ? 'rotate-180' : ''\r\n    );\r\n  }\r\n\r\n  setContent(content) {\r\n    this.content = content;\r\n    if (this.contentElement) {\r\n      const inner = this.contentElement.querySelector('div');\r\n      if (inner) {\r\n        inner.innerHTML = content;\r\n      }\r\n    }\r\n  }\r\n}\r\n", "/**\r\n * Command Component\r\n */\r\n\r\nimport { BaseComponent } from './BaseComponent.js';\r\nimport { clsx, createElement } from './utils.js';\r\n\r\nexport class Command extends BaseComponent {\r\n  constructor(options = {}) {\r\n    super(options);\r\n    \r\n    this.commands = options.commands || []; // {label, action, shortcut, category}\r\n    this.placeholder = options.placeholder || 'Type a command...';\r\n    this.className = options.className || '';\r\n    this.open = false;\r\n  }\r\n\r\n  create() {\r\n    const containerElement = super.create('div', {\r\n      className: clsx(\r\n        'fixed inset-0 z-50 hidden flex items-start justify-center pt-20',\r\n        this.open ? 'flex' : ''\r\n      )\r\n    });\r\n\r\n    // Backdrop\r\n    const backdrop = createElement('div', {\r\n      className: 'absolute inset-0 bg-black bg-opacity-50'\r\n    });\r\n    containerElement.appendChild(backdrop);\r\n\r\n    backdrop.addEventListener('click', () => this.close());\r\n\r\n    // Command palette\r\n    const paletteElement = createElement('div', {\r\n      className: 'relative w-full max-w-md bg-white rounded-lg shadow-lg z-50'\r\n    });\r\n\r\n    // Input\r\n    const inputElement = document.createElement('input');\r\n    inputElement.type = 'text';\r\n    inputElement.placeholder = this.placeholder;\r\n    inputElement.className = 'w-full px-4 py-3 border-b border-gray-200 focus:outline-none';\r\n    inputElement.autofocus = true;\r\n\r\n    paletteElement.appendChild(inputElement);\r\n\r\n    // Results\r\n    const resultsElement = createElement('div', {\r\n      className: 'max-h-96 overflow-y-auto'\r\n    });\r\n\r\n    const renderResults = (query = '') => {\r\n      resultsElement.innerHTML = '';\r\n\r\n      const filtered = query\r\n        ? this.commands.filter(cmd =>\r\n            cmd.label.toLowerCase().includes(query.toLowerCase())\r\n          )\r\n        : this.commands;\r\n\r\n      if (filtered.length === 0) {\r\n        const noResults = createElement('div', {\r\n          className: 'px-4 py-3 text-sm text-gray-500',\r\n          text: 'No commands found'\r\n        });\r\n        resultsElement.appendChild(noResults);\r\n        return;\r\n      }\r\n\r\n      let currentCategory = '';\r\n\r\n      filtered.forEach(cmd => {\r\n        if (cmd.category && cmd.category !== currentCategory) {\r\n          currentCategory = cmd.category;\r\n          const categoryHeader = createElement('div', {\r\n            className: 'px-4 py-2 text-xs font-semibold text-gray-600 bg-gray-50 uppercase',\r\n            text: currentCategory\r\n          });\r\n          resultsElement.appendChild(categoryHeader);\r\n        }\r\n\r\n        const cmdElement = createElement('div', {\r\n          className: clsx(\r\n            'px-4 py-2 cursor-pointer hover:bg-blue-50 transition-colors flex items-center justify-between group'\r\n          )\r\n        });\r\n\r\n        const label = createElement('span', {\r\n          text: cmd.label,\r\n          className: 'text-sm text-gray-900'\r\n        });\r\n        cmdElement.appendChild(label);\r\n\r\n        if (cmd.shortcut) {\r\n          const shortcut = createElement('span', {\r\n            className: 'text-xs text-gray-500 group-hover:text-gray-700',\r\n            text: cmd.shortcut\r\n          });\r\n          cmdElement.appendChild(shortcut);\r\n        }\r\n\r\n        cmdElement.addEventListener('click', () => {\r\n          if (cmd.action) {\r\n            cmd.action();\r\n          }\r\n          this.close();\r\n        });\r\n\r\n        resultsElement.appendChild(cmdElement);\r\n      });\r\n    };\r\n\r\n    inputElement.addEventListener('input', (e) => {\r\n      renderResults(e.target.value);\r\n    });\r\n\r\n    paletteElement.appendChild(resultsElement);\r\n    containerElement.appendChild(paletteElement);\r\n\r\n    inputElement.addEventListener('keydown', (e) => {\r\n      if (e.key === 'Escape') {\r\n        this.close();\r\n      }\r\n    });\r\n\r\n    renderResults();\r\n    this.containerElement = containerElement;\r\n\r\n    return containerElement;\r\n  }\r\n\r\n  open() {\r\n    if (!this.element) this.create();\r\n    this.open = true;\r\n    this.element.classList.remove('hidden');\r\n    this.element.classList.add('flex');\r\n  }\r\n\r\n  close() {\r\n    this.open = false;\r\n    this.element?.classList.remove('flex');\r\n    this.element?.classList.add('hidden');\r\n  }\r\n\r\n  toggle() {\r\n    this.open ? this.close() : this.open();\r\n  }\r\n}\r\n", "/**\n * Combobox Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx, createElement } from './utils.js';\n\nexport class Combobox extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.items = options.items || [];\n    this.value = options.value || '';\n    this.placeholder = options.placeholder || 'Search...';\n    this.className = options.className || '';\n    this.onChange = options.onChange || null;\n    this.open = false;\n  }\n\n  create() {\n    const containerElement = super.create('div', {\n      className: 'relative w-full'\n    });\n\n    // Input\n    const inputElement = document.createElement('input');\n    inputElement.type = 'text';\n    inputElement.placeholder = this.placeholder;\n    inputElement.value = this.value;\n    inputElement.className = clsx(\n      'w-full px-3 py-2 border border-gray-300 rounded-md',\n      'focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent'\n    );\n\n    // Dropdown list\n    const listElement = createElement('div', {\n      className: clsx(\n        'absolute hidden top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-md shadow-lg z-50',\n        'max-h-64 overflow-y-auto'\n      )\n    });\n\n    const renderList = (query = '') => {\n      listElement.innerHTML = '';\n      const filtered = this.items.filter(item =>\n        item.label.toLowerCase().includes(query.toLowerCase())\n      );\n\n      if (filtered.length === 0) {\n        const noResults = createElement('div', {\n          className: 'px-3 py-2 text-gray-500',\n          text: 'No results found'\n        });\n        listElement.appendChild(noResults);\n        return;\n      }\n\n      filtered.forEach(item => {\n        const option = createElement('div', {\n          className: clsx(\n            'px-3 py-2 cursor-pointer hover:bg-blue-50 transition-colors',\n            item.value === this.value ? 'bg-blue-100' : ''\n          ),\n          text: item.label,\n          attrs: { 'data-value': item.value }\n        });\n\n        option.addEventListener('click', () => {\n          this.value = item.value;\n          inputElement.value = item.label;\n          listElement.classList.add('hidden');\n          if (this.onChange) {\n            this.onChange(this.value, item);\n          }\n        });\n\n        listElement.appendChild(option);\n      });\n    };\n\n    inputElement.addEventListener('input', (e) => {\n      renderList(e.target.value);\n      listElement.classList.remove('hidden');\n    });\n\n    inputElement.addEventListener('focus', () => {\n      renderList(inputElement.value);\n      listElement.classList.remove('hidden');\n    });\n\n    inputElement.addEventListener('blur', () => {\n      setTimeout(() => {\n        listElement.classList.add('hidden');\n      }, 150);\n    });\n\n    containerElement.appendChild(inputElement);\n    containerElement.appendChild(listElement);\n\n    document.addEventListener('click', (e) => {\n      if (!containerElement.contains(e.target)) {\n        listElement.classList.add('hidden');\n      }\n    });\n\n    this.inputElement = inputElement;\n    this.listElement = listElement;\n    renderList();\n\n    return containerElement;\n  }\n\n  getValue() {\n    return this.value;\n  }\n\n  setValue(value) {\n    this.value = value;\n    const item = this.items.find(i => i.value === value);\n    if (item && this.inputElement) {\n      this.inputElement.value = item.label;\n    }\n  }\n}\n", "/**\n * Context Menu Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx, createElement } from './utils.js';\n\nexport class ContextMenu extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.items = options.items || []; // Array of {label, onClick, icon, disabled}\n    this.className = options.className || '';\n    this.visible = false;\n  }\n\n  create() {\n    const containerElement = super.create('div', {\n      className: 'relative inline-block w-full'\n    });\n\n    // Menu content\n    const menuElement = document.createElement('div');\n    menuElement.className = clsx(\n      'absolute hidden bg-white border border-gray-200 rounded-lg shadow-lg py-1 z-50 min-w-max',\n      this.className\n    );\n\n    this.items.forEach((item) => {\n      const itemElement = createElement('button', {\n        className: clsx(\n          'w-full text-left px-4 py-2 hover:bg-gray-100 transition-colors duration-200 flex items-center gap-2',\n          item.disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'\n        ),\n        attrs: {\n          disabled: item.disabled ? '' : null,\n          'data-action': item.label\n        }\n      });\n\n      if (item.icon) {\n        const iconSpan = document.createElement('span');\n        iconSpan.innerHTML = item.icon;\n        itemElement.appendChild(iconSpan);\n      }\n\n      const labelSpan = document.createElement('span');\n      labelSpan.textContent = item.label;\n      itemElement.appendChild(labelSpan);\n\n      itemElement.addEventListener('click', () => {\n        if (!item.disabled && item.onClick) {\n          item.onClick();\n        }\n        this.hide();\n      });\n\n      menuElement.appendChild(itemElement);\n    });\n\n    containerElement.appendChild(menuElement);\n\n    // Show on right click\n    containerElement.addEventListener('contextmenu', (e) => {\n      e.preventDefault();\n      this.showAt(e.clientX, e.clientY, menuElement);\n    });\n\n    // Hide on outside click\n    document.addEventListener('click', () => {\n      if (this.visible) {\n        this.hide();\n      }\n    });\n\n    this.menuElement = menuElement;\n    return containerElement;\n  }\n\n  showAt(x, y, menuElement) {\n    if (!menuElement) return;\n\n    this.visible = true;\n    menuElement.classList.remove('hidden');\n    menuElement.style.position = 'fixed';\n    menuElement.style.left = x + 'px';\n    menuElement.style.top = y + 'px';\n  }\n\n  hide() {\n    this.visible = false;\n    if (this.menuElement) {\n      this.menuElement.classList.add('hidden');\n      this.menuElement.style.position = 'absolute';\n    }\n  }\n\n  addItem(label, onClick, icon = null) {\n    const item = { label, onClick, icon };\n    this.items.push(item);\n    \n    if (this.menuElement) {\n      const itemElement = createElement('button', {\n        className: 'w-full text-left px-4 py-2 hover:bg-gray-100 transition-colors duration-200 flex items-center gap-2',\n      });\n\n      if (icon) {\n        const iconSpan = document.createElement('span');\n        iconSpan.innerHTML = icon;\n        itemElement.appendChild(iconSpan);\n      }\n\n      itemElement.textContent = label;\n      itemElement.addEventListener('click', () => {\n        onClick();\n        this.hide();\n      });\n\n      this.menuElement.appendChild(itemElement);\n    }\n  }\n}\n", "/**\n * Date Picker Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx, createElement } from './utils.js';\n\nexport class DatePicker extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.value = options.value || '';\n    this.placeholder = options.placeholder || 'Select date...';\n    this.format = options.format || 'yyyy-mm-dd';\n    this.className = options.className || '';\n    this.onChange = options.onChange || null;\n    this.open = false;\n  }\n\n  create() {\n    const containerElement = super.create('div', {\n      className: 'relative w-full'\n    });\n\n    // Input\n    const inputElement = document.createElement('input');\n    inputElement.type = 'text';\n    inputElement.placeholder = this.placeholder;\n    inputElement.value = this.value;\n    inputElement.className = clsx(\n      'w-full px-3 py-2 border border-gray-300 rounded-md',\n      'focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent'\n    );\n\n    inputElement.addEventListener('click', () => {\n      this.openPicker();\n    });\n\n    inputElement.addEventListener('change', (e) => {\n      this.value = e.target.value;\n      if (this.onChange) {\n        this.onChange(this.value);\n      }\n    });\n\n    containerElement.appendChild(inputElement);\n\n    // Use native date input for simplicity\n    const nativeInput = document.createElement('input');\n    nativeInput.type = 'date';\n    nativeInput.style.display = 'none';\n    nativeInput.value = this.value;\n\n    nativeInput.addEventListener('change', (e) => {\n      const date = new Date(e.target.value);\n      this.value = this.formatDate(date);\n      inputElement.value = this.value;\n      \n      if (this.onChange) {\n        this.onChange(this.value);\n      }\n    });\n\n    containerElement.appendChild(nativeInput);\n\n    this.inputElement = inputElement;\n    this.nativeInput = nativeInput;\n\n    return containerElement;\n  }\n\n  openPicker() {\n    this.nativeInput.click();\n  }\n\n  formatDate(date) {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    \n    if (this.format === 'dd/mm/yyyy') {\n      return `${day}/${month}/${year}`;\n    }\n    return `${year}-${month}-${day}`;\n  }\n\n  getValue() {\n    return this.value;\n  }\n\n  setValue(value) {\n    this.value = value;\n    if (this.inputElement) {\n      this.inputElement.value = value;\n    }\n  }\n}\n", "/**\r\n * Dialog Component\r\n */\r\n\r\nimport { BaseComponent } from './BaseComponent.js';\r\nimport { clsx, createBackdrop, createFocusTrap, keyboard } from './utils.js';\r\n\r\nexport class Dialog extends BaseComponent {\r\n  constructor(options = {}) {\r\n    super(options);\r\n    \r\n    this.title = options.title || '';\r\n    this.content = options.content || '';\r\n    this.size = options.size || 'md'; // sm, md, lg, xl\r\n    this.open = options.open || false;\r\n    this.onClose = options.onClose || null;\r\n    this.closeButton = options.closeButton !== false;\r\n    this.closeOnBackdrop = options.closeOnBackdrop !== false;\r\n    this.closeOnEscape = options.closeOnEscape !== false;\r\n  }\r\n\r\n  create() {\r\n    const containerElement = super.create('div', {\r\n      className: clsx(\r\n        'fixed inset-0 z-50 flex items-center justify-center',\r\n        this.open ? '' : 'hidden'\r\n      ),\r\n      attrs: {\r\n        role: 'dialog',\r\n        'aria-modal': 'true',\r\n        'aria-labelledby': `${this.id}-title`,\r\n        'aria-describedby': `${this.id}-description`\r\n      }\r\n    });\r\n\r\n    // Backdrop\r\n    const backdrop = createBackdrop('dialog-backdrop');\r\n    containerElement.appendChild(backdrop);\r\n\r\n    if (this.closeOnBackdrop) {\r\n      backdrop.addEventListener('click', () => this.close());\r\n    }\r\n\r\n    // Dialog content\r\n    const sizeClasses = {\r\n      sm: 'w-full max-w-sm',\r\n      md: 'w-full max-w-md',\r\n      lg: 'w-full max-w-lg',\r\n      xl: 'w-full max-w-xl'\r\n    };\r\n\r\n    const dialogElement = document.createElement('div');\r\n    dialogElement.className = clsx(\r\n      'bg-white rounded-lg shadow-lg relative z-50',\r\n      sizeClasses[this.size],\r\n      'mx-4 max-h-[90vh] overflow-y-auto'\r\n    );\r\n\r\n    // Header\r\n    if (this.title) {\r\n      const header = document.createElement('div');\r\n      header.className = 'px-6 py-4 border-b border-gray-200 flex items-center justify-between';\r\n      \r\n      const title = document.createElement('h2');\r\n      title.id = `${this.id}-title`;\r\n      title.className = 'text-xl font-semibold text-gray-900';\r\n      title.textContent = this.title;\r\n      header.appendChild(title);\r\n\r\n      if (this.closeButton) {\r\n        const closeBtn = document.createElement('button');\r\n        closeBtn.className = 'text-gray-500 hover:text-gray-700 transition-colors duration-200';\r\n        closeBtn.innerHTML = '\u00D7';\r\n        closeBtn.setAttribute('aria-label', 'Close');\r\n        closeBtn.addEventListener('click', () => this.close());\r\n        header.appendChild(closeBtn);\r\n      }\r\n\r\n      dialogElement.appendChild(header);\r\n    }\r\n\r\n    // Content\r\n    if (this.content) {\r\n      const contentDiv = document.createElement('div');\r\n      contentDiv.id = `${this.id}-description`;\r\n      contentDiv.className = 'px-6 py-4';\r\n      contentDiv.innerHTML = this.content;\r\n      dialogElement.appendChild(contentDiv);\r\n    }\r\n\r\n    containerElement.appendChild(dialogElement);\r\n\r\n    // Handle keyboard\r\n    this.on('keydown', (e) => {\r\n      if (keyboard.isEscape(e) && this.closeOnEscape) {\r\n        this.close();\r\n      }\r\n    }, { once: false });\r\n\r\n    this.backdrop = backdrop;\r\n    this.dialogElement = dialogElement;\r\n    this.focusTrap = createFocusTrap(dialogElement);\r\n\r\n    return containerElement;\r\n  }\r\n\r\n  open() {\r\n    if (!this.element) this.create();\r\n    \r\n    this.open = true;\r\n    this.element.classList.remove('hidden');\r\n    this.focusTrap.init();\r\n    document.body.style.overflow = 'hidden';\r\n  }\r\n\r\n  close() {\r\n    this.open = false;\r\n    this.element?.classList.add('hidden');\r\n    document.body.style.overflow = '';\r\n    \r\n    if (this.onClose) {\r\n      this.onClose();\r\n    }\r\n  }\r\n\r\n  toggle() {\r\n    this.open ? this.close() : this.open();\r\n  }\r\n\r\n  setContent(content) {\r\n    this.content = content;\r\n    if (this.dialogElement) {\r\n      const contentDiv = this.dialogElement.querySelector(`#${this.id}-description`);\r\n      if (contentDiv) {\r\n        contentDiv.innerHTML = content;\r\n      }\r\n    }\r\n  }\r\n}\r\n", "/**\r\n * Dropdown Menu Component\r\n */\r\n\r\nimport { BaseComponent } from './BaseComponent.js';\r\nimport { clsx, createElement } from './utils.js';\r\n\r\nexport class DropdownMenu extends BaseComponent {\r\n  constructor(options = {}) {\r\n    super(options);\r\n    \r\n    this.trigger = options.trigger || 'Menu';\r\n    this.items = options.items || []; // Array of {label, onClick, icon, disabled, divider}\r\n    this.position = options.position || 'bottom'; // top, bottom\r\n    this.align = options.align || 'left'; // left, right\r\n    this.className = options.className || '';\r\n    this.open = false;\r\n  }\r\n\r\n  create() {\r\n    const containerElement = super.create('div', {\r\n      className: 'relative inline-block'\r\n    });\r\n\r\n    // Trigger button\r\n    const triggerBtn = document.createElement('button');\r\n    triggerBtn.className = 'px-4 py-2 bg-gray-100 text-gray-900 rounded hover:bg-gray-200 transition-colors duration-200 flex items-center gap-2';\r\n    triggerBtn.innerHTML = `${this.trigger} <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 14l-7 7m0 0l-7-7m7 7V3\"></path></svg>`;\r\n    triggerBtn.addEventListener('click', () => this.toggle());\r\n\r\n    containerElement.appendChild(triggerBtn);\r\n\r\n    // Menu\r\n    const positionClass = this.position === 'top' ? 'bottom-full mb-2' : 'top-full mt-2';\r\n    const alignClass = this.align === 'right' ? 'right-0' : 'left-0';\r\n\r\n    const menuElement = document.createElement('div');\r\n    menuElement.className = clsx(\r\n      'absolute hidden bg-white border border-gray-200 rounded-lg shadow-lg py-1 z-50 min-w-max',\r\n      positionClass,\r\n      alignClass,\r\n      this.className\r\n    );\r\n\r\n    this.items.forEach((item) => {\r\n      if (item.divider) {\r\n        const divider = document.createElement('div');\r\n        divider.className = 'border-t border-gray-200 my-1';\r\n        menuElement.appendChild(divider);\r\n        return;\r\n      }\r\n\r\n      const itemElement = createElement('button', {\r\n        className: clsx(\r\n          'w-full text-left px-4 py-2 hover:bg-gray-100 transition-colors duration-200 flex items-center gap-2',\r\n          item.disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'\r\n        ),\r\n        attrs: {\r\n          disabled: item.disabled ? '' : null\r\n        }\r\n      });\r\n\r\n      if (item.icon) {\r\n        const iconSpan = document.createElement('span');\r\n        iconSpan.innerHTML = item.icon;\r\n        iconSpan.className = 'w-4 h-4';\r\n        itemElement.appendChild(iconSpan);\r\n      }\r\n\r\n      const labelSpan = document.createElement('span');\r\n      labelSpan.textContent = item.label;\r\n      itemElement.appendChild(labelSpan);\r\n\r\n      itemElement.addEventListener('click', () => {\r\n        if (!item.disabled && item.onClick) {\r\n          item.onClick();\r\n        }\r\n        this.close();\r\n      });\r\n\r\n      menuElement.appendChild(itemElement);\r\n    });\r\n\r\n    containerElement.appendChild(menuElement);\r\n\r\n    // Close on outside click\r\n    document.addEventListener('click', (e) => {\r\n      if (!containerElement.contains(e.target) && this.open) {\r\n        this.close();\r\n      }\r\n    });\r\n\r\n    this.triggerBtn = triggerBtn;\r\n    this.menuElement = menuElement;\r\n\r\n    return containerElement;\r\n  }\r\n\r\n  toggle() {\r\n    this.open ? this.close() : this.open();\r\n  }\r\n\r\n  open() {\r\n    this.open = true;\r\n    this.menuElement.classList.remove('hidden');\r\n  }\r\n\r\n  close() {\r\n    this.open = false;\r\n    this.menuElement.classList.add('hidden');\r\n  }\r\n\r\n  addItem(label, onClick, icon = null) {\r\n    const item = { label, onClick, icon };\r\n    this.items.push(item);\r\n    \r\n    if (this.menuElement) {\r\n      const itemElement = createElement('button', {\r\n        className: 'w-full text-left px-4 py-2 hover:bg-gray-100 transition-colors duration-200 flex items-center gap-2'\r\n      });\r\n\r\n      if (icon) {\r\n        const iconSpan = document.createElement('span');\r\n        iconSpan.innerHTML = icon;\r\n        iconSpan.className = 'w-4 h-4';\r\n        itemElement.appendChild(iconSpan);\r\n      }\r\n\r\n      const labelSpan = document.createElement('span');\r\n      labelSpan.textContent = label;\r\n      itemElement.appendChild(labelSpan);\r\n\r\n      itemElement.addEventListener('click', () => {\r\n        onClick();\r\n        this.close();\r\n      });\r\n\r\n      this.menuElement.appendChild(itemElement);\r\n    }\r\n  }\r\n}\r\n", "/**\r\n * Drawer Component (Side Sheet)\r\n */\r\n\r\nimport { BaseComponent } from './BaseComponent.js';\r\nimport { clsx, createBackdrop, createFocusTrap, keyboard } from './utils.js';\r\n\r\nexport class Drawer extends BaseComponent {\r\n  constructor(options = {}) {\r\n    super(options);\r\n    \r\n    this.title = options.title || '';\r\n    this.content = options.content || '';\r\n    this.position = options.position || 'right'; // left, right\r\n    this.open = options.open || false;\r\n    this.onClose = options.onClose || null;\r\n    this.closeButton = options.closeButton !== false;\r\n    this.closeOnBackdrop = options.closeOnBackdrop !== false;\r\n    this.closeOnEscape = options.closeOnEscape !== false;\r\n  }\r\n\r\n  create() {\r\n    const containerElement = super.create('div', {\r\n      className: clsx(\r\n        'fixed inset-0 z-50',\r\n        this.open ? '' : 'hidden'\r\n      )\r\n    });\r\n\r\n    // Backdrop\r\n    const backdrop = createBackdrop();\r\n    containerElement.appendChild(backdrop);\r\n\r\n    if (this.closeOnBackdrop) {\r\n      backdrop.addEventListener('click', () => this.close());\r\n    }\r\n\r\n    // Drawer\r\n    const positionClasses = this.position === 'left' ? 'left-0' : 'right-0';\r\n    const drawerElement = document.createElement('div');\r\n    drawerElement.className = clsx(\r\n      'absolute top-0 h-full w-96 bg-white shadow-lg transition-transform duration-300 flex flex-col z-50',\r\n      positionClasses,\r\n      this.open ? 'translate-x-0' : (this.position === 'left' ? '-translate-x-full' : 'translate-x-full')\r\n    );\r\n\r\n    // Header\r\n    if (this.title) {\r\n      const header = document.createElement('div');\r\n      header.className = 'px-6 py-4 border-b border-gray-200 flex items-center justify-between';\r\n      \r\n      const title = document.createElement('h2');\r\n      title.className = 'text-xl font-semibold text-gray-900';\r\n      title.textContent = this.title;\r\n      header.appendChild(title);\r\n\r\n      if (this.closeButton) {\r\n        const closeBtn = document.createElement('button');\r\n        closeBtn.className = 'text-gray-500 hover:text-gray-700 transition-colors duration-200';\r\n        closeBtn.innerHTML = '\u00D7';\r\n        closeBtn.addEventListener('click', () => this.close());\r\n        header.appendChild(closeBtn);\r\n      }\r\n\r\n      drawerElement.appendChild(header);\r\n    }\r\n\r\n    // Content\r\n    const contentDiv = document.createElement('div');\r\n    contentDiv.className = 'flex-1 overflow-y-auto px-6 py-4';\r\n    contentDiv.innerHTML = this.content;\r\n    drawerElement.appendChild(contentDiv);\r\n\r\n    containerElement.appendChild(drawerElement);\r\n\r\n    // Handle keyboard\r\n    this.on('keydown', (e) => {\r\n      if (keyboard.isEscape(e) && this.closeOnEscape) {\r\n        this.close();\r\n      }\r\n    }, { once: false });\r\n\r\n    this.backdrop = backdrop;\r\n    this.drawerElement = drawerElement;\r\n\r\n    return containerElement;\r\n  }\r\n\r\n  open() {\r\n    if (!this.element) this.create();\r\n    \r\n    this.open = true;\r\n    this.element.classList.remove('hidden');\r\n    this.drawerElement.classList.remove('-translate-x-full', 'translate-x-full');\r\n    this.drawerElement.classList.add('translate-x-0');\r\n    document.body.style.overflow = 'hidden';\r\n  }\r\n\r\n  close() {\r\n    this.open = false;\r\n    const translateClass = this.position === 'left' ? '-translate-x-full' : 'translate-x-full';\r\n    this.drawerElement.classList.remove('translate-x-0');\r\n    this.drawerElement.classList.add(translateClass);\r\n    \r\n    setTimeout(() => {\r\n      if (this.element?.parentNode) {\r\n        this.element.classList.add('hidden');\r\n      }\r\n      document.body.style.overflow = '';\r\n    }, 300);\r\n    \r\n    if (this.onClose) {\r\n      this.onClose();\r\n    }\r\n  }\r\n\r\n  toggle() {\r\n    this.open ? this.close() : this.open();\r\n  }\r\n}\r\n", "/**\n * Empty State Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx, createElement } from './utils.js';\n\nexport class Empty extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.icon = options.icon || '\uD83D\uDCE6';\n    this.title = options.title || 'No data';\n    this.message = options.message || 'There is no data to display';\n    this.action = options.action || null; // {label, onClick}\n    this.className = options.className || '';\n  }\n\n  create() {\n    const containerElement = super.create('div', {\n      className: clsx(\n        'flex flex-col items-center justify-center p-8 text-center',\n        this.className\n      )\n    });\n\n    // Icon\n    const iconElement = createElement('div', {\n      className: 'text-6xl mb-4',\n      text: this.icon\n    });\n    containerElement.appendChild(iconElement);\n\n    // Title\n    const titleElement = createElement('h3', {\n      className: 'text-lg font-semibold text-gray-900 mb-2',\n      text: this.title\n    });\n    containerElement.appendChild(titleElement);\n\n    // Message\n    const messageElement = createElement('p', {\n      className: 'text-gray-500 mb-4',\n      text: this.message\n    });\n    containerElement.appendChild(messageElement);\n\n    // Action button\n    if (this.action) {\n      const actionBtn = createElement('button', {\n        className: 'px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors',\n        text: this.action.label\n      });\n\n      actionBtn.addEventListener('click', this.action.onClick);\n      containerElement.appendChild(actionBtn);\n    }\n\n    return containerElement;\n  }\n}\n", "/**\n * Form Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx, createElement } from './utils.js';\n\nexport class Form extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.fields = options.fields || []; // Array of field configs\n    this.onSubmit = options.onSubmit || null;\n    this.submitText = options.submitText || 'Submit';\n    this.className = options.className || '';\n  }\n\n  create() {\n    const formElement = super.create('form', {\n      className: clsx('space-y-6', this.className)\n    });\n\n    formElement.addEventListener('submit', (e) => {\n      e.preventDefault();\n      this.handleSubmit();\n    });\n\n    // Render fields\n    this.fieldElements = {};\n\n    this.fields.forEach(field => {\n      const fieldContainer = createElement('div', {\n        className: 'space-y-2'\n      });\n\n      // Label\n      if (field.label) {\n        const label = createElement('label', {\n          className: 'block text-sm font-medium text-gray-700',\n          text: field.label,\n          attrs: { for: field.name }\n        });\n        fieldContainer.appendChild(label);\n      }\n\n      // Input\n      const input = document.createElement(field.type === 'textarea' ? 'textarea' : 'input');\n      input.id = field.name;\n      input.name = field.name;\n      input.className = clsx(\n        'w-full px-3 py-2 border border-gray-300 rounded-md',\n        'focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent'\n      );\n\n      if (field.type !== 'textarea') {\n        input.type = field.type || 'text';\n      }\n\n      if (field.placeholder) input.placeholder = field.placeholder;\n      if (field.required) input.required = true;\n      if (field.disabled) input.disabled = true;\n\n      input.value = field.value || '';\n\n      fieldContainer.appendChild(input);\n\n      // Error message\n      const errorDiv = createElement('div', {\n        className: 'text-sm text-red-600 hidden',\n        attrs: { 'data-error': field.name }\n      });\n      fieldContainer.appendChild(errorDiv);\n\n      formElement.appendChild(fieldContainer);\n      this.fieldElements[field.name] = input;\n    });\n\n    // Submit button\n    const submitBtn = createElement('button', {\n      className: clsx(\n        'w-full px-4 py-2 bg-blue-600 text-white font-medium rounded',\n        'hover:bg-blue-700 transition-colors duration-200'\n      ),\n      text: this.submitText,\n      attrs: { type: 'submit' }\n    });\n\n    formElement.appendChild(submitBtn);\n\n    return formElement;\n  }\n\n  handleSubmit() {\n    const formData = {};\n\n    Object.entries(this.fieldElements).forEach(([name, input]) => {\n      formData[name] = input.value;\n    });\n\n    if (this.onSubmit) {\n      this.onSubmit(formData);\n    }\n  }\n\n  getValues() {\n    const values = {};\n    Object.entries(this.fieldElements).forEach(([name, input]) => {\n      values[name] = input.value;\n    });\n    return values;\n  }\n\n  setValues(values) {\n    Object.entries(values).forEach(([name, value]) => {\n      if (this.fieldElements[name]) {\n        this.fieldElements[name].value = value;\n      }\n    });\n  }\n\n  setError(fieldName, message) {\n    const errorDiv = this.element.querySelector(`[data-error=\"${fieldName}\"]`);\n    if (errorDiv) {\n      errorDiv.textContent = message;\n      errorDiv.classList.remove('hidden');\n    }\n  }\n\n  clearError(fieldName) {\n    const errorDiv = this.element.querySelector(`[data-error=\"${fieldName}\"]`);\n    if (errorDiv) {\n      errorDiv.textContent = '';\n      errorDiv.classList.add('hidden');\n    }\n  }\n\n  reset() {\n    if (this.element) {\n      this.element.reset();\n    }\n  }\n}\n", "/**\n * Hover Card Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx } from './utils.js';\n\nexport class HoverCard extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.trigger = options.trigger || 'Hover me';\n    this.content = options.content || '';\n    this.position = options.position || 'bottom'; // top, bottom, left, right\n    this.delay = options.delay || 200;\n    this.className = options.className || '';\n    this.visible = false;\n    this.timeoutId = null;\n  }\n\n  create() {\n    const containerElement = super.create('div', {\n      className: 'relative inline-block'\n    });\n\n    // Trigger\n    const triggerElement = document.createElement('div');\n    triggerElement.className = 'cursor-pointer px-3 py-2 rounded hover:bg-gray-100 transition-colors duration-200';\n    triggerElement.textContent = this.trigger;\n\n    containerElement.appendChild(triggerElement);\n\n    // Card content\n    const cardElement = document.createElement('div');\n    cardElement.className = clsx(\n      'absolute hidden bg-white border border-gray-200 rounded-lg shadow-lg p-4 z-50',\n      'min-w-max max-w-sm',\n      this.getPositionClasses(),\n      this.className\n    );\n    cardElement.innerHTML = this.content;\n\n    containerElement.appendChild(cardElement);\n\n    // Hover handlers\n    containerElement.addEventListener('mouseenter', () => this.show(cardElement));\n    containerElement.addEventListener('mouseleave', () => this.hide(cardElement));\n\n    this.cardElement = cardElement;\n\n    return containerElement;\n  }\n\n  getPositionClasses() {\n    const positions = {\n      top: 'bottom-full left-0 mb-2',\n      bottom: 'top-full left-0 mt-2',\n      left: 'right-full top-0 mr-2',\n      right: 'left-full top-0 ml-2'\n    };\n    return positions[this.position] || positions.bottom;\n  }\n\n  show(cardElement = this.cardElement) {\n    if (this.visible || !cardElement) return;\n\n    this.timeoutId = setTimeout(() => {\n      this.visible = true;\n      cardElement.classList.remove('hidden');\n      cardElement.classList.add('opacity-100', 'transition-opacity', 'duration-200');\n    }, this.delay);\n  }\n\n  hide(cardElement = this.cardElement) {\n    if (!this.visible || !cardElement) return;\n\n    clearTimeout(this.timeoutId);\n    this.visible = false;\n    cardElement.classList.add('hidden');\n    cardElement.classList.remove('opacity-100');\n  }\n\n  setContent(content) {\n    this.content = content;\n    if (this.cardElement) {\n      this.cardElement.innerHTML = content;\n    }\n  }\n}\n", "/**\n * Input Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx } from './utils.js';\n\nexport class Input extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.type = options.type || 'text';\n    this.placeholder = options.placeholder || '';\n    this.value = options.value || '';\n    this.name = options.name || '';\n    this.disabled = options.disabled || false;\n    this.required = options.required || false;\n    this.className = options.className || '';\n    this.onChange = options.onChange || null;\n  }\n\n  create() {\n    const baseClasses = 'w-full px-3 py-2 border border-gray-300 rounded-md text-gray-900 placeholder-gray-500 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed';\n\n    const inputElement = super.create('input', {\n      className: clsx(baseClasses, this.className),\n      attrs: {\n        type: this.type,\n        placeholder: this.placeholder,\n        value: this.value,\n        name: this.name,\n        disabled: this.disabled ? '' : null,\n        required: this.required ? '' : null\n      }\n    });\n\n    if (this.onChange) {\n      this.on('change', this.onChange);\n      this.on('input', this.onChange);\n    }\n\n    return inputElement;\n  }\n\n  getValue() {\n    return this.element?.value || '';\n  }\n\n  setValue(value) {\n    this.value = value;\n    if (this.element) {\n      this.element.value = value;\n    }\n  }\n\n  setDisabled(disabled) {\n    this.disabled = disabled;\n    this.attr('disabled', disabled ? '' : null);\n  }\n\n  setPlaceholder(placeholder) {\n    this.placeholder = placeholder;\n    if (this.element) {\n      this.element.placeholder = placeholder;\n    }\n  }\n\n  focus() {\n    super.focus();\n  }\n\n  clear() {\n    this.setValue('');\n  }\n}\n", "/**\n * Input Group Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx, createElement } from './utils.js';\n\nexport class InputGroup extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.prefix = options.prefix || null;\n    this.suffix = options.suffix || null;\n    this.input = options.input || null;\n    this.className = options.className || '';\n  }\n\n  create() {\n    const baseClasses = 'flex items-center border border-gray-300 rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-blue-500';\n\n    const groupElement = super.create('div', {\n      className: clsx(baseClasses, this.className)\n    });\n\n    if (this.prefix) {\n      const prefixEl = createElement('div', {\n        className: 'px-3 py-2 bg-gray-50 text-gray-700 font-medium text-sm',\n        html: this.prefix\n      });\n      groupElement.appendChild(prefixEl);\n    }\n\n    if (this.input) {\n      const inputEl = this.input.element || this.input.create();\n      inputEl.classList.remove('border', 'focus:ring-2', 'focus:ring-blue-500');\n      groupElement.appendChild(inputEl);\n    }\n\n    if (this.suffix) {\n      const suffixEl = createElement('div', {\n        className: 'px-3 py-2 bg-gray-50 text-gray-700 font-medium text-sm',\n        html: this.suffix\n      });\n      groupElement.appendChild(suffixEl);\n    }\n\n    return groupElement;\n  }\n}\n", "/**\n * Input OTP Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx } from './utils.js';\n\nexport class InputOTP extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.length = options.length || 6;\n    this.value = options.value || '';\n    this.className = options.className || '';\n    this.onChange = options.onChange || null;\n    this.onComplete = options.onComplete || null;\n  }\n\n  create() {\n    const containerElement = super.create('div', {\n      className: clsx('flex gap-2', this.className)\n    });\n\n    this.inputs = [];\n\n    for (let i = 0; i < this.length; i++) {\n      const input = document.createElement('input');\n      input.type = 'text';\n      input.maxLength = '1';\n      input.inputMode = 'numeric';\n      input.className = clsx(\n        'w-12 h-12 text-center border-2 border-gray-300 rounded-lg font-semibold text-lg',\n        'focus:border-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-200',\n        'transition-colors duration-200'\n      );\n\n      if (this.value && this.value[i]) {\n        input.value = this.value[i];\n      }\n\n      input.addEventListener('input', (e) => {\n        const value = e.target.value;\n        if (!/^\\d*$/.test(value)) {\n          e.target.value = '';\n          return;\n        }\n\n        if (value && i < this.length - 1) {\n          this.inputs[i + 1].focus();\n        }\n\n        this.updateValue();\n      });\n\n      input.addEventListener('keydown', (e) => {\n        if (e.key === 'Backspace') {\n          if (!input.value && i > 0) {\n            this.inputs[i - 1].focus();\n          }\n        } else if (e.key === 'ArrowLeft' && i > 0) {\n          this.inputs[i - 1].focus();\n        } else if (e.key === 'ArrowRight' && i < this.length - 1) {\n          this.inputs[i + 1].focus();\n        }\n      });\n\n      this.inputs.push(input);\n      containerElement.appendChild(input);\n    }\n\n    return containerElement;\n  }\n\n  updateValue() {\n    this.value = this.inputs.map(input => input.value).join('');\n    \n    if (this.onChange) {\n      this.onChange(this.value);\n    }\n\n    if (this.value.length === this.length && this.onComplete) {\n      this.onComplete(this.value);\n    }\n  }\n\n  getValue() {\n    return this.value;\n  }\n\n  setValue(value) {\n    this.value = value;\n    for (let i = 0; i < this.length; i++) {\n      this.inputs[i].value = value[i] || '';\n    }\n  }\n\n  clear() {\n    this.inputs.forEach(input => {\n      input.value = '';\n    });\n    this.value = '';\n  }\n\n  focus() {\n    if (this.inputs.length > 0) {\n      this.inputs[0].focus();\n    }\n  }\n}\n", "/**\n * Item Component (Generic list item)\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx } from './utils.js';\n\nexport class Item extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.label = options.label || '';\n    this.value = options.value || '';\n    this.icon = options.icon || null;\n    this.className = options.className || '';\n    this.selected = options.selected || false;\n    this.disabled = options.disabled || false;\n  }\n\n  create() {\n    const baseClasses = 'flex items-center gap-2 px-3 py-2 rounded cursor-pointer transition-colors duration-200 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed';\n    \n    const stateClasses = this.selected ? 'bg-blue-50 text-blue-600' : 'text-gray-900';\n\n    const itemElement = super.create('div', {\n      className: clsx(baseClasses, stateClasses, this.className),\n      attrs: { \n        role: 'option',\n        'aria-selected': this.selected,\n        disabled: this.disabled ? '' : null,\n        'data-value': this.value\n      }\n    });\n\n    let html = '';\n    if (this.icon) {\n      html += `<span class=\"flex-shrink-0\">${this.icon}</span>`;\n    }\n    html += `<span>${this.label}</span>`;\n\n    itemElement.innerHTML = html;\n    return itemElement;\n  }\n\n  setSelected(selected) {\n    this.selected = selected;\n    if (this.element) {\n      this.attr('aria-selected', selected);\n      this.toggleClass('bg-blue-50 text-blue-600', selected);\n    }\n  }\n\n  setDisabled(disabled) {\n    this.disabled = disabled;\n    this.attr('disabled', disabled ? '' : null);\n  }\n}\n", "/**\n * Label Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx } from './utils.js';\n\nexport class Label extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.text = options.text || '';\n    this.htmlFor = options.htmlFor || '';\n    this.required = options.required || false;\n    this.className = options.className || '';\n  }\n\n  create() {\n    const baseClasses = 'block text-sm font-medium text-gray-700 mb-1';\n\n    const labelElement = super.create('label', {\n      className: clsx(baseClasses, this.className),\n      attrs: { for: this.htmlFor }\n    });\n\n    let html = this.text;\n    if (this.required) {\n      html += ' <span class=\"text-red-500 ml-1\">*</span>';\n    }\n\n    labelElement.innerHTML = html;\n    return labelElement;\n  }\n\n  setText(text) {\n    this.text = text;\n    if (this.element) {\n      let html = text;\n      if (this.required) {\n        html += ' <span class=\"text-red-500 ml-1\">*</span>';\n      }\n      this.element.innerHTML = html;\n    }\n  }\n\n  setRequired(required) {\n    this.required = required;\n    if (this.element) {\n      const requiredSpan = this.element.querySelector('[class*=\"text-red\"]');\n      if (required && !requiredSpan) {\n        this.element.innerHTML += ' <span class=\"text-red-500 ml-1\">*</span>';\n      } else if (!required && requiredSpan) {\n        requiredSpan.remove();\n      }\n    }\n  }\n}\n", "/**\n * Kbd Component (Keyboard Key)\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx } from './utils.js';\n\nexport class Kbd extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.label = options.label || 'K';\n    this.className = options.className || '';\n  }\n\n  create() {\n    const baseClasses = 'px-2 py-1 bg-gray-100 border border-gray-300 rounded text-xs font-semibold text-gray-900 inline-block font-mono';\n\n    const kbdElement = super.create('kbd', {\n      className: clsx(baseClasses, this.className)\n    });\n\n    kbdElement.textContent = this.label;\n    return kbdElement;\n  }\n\n  setLabel(label) {\n    this.label = label;\n    if (this.element) {\n      this.element.textContent = label;\n    }\n  }\n}\n", "/**\n * Native Select Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx } from './utils.js';\n\nexport class NativeSelect extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.items = options.items || []; // Array of {label, value}\n    this.selected = options.selected || '';\n    this.placeholder = options.placeholder || 'Select...';\n    this.disabled = options.disabled || false;\n    this.required = options.required || false;\n    this.name = options.name || '';\n    this.className = options.className || '';\n    this.onChange = options.onChange || null;\n  }\n\n  create() {\n    const baseClasses = 'w-full px-3 py-2 border border-gray-300 rounded-md text-gray-900 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed bg-white appearance-none cursor-pointer';\n\n    const selectElement = super.create('select', {\n      className: clsx(baseClasses, this.className),\n      attrs: {\n        disabled: this.disabled ? '' : null,\n        required: this.required ? '' : null,\n        ...(this.name && { name: this.name })\n      }\n    });\n\n    // Add placeholder option\n    if (this.placeholder) {\n      const placeholderOption = document.createElement('option');\n      placeholderOption.value = '';\n      placeholderOption.textContent = this.placeholder;\n      placeholderOption.disabled = true;\n      selectElement.appendChild(placeholderOption);\n    }\n\n    // Add items\n    this.items.forEach(item => {\n      const optionElement = document.createElement('option');\n      optionElement.value = item.value;\n      optionElement.textContent = item.label;\n      if (item.value === this.selected) {\n        optionElement.selected = true;\n      }\n      selectElement.appendChild(optionElement);\n    });\n\n    if (this.onChange) {\n      this.on('change', this.onChange);\n    }\n\n    return selectElement;\n  }\n\n  getValue() {\n    return this.element?.value || '';\n  }\n\n  setValue(value) {\n    this.selected = value;\n    if (this.element) {\n      this.element.value = value;\n    }\n  }\n\n  setDisabled(disabled) {\n    this.disabled = disabled;\n    this.attr('disabled', disabled ? '' : null);\n  }\n\n  addItem(label, value) {\n    if (this.element) {\n      const option = document.createElement('option');\n      option.value = value;\n      option.textContent = label;\n      this.element.appendChild(option);\n    }\n  }\n\n  removeItem(value) {\n    if (this.element) {\n      const option = this.element.querySelector(`option[value=\"${value}\"]`);\n      if (option) {\n        option.remove();\n      }\n    }\n  }\n}\n", "/**\n * Tooltip Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx } from './utils.js';\n\nexport class Tooltip extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.content = options.content || '';\n    this.position = options.position || 'top'; // top, bottom, left, right\n    this.delay = options.delay || 200;\n    this.trigger = options.trigger || 'hover'; // hover, focus, manual\n    this.className = options.className || '';\n    this.visible = false;\n    this.timeoutId = null;\n  }\n\n  create() {\n    const containerElement = super.create('div', {\n      className: 'relative inline-block'\n    });\n\n    // Tooltip content\n    const tooltipElement = document.createElement('div');\n    tooltipElement.className = clsx(\n      'absolute hidden bg-gray-900 text-white px-3 py-2 rounded text-sm whitespace-nowrap z-50',\n      'opacity-0 transition-opacity duration-200',\n      this.getPositionClasses(),\n      this.className\n    );\n    tooltipElement.textContent = this.content;\n\n    // Arrow\n    const arrow = document.createElement('div');\n    arrow.className = clsx(\n      'absolute w-2 h-2 bg-gray-900 transform rotate-45',\n      this.getArrowClasses()\n    );\n    tooltipElement.appendChild(arrow);\n\n    containerElement.appendChild(tooltipElement);\n\n    this.tooltipElement = tooltipElement;\n\n    // Handle trigger\n    if (this.trigger === 'hover') {\n      containerElement.addEventListener('mouseenter', () => this.show());\n      containerElement.addEventListener('mouseleave', () => this.hide());\n    } else if (this.trigger === 'focus') {\n      containerElement.addEventListener('focus', () => this.show(), true);\n      containerElement.addEventListener('blur', () => this.hide(), true);\n    }\n\n    return containerElement;\n  }\n\n  getPositionClasses() {\n    const positions = {\n      top: 'bottom-full left-1/2 transform -translate-x-1/2 mb-2',\n      bottom: 'top-full left-1/2 transform -translate-x-1/2 mt-2',\n      left: 'right-full top-1/2 transform -translate-y-1/2 mr-2',\n      right: 'left-full top-1/2 transform -translate-y-1/2 ml-2'\n    };\n    return positions[this.position] || positions.top;\n  }\n\n  getArrowClasses() {\n    const arrowPositions = {\n      top: 'top-full left-1/2 transform -translate-x-1/2 -translate-y-1/2',\n      bottom: 'bottom-full left-1/2 transform -translate-x-1/2 translate-y-1/2',\n      left: 'left-full top-1/2 transform translate-x-1/2 -translate-y-1/2',\n      right: 'right-full top-1/2 transform -translate-x-1/2 -translate-y-1/2'\n    };\n    return arrowPositions[this.position] || arrowPositions.top;\n  }\n\n  show() {\n    if (this.visible) return;\n\n    this.timeoutId = setTimeout(() => {\n      this.visible = true;\n      this.tooltipElement.classList.remove('hidden');\n      this.tooltipElement.classList.add('opacity-100');\n    }, this.delay);\n  }\n\n  hide() {\n    if (!this.visible) return;\n\n    clearTimeout(this.timeoutId);\n    this.visible = false;\n    this.tooltipElement.classList.remove('opacity-100');\n    this.tooltipElement.classList.add('hidden');\n  }\n\n  setContent(content) {\n    this.content = content;\n    if (this.tooltipElement) {\n      this.tooltipElement.textContent = content;\n    }\n  }\n}\n", "/**\n * Toggle Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx } from './utils.js';\n\nexport class Toggle extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.label = options.label || '';\n    this.pressed = options.pressed || false;\n    this.disabled = options.disabled || false;\n    this.variant = options.variant || 'default'; // default, outline\n    this.size = options.size || 'md'; // sm, md, lg\n    this.className = options.className || '';\n    this.onChange = options.onChange || null;\n  }\n\n  create() {\n    const baseClasses = 'px-4 py-2 font-medium rounded transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed';\n    \n    const variantClasses = {\n      default: this.pressed \n        ? 'bg-gray-900 text-white' \n        : 'bg-gray-100 text-gray-900 hover:bg-gray-200',\n      outline: this.pressed\n        ? 'border-2 border-gray-900 bg-gray-900 text-white'\n        : 'border-2 border-gray-300 text-gray-900 hover:bg-gray-50'\n    };\n\n    const sizeClasses = {\n      sm: 'px-2 py-1 text-sm',\n      md: 'px-4 py-2 text-base',\n      lg: 'px-6 py-3 text-lg'\n    };\n\n    const toggleElement = super.create('button', {\n      className: clsx(\n        baseClasses,\n        variantClasses[this.variant],\n        sizeClasses[this.size],\n        this.className\n      ),\n      attrs: { \n        'aria-pressed': this.pressed,\n        disabled: this.disabled ? '' : null\n      }\n    });\n\n    toggleElement.textContent = this.label;\n\n    this.on('click', () => {\n      this.toggle();\n    });\n\n    return toggleElement;\n  }\n\n  isPressed() {\n    return this.pressed;\n  }\n\n  setPressed(pressed) {\n    this.pressed = pressed;\n    if (this.element) {\n      this.attr('aria-pressed', pressed);\n      this.toggleClass('bg-gray-900 text-white', pressed);\n      if (this.onChange) {\n        this.onChange(pressed);\n      }\n    }\n  }\n\n  toggle() {\n    this.setPressed(!this.pressed);\n  }\n\n  setDisabled(disabled) {\n    this.disabled = disabled;\n    this.attr('disabled', disabled ? '' : null);\n  }\n}\n", "/**\n * Toggle Group Component\n */\n\nimport { BaseComponent } from './BaseComponent.js';\nimport { clsx, createElement } from './utils.js';\n\nexport class ToggleGroup extends BaseComponent {\n  constructor(options = {}) {\n    super(options);\n    \n    this.items = options.items || []; // Array of {label, value}\n    this.selected = options.selected || null;\n    this.multiple = options.multiple || false;\n    this.orientation = options.orientation || 'horizontal';\n    this.className = options.className || '';\n    this.onChange = options.onChange || null;\n  }\n\n  create() {\n    const orientationClass = this.orientation === 'vertical' ? 'flex-col' : 'flex-row';\n    const baseClasses = 'inline-flex border border-gray-300 rounded-md overflow-hidden';\n\n    const groupElement = super.create('div', {\n      className: clsx('flex', orientationClass, baseClasses, this.className),\n      attrs: { role: 'group' }\n    });\n\n    this.toggleButtons = [];\n\n    this.items.forEach((item, index) => {\n      const isSelected = this.multiple \n        ? (Array.isArray(this.selected) && this.selected.includes(item.value))\n        : item.value === this.selected;\n\n      const btnClasses = clsx(\n        'flex-1 px-4 py-2 font-medium transition-colors duration-200',\n        isSelected ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-50',\n        index > 0 ? (this.orientation === 'vertical' ? 'border-t border-gray-300' : 'border-l border-gray-300') : ''\n      );\n\n      const btn = createElement('button', {\n        className: btnClasses,\n        text: item.label,\n        attrs: {\n          'data-value': item.value,\n          'aria-pressed': isSelected,\n          type: 'button'\n        }\n      });\n\n      btn.addEventListener('click', () => {\n        if (this.multiple) {\n          if (!Array.isArray(this.selected)) this.selected = [];\n          const index = this.selected.indexOf(item.value);\n          if (index > -1) {\n            this.selected.splice(index, 1);\n          } else {\n            this.selected.push(item.value);\n          }\n        } else {\n          this.selected = item.value;\n        }\n        this.updateView();\n        if (this.onChange) {\n          this.onChange(this.selected);\n        }\n      });\n\n      groupElement.appendChild(btn);\n      this.toggleButtons.push(btn);\n    });\n\n    return groupElement;\n  }\n\n  updateView() {\n    this.toggleButtons.forEach(btn => {\n      const value = btn.getAttribute('data-value');\n      const isSelected = this.multiple\n        ? (Array.isArray(this.selected) && this.selected.includes(value))\n        : value === this.selected;\n\n      btn.setAttribute('aria-pressed', isSelected);\n      btn.className = clsx(\n        'flex-1 px-4 py-2 font-medium transition-colors duration-200',\n        isSelected ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-50'\n      );\n    });\n  }\n\n  getValue() {\n    return this.selected;\n  }\n\n  setValue(value) {\n    this.selected = value;\n    this.updateView();\n  }\n}\n", "/**\r\n * Toast/Sonner Component\r\n */\r\n\r\nimport { BaseComponent } from './BaseComponent.js';\r\nimport { clsx, createElement } from './utils.js';\r\n\r\nexport class Toast extends BaseComponent {\r\n  constructor(options = {}) {\r\n    super(options);\r\n    \r\n    this.message = options.message || '';\r\n    this.type = options.type || 'default'; // default, success, error, warning, info\r\n    // On mobile, shorten toast duration slightly for faster UX\r\n    if (typeof options.duration !== 'undefined') {\r\n      this.duration = options.duration;\r\n    } else {\r\n      this.duration = (typeof window !== 'undefined' && window.innerWidth < 640) ? 2500 : 3000;\r\n    }\r\n    this.position = options.position || 'top-right'; // top-left, top-right, bottom-left, bottom-right, top-center\r\n    this.className = options.className || '';\r\n    this.onClose = options.onClose || null;\r\n  }\r\n\r\n  destroy() {\r\n    if (!this.element) return;\r\n    const el = this.element;\r\n    // Play exit animation, then cleanup\r\n    el.classList.add(this.getExitAnimationClass());\r\n    const onDone = () => {\r\n      el.removeEventListener('animationend', onDone);\r\n      // Remove and cleanup via BaseComponent\r\n      super.destroy();\r\n      // If container becomes empty, remove it\r\n      const container = Toast.getContainer(this.position);\r\n      if (container && container.childElementCount === 0 && container.parentNode) {\r\n        container.parentNode.removeChild(container);\r\n        if (Toast._containers) {\r\n          delete Toast._containers[this.position || 'top-right'];\r\n        }\r\n      }\r\n    };\r\n    el.addEventListener('animationend', onDone);\r\n    // Fallback in case animationend doesn\u2019t fire\r\n    setTimeout(onDone, 320);\r\n  }\r\n\r\n  static getContainer(position) {\r\n    const key = position || 'top-right';\r\n    if (!this._containers) this._containers = {};\r\n    if (this._containers[key] && document.body.contains(this._containers[key])) {\r\n      return this._containers[key];\r\n    }\r\n    const container = createElement('div', {\r\n      className: clsx(\r\n        'fixed z-50 p-2 flex flex-col gap-2 pointer-events-none',\r\n        this.getPositionClassesForContainer(key)\r\n      )\r\n    });\r\n    document.body.appendChild(container);\r\n    this._containers[key] = container;\r\n    return container;\r\n  }\r\n\r\n  static getPositionClassesForContainer(position) {\r\n    switch (position) {\r\n      case 'top-left':\r\n        return 'top-4 left-4 items-start';\r\n      case 'top-right':\r\n        return 'top-4 right-4 items-end';\r\n      case 'bottom-left':\r\n        return 'bottom-4 left-4 items-start';\r\n      case 'bottom-right':\r\n        return 'bottom-4 right-4 items-end';\r\n      case 'top-center':\r\n        return 'top-4 left-1/2 -translate-x-1/2 items-center transform';\r\n      default:\r\n        return 'top-4 right-4 items-end';\r\n    }\r\n  }\r\n\r\n  create() {\r\n    const containerElement = Toast.getContainer(this.position);\r\n\r\n    const toastElement = createElement('div', {\r\n      className: clsx(\r\n        // Allow wrapping on small screens, limit max width for mobile, keep compact padding\r\n        'rounded-lg shadow-lg p-2.5 flex items-center gap-2 min-w-0 max-w-[90vw] sm:max-w-sm bg-opacity-95',\r\n        this.getEnterAnimationClass(),\r\n        this.getTypeClasses(),\r\n        this.className\r\n      )\r\n    });\r\n\r\n    // Icon\r\n    const iconElement = createElement('span', {\r\n      className: 'text-base flex-shrink-0',\r\n      text: this.getIcon()\r\n    });\r\n    toastElement.appendChild(iconElement);\r\n\r\n    // Message\r\n    const messageElement = createElement('span', {\r\n      text: this.message,\r\n      // Slightly smaller text on mobile, readable on larger screens\r\n      className: 'flex-1 text-sm sm:text-base'\r\n    });\r\n    toastElement.appendChild(messageElement);\r\n\r\n    // Close button\r\n    const closeBtn = createElement('button', {\r\n      className: 'text-base hover:opacity-70 transition-opacity flex-shrink-0',\r\n      text: '\u00D7'\r\n    });\r\n\r\n    closeBtn.addEventListener('click', () => {\r\n      this.destroy();\r\n    });\r\n\r\n    toastElement.appendChild(closeBtn);\r\n\r\n    // Set element and append to shared container\r\n    this.element = toastElement;\r\n    containerElement.appendChild(this.element);\r\n\r\n    // Enforce max visible toasts (3). Remove oldest if exceeded.\r\n    while (containerElement.children.length > 3) {\r\n      containerElement.removeChild(containerElement.firstElementChild);\r\n    }\r\n\r\n    // Auto close\r\n    if (this.duration > 0) {\r\n      setTimeout(() => {\r\n        this.destroy();\r\n      }, this.duration);\r\n    }\r\n\r\n    return this.element;\r\n  }\r\n\r\n  getEnterAnimationClass() {\r\n    const pos = this.position || 'top-right';\r\n    if (pos === 'top-right' || pos === 'bottom-right') return 'animate-slide-in-right transition-all duration-300 pointer-events-auto';\r\n    if (pos === 'top-left' || pos === 'bottom-left') return 'animate-slide-in-left transition-all duration-300 pointer-events-auto';\r\n    return 'animate-slide-in-top transition-all duration-300 pointer-events-auto';\r\n  }\r\n\r\n  getExitAnimationClass() {\r\n    const pos = this.position || 'top-right';\r\n    if (pos === 'top-right' || pos === 'bottom-right') return 'animate-slide-out-right';\r\n    if (pos === 'top-left' || pos === 'bottom-left') return 'animate-slide-out-left';\r\n    return 'animate-slide-out-top';\r\n  }\r\n\r\n  getPositionClasses() {\r\n    const positions = {\r\n      'top-left': 'top-4 left-4',\r\n      'top-right': 'top-4 right-4',\r\n      'bottom-left': 'bottom-4 left-4',\r\n      'bottom-right': 'bottom-4 right-4',\r\n      'top-center': 'top-4 left-1/2 -translate-x-1/2 transform'\r\n    };\r\n    return positions[this.position] || positions['bottom-right'];\r\n  }\r\n\r\n  getTypeClasses() {\r\n    const types = {\r\n      default: 'bg-gray-900 text-white',\r\n      success: 'bg-green-600 text-white',\r\n      error: 'bg-red-600 text-white',\r\n      warning: 'bg-yellow-600 text-white',\r\n      info: 'bg-blue-600 text-white'\r\n    };\r\n    return types[this.type] || types.default;\r\n  }\r\n\r\n  getIcon() {\r\n    const icons = {\r\n      default: '\u2139',\r\n      success: '\u2713',\r\n      error: '\u2715',\r\n      warning: '\u26A0',\r\n      info: '\u2139'\r\n    };\r\n    return icons[this.type] || icons.default;\r\n  }\r\n\r\n  static show(message, options = {}) {\r\n    const toast = new Toast({ message, ...options });\r\n    const element = toast.create();\r\n    return toast;\r\n  }\r\n}\r\n\r\n// Add CSS animation\r\nif (!document.querySelector('style[data-toast]')) {\r\n  const style = document.createElement('style');\r\n  style.setAttribute('data-toast', 'true');\r\n  style.textContent = `\r\n    @keyframes slideInTop {\r\n      from { transform: translateY(-12px); opacity: 0; }\r\n      to { transform: translateY(0); opacity: 1; }\r\n    }\r\n    .animate-slide-in-top { animation: slideInTop 0.25s ease-out; }\r\n\r\n    @keyframes slideOutTop {\r\n      from { transform: translateY(0); opacity: 1; }\r\n      to { transform: translateY(-12px); opacity: 0; }\r\n    }\r\n    .animate-slide-out-top { animation: slideOutTop 0.2s ease-in forwards; }\r\n\r\n    @keyframes slideInRight {\r\n      from { transform: translateX(16px); opacity: 0; }\r\n      to { transform: translateX(0); opacity: 1; }\r\n    }\r\n    .animate-slide-in-right { animation: slideInRight 0.25s ease-out; }\r\n\r\n    @keyframes slideOutRight {\r\n      from { transform: translateX(0); opacity: 1; }\r\n      to { transform: translateX(16px); opacity: 0; }\r\n    }\r\n    .animate-slide-out-right { animation: slideOutRight 0.2s ease-in forwards; }\r\n\r\n    @keyframes slideInLeft {\r\n      from { transform: translateX(-16px); opacity: 0; }\r\n      to { transform: translateX(0); opacity: 1; }\r\n    }\r\n    .animate-slide-in-left { animation: slideInLeft 0.25s ease-out; }\r\n\r\n    @keyframes slideOutLeft {\r\n      from { transform: translateX(0); opacity: 1; }\r\n      to { transform: translateX(-16px); opacity: 0; }\r\n    }\r\n    .animate-slide-out-left { animation: slideOutLeft 0.2s ease-in forwards; }\r\n  `;\r\n  document.head.appendChild(style);\r\n}\r\n", "// Lazy hydration utility\r\n// Usage: add `data-hydrate=\"components/Carousel.js#init\"` to an element\r\n// Module path is relative to static/js (e.g. components/Carousel.js)\r\n// After the `#` is the exported initializer name (defaults to `init`).\r\nconst MODULE_REGISTRY = {\r\n  // Components\r\n  'components/Alert.js': () => import('../components/Alert.js'),\r\n  'components/AlertDialog.js': () => import('../components/AlertDialog.js'),\r\n  'components/Avatar.js': () => import('../components/Avatar.js'),\r\n  'components/Badge.js': () => import('../components/Badge.js'),\r\n  'components/Button.js': () => import('../components/Button.js'),\r\n  'components/ButtonGroup.js': () => import('../components/ButtonGroup.js'),\r\n  'components/Breadcrumb.js': () => import('../components/Breadcrumb.js'),\r\n  'components/Card.js': () => import('../components/Card.js'),\r\n  'components/Carousel.js': () => import('../components/Carousel.js'),\r\n  'components/Chart.js': () => import('../components/Chart.js'),\r\n  'components/Checkbox.js': () => import('../components/Checkbox.js'),\r\n  'components/Collapsible.js': () => import('../components/Collapsible.js'),\r\n  'components/Command.js': () => import('../components/Command.js'),\r\n  'components/Combobox.js': () => import('../components/Combobox.js'),\r\n  'components/ContextMenu.js': () => import('../components/ContextMenu.js'),\r\n  'components/DatePicker.js': () => import('../components/DatePicker.js'),\r\n  'components/Dialog.js': () => import('../components/Dialog.js'),\r\n  'components/DropdownMenu.js': () => import('../components/DropdownMenu.js'),\r\n  'components/Drawer.js': () => import('../components/Drawer.js'),\r\n  'components/Empty.js': () => import('../components/Empty.js'),\r\n  'components/Form.js': () => import('../components/Form.js'),\r\n  'components/HoverCard.js': () => import('../components/HoverCard.js'),\r\n  'components/Input.js': () => import('../components/Input.js'),\r\n  'components/InputGroup.js': () => import('../components/InputGroup.js'),\r\n  'components/InputOTP.js': () => import('../components/InputOTP.js'),\r\n  'components/Item.js': () => import('../components/Item.js'),\r\n  'components/Label.js': () => import('../components/Label.js'),\r\n  'components/Kbd.js': () => import('../components/Kbd.js'),\r\n  'components/NativeSelect.js': () => import('../components/NativeSelect.js'),\r\n  'components/Tooltip.js': () => import('../components/Tooltip.js'),\r\n  'components/Toggle.js': () => import('../components/Toggle.js'),\r\n  'components/ToggleGroup.js': () => import('../components/ToggleGroup.js'),\r\n  'components/Toast.js': () => import('../components/Toast.js'),\r\n\r\n  // Add other components as needed\r\n};\r\n\r\nexport function initLazyHydration({root = document, selector = '[data-hydrate]', threshold = 0.15} = {}) {\r\n  if (typeof IntersectionObserver === 'undefined') return;\r\n  const observer = new IntersectionObserver(async (entries, obs) => {\r\n    for (const entry of entries) {\r\n      if (!entry.isIntersecting) continue;\r\n      const el = entry.target;\r\n      const spec = el.dataset.hydrate || '';\r\n      const [modulePath, initName = 'init'] = spec.split('#');\r\n      if (!modulePath) { obs.unobserve(el); continue; }\r\n      try {\r\n        let mod = null;\r\n        const loader = MODULE_REGISTRY[modulePath];\r\n        if (typeof loader === 'function') {\r\n          mod = await loader();\r\n        } else {\r\n          // Not registered: skip importing arbitrary files to avoid bundler resolving non-JS assets\r\n          throw new Error('Module not registered for lazy hydration: ' + modulePath);\r\n        }\r\n        const fn = mod[initName] || mod.default || null;\r\n        if (typeof fn === 'function') {\r\n          try { fn(el); } catch (e) { console.error('hydrate init failed', e); }\r\n        }\r\n      } catch (e) {\r\n        console.error('lazy hydrate import failed for', modulePath, e);\r\n      } finally {\r\n        obs.unobserve(el);\r\n      }\r\n    }\r\n  }, {threshold});\r\n  root.querySelectorAll(selector).forEach(el => observer.observe(el));\r\n}\r\n", "/**\n * Account Page\n * @module pages/account\n */\n\nconst AccountPage = (function() {\n    'use strict';\n\n    let currentUser = null;\n\n    async function init() {\n        // Ensure this page is protected and redirect to login if the user is not authenticated\n        if (!AuthGuard.protectPage()) return;\n\n        await loadUserProfile();\n        // Ensure avatar handlers are bound even when renderProfile cannot inject the header (e.g., server-rendered sidebar present)\n        try {\n            setupAvatarHandlers();\n        } catch (e) {\n            // ignore\n        }\n        initProfileTabs();\n        initProfileForm();\n        initPasswordForm();\n        initAddressManagement();\n    }\n\n    async function loadUserProfile() {\n        if (!AuthApi.isAuthenticated()) {\n            // Avoid calling profile API when user is not authenticated\n            return;\n        }\n        try {\n            const response = await AuthApi.getProfile();\n            currentUser = response.data;\n            renderProfile();\n        } catch (error) {\n            // error logging removed\n            Toast.error('Failed to load profile.');\n        }\n    }\n\n    function initProfileTabs() {\n        const tabs = document.querySelectorAll('[data-profile-tab]');\n        const panels = document.querySelectorAll('[data-profile-panel]');\n        if (!tabs.length || !panels.length) return;\n\n        const setActive = (target) => {\n            panels.forEach(panel => {\n                panel.classList.toggle('hidden', panel.dataset.profilePanel !== target);\n            });\n            tabs.forEach(btn => {\n                const isActive = btn.dataset.profileTab === target;\n                btn.classList.toggle('bg-amber-600', isActive);\n                btn.classList.toggle('text-white', isActive);\n                btn.classList.toggle('shadow-sm', isActive);\n                btn.classList.toggle('text-stone-700', !isActive);\n                btn.classList.toggle('dark:text-stone-200', !isActive);\n            });\n            localStorage.setItem('profileTab', target);\n        };\n\n        const initial = localStorage.getItem('profileTab') || 'overview';\n        setActive(initial);\n\n        tabs.forEach(btn => {\n            btn.addEventListener('click', () => {\n                setActive(btn.dataset.profileTab);\n            });\n        });\n    }\n\n    function renderProfile() {\n        const container = document.getElementById('profile-info');\n        if (!container || !currentUser) return;\n\n        const name = `${Templates.escapeHtml(currentUser.first_name || '')} ${Templates.escapeHtml(currentUser.last_name || '')}`.trim() || Templates.escapeHtml(currentUser.email || 'User');\n        const memberSince = Templates.formatDate(currentUser.created_at || currentUser.date_joined);\n        const avatarImg = currentUser.avatar ? `<img id=\"avatar-preview\" src=\"${currentUser.avatar}\" alt=\"Profile\" class=\"w-full h-full object-cover\">` : `\n            <span class=\"flex h-full w-full items-center justify-center text-3xl font-semibold text-stone-500\">\n                ${(currentUser.first_name?.[0] || currentUser.email?.[0] || 'U').toUpperCase()}\n            </span>`;\n\n        container.innerHTML = `\n            <div class=\"absolute inset-0 bg-gradient-to-r from-amber-50/80 via-amber-100/60 to-transparent dark:from-amber-900/20 dark:via-amber-800/10\" aria-hidden=\"true\"></div>\n            <div class=\"relative flex flex-col gap-4 md:flex-row md:items-center md:gap-6\">\n                <div class=\"relative\">\n                    <div class=\"w-24 h-24 rounded-2xl ring-4 ring-amber-100 dark:ring-amber-900/40 overflow-hidden bg-stone-100 dark:bg-stone-800\">\n                        ${avatarImg}\n                    </div>\n                </div>\n                <div class=\"flex-1 min-w-0\">\n                    <p class=\"text-sm font-semibold text-amber-700 dark:text-amber-300\">Profile</p>\n                    <h1 class=\"text-2xl font-bold text-stone-900 dark:text-white leading-tight truncate\">${name}</h1>\n                    <p class=\"text-sm text-stone-600 dark:text-stone-300 truncate\">${Templates.escapeHtml(currentUser.email)}</p>\n                    <p class=\"text-xs text-stone-500 dark:text-stone-400 mt-1\">Member since ${memberSince}</p>\n                    <div class=\"flex flex-wrap gap-2 mt-4\">\n                        <button type=\"button\" id=\"change-avatar-btn\" class=\"btn btn-primary btn-sm\">Update photo</button>\n                        ${currentUser.avatar ? `<button type=\"button\" id=\"remove-avatar-btn\" class=\"btn btn-ghost btn-sm text-red-600 hover:text-red-700 dark:text-red-400\">Remove photo</button>` : ''}\n                    </div>\n                    <p class=\"text-xs text-stone-500 dark:text-stone-400 mt-3\">JPG, GIF or PNG. Max size 5MB.</p>\n                </div>\n            </div>\n        `;\n\n        setupAvatarHandlers();\n    }\n\n    function initTabs() {\n        Tabs.init();\n    }\n\n    function initProfileForm() {\n        const form = document.getElementById('profile-form');\n        if (!form || !currentUser) return;\n\n        const firstNameInput = document.getElementById('profile-first-name');\n        const lastNameInput = document.getElementById('profile-last-name');\n        const emailInput = document.getElementById('profile-email');\n        const phoneInput = document.getElementById('profile-phone');\n\n        if (firstNameInput) firstNameInput.value = currentUser.first_name || '';\n        if (lastNameInput) lastNameInput.value = currentUser.last_name || '';\n        if (emailInput) emailInput.value = currentUser.email || '';\n        if (phoneInput) phoneInput.value = currentUser.phone || '';\n\n        form.addEventListener('submit', async (e) => {\n            e.preventDefault();\n\n            const formData = new FormData(form);\n            const data = {\n                first_name: formData.get('first_name'),\n                last_name: formData.get('last_name'),\n                phone: formData.get('phone')\n            };\n\n            const submitBtn = form.querySelector('button[type=\"submit\"]');\n            submitBtn.disabled = true;\n            submitBtn.textContent = 'Saving...';\n\n            try {\n                await AuthApi.updateProfile(data);\n                Toast.success('Profile updated successfully!');\n                await loadUserProfile();\n            } catch (error) {\n                Toast.error(error.message || 'Failed to update profile.');\n            } finally {\n                submitBtn.disabled = false;\n                submitBtn.textContent = 'Save Changes';\n            }\n        });\n    }\n\n    function setupAvatarHandlers() {\n        let avatarInput = document.getElementById('avatar-input');\n        const avatarBtn = document.getElementById('change-avatar-btn');\n        const removeBtn = document.getElementById('remove-avatar-btn');\n\n        // If the hidden file input is missing, create it so buttons still work\n        if (!avatarInput) {\n            avatarInput = document.createElement('input');\n            avatarInput.type = 'file';\n            avatarInput.id = 'avatar-input';\n            avatarInput.name = 'avatar';\n            avatarInput.accept = 'image/*';\n            avatarInput.className = 'hidden';\n            document.body.appendChild(avatarInput);\n        }\n\n        // Bind to all elements that may act as avatar trigger (sidebar + main profile)\n        const avatarBtns = document.querySelectorAll('#change-avatar-btn');\n        avatarBtns.forEach(btn => btn.addEventListener('click', () => avatarInput.click()));\n\n        // Bind remove buttons (may be multiple)\n        const removeBtns = document.querySelectorAll('#remove-avatar-btn');\n        removeBtns.forEach(btn => btn.addEventListener('click', () => {\n            if (typeof window.removeAvatar === 'function') {\n                window.removeAvatar();\n            }\n        }));\n\n        // Ensure the handler is not attached multiple times\n        avatarInput.removeEventListener?.('change', window._avatarChangeHandler);\n        window._avatarChangeHandler = async function (e) {\n            const file = e.target.files?.[0];\n            if (!file) return;\n\n            if (!file.type.startsWith('image/')) {\n                Toast.error('Please select an image file.');\n                return;\n            }\n\n            if (file.size > 5 * 1024 * 1024) {\n                Toast.error('Image must be smaller than 5MB.');\n                return;\n            }\n\n            try {\n                await AuthApi.uploadAvatar(file);\n                Toast.success('Avatar updated!');\n                await loadUserProfile();\n            } catch (error) {\n                Toast.error(error.message || 'Failed to update avatar.');\n            }\n        };\n\n        avatarInput.addEventListener('change', window._avatarChangeHandler);\n    }\n\n    function initPasswordForm() {\n        const form = document.getElementById('password-form');\n        if (!form) return;\n\n        form.addEventListener('submit', async (e) => {\n            e.preventDefault();\n\n            const formData = new FormData(form);\n            const currentPassword = formData.get('current_password');\n            const newPassword = formData.get('new_password');\n            const confirmPassword = formData.get('confirm_password');\n\n            if (newPassword !== confirmPassword) {\n                Toast.error('Passwords do not match.');\n                return;\n            }\n\n            if (newPassword.length < 8) {\n                Toast.error('Password must be at least 8 characters.');\n                return;\n            }\n\n            const submitBtn = form.querySelector('button[type=\"submit\"]');\n            submitBtn.disabled = true;\n            submitBtn.textContent = 'Updating...';\n\n            try {\n                await AuthApi.changePassword(currentPassword, newPassword);\n                Toast.success('Password updated successfully!');\n                form.reset();\n            } catch (error) {\n                Toast.error(error.message || 'Failed to update password.');\n            } finally {\n                submitBtn.disabled = false;\n                submitBtn.textContent = 'Update Password';\n            }\n        });\n    }\n\n    function initAddressManagement() {\n        loadAddresses();\n\n        const addAddressBtn = document.getElementById('add-address-btn');\n        addAddressBtn?.addEventListener('click', () => {\n            showAddressModal();\n        });\n    }\n\n    async function loadAddresses() {\n        const container = document.getElementById('addresses-list');\n        if (!container) return;\n\n        Loader.show(container, 'spinner');\n\n        try {\n            const response = await AuthApi.getAddresses();\n            const addresses = response.data || [];\n\n            if (addresses.length === 0) {\n                container.innerHTML = `\n                    <div class=\"text-center py-8\">\n                        <svg class=\"w-16 h-16 text-gray-300 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"/>\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"/>\n                        </svg>\n                        <p class=\"text-gray-500\">No saved addresses yet.</p>\n                    </div>\n                `;\n                return;\n            }\n\n            container.innerHTML = `\n                <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    ${addresses.map(addr => `\n                        <div class=\"p-4 border border-gray-200 rounded-lg relative\" data-address-id=\"${addr.id}\">\n                            ${addr.is_default ? `\n                                <span class=\"absolute top-2 right-2 px-2 py-0.5 bg-primary-100 text-primary-700 text-xs rounded\">Default</span>\n                            ` : ''}\n                            <p class=\"font-medium text-gray-900\">${Templates.escapeHtml(addr.full_name || `${addr.first_name} ${addr.last_name}`)}</p>\n                            <p class=\"text-sm text-gray-600 mt-1\">${Templates.escapeHtml(addr.address_line_1)}</p>\n                            ${addr.address_line_2 ? `<p class=\"text-sm text-gray-600\">${Templates.escapeHtml(addr.address_line_2)}</p>` : ''}\n                            <p class=\"text-sm text-gray-600\">${Templates.escapeHtml(addr.city)}, ${Templates.escapeHtml(addr.state || '')} ${Templates.escapeHtml(addr.postal_code)}</p>\n                            <p class=\"text-sm text-gray-600\">${Templates.escapeHtml(addr.country)}</p>\n                            ${addr.phone ? `<p class=\"text-sm text-gray-600 mt-1\">${Templates.escapeHtml(addr.phone)}</p>` : ''}\n                            \n                            <div class=\"mt-4 flex gap-2\">\n                                <button class=\"edit-address-btn text-sm text-primary-600 hover:text-primary-700\" data-address-id=\"${addr.id}\">Edit</button>\n                                ${!addr.is_default ? `\n                                    <button class=\"set-default-btn text-sm text-gray-600 hover:text-gray-700\" data-address-id=\"${addr.id}\">Set as Default</button>\n                                ` : ''}\n                                <button class=\"delete-address-btn text-sm text-red-600 hover:text-red-700\" data-address-id=\"${addr.id}\">Delete</button>\n                            </div>\n                        </div>\n                    `).join('')}\n                </div>\n            `;\n\n            bindAddressEvents();\n        } catch (error) {\n            console.error('Failed to load addresses:', error);\n            container.innerHTML = '<p class=\"text-red-500\">Failed to load addresses.</p>';\n        }\n    }\n\n    function bindAddressEvents() {\n        document.querySelectorAll('.edit-address-btn').forEach(btn => {\n            btn.addEventListener('click', async () => {\n                const addressId = btn.dataset.addressId;\n                try {\n                    const response = await AuthApi.getAddress(addressId);\n                    showAddressModal(response.data);\n                } catch (error) {\n                    Toast.error('Failed to load address.');\n                }\n            });\n        });\n\n        document.querySelectorAll('.set-default-btn').forEach(btn => {\n            btn.addEventListener('click', async () => {\n                const addressId = btn.dataset.addressId;\n                try {\n                    await AuthApi.setDefaultAddress(addressId);\n                    Toast.success('Default address updated.');\n                    await loadAddresses();\n                } catch (error) {\n                    Toast.error('Failed to update default address.');\n                }\n            });\n        });\n\n        document.querySelectorAll('.delete-address-btn').forEach(btn => {\n            btn.addEventListener('click', async () => {\n                const addressId = btn.dataset.addressId;\n                const confirmed = await Modal.confirm({\n                    title: 'Delete Address',\n                    message: 'Are you sure you want to delete this address?',\n                    confirmText: 'Delete',\n                    cancelText: 'Cancel'\n                });\n\n                if (confirmed) {\n                    try {\n                        await AuthApi.deleteAddress(addressId);\n                        Toast.success('Address deleted.');\n                        await loadAddresses();\n                    } catch (error) {\n                        Toast.error('Failed to delete address.');\n                    }\n                }\n            });\n        });\n    }\n\n    function showAddressModal(address = null) {\n        const isEdit = !!address;\n\n        Modal.open({\n            title: isEdit ? 'Edit Address' : 'Add New Address',\n            content: `\n                <form id=\"address-modal-form\" class=\"space-y-4\">\n                    <div class=\"grid grid-cols-2 gap-4\">\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">First Name *</label>\n                            <input type=\"text\" name=\"first_name\" value=\"${address?.first_name || ''}\" required class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">Last Name *</label>\n                            <input type=\"text\" name=\"last_name\" value=\"${address?.last_name || ''}\" required class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500\">\n                        </div>\n                    </div>\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">Phone</label>\n                        <input type=\"tel\" name=\"phone\" value=\"${address?.phone || ''}\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500\">\n                    </div>\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">Address Line 1 *</label>\n                        <input type=\"text\" name=\"address_line_1\" value=\"${address?.address_line_1 || ''}\" required class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500\">\n                    </div>\n                    <div>\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">Address Line 2</label>\n                        <input type=\"text\" name=\"address_line_2\" value=\"${address?.address_line_2 || ''}\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500\">\n                    </div>\n                    <div class=\"grid grid-cols-2 gap-4\">\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">City *</label>\n                            <input type=\"text\" name=\"city\" value=\"${address?.city || ''}\" required class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">State/Province</label>\n                            <input type=\"text\" name=\"state\" value=\"${address?.state || ''}\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500\">\n                        </div>\n                    </div>\n                    <div class=\"grid grid-cols-2 gap-4\">\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">Postal Code *</label>\n                            <input type=\"text\" name=\"postal_code\" value=\"${address?.postal_code || ''}\" required class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500\">\n                        </div>\n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">Country *</label>\n                            <select name=\"country\" required class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500\">\n                                <option value=\"\">Select country</option>\n                                <option value=\"BD\" ${address?.country === 'BD' ? 'selected' : ''}>Bangladesh</option>\n                                <option value=\"US\" ${address?.country === 'US' ? 'selected' : ''}>United States</option>\n                                <option value=\"UK\" ${address?.country === 'UK' ? 'selected' : ''}>United Kingdom</option>\n                                <option value=\"CA\" ${address?.country === 'CA' ? 'selected' : ''}>Canada</option>\n                                <option value=\"AU\" ${address?.country === 'AU' ? 'selected' : ''}>Australia</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div>\n                        <label class=\"flex items-center\">\n                            <input type=\"checkbox\" name=\"is_default\" ${address?.is_default ? 'checked' : ''} class=\"text-primary-600 focus:ring-primary-500 rounded\">\n                            <span class=\"ml-2 text-sm text-gray-600\">Set as default address</span>\n                        </label>\n                    </div>\n                </form>\n            `,\n            confirmText: isEdit ? 'Save Changes' : 'Add Address',\n            onConfirm: async () => {\n                const form = document.getElementById('address-modal-form');\n                const formData = new FormData(form);\n                const data = {\n                    first_name: formData.get('first_name'),\n                    last_name: formData.get('last_name'),\n                    phone: formData.get('phone'),\n                    address_line_1: formData.get('address_line_1'),\n                    address_line_2: formData.get('address_line_2'),\n                    city: formData.get('city'),\n                    state: formData.get('state'),\n                    postal_code: formData.get('postal_code'),\n                    country: formData.get('country'),\n                    is_default: formData.get('is_default') === 'on'\n                };\n\n                try {\n                    if (isEdit) {\n                        await AuthApi.updateAddress(address.id, data);\n                        Toast.success('Address updated!');\n                    } else {\n                        await AuthApi.addAddress(data);\n                        Toast.success('Address added!');\n                    }\n                    await loadAddresses();\n                    return true;\n                } catch (error) {\n                    Toast.error(error.message || 'Failed to save address.');\n                    return false;\n                }\n            }\n        });\n    }\n\n    function destroy() {\n        currentUser = null;\n    }\n\n    return {\n        init,\n        destroy\n    };\n})();\n\nwindow.AccountPage = AccountPage;\nexport default AccountPage;\n", "/**\r\n * Cart Page\r\n * @module pages/cart\r\n */\r\n\r\nconst CartPage = (function() {\r\n    'use strict';\r\n\r\n    let cart = null;\r\n    // Single-currency mode: use server-provided currency via Templates and `window.BUNORAA_CURRENCY`.\r\n    function setActiveCurrency(/* currency */) {\r\n        // No-op in single-currency mode - retained for backward compatibility\r\n    }\r\n\r\n    function parseAmount(value) {\r\n        if (value === null || value === undefined || value === '') return 0;\r\n        if (typeof value === 'number' && Number.isFinite(value)) return value;\r\n        const numeric = parseFloat(value);\r\n        return Number.isFinite(numeric) ? numeric : 0;\r\n    }\r\n\r\n    function formatCartPrice(value) {\r\n        const amount = parseAmount(value);\r\n        return Templates.formatPrice(amount);\r\n    }\r\n\r\n    async function init() {\r\n        await loadCart();\r\n        initCouponForm();\r\n    }\r\n\r\n    async function loadCart() {\r\n        const container = document.getElementById('cart-container');\r\n        if (!container) return;\r\n\r\n        Loader.show(container, 'skeleton');\r\n\r\n        try {\r\n            const response = await CartApi.getCart();\r\n            cart = response.data;\r\n\r\n            renderCart(cart);\r\n        } catch (error) {\r\n            console.error('Failed to load cart:', error);\r\n            container.innerHTML = '<p class=\"text-red-500 text-center py-8\">Failed to load cart. Please try again.</p>';\r\n        }\r\n    }\r\n\r\n    function renderCart(cartData) {\r\n        const container = document.getElementById('cart-container');\r\n        if (!container) return;\r\n\r\n        const items = cartData?.items || [];\r\n        const summary = cartData?.summary || {};\r\n        const subtotalValue = summary.subtotal ?? cartData?.subtotal ?? 0;\r\n        const discountValue = parseAmount(summary.discount_amount ?? cartData?.discount_amount);\r\n        const taxValue = summary.tax_amount ?? cartData?.tax_amount ?? 0;\r\n        const totalValue = summary.total ?? cartData?.total ?? 0;\r\n        const couponCode = cartData?.coupon?.code || '';\r\n\r\n        if (items.length === 0) {\r\n            container.innerHTML = `\r\n                <div class=\"text-center py-16\">\r\n                    <svg class=\"w-24 h-24 text-gray-300 mx-auto mb-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z\"/>\r\n                    </svg>\r\n                    <h2 class=\"text-2xl font-bold text-gray-900 mb-2\">Your cart is empty</h2>\r\n                    <p class=\"text-gray-600 mb-8\">Looks like you haven't added any items to your cart yet.</p>\r\n                    <a href=\"/products/\" class=\"inline-flex items-center px-6 py-3 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 transition-colors\">\r\n                        Start Shopping\r\n                        <svg class=\"w-5 h-5 ml-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\"/>\r\n                        </svg>\r\n                    </a>\r\n                </div>\r\n            `;\r\n            return;\r\n        }\r\n\r\n        container.innerHTML = `\r\n            <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                <!-- Cart Items -->\r\n                <div class=\"lg:col-span-2\">\r\n                    <div class=\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden\">\r\n                        <div class=\"px-6 py-4 border-b border-gray-100\">\r\n                            <h2 class=\"text-lg font-semibold text-gray-900\">Shopping Cart (${items.length} items)</h2>\r\n                        </div>\r\n                        <div id=\"cart-items\" class=\"divide-y divide-gray-100\">\r\n                            ${items.map(item => renderCartItem(item)).join('')}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- Continue Shopping -->\r\n                    <div class=\"mt-6 flex items-center justify-between\">\r\n                        <a href=\"/products/\" class=\"inline-flex items-center text-primary-600 hover:text-primary-700 font-medium\">\r\n                            <svg class=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 16l-4-4m0 0l4-4m-4 4h18\"/>\r\n                            </svg>\r\n                            Continue Shopping\r\n                        </a>\r\n                        <button id=\"clear-cart-btn\" class=\"text-red-600 hover:text-red-700 font-medium\">\r\n                            Clear Cart\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Order Summary -->\r\n                <div class=\"lg:col-span-1\">\r\n                    <div class=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6 sticky top-4\">\r\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Order Summary</h3>\r\n                        \r\n                        <div class=\"space-y-3 text-sm\">\r\n                            <div class=\"flex justify-between\">\r\n                                <span class=\"text-gray-600\">Subtotal</span>\r\n                                <span class=\"font-medium text-gray-900\">${formatCartPrice(subtotalValue)}</span>\r\n                            </div>\r\n                            ${discountValue > 0 ? `\r\n                                <div class=\"flex justify-between text-green-600\">\r\n                                    <span>Discount</span>\r\n                                    <span>-${formatCartPrice(discountValue)}</span>\r\n                                </div>\r\n                            ` : ''}\r\n                            ${parseAmount(taxValue) > 0 ? `\r\n                                <div class=\"flex justify-between\">\r\n                                    <span class=\"text-gray-600\">Tax</span>\r\n                                    <span class=\"font-medium text-gray-900\">${formatCartPrice(taxValue)}</span>\r\n                                </div>\r\n                            ` : ''}\r\n                            <div class=\"pt-3 border-t border-gray-200\">\r\n                                <div class=\"flex justify-between\">\r\n                                    <span class=\"text-base font-semibold text-gray-900\">Total</span>\r\n                                    <span class=\"text-base font-bold text-gray-900\">${formatCartPrice(totalValue)}</span>\r\n                                </div>\r\n                                <p class=\"text-xs text-gray-500 mt-1\">Shipping calculated at checkout</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!-- Coupon Form -->\r\n                        <div class=\"mt-6 pt-6 border-t border-gray-200\">\r\n                            ${couponCode ? `\r\n                                <div class=\"flex items-center justify-between px-3 py-2 bg-green-50 rounded-lg\">\r\n                                    <div>\r\n                                        <p class=\"text-sm font-medium text-green-700\">Coupon applied</p>\r\n                                        <p class=\"text-xs text-green-600\">${Templates.escapeHtml(couponCode)}</p>\r\n                                    </div>\r\n                                    <button id=\"remove-coupon-btn\" class=\"text-green-600 hover:text-green-700\" aria-label=\"Remove coupon\">\r\n                                        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\r\n                                        </svg>\r\n                                    </button>\r\n                                </div>\r\n                            ` : `\r\n                                <form id=\"coupon-form\" class=\"flex gap-2\">\r\n                                    <input \r\n                                        type=\"text\" \r\n                                        id=\"coupon-code\" \r\n                                        placeholder=\"Enter coupon code\"\r\n                                        class=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-primary-500 focus:border-primary-500\"\r\n                                        value=\"${Templates.escapeHtml(couponCode)}\"\r\n                                    >\r\n                                    <button type=\"submit\" class=\"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors text-sm\">\r\n                                        Apply\r\n                                    </button>\r\n                                </form>\r\n                            `}\r\n                        </div>\r\n\r\n                        <!-- Checkout Button -->\r\n                        <a href=\"${window.BUNORAA_CART && window.BUNORAA_CART.checkoutUrl ? window.BUNORAA_CART.checkoutUrl : '/checkout/'}\" class=\"mt-6 w-full px-6 py-3 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 transition-colors flex items-center justify-center gap-2\">\r\n                            Proceed to Checkout\r\n                            <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\"/>\r\n                            </svg>\r\n                        </a>\r\n\r\n                        <!-- Trust Badges -->\r\n                        <div class=\"mt-6 pt-6 border-t border-gray-200\">\r\n                            <div class=\"flex items-center justify-center gap-4 text-gray-400\">\r\n                                <div class=\"flex flex-col items-center\">\r\n                                    <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\"/>\r\n                                    </svg>\r\n                                    <span class=\"text-xs mt-1\">Secure</span>\r\n                                </div>\r\n                                <div class=\"flex flex-col items-center\">\r\n                                    <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\"/>\r\n                                    </svg>\r\n                                    <span class=\"text-xs mt-1\">Protected</span>\r\n                                </div>\r\n                                <div class=\"flex flex-col items-center\">\r\n                                    <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z\"/>\r\n                                    </svg>\r\n                                    <span class=\"text-xs mt-1\">Easy Pay</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n\r\n        bindCartEvents();\r\n    }\r\n\r\n    function renderCartItem(item) {\r\n        const product = item.product || {};\r\n        const variant = item.variant;\r\n        const productSlug = product.slug || '#';\r\n        const productName = product.name || 'Product';\r\n        const productImage = product.primary_image || product.image || '/static/images/placeholder.png';\r\n        const priceAtAdd = parseAmount(item.price_at_add);\r\n        const currentPrice = parseAmount(item.current_price);\r\n        const lineTotal = parseAmount(item.line_total) || currentPrice * (item.quantity || 1);\r\n        const showOriginal = priceAtAdd > currentPrice;\r\n\r\n        return `\r\n            <div class=\"cart-item p-6 flex gap-4\" data-item-id=\"${item.id}\">\r\n                <div class=\"flex-shrink-0 w-24 h-24 bg-gray-100 rounded-lg overflow-hidden\">\r\n                    <a href=\"/products/${productSlug}/\">\r\n                        <img \r\n                            src=\"${productImage}\" \r\n                            alt=\"${Templates.escapeHtml(productName)}\"\r\n                            class=\"w-full h-full object-cover\"\r\n                        >\r\n                    </a>\r\n                </div>\r\n                <div class=\"flex-1 min-w-0\">\r\n                    <div class=\"flex justify-between\">\r\n                        <div>\r\n                            <h3 class=\"font-medium text-gray-900\">\r\n                                <a href=\"/products/${productSlug}/\" class=\"hover:text-primary-600\">\r\n                                    ${Templates.escapeHtml(productName)}\r\n                                </a>\r\n                            </h3>\r\n                            ${variant ? `\r\n                                <p class=\"text-sm text-gray-500 mt-1\">${Templates.escapeHtml(variant.name || variant.value)}</p>\r\n                            ` : ''}\r\n                        </div>\r\n                        <button class=\"remove-item-btn text-gray-400 hover:text-red-500 transition-colors\" aria-label=\"Remove item\">\r\n                            <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"/>\r\n                            </svg>\r\n                        </button>\r\n                    </div>\r\n                    <div class=\"mt-4 flex items-center justify-between\">\r\n                        <div class=\"flex items-center border border-gray-300 rounded-lg\">\r\n                            <button \r\n                                class=\"qty-decrease px-3 py-1 text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors\"\r\n                                aria-label=\"Decrease quantity\"\r\n                            >\r\n                                <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20 12H4\"/>\r\n                                </svg>\r\n                            </button>\r\n                            <input \r\n                                type=\"number\" \r\n                                class=\"item-quantity w-12 text-center border-0 focus:ring-0 text-sm\"\r\n                                value=\"${item.quantity}\" \r\n                                min=\"1\" \r\n                                max=\"${product.stock_quantity || 99}\"\r\n                            >\r\n                            <button \r\n                                class=\"qty-increase px-3 py-1 text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors\"\r\n                                aria-label=\"Increase quantity\"\r\n                            >\r\n                                <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"/>\r\n                                </svg>\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"text-right\">\r\n                            ${showOriginal ? `\r\n                                <span class=\"text-sm text-gray-400 line-through\">${formatCartPrice(priceAtAdd * item.quantity)}</span>\r\n                            ` : ''}\r\n                            <span class=\"font-semibold text-gray-900 block\">${formatCartPrice(lineTotal)}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    function bindCartEvents() {\r\n        const cartItems = document.getElementById('cart-items');\r\n        const clearCartBtn = document.getElementById('clear-cart-btn');\r\n        const removeCouponBtn = document.getElementById('remove-coupon-btn');\r\n\r\n        cartItems?.addEventListener('click', async (e) => {\r\n            const cartItem = e.target.closest('.cart-item');\r\n            if (!cartItem) return;\r\n\r\n            const itemId = cartItem.dataset.itemId;\r\n            const qtyInput = cartItem.querySelector('.item-quantity');\r\n\r\n            if (e.target.closest('.remove-item-btn')) {\r\n                await removeItem(itemId);\r\n            } else if (e.target.closest('.qty-decrease')) {\r\n                const current = parseInt(qtyInput.value) || 1;\r\n                if (current > 1) {\r\n                    await updateQuantity(itemId, current - 1);\r\n                }\r\n            } else if (e.target.closest('.qty-increase')) {\r\n                const current = parseInt(qtyInput.value) || 1;\r\n                const max = parseInt(qtyInput.max) || 99;\r\n                if (current < max) {\r\n                    await updateQuantity(itemId, current + 1);\r\n                }\r\n            }\r\n        });\r\n\r\n        cartItems?.addEventListener('change', async (e) => {\r\n            if (e.target.classList.contains('item-quantity')) {\r\n                const cartItem = e.target.closest('.cart-item');\r\n                const itemId = cartItem?.dataset.itemId;\r\n                const quantity = parseInt(e.target.value) || 1;\r\n                \r\n                if (itemId && quantity > 0) {\r\n                    await updateQuantity(itemId, quantity);\r\n                }\r\n            }\r\n        });\r\n\r\n        clearCartBtn?.addEventListener('click', async () => {\r\n            const confirmed = await Modal.confirm({\r\n                title: 'Clear Cart',\r\n                message: 'Are you sure you want to remove all items from your cart?',\r\n                confirmText: 'Clear Cart',\r\n                cancelText: 'Cancel'\r\n            });\r\n\r\n            if (confirmed) {\r\n                await clearCart();\r\n            }\r\n        });\r\n\r\n        removeCouponBtn?.addEventListener('click', async () => {\r\n            await removeCoupon();\r\n        });\r\n    }\r\n\r\n    async function updateQuantity(itemId, quantity) {\r\n        try {\r\n            await CartApi.updateItem(itemId, quantity);\r\n            await loadCart();\r\n            document.dispatchEvent(new CustomEvent('cart:updated'));\r\n        } catch (error) {\r\n            Toast.error(error.message || 'Failed to update quantity.');\r\n        }\r\n    }\r\n\r\n    async function removeItem(itemId) {\r\n        try {\r\n            await CartApi.removeItem(itemId);\r\n            Toast.success('Item removed from cart.');\r\n            await loadCart();\r\n            document.dispatchEvent(new CustomEvent('cart:updated'));\r\n        } catch (error) {\r\n            Toast.error(error.message || 'Failed to remove item.');\r\n        }\r\n    }\r\n\r\n    async function clearCart() {\r\n        try {\r\n            await CartApi.clearCart();\r\n            Toast.success('Cart cleared.');\r\n            await loadCart();\r\n            document.dispatchEvent(new CustomEvent('cart:updated'));\r\n        } catch (error) {\r\n            Toast.error(error.message || 'Failed to clear cart.');\r\n        }\r\n    }\r\n\r\n    function initCouponForm() {\r\n        const form = document.getElementById('coupon-form');\r\n        \r\n        form?.addEventListener('submit', async (e) => {\r\n            e.preventDefault();\r\n            \r\n            const codeInput = document.getElementById('coupon-code');\r\n            const code = codeInput?.value.trim();\r\n\r\n            if (!code) {\r\n                Toast.error('Please enter a coupon code.');\r\n                return;\r\n            }\r\n\r\n            const submitBtn = form.querySelector('button[type=\"submit\"]');\r\n            submitBtn.disabled = true;\r\n            submitBtn.textContent = 'Applying...';\r\n\r\n            try {\r\n                await CartApi.applyCoupon(code);\r\n                Toast.success('Coupon applied!');\r\n                await loadCart();\r\n            } catch (error) {\r\n                Toast.error(error.message || 'Invalid coupon code.');\r\n            } finally {\r\n                submitBtn.disabled = false;\r\n                submitBtn.textContent = 'Apply';\r\n            }\r\n        });\r\n    }\r\n\r\n    async function removeCoupon() {\r\n        try {\r\n            await CartApi.removeCoupon();\r\n            Toast.success('Coupon removed.');\r\n            await loadCart();\r\n        } catch (error) {\r\n            Toast.error(error.message || 'Failed to remove coupon.');\r\n        }\r\n    }\r\n\r\n    function destroy() {\r\n        cart = null;\r\n    }\r\n\r\n    return {\r\n        init,\r\n        destroy\r\n    };\r\n})();\r\n\r\nwindow.CartPage = CartPage;\r\nexport default CartPage;\r\n", "/**\n * Category Page\n * @module pages/category\n */\n\nconst CategoryPage = (function() {\n    'use strict';\n\n    let currentFilters = {};\n    let currentPage = 1;\n    let currentCategory = null;\n    let abortController = null;\n    let initialized = false;\n\n    async function init() {\n        // Prevent multiple initializations\n        if (initialized) return;\n        initialized = true;\n\n        const categorySlug = getCategorySlugFromUrl();\n        \n        // If no category slug, this is the categories list page - don't try to load a specific category\n        if (!categorySlug) {\n            // Just initialize any list-specific functionality if needed\n            return;\n        }\n\n        // Check if content is already server-rendered\n        const headerContainer = document.getElementById('category-header');\n        if (headerContainer && headerContainer.querySelector('h1')) {\n            // Server-rendered content exists - just bind event handlers\n            initFilterHandlers();\n            initSortHandler();\n            initViewToggle();\n            return;\n        }\n\n        currentFilters = getFiltersFromUrl();\n        currentPage = parseInt(new URLSearchParams(window.location.search).get('page')) || 1;\n\n        await loadCategory(categorySlug);\n        initFilterHandlers();\n        initSortHandler();\n        initViewToggle();\n    }\n\n    function getCategorySlugFromUrl() {\n        const path = window.location.pathname;\n        const match = path.match(/\\/categories\\/([^\\/]+)/);\n        return match ? match[1] : null;\n    }\n\n    function getFiltersFromUrl() {\n        const params = new URLSearchParams(window.location.search);\n        const filters = {};\n\n        if (params.get('min_price')) filters.min_price = params.get('min_price');\n        if (params.get('max_price')) filters.max_price = params.get('max_price');\n        if (params.get('ordering')) filters.ordering = params.get('ordering');\n        if (params.get('in_stock')) filters.in_stock = params.get('in_stock') === 'true';\n        if (params.get('on_sale')) filters.on_sale = params.get('on_sale') === 'true';\n        \n        const attributes = params.getAll('attr');\n        if (attributes.length) filters.attributes = attributes;\n\n        return filters;\n    }\n\n    async function loadCategory(slug) {\n        const headerContainer = document.getElementById('category-header');\n        const productsContainer = document.getElementById('category-products');\n        const filtersContainer = document.getElementById('category-filters');\n\n        if (headerContainer) Loader.show(headerContainer, 'skeleton');\n        if (productsContainer) Loader.show(productsContainer, 'skeleton');\n\n        try {\n            const categoryResponse = await CategoriesApi.getCategory(slug);\n            currentCategory = categoryResponse.data || categoryResponse;\n\n            if (!currentCategory) {\n                window.location.href = '/404/';\n                return;\n            }\n\n            renderCategoryHeader(currentCategory);\n            await loadBreadcrumbs(currentCategory);\n            await loadFilters(currentCategory);\n            await loadProducts();\n            await loadSubcategories(currentCategory);\n        } catch (error) {\n            console.error('Failed to load category:', error);\n            if (headerContainer) {\n                headerContainer.innerHTML = '<p class=\"text-red-500\">Failed to load category.</p>';\n            }\n        }\n    }\n\n    function renderCategoryHeader(category) {\n        const container = document.getElementById('category-header');\n        if (!container) return;\n\n        document.title = `${category.name} | Bunoraa`;\n\n        container.innerHTML = `\n            <div class=\"relative py-8 md:py-12\">\n                ${category.image ? `\n                    <div class=\"absolute inset-0 overflow-hidden rounded-2xl\">\n                        <img src=\"${category.image}\" alt=\"\" class=\"w-full h-full object-cover opacity-20\">\n                        <div class=\"absolute inset-0 bg-gradient-to-r from-white via-white/95 to-white/80\"></div>\n                    </div>\n                ` : ''}\n                <div class=\"relative\">\n                    <h1 class=\"text-3xl md:text-4xl font-bold text-gray-900 mb-2\">${Templates.escapeHtml(category.name)}</h1>\n                    ${category.description ? `\n                        <p class=\"text-gray-600 max-w-2xl\">${Templates.escapeHtml(category.description)}</p>\n                    ` : ''}\n                    ${category.product_count ? `\n                        <p class=\"mt-4 text-sm text-gray-500\">${category.product_count} products</p>\n                    ` : ''}\n                </div>\n            </div>\n        `;\n    }\n\n    async function loadBreadcrumbs(category) {\n        const container = document.getElementById('breadcrumbs');\n        if (!container) return;\n\n        try {\n            const response = await CategoriesApi.getBreadcrumbs(category.id);\n            const breadcrumbs = response.data || [];\n            \n            const items = [\n                { label: 'Home', url: '/' },\n                { label: 'Categories', url: '/categories/' },\n                ...breadcrumbs.map(item => ({\n                    label: item.name,\n                    url: `/categories/${item.slug}/`\n                }))\n            ];\n\n            container.innerHTML = Breadcrumb.render(items);\n        } catch (error) {\n            console.error('Failed to load breadcrumbs:', error);\n        }\n    }\n\n    async function loadFilters(category) {\n        const container = document.getElementById('category-filters');\n        if (!container) return;\n\n        try {\n            const response = await ProductsApi.getFilterOptions({ category: category.id });\n            const filterOptions = response.data || {};\n\n            container.innerHTML = `\n                <div class=\"space-y-6\">\n                    <!-- Price Range -->\n                    <div class=\"border-b border-gray-200 pb-6\">\n                        <h3 class=\"text-sm font-semibold text-gray-900 mb-4\">Price Range</h3>\n                        <div class=\"flex items-center gap-2\">\n                            <input \n                                type=\"number\" \n                                id=\"filter-min-price\" \n                                placeholder=\"Min\"\n                                value=\"${currentFilters.min_price || ''}\"\n                                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-primary-500 focus:border-primary-500\"\n                            >\n                            <span class=\"text-gray-400\">-</span>\n                            <input \n                                type=\"number\" \n                                id=\"filter-max-price\" \n                                placeholder=\"Max\"\n                                value=\"${currentFilters.max_price || ''}\"\n                                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-primary-500 focus:border-primary-500\"\n                            >\n                        </div>\n                        <button id=\"apply-price-filter\" class=\"mt-3 w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm font-medium rounded-lg transition-colors\">\n                            Apply\n                        </button>\n                    </div>\n\n                    <!-- Availability -->\n                    <div class=\"border-b border-gray-200 pb-6\">\n                        <h3 class=\"text-sm font-semibold text-gray-900 mb-4\">Availability</h3>\n                        <div class=\"space-y-2\">\n                            <label class=\"flex items-center\">\n                                <input \n                                    type=\"checkbox\" \n                                    id=\"filter-in-stock\"\n                                    ${currentFilters.in_stock ? 'checked' : ''}\n                                    class=\"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500\"\n                                >\n                                <span class=\"ml-2 text-sm text-gray-600\">In Stock</span>\n                            </label>\n                            <label class=\"flex items-center\">\n                                <input \n                                    type=\"checkbox\" \n                                    id=\"filter-on-sale\"\n                                    ${currentFilters.on_sale ? 'checked' : ''}\n                                    class=\"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500\"\n                                >\n                                <span class=\"ml-2 text-sm text-gray-600\">On Sale</span>\n                            </label>\n                        </div>\n                    </div>\n\n                    ${filterOptions.attributes && filterOptions.attributes.length ? `\n                        ${filterOptions.attributes.map(attr => `\n                            <div class=\"border-b border-gray-200 pb-6\">\n                                <h3 class=\"text-sm font-semibold text-gray-900 mb-4\">${Templates.escapeHtml(attr.name)}</h3>\n                                <div class=\"space-y-2 max-h-48 overflow-y-auto\">\n                                    ${attr.values.map(value => `\n                                        <label class=\"flex items-center\">\n                                            <input \n                                                type=\"checkbox\" \n                                                name=\"attr-${attr.slug}\"\n                                                value=\"${Templates.escapeHtml(value.value)}\"\n                                                ${currentFilters.attributes?.includes(`${attr.slug}:${value.value}`) ? 'checked' : ''}\n                                                class=\"filter-attribute w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500\"\n                                                data-attribute=\"${attr.slug}\"\n                                            >\n                                            <span class=\"ml-2 text-sm text-gray-600\">${Templates.escapeHtml(value.value)}</span>\n                                            ${value.count ? `<span class=\"ml-auto text-xs text-gray-400\">(${value.count})</span>` : ''}\n                                        </label>\n                                    `).join('')}\n                                </div>\n                            </div>\n                        `).join('')}\n                    ` : ''}\n\n                    <!-- Clear Filters -->\n                    <button id=\"clear-filters\" class=\"w-full px-4 py-2 border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors\">\n                        Clear All Filters\n                    </button>\n                </div>\n            `;\n\n            bindFilterEvents();\n        } catch (error) {\n            console.error('Failed to load filters:', error);\n            container.innerHTML = '';\n        }\n    }\n\n    function bindFilterEvents() {\n        const applyPriceBtn = document.getElementById('apply-price-filter');\n        const inStockCheckbox = document.getElementById('filter-in-stock');\n        const onSaleCheckbox = document.getElementById('filter-on-sale');\n        const clearBtn = document.getElementById('clear-filters');\n        const attributeCheckboxes = document.querySelectorAll('.filter-attribute');\n\n        applyPriceBtn?.addEventListener('click', () => {\n            const minPrice = document.getElementById('filter-min-price')?.value;\n            const maxPrice = document.getElementById('filter-max-price')?.value;\n            \n            if (minPrice) currentFilters.min_price = minPrice;\n            else delete currentFilters.min_price;\n            \n            if (maxPrice) currentFilters.max_price = maxPrice;\n            else delete currentFilters.max_price;\n\n            applyFilters();\n        });\n\n        inStockCheckbox?.addEventListener('change', (e) => {\n            if (e.target.checked) currentFilters.in_stock = true;\n            else delete currentFilters.in_stock;\n            applyFilters();\n        });\n\n        onSaleCheckbox?.addEventListener('change', (e) => {\n            if (e.target.checked) currentFilters.on_sale = true;\n            else delete currentFilters.on_sale;\n            applyFilters();\n        });\n\n        attributeCheckboxes.forEach(checkbox => {\n            checkbox.addEventListener('change', () => {\n                updateAttributeFilters();\n                applyFilters();\n            });\n        });\n\n        clearBtn?.addEventListener('click', () => {\n            currentFilters = {};\n            currentPage = 1;\n            applyFilters();\n        });\n    }\n\n    function updateAttributeFilters() {\n        const checkboxes = document.querySelectorAll('.filter-attribute:checked');\n        const attributes = [];\n        \n        checkboxes.forEach(cb => {\n            attributes.push(`${cb.dataset.attribute}:${cb.value}`);\n        });\n\n        if (attributes.length) {\n            currentFilters.attributes = attributes;\n        } else {\n            delete currentFilters.attributes;\n        }\n    }\n\n    function applyFilters() {\n        currentPage = 1;\n        updateUrl();\n        loadProducts();\n    }\n\n    function updateUrl() {\n        const params = new URLSearchParams();\n        \n        if (currentFilters.min_price) params.set('min_price', currentFilters.min_price);\n        if (currentFilters.max_price) params.set('max_price', currentFilters.max_price);\n        if (currentFilters.ordering) params.set('ordering', currentFilters.ordering);\n        if (currentFilters.in_stock) params.set('in_stock', 'true');\n        if (currentFilters.on_sale) params.set('on_sale', 'true');\n        if (currentFilters.attributes) {\n            currentFilters.attributes.forEach(attr => params.append('attr', attr));\n        }\n        if (currentPage > 1) params.set('page', currentPage);\n\n        const newUrl = `${window.location.pathname}${params.toString() ? '?' + params.toString() : ''}`;\n        window.history.pushState({}, '', newUrl);\n    }\n\n    async function loadProducts() {\n        const container = document.getElementById('category-products');\n        if (!container || !currentCategory) return;\n\n        if (abortController) {\n            abortController.abort();\n        }\n        abortController = new AbortController();\n\n        Loader.show(container, 'skeleton');\n\n        try {\n            const params = {\n                category: currentCategory.id,\n                page: currentPage,\n                limit: 12,\n                ...currentFilters\n            };\n\n            if (currentFilters.attributes) {\n                delete params.attributes;\n                currentFilters.attributes.forEach(attr => {\n                    const [key, value] = attr.split(':');\n                    params[`attr_${key}`] = value;\n                });\n            }\n\n            const response = await ProductsApi.getAll(params);\n            const products = response.data || [];\n            const meta = response.meta || {};\n\n            renderProducts(products, meta);\n        } catch (error) {\n            if (error.name === 'AbortError') return;\n            console.error('Failed to load products:', error);\n            container.innerHTML = '<p class=\"text-red-500 text-center py-8\">Failed to load products. Please try again.</p>';\n        }\n    }\n\n    function renderProducts(products, meta) {\n        const container = document.getElementById('category-products');\n        if (!container) return;\n\n        const viewMode = Storage.get('productViewMode') || 'grid';\n        const gridClass = viewMode === 'list' \n            ? 'space-y-4' \n            : 'grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6';\n\n        if (products.length === 0) {\n            container.innerHTML = `\n                <div class=\"text-center py-12\">\n                    <svg class=\"w-16 h-16 text-gray-300 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"/>\n                    </svg>\n                    <h3 class=\"text-lg font-medium text-gray-900 mb-2\">No products found</h3>\n                    <p class=\"text-gray-500 mb-4\">Try adjusting your filters or browse other categories.</p>\n                    <button id=\"clear-filters-empty\" class=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\">\n                        Clear Filters\n                    </button>\n                </div>\n            `;\n\n            document.getElementById('clear-filters-empty')?.addEventListener('click', () => {\n                currentFilters = {};\n                currentPage = 1;\n                applyFilters();\n            });\n            return;\n        }\n\n        container.innerHTML = `\n            <div class=\"${gridClass}\">\n                ${products.map(product => ProductCard.render(product, { layout: viewMode })).join('')}\n            </div>\n            ${meta.total_pages > 1 ? `\n                <div id=\"products-pagination\" class=\"mt-8\"></div>\n            ` : ''}\n        `;\n\n        ProductCard.bindEvents(container);\n\n        if (meta.total_pages > 1) {\n            const paginationContainer = document.getElementById('products-pagination');\n            paginationContainer.innerHTML = Pagination.render({\n                currentPage: meta.current_page || currentPage,\n                totalPages: meta.total_pages,\n                totalItems: meta.total\n            });\n\n            paginationContainer.addEventListener('click', (e) => {\n                const pageBtn = e.target.closest('[data-page]');\n                if (pageBtn) {\n                    currentPage = parseInt(pageBtn.dataset.page);\n                    updateUrl();\n                    loadProducts();\n                    window.scrollTo({ top: 0, behavior: 'smooth' });\n                }\n            });\n        }\n    }\n\n    async function loadSubcategories(category) {\n        const container = document.getElementById('subcategories');\n        if (!container) return;\n\n        try {\n            const response = await CategoriesApi.getSubcategories(category.id);\n            const subcategories = response.data || [];\n\n            if (subcategories.length === 0) {\n                container.innerHTML = '';\n                return;\n            }\n\n            container.innerHTML = `\n                <div class=\"mb-8\">\n                    <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Browse Subcategories</h2>\n                    <div class=\"flex flex-wrap gap-2\">\n                        ${subcategories.map(sub => `\n                            <a href=\"/categories/${sub.slug}/\" class=\"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-full text-sm transition-colors\">\n                                ${Templates.escapeHtml(sub.name)}\n                                ${sub.product_count ? `<span class=\"text-gray-400 ml-1\">(${sub.product_count})</span>` : ''}\n                            </a>\n                        `).join('')}\n                    </div>\n                </div>\n            `;\n        } catch (error) {\n            console.error('Failed to load subcategories:', error);\n            container.innerHTML = '';\n        }\n    }\n\n    function initFilterHandlers() {\n        const mobileFilterBtn = document.getElementById('mobile-filter-btn');\n        const filterSidebar = document.getElementById('filter-sidebar');\n        const closeFilterBtn = document.getElementById('close-filter-btn');\n\n        mobileFilterBtn?.addEventListener('click', () => {\n            filterSidebar?.classList.remove('hidden');\n            document.body.classList.add('overflow-hidden');\n        });\n\n        closeFilterBtn?.addEventListener('click', () => {\n            filterSidebar?.classList.add('hidden');\n            document.body.classList.remove('overflow-hidden');\n        });\n    }\n\n    function initSortHandler() {\n        const sortSelect = document.getElementById('sort-select');\n        if (!sortSelect) return;\n\n        sortSelect.value = currentFilters.ordering || '';\n\n        sortSelect.addEventListener('change', (e) => {\n            if (e.target.value) {\n                currentFilters.ordering = e.target.value;\n            } else {\n                delete currentFilters.ordering;\n            }\n            applyFilters();\n        });\n    }\n\n    function initViewToggle() {\n        const gridBtn = document.getElementById('view-grid');\n        const listBtn = document.getElementById('view-list');\n        const currentView = Storage.get('productViewMode') || 'grid';\n\n        if (currentView === 'list') {\n            gridBtn?.classList.remove('bg-gray-200');\n            listBtn?.classList.add('bg-gray-200');\n        }\n\n        gridBtn?.addEventListener('click', () => {\n            Storage.set('productViewMode', 'grid');\n            gridBtn.classList.add('bg-gray-200');\n            listBtn?.classList.remove('bg-gray-200');\n            loadProducts();\n        });\n\n        listBtn?.addEventListener('click', () => {\n            Storage.set('productViewMode', 'list');\n            listBtn.classList.add('bg-gray-200');\n            gridBtn?.classList.remove('bg-gray-200');\n            loadProducts();\n        });\n    }\n\n    function destroy() {\n        if (abortController) {\n            abortController.abort();\n            abortController = null;\n        }\n        currentFilters = {};\n        currentPage = 1;\n        currentCategory = null;\n        initialized = false;\n    }\n\n    return {\n        init,\n        destroy\n    };\n})();\n\nwindow.CategoryPage = CategoryPage;\nexport default CategoryPage;\n", "/**\r\n * Checkout Page\r\n * @module pages/checkout\r\n */\r\n\r\nconst CheckoutPage = (async function() {\r\n    'use strict';\r\n\r\n    let cart = null;\r\n    let checkoutData = {\r\n        shipping_address: null,\r\n        billing_address: null,\r\n        same_as_shipping: true,\r\n        shipping_method: null,\r\n        payment_method: null,\r\n        notes: ''\r\n    };\r\n    let currentStep = 1;\r\n\r\n    async function init() {\r\n        if (!AuthApi.isAuthenticated()) {\r\n            const continueAsGuest = document.getElementById('guest-checkout');\r\n            if (!continueAsGuest) {\r\n                Toast.info('Please login to continue checkout.');\r\n                window.location.href = '/account/login/?next=/checkout/';\r\n                return;\r\n            }\r\n        }\r\n\r\n        await loadCart();\r\n        \r\n        if (!cart || !cart.items || cart.items.length === 0) {\r\n            Toast.warning('Your cart is empty.');\r\n            window.location.href = '/cart/';\r\n            return;\r\n        }\r\n\r\n        await loadUserAddresses();\r\n        initStepNavigation();\r\n        initFormValidation();\r\n        initOrderSummaryToggle();\r\n    }\r\n\r\n    async function loadCart() {\r\n        try {\r\n            const response = await CartApi.getCart();\r\n            cart = response.data;\r\n            renderOrderSummary();\r\n        } catch (error) {\r\n            console.error('Failed to load cart:', error);\r\n            Toast.error('Failed to load cart.');\r\n        }\r\n    }\r\n\r\n    function renderOrderSummary() {\r\n        const container = document.getElementById('order-summary');\r\n        if (!container || !cart) return;\r\n\r\n        container.innerHTML = `\r\n            <div class=\"bg-gray-50 rounded-xl p-6\">\r\n                <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Order Summary</h3>\r\n                \r\n                <!-- Cart Items -->\r\n                <div class=\"space-y-3 max-h-64 overflow-y-auto mb-4\">\r\n                    ${cart.items.map(item => `\r\n                        <div class=\"flex gap-3\">\r\n                            <div class=\"flex-shrink-0 w-16 h-16 bg-gray-200 rounded-lg overflow-hidden\">\r\n                                <img src=\"${item.product?.image || '/static/images/placeholder.png'}\" alt=\"\" class=\"w-full h-full object-cover\">\r\n                            </div>\r\n                            <div class=\"flex-1 min-w-0\">\r\n                                <h4 class=\"text-sm font-medium text-gray-900 truncate\">${Templates.escapeHtml(item.product?.name)}</h4>\r\n                                ${item.variant ? `<p class=\"text-xs text-gray-500\">${Templates.escapeHtml(item.variant.name || item.variant.value)}</p>` : ''}\r\n                                <div class=\"flex justify-between mt-1\">\r\n                                    <span class=\"text-xs text-gray-500\">Qty: ${item.quantity}</span>\r\n                                    <span class=\"text-sm font-medium\">${Templates.formatPrice(item.price * item.quantity)}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    `).join('')}\r\n                </div>\r\n\r\n                <div class=\"border-t border-gray-200 pt-4 space-y-2 text-sm\">\r\n                    <div class=\"flex justify-between\">\r\n                        <span class=\"text-gray-600\">Subtotal</span>\r\n                        <span class=\"font-medium\">${Templates.formatPrice(cart.subtotal || 0)}</span>\r\n                    </div>\r\n                    ${cart.discount_amount ? `\r\n                        <div class=\"flex justify-between text-green-600\">\r\n                            <span>Discount</span>\r\n                            <span>-${Templates.formatPrice(cart.discount_amount)}</span>\r\n                        </div>\r\n                    ` : ''}\r\n                    <div class=\"flex justify-between\" id=\"shipping-cost-row\">\r\n                        <span class=\"text-gray-600\">Shipping</span>\r\n                        <span class=\"font-medium\" id=\"shipping-cost\">Calculated next</span>\r\n                    </div>\r\n                    ${cart.tax_amount ? `\r\n                        <div class=\"flex justify-between\">\r\n                            <span class=\"text-gray-600\">Tax</span>\r\n                            <span class=\"font-medium\">${Templates.formatPrice(cart.tax_amount)}</span>\r\n                        </div>\r\n                    ` : ''}\r\n                    <div class=\"flex justify-between pt-2 border-t border-gray-200\">\r\n                        <span class=\"text-base font-semibold text-gray-900\">Total</span>\r\n                        <span class=\"text-base font-bold text-gray-900\" id=\"order-total\">${Templates.formatPrice(cart.total || 0)}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    async function loadUserAddresses() {\r\n        if (!AuthApi.isAuthenticated()) return;\r\n\r\n        try {\r\n            const response = await AuthApi.getAddresses();\r\n            const addresses = response.data || [];\r\n\r\n            const shippingContainer = document.getElementById('saved-addresses');\r\n            if (shippingContainer && addresses.length > 0) {\r\n                shippingContainer.innerHTML = `\r\n                    <div class=\"mb-4\">\r\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Saved Addresses</label>\r\n                        <div class=\"space-y-2\">\r\n                            ${addresses.map(addr => `\r\n                                <label class=\"flex items-start p-3 border border-gray-200 rounded-lg cursor-pointer hover:border-primary-500 transition-colors\">\r\n                                    <input type=\"radio\" name=\"saved_address\" value=\"${addr.id}\" class=\"mt-1 text-primary-600 focus:ring-primary-500\">\r\n                                    <div class=\"ml-3\">\r\n                                        <p class=\"font-medium text-gray-900\">${Templates.escapeHtml(addr.full_name || `${addr.first_name} ${addr.last_name}`)}</p>\r\n                                        <p class=\"text-sm text-gray-600\">${Templates.escapeHtml(addr.address_line_1)}</p>\r\n                                        ${addr.address_line_2 ? `<p class=\"text-sm text-gray-600\">${Templates.escapeHtml(addr.address_line_2)}</p>` : ''}\r\n                                        <p class=\"text-sm text-gray-600\">${Templates.escapeHtml(addr.city)}, ${Templates.escapeHtml(addr.state || '')} ${Templates.escapeHtml(addr.postal_code)}</p>\r\n                                        <p class=\"text-sm text-gray-600\">${Templates.escapeHtml(addr.country)}</p>\r\n                                        ${addr.is_default ? '<span class=\"inline-block mt-1 px-2 py-0.5 bg-primary-100 text-primary-700 text-xs rounded\">Default</span>' : ''}\r\n                                    </div>\r\n                                </label>\r\n                            `).join('')}\r\n                            <label class=\"flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:border-primary-500 transition-colors\">\r\n                                <input type=\"radio\" name=\"saved_address\" value=\"new\" class=\"text-primary-600 focus:ring-primary-500\" checked>\r\n                                <span class=\"ml-3 text-gray-700\">Enter a new address</span>\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                `;\r\n\r\n                bindAddressSelection();\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to load addresses:', error);\r\n        }\r\n    }\r\n\r\n    function bindAddressSelection() {\r\n        const addressRadios = document.querySelectorAll('input[name=\"saved_address\"]');\r\n        const newAddressForm = document.getElementById('new-address-form');\r\n\r\n        addressRadios.forEach(radio => {\r\n            radio.addEventListener('change', (e) => {\r\n                if (e.target.value === 'new') {\r\n                    newAddressForm?.classList.remove('hidden');\r\n                } else {\r\n                    newAddressForm?.classList.add('hidden');\r\n                    checkoutData.shipping_address = e.target.value;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    function initStepNavigation() {\r\n        const steps = document.querySelectorAll('[data-step]');\r\n        const stepIndicators = document.querySelectorAll('[data-step-indicator]');\r\n        const nextBtns = document.querySelectorAll('[data-next-step]');\r\n        const prevBtns = document.querySelectorAll('[data-prev-step]');\r\n\r\n        function showStep(stepNumber) {\r\n            steps.forEach(step => {\r\n                step.classList.toggle('hidden', parseInt(step.dataset.step) !== stepNumber);\r\n            });\r\n\r\n            stepIndicators.forEach(indicator => {\r\n                const indicatorStep = parseInt(indicator.dataset.stepIndicator);\r\n                indicator.classList.toggle('bg-primary-600', indicatorStep <= stepNumber);\r\n                indicator.classList.toggle('text-white', indicatorStep <= stepNumber);\r\n                indicator.classList.toggle('bg-gray-200', indicatorStep > stepNumber);\r\n                indicator.classList.toggle('text-gray-600', indicatorStep > stepNumber);\r\n            });\r\n\r\n            currentStep = stepNumber;\r\n        }\r\n\r\n        nextBtns.forEach(btn => {\r\n            btn.addEventListener('click', async () => {\r\n                const valid = await validateCurrentStep();\r\n                if (valid) {\r\n                    if (currentStep === 1) {\r\n                        await loadShippingMethods();\r\n                    }\r\n                    showStep(currentStep + 1);\r\n                    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n                }\r\n            });\r\n        });\r\n\r\n        prevBtns.forEach(btn => {\r\n            btn.addEventListener('click', () => {\r\n                showStep(currentStep - 1);\r\n                window.scrollTo({ top: 0, behavior: 'smooth' });\r\n            });\r\n        });\r\n\r\n        showStep(1);\r\n    }\r\n\r\n    async function validateCurrentStep() {\r\n        switch (currentStep) {\r\n            case 1:\r\n                return validateShippingAddress();\r\n            case 2:\r\n                return validateShippingMethod();\r\n            case 3:\r\n                return validatePaymentMethod();\r\n            default:\r\n                return true;\r\n        }\r\n    }\r\n\r\n    // Inline error helpers\r\n    function clearStepErrors(container) {\r\n        if (!container) return;\r\n        container.querySelectorAll('[data-error-for]').forEach(el => el.remove());\r\n        container.querySelectorAll('.!border-red-500').forEach(el => el.classList.remove('!border-red-500'));\r\n    }\r\n\r\n    function showInlineError(fieldEl, message) {\r\n        if (!fieldEl) return;\r\n        // Remove existing error for this field\r\n        const name = fieldEl.getAttribute('name') || fieldEl.id || Math.random().toString(36).slice(2, 8);\r\n        const existing = fieldEl.closest('form')?.querySelector(`[data-error-for=\"${name}\"]`);\r\n        if (existing) existing.remove();\r\n\r\n        const msg = document.createElement('p');\r\n        msg.className = 'text-sm text-red-600 mt-1';\r\n        msg.setAttribute('data-error-for', name);\r\n        msg.textContent = message;\r\n\r\n        // Add visual state to the field\r\n        fieldEl.classList.add('!border-red-500');\r\n\r\n        // Insert after field or its parent wrapper\r\n        if (fieldEl.nextSibling) {\r\n            fieldEl.parentNode.insertBefore(msg, fieldEl.nextSibling);\r\n        } else {\r\n            fieldEl.parentNode.appendChild(msg);\r\n        }\r\n    }\r\n\r\n    function focusFirstInvalid(container) {\r\n        if (!container) return;\r\n        const first = container.querySelector('[data-error-for]');\r\n        if (!first) return;\r\n        // Try to focus associated input\r\n        const name = first.getAttribute('data-error-for');\r\n        const input = container.querySelector(`[name=\"${name}\"]`) || container.querySelector(`#${name}`) || first.previousElementSibling;\r\n        if (input && typeof input.focus === 'function') input.focus();\r\n    }\r\n\r\n    function validateShippingAddress() {\r\n        // Support both 'information-form' (wizard first step) and dedicated 'shipping-address-form'\r\n        const savedAddressRadio = document.querySelector('input[name=\"saved_address\"]:checked');\r\n        \r\n        if (savedAddressRadio && savedAddressRadio.value !== 'new') {\r\n            clearStepErrors(document.getElementById('new-address-form') || document.getElementById('information-form'));\r\n            checkoutData.shipping_address = savedAddressRadio.value;\r\n            return true;\r\n        }\r\n\r\n        const form = document.getElementById('shipping-address-form') || document.getElementById('information-form') || document.getElementById('new-address-form');\r\n        if (!form) return false;\r\n\r\n        clearStepErrors(form);\r\n\r\n        const formData = new FormData(form);\r\n        const address = {\r\n            first_name: formData.get('first_name') || formData.get('full_name')?.split(' ')?.[0],\r\n            last_name: formData.get('last_name') || (formData.get('full_name') ? formData.get('full_name').split(' ').slice(1).join(' ') : ''),\r\n            email: formData.get('email'),\r\n            phone: formData.get('phone'),\r\n            address_line_1: formData.get('address_line1') || formData.get('address_line_1'),\r\n            address_line_2: formData.get('address_line2') || formData.get('address_line_2'),\r\n            city: formData.get('city'),\r\n            state: formData.get('state'),\r\n            postal_code: formData.get('postal_code'),\r\n            country: formData.get('country')\r\n        };\r\n\r\n        // Required fields depending on context\r\n        const required = ['email', 'first_name', 'address_line_1', 'city', 'postal_code'];\r\n        const missing = required.filter(field => !address[field]);\r\n\r\n        if (missing.length > 0) {\r\n            // Show inline errors and focus first\r\n            missing.forEach(field => {\r\n                // Map back to input names in form\r\n                let selector = `[name=\"${field}\"]`;\r\n                if (field === 'address_line_1') selector = `[name=\"address_line1\"],[name=\"address_line_1\"]`;\r\n                const fieldEl = form.querySelector(selector);\r\n                showInlineError(fieldEl || form, field.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase()) + ' is required.');\r\n            });\r\n\r\n            focusFirstInvalid(form);\r\n            return false;\r\n        }\r\n\r\n        // Basic email format check\r\n        if (address.email && !/^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$/.test(address.email)) {\r\n            const emailEl = form.querySelector('[name=\"email\"]');\r\n            showInlineError(emailEl || form, 'Please enter a valid email address.');\r\n            focusFirstInvalid(form);\r\n            return false;\r\n        }\r\n\r\n        checkoutData.shipping_address = address;\r\n        return true;\r\n    }\r\n\r\n    async function loadShippingMethods() {\r\n        const container = document.getElementById('shipping-methods');\r\n        if (!container) return;\r\n\r\n        Loader.show(container, 'spinner');\r\n\r\n        try {\r\n            const address = checkoutData.shipping_address;\r\n\r\n            if (!address) {\r\n                // No address available yet (user hasn't filled or selected one)\r\n                container.innerHTML = '<p class=\"text-gray-500\">Please provide a shipping address to view shipping methods.</p>';\r\n                return;\r\n            }\r\n\r\n            const params = typeof address === 'object' ? {\r\n                country: address.country,\r\n                postal_code: address.postal_code,\r\n                city: address.city\r\n            } : { address_id: address };\r\n\r\n            const response = await ShippingApi.getRates(params);\r\n            const methods = response.data || [];\r\n\r\n            if (methods.length === 0) {\r\n                container.innerHTML = '<p class=\"text-gray-500\">No shipping methods available for your location.</p>';\r\n                return;\r\n            }\r\n\r\n            container.innerHTML = `\r\n                <div class=\"space-y-3\">\r\n                    ${methods.map((method, index) => `\r\n                        <label class=\"flex items-center justify-between p-4 border border-gray-200 rounded-lg cursor-pointer hover:border-primary-500 transition-colors\">\r\n                            <div class=\"flex items-center\">\r\n                                <input \r\n                                    type=\"radio\" \r\n                                    name=\"shipping_method\" \r\n                                    value=\"${method.id}\" \r\n                                    ${index === 0 ? 'checked' : ''}\r\n                                    class=\"text-primary-600 focus:ring-primary-500\"\r\n                                    data-price=\"${method.price}\"\r\n                                >\r\n                                <div class=\"ml-3\">\r\n                                    <p class=\"font-medium text-gray-900\">${Templates.escapeHtml(method.name)}</p>\r\n                                    ${method.description ? `<p class=\"text-sm text-gray-500\">${Templates.escapeHtml(method.description)}</p>` : ''}\r\n                                    ${method.estimated_days ? `<p class=\"text-sm text-gray-500\">Delivery in ${method.estimated_days} days</p>` : ''}\r\n                                </div>\r\n                            </div>\r\n                            <span class=\"font-semibold text-gray-900\">${method.price > 0 ? Templates.formatPrice(method.price) : 'Free'}</span>\r\n                        </label>\r\n                    `).join('')}\r\n                </div>\r\n            `;\r\n\r\n            const shippingRadios = container.querySelectorAll('input[name=\"shipping_method\"]');\r\n            shippingRadios.forEach((radio, idx) => {\r\n                // Store price on the radio element without using DOM data-attributes\r\n                radio.__price = methods[idx] ? methods[idx].price : 0;\r\n                radio.addEventListener('change', () => {\r\n                    updateShippingCost(parseFloat(radio.__price) || 0);\r\n                });\r\n            });\r\n\r\n            if (methods.length > 0) {\r\n                checkoutData.shipping_method = methods[0].id;\r\n                updateShippingCost(methods[0].price || 0);\r\n            }\r\n        } \r\n        catch (error) {\r\n            console.error('Failed to load shipping methods:', error);\r\n            container.innerHTML = '<p class=\"text-red-500\">Failed to load shipping methods. Please try again.</p>';\r\n        }\r\n    }\r\n\r\n    // -----------------------------\r\n    // Payment gateways (dynamic)\r\n    // -----------------------------\r\n    async function fetchAndRenderPaymentGateways() {\r\n        const container = document.getElementById('payment-methods-container');\r\n        if (!container) return;\r\n\r\n        try {\r\n            const params = new URLSearchParams();\r\n            // Client-side currency parameter removed; server handles currency formatting.\r\n            if (window.CONFIG && CONFIG.shippingData && CONFIG.shippingData.countryCode) params.set('country', CONFIG.shippingData.countryCode);\r\n            if (cart && (cart.total || cart.total === 0)) params.set('amount', cart.total);\r\n\r\n            const resp = await fetch(`/api/v1/payments/gateways/available/?${params.toString()}`, {\r\n                credentials: 'same-origin'\r\n            });\r\n            const data = await resp.json();\r\n\r\n            const gateways = (data && data.data) || [];\r\n\r\n            // If server already rendered gateways (non-empty) try to avoid re-render to prevent UI flicker.\r\n            const existing = container.querySelectorAll('.payment-option');\r\n            if (existing && existing.length > 0) {\r\n                try {\r\n                    const existingCodes = Array.from(existing).map(el => el.dataset.gateway).filter(Boolean);\r\n                    const remoteCodes = (gateways || []).map(g => g.code);\r\n\r\n                    // If codes match exactly in order and length, keep server markup and just re-bind handlers.\r\n                    const same = existingCodes.length === remoteCodes.length && existingCodes.every((c, i) => c === remoteCodes[i]);\r\n                    if (same) {\r\n                        initFormValidation(); // ensure event handlers and initial visibility are in place\r\n                        return;\r\n                    }\r\n                } catch (err) {\r\n                    // Fall back to previous behavior if anything goes wrong\r\n                    console.warn('Failed to compare existing payment gateways:', err);\r\n                }\r\n\r\n                // If remote returned nothing but server has content, keep server content (avoid replacing with empty state)\r\n                if (gateways.length === 0) return;\r\n            }\r\n\r\n            // If no gateways, show informative block (template also handles this case)\r\n            if (!gateways || gateways.length === 0) {\r\n                container.innerHTML = `\r\n                    <div class=\"text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl\">\r\n                        <svg class=\"w-16 h-16 mx-auto mb-4 text-gray-300 dark:text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4\"></path></svg>\r\n                        <h3 class=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">No payment methods are configured</h3>\r\n                        <p class=\"text-gray-500 dark:text-gray-400 mb-2\">We don't have any payment providers configured for your currency or location. Please contact support to enable online payments.</p>\r\n                        <p class=\"text-sm text-gray-400\">You can still place an order if Cash on Delivery or Bank Transfer is available from admin.</p>\r\n                    </div>\r\n                `;\r\n                return;\r\n            }\r\n\r\n            // Build radio options into a fragment, add animations and staggered delays to improve perceived performance\r\n            const frag = document.createDocumentFragment();\r\n            gateways.forEach((g, idx) => {\r\n                const wrapper = document.createElement('div');\r\n                wrapper.className = 'relative payment-option transform transition-all duration-300 hover:scale-[1.01]';\r\n                wrapper.dataset.gateway = g.code;\r\n\r\n                // Apply slideIn animation with staggered delay so new DOM shows with animation\r\n                wrapper.style.animation = 'slideIn 0.3s ease-out both';\r\n                wrapper.style.animationDelay = `${idx * 80}ms`;\r\n\r\n                const input = document.createElement('input');\r\n                input.type = 'radio';\r\n                input.name = 'payment_method';\r\n                input.value = g.code;\r\n                input.id = `payment-${g.code}`;\r\n                input.className = 'peer sr-only';\r\n                if (idx === 0) input.checked = true;\r\n\r\n                const label = document.createElement('label');\r\n                label.setAttribute('for', input.id);\r\n                label.className = 'flex items-center justify-between p-4 border-2 rounded-xl cursor-pointer transition-all duration-300 hover:border-gray-400 border-gray-200';\r\n\r\n                label.innerHTML = `\r\n                    <div class=\"flex items-center\">\r\n                        <div class=\"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mr-4\">\r\n                            ${g.icon_url ? `<img src=\"${g.icon_url}\" class=\"h-6\" alt=\"${g.name}\">` : `<span class=\"font-bold\">${g.code.toUpperCase()}</span>`}\r\n                        </div>\r\n                        <div>\r\n                            <p class=\"font-medium text-gray-900 dark:text-white\">${Templates.escapeHtml(g.name)}</p>\r\n                            <p class=\"text-sm text-gray-500 dark:text-gray-400\">${Templates.escapeHtml(g.description || '')}</p>\r\n                            ${g.fee_text ? `<p class=\"text-xs text-amber-600 dark:text-amber-400 mt-1\">${Templates.escapeHtml(g.fee_text)}</p>` : ''}\r\n                            ${g.instructions ? `<p class=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">${g.instructions}</p>` : ''}\r\n                        </div>\r\n                    </div>\r\n                `;\r\n\r\n                wrapper.appendChild(input);\r\n                wrapper.appendChild(label);\r\n\r\n                // Append selection indicator\r\n                const indicator = document.createElement('div');\r\n                indicator.className = 'absolute top-4 right-4 opacity-0 peer-checked:opacity-100 transition-opacity duration-300';\r\n                indicator.innerHTML = `<svg class=\"w-6 h-6 text-primary-600\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"></path></svg>`;\r\n                wrapper.appendChild(indicator);\r\n\r\n                frag.appendChild(wrapper);\r\n\r\n                // If gateway requires client side (Stripe), load JS and init (do this early so elements can initialize)\r\n                if (g.public_key && g.requires_client) {\r\n                    loadStripeJsIfNeeded(g.public_key).catch(err => console.error('Failed to load Stripe:', err));\r\n                }\r\n            });\r\n\r\n            // Atomically replace existing nodes to reduce flicker\r\n            container.replaceChildren(frag);\r\n\r\n            // Re-bind form handlers\r\n            initFormValidation();\r\n\r\n        } catch (error) {\r\n            console.error('Failed to load payment gateways:', error);\r\n        }\r\n    }\r\n\r\n    function loadStripeJsIfNeeded(publishableKey) {\r\n        return new Promise((resolve, reject) => {\r\n            if (window.Stripe && window.STRIPE_PUBLISHABLE_KEY === publishableKey) {\r\n                // Already configured\r\n                resolve();\r\n                return;\r\n            }\r\n\r\n            // Set global publishable key\r\n            window.STRIPE_PUBLISHABLE_KEY = publishableKey;\r\n\r\n            // If Stripe script is already loaded, just initialize elements\r\n            if (window.Stripe) {\r\n                initStripeElements(publishableKey);\r\n                resolve();\r\n                return;\r\n            }\r\n\r\n            const script = document.createElement('script');\r\n            script.src = 'https://js.stripe.com/v3/';\r\n            script.async = true;\r\n            script.onload = () => {\r\n                try {\r\n                    initStripeElements(publishableKey);\r\n                    resolve();\r\n                } catch (err) {\r\n                    reject(err);\r\n                }\r\n            };\r\n            script.onerror = (e) => reject(e);\r\n            document.head.appendChild(script);\r\n        });\r\n    }\r\n\r\n    function initStripeElements(publishableKey) {\r\n        if (typeof Stripe === 'undefined') throw new Error('Stripe script not loaded');\r\n\r\n        try {\r\n            const stripe = Stripe(publishableKey);\r\n            const elements = stripe.elements();\r\n            const cardEl = elements.create('card');\r\n            const mountPoint = document.getElementById('card-element');\r\n            if (mountPoint) {\r\n                // Clean previous mount if any\r\n                mountPoint.innerHTML = '';\r\n                cardEl.mount('#card-element');\r\n\r\n                // Show realtime validation errors\r\n                cardEl.on('change', (e) => {\r\n                    const errContainer = document.getElementById('card-errors');\r\n                    if (errContainer) errContainer.textContent = e.error ? e.error.message : '';\r\n                });\r\n\r\n                // Expose card element for confirmCardPayment\r\n                window.stripeInstance = stripe;\r\n                window.stripeCard = cardEl;\r\n            }\r\n        } catch (err) {\r\n            console.error('Error initializing Stripe elements:', err);\r\n            throw err;\r\n        }\r\n    }\r\n\r\n    // Call dynamic loading on init\r\n    (function autoInitGateways() {\r\n        // Delay slightly to let server-rendered DOM settle\r\n        document.addEventListener('DOMContentLoaded', () => {\r\n            setTimeout(() => {\r\n                fetchAndRenderPaymentGateways();\r\n            }, 50);\r\n        });\r\n    })();\r\n\r\n\r\n\r\n    function updateShippingCost(cost) {\r\n        const shippingCostEl = document.getElementById('shipping-cost');\r\n        const orderTotalEl = document.getElementById('order-total');\r\n\r\n        if (shippingCostEl) {\r\n            shippingCostEl.textContent = cost > 0 ? Templates.formatPrice(cost) : 'Free';\r\n        }\r\n\r\n        if (orderTotalEl && cart) {\r\n            const total = (cart.total || 0) + cost;\r\n            orderTotalEl.textContent = Templates.formatPrice(total);\r\n        }\r\n    }\r\n\r\n    function validateShippingMethod() {\r\n        const selected = document.querySelector('input[name=\"shipping_method\"]:checked');\r\n        if (!selected) {\r\n            Toast.error('Please select a shipping method.');\r\n            return false;\r\n        }\r\n        checkoutData.shipping_method = selected.value;\r\n        return true;\r\n    }\r\n\r\n    function initOrderSummaryToggle() {\r\n        const toggle = document.getElementById('order-summary-toggle');\r\n        const block = document.getElementById('order-summary-block');\r\n        if (!toggle || !block) return;\r\n\r\n        toggle.addEventListener('click', () => {\r\n            const hidden = block.classList.toggle('hidden');\r\n            toggle.setAttribute('aria-expanded', (!hidden).toString());\r\n            const chevron = toggle.querySelector('svg');\r\n            if (chevron) chevron.classList.toggle('rotate-180', !hidden);\r\n        });\r\n\r\n        // If the block is hidden on mobile by responsive classes, ensure aria is accurate\r\n        const isHidden = window.getComputedStyle(block).display === 'none' || block.classList.contains('hidden');\r\n        toggle.setAttribute('aria-expanded', (!isHidden).toString());\r\n    }\r\n\r\n    function validatePaymentMethod() {\r\n        const selected = document.querySelector('input[name=\"payment_method\"]:checked');\r\n        const form = document.getElementById('payment-form');\r\n        clearStepErrors(form);\r\n\r\n        if (!selected) {\r\n            // Show inline message in payment block\r\n            const container = document.getElementById('payment-methods-container') || form;\r\n            showInlineError(container, 'Please select a payment method.');\r\n            focusFirstInvalid(container);\r\n            return false;\r\n        }\r\n\r\n        const code = selected.value;\r\n\r\n        // Payment-specific checks\r\n        if (code === 'stripe') {\r\n            const nameEl = document.getElementById('cardholder-name');\r\n            if (!nameEl || !nameEl.value.trim()) {\r\n                showInlineError(nameEl || form, 'Cardholder name is required.');\r\n                focusFirstInvalid(form);\r\n                return false;\r\n            }\r\n            // Ensure Stripe element exists (mounting handled elsewhere)\r\n            if (!window.stripeCard) {\r\n                showInlineError(document.getElementById('card-element') || form, 'Card input not ready. Please wait and try again.');\r\n                return false;\r\n            }\r\n        }\r\n\r\n        if (code === 'bkash') {\r\n            const el = document.getElementById('bkash-number');\r\n            if (!el || !el.value.trim()) {\r\n                showInlineError(el || form, 'bKash mobile number is required.');\r\n                focusFirstInvalid(form);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        if (code === 'nagad') {\r\n            const el = document.getElementById('nagad-number');\r\n            if (!el || !el.value.trim()) {\r\n                showInlineError(el || form, 'Nagad mobile number is required.');\r\n                focusFirstInvalid(form);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        // Clear any errors and proceed\r\n        checkoutData.payment_method = code;\r\n        return true;\r\n    }\r\n\r\n    function initFormValidation() {\r\n        const sameAsBillingCheckbox = document.getElementById('same-as-shipping');\r\n        const billingAddressForm = document.getElementById('billing-address-form');\r\n\r\n        sameAsBillingCheckbox?.addEventListener('change', (e) => {\r\n            checkoutData.same_as_shipping = e.target.checked;\r\n            billingAddressForm?.classList.toggle('hidden', e.target.checked);\r\n        });\r\n\r\n        const paymentMethods = document.querySelectorAll('input[name=\"payment_method\"]');\r\n        paymentMethods.forEach(method => {\r\n            const handler = (e) => {\r\n                // Hide all payment form blocks marked with data-payment-form\r\n                document.querySelectorAll('[data-payment-form]').forEach(form => {\r\n                    form.classList.add('hidden');\r\n                });\r\n\r\n                // Show the matching form using data attribute; fallback to id `${code}-form`\r\n                const code = e.target ? e.target.value : (method.value || null);\r\n                if (!code) return;\r\n\r\n                let targetForm = document.querySelector(`[data-payment-form=\"${code}\"]`);\r\n                if (!targetForm) {\r\n                    targetForm = document.getElementById(`${code}-form`);\r\n                }\r\n\r\n                targetForm?.classList.remove('hidden');\r\n            };\r\n\r\n            method.addEventListener('change', handler);\r\n\r\n            // If this method is pre-selected on page load, trigger handler to set initial visibility\r\n            if (method.checked) {\r\n                handler({ target: method });\r\n            }\r\n        });\r\n\r\n        // Only attach the SPA place order handler if NOT on the traditional form-based review page\r\n        // The traditional form has action attribute and we should let it submit normally\r\n        const placeOrderBtn = document.getElementById('place-order-btn');\r\n        const placeOrderForm = document.getElementById('place-order-form');\r\n        \r\n        // Only use JavaScript-based checkout if the form doesn't have a traditional action\r\n        if (placeOrderBtn && (!placeOrderForm || !placeOrderForm.action || placeOrderForm.action.includes('javascript'))) {\r\n            placeOrderBtn.addEventListener('click', async (e) => {\r\n                e.preventDefault();\r\n                await placeOrder();\r\n            });\r\n        }\r\n    }\r\n\r\n    async function placeOrder() {\r\n        if (!validatePaymentMethod()) return;\r\n\r\n        const placeOrderBtn = document.getElementById('place-order-btn');\r\n        placeOrderBtn.disabled = true;\r\n        placeOrderBtn.innerHTML = '<svg class=\"animate-spin h-5 w-5 mx-auto\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle><path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg>';\r\n\r\n        try {\r\n            const orderNotes = document.getElementById('order-notes')?.value;\r\n            checkoutData.notes = orderNotes || '';\r\n\r\n            if (!checkoutData.same_as_shipping) {\r\n                const billingForm = document.getElementById('billing-address-form');\r\n                if (billingForm) {\r\n                    const formData = new FormData(billingForm);\r\n                    checkoutData.billing_address = {\r\n                        first_name: formData.get('billing_first_name'),\r\n                        last_name: formData.get('billing_last_name'),\r\n                        address_line_1: formData.get('billing_address_line_1'),\r\n                        address_line_2: formData.get('billing_address_line_2'),\r\n                        city: formData.get('billing_city'),\r\n                        state: formData.get('billing_state'),\r\n                        postal_code: formData.get('billing_postal_code'),\r\n                        country: formData.get('billing_country')\r\n                    };\r\n                }\r\n            }\r\n\r\n            const response = await CheckoutApi.createOrder(checkoutData);\r\n            const order = response.data;\r\n\r\n            if (checkoutData.payment_method === 'stripe' || checkoutData.payment_method === 'card') {\r\n                await processStripePayment(order);\r\n            } else if (checkoutData.payment_method === 'paypal') {\r\n                await processPayPalPayment(order);\r\n            } else {\r\n                window.location.href = `/orders/${order.id}/confirmation/`;\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to place order:', error);\r\n            Toast.error(error.message || 'Failed to place order. Please try again.');\r\n            \r\n            placeOrderBtn.disabled = false;\r\n            placeOrderBtn.textContent = 'Place Order';\r\n        }\r\n    }\r\n\r\n    async function processStripePayment(order) {\r\n        try {\r\n            const response = await CheckoutApi.createPaymentIntent(order.id);\r\n            const { client_secret } = response.data;\r\n            const publishable_key = response.data.publishable_key || window.STRIPE_PUBLISHABLE_KEY || (window.stripeInstance ? window.STRIPE_PUBLISHABLE_KEY : null);\r\n\r\n            if (typeof Stripe === 'undefined' && !window.stripeInstance) {\r\n                throw new Error('Stripe is not loaded.');\r\n            }\r\n\r\n            const stripe = window.stripeInstance || Stripe(publishable_key);\r\n            const result = await stripe.confirmCardPayment(client_secret, {\r\n                payment_method: {\r\n                    card: window.stripeCard,\r\n                    billing_details: {\r\n                        name: `${checkoutData.shipping_address.first_name} ${checkoutData.shipping_address.last_name}`\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (result.error) {\r\n                throw new Error(result.error.message);\r\n            }\r\n\r\n            window.location.href = `/orders/${order.id}/confirmation/`;\r\n        } catch (error) {\r\n            console.error('Stripe payment failed:', error);\r\n            Toast.error(error.message || 'Payment failed. Please try again.');\r\n            \r\n            const placeOrderBtn = document.getElementById('place-order-btn');\r\n            placeOrderBtn.disabled = false;\r\n            placeOrderBtn.textContent = 'Place Order';\r\n        }\r\n    }\r\n\r\n    async function processPayPalPayment(order) {\r\n        try {\r\n            const response = await CheckoutApi.createPayPalOrder(order.id);\r\n            const { approval_url } = response.data;\r\n            window.location.href = approval_url;\r\n        } catch (error) {\r\n            console.error('PayPal payment failed:', error);\r\n            Toast.error(error.message || 'Payment failed. Please try again.');\r\n            \r\n            const placeOrderBtn = document.getElementById('place-order-btn');\r\n            placeOrderBtn.disabled = false;\r\n            placeOrderBtn.textContent = 'Place Order';\r\n        }\r\n    }\r\n\r\n    function destroy() {\r\n        cart = null;\r\n        checkoutData = {\r\n            shipping_address: null,\r\n            billing_address: null,\r\n            same_as_shipping: true,\r\n            shipping_method: null,\r\n            payment_method: null,\r\n            notes: ''\r\n        };\r\n        currentStep = 1;\r\n    }\r\n\r\n    return {\r\n        init,\r\n        destroy\r\n    };\r\n}());\r\n\r\nwindow.CheckoutPage = CheckoutPage;\r\nexport default CheckoutPage;\r\n", "/**\n * Contact Page\n * @module pages/contact\n */\n\nconst ContactPage = (function() {\n    'use strict';\n\n    async function init() {\n        initContactForm();\n        await loadContactInfo();\n    }\n\n    function initContactForm() {\n        const form = document.getElementById('contact-form');\n        if (!form) return;\n\n        const validator = FormValidator.create(form, {\n            name: {\n                required: true,\n                minLength: 2,\n                maxLength: 100\n            },\n            email: {\n                required: true,\n                email: true\n            },\n            subject: {\n                required: true,\n                minLength: 5,\n                maxLength: 200\n            },\n            message: {\n                required: true,\n                minLength: 20,\n                maxLength: 2000\n            }\n        });\n\n        form.addEventListener('submit', async (e) => {\n            e.preventDefault();\n\n            if (!validator.validate()) {\n                Toast.error('Please fill in all required fields correctly.');\n                return;\n            }\n\n            const submitBtn = form.querySelector('button[type=\"submit\"]');\n            const originalText = submitBtn.textContent;\n            submitBtn.disabled = true;\n            submitBtn.innerHTML = '<svg class=\"animate-spin h-5 w-5 mx-auto\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle><path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg>';\n\n            try {\n                const formData = new FormData(form);\n                const data = {\n                    name: formData.get('name'),\n                    email: formData.get('email'),\n                    phone: formData.get('phone'),\n                    subject: formData.get('subject'),\n                    message: formData.get('message')\n                };\n\n                await SupportApi.submitContactForm(data);\n                \n                Toast.success('Thank you for your message! We\\'ll get back to you soon.');\n                form.reset();\n                validator.clearErrors();\n                \n                showSuccessState();\n            } catch (error) {\n                Toast.error(error.message || 'Failed to send message. Please try again.');\n            } finally {\n                submitBtn.disabled = false;\n                submitBtn.textContent = originalText;\n            }\n        });\n    }\n\n    function showSuccessState() {\n        const form = document.getElementById('contact-form');\n        const successContainer = document.getElementById('contact-success');\n\n        if (form && successContainer) {\n            form.classList.add('hidden');\n            successContainer.classList.remove('hidden');\n            successContainer.innerHTML = `\n                <div class=\"text-center py-12\">\n                    <div class=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                        <svg class=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"/>\n                        </svg>\n                    </div>\n                    <h3 class=\"text-xl font-semibold text-gray-900 mb-2\">Message Sent!</h3>\n                    <p class=\"text-gray-600 mb-6\">Thank you for reaching out. We'll respond to your inquiry within 24-48 hours.</p>\n                    <button id=\"send-another-btn\" class=\"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\">\n                        Send Another Message\n                    </button>\n                </div>\n            `;\n\n            document.getElementById('send-another-btn')?.addEventListener('click', () => {\n                form.classList.remove('hidden');\n                successContainer.classList.add('hidden');\n            });\n        }\n    }\n\n    async function loadContactInfo() {\n        const container = document.getElementById('contact-info');\n        if (!container) return;\n\n        try {\n            const response = await PagesApi.getContactInfo();\n            const info = response.data;\n\n            if (!info) return;\n\n            container.innerHTML = `\n                <div class=\"space-y-6\">\n                    ${info.address ? `\n                        <div class=\"flex gap-4\">\n                            <div class=\"flex-shrink-0 w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center\">\n                                <svg class=\"w-6 h-6 text-primary-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"/>\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"/>\n                                </svg>\n                            </div>\n                            <div>\n                                <h3 class=\"font-semibold text-gray-900\">Address</h3>\n                                <p class=\"text-gray-600\">${Templates.escapeHtml(info.address)}</p>\n                            </div>\n                        </div>\n                    ` : ''}\n                    \n                    ${info.phone ? `\n                        <div class=\"flex gap-4\">\n                            <div class=\"flex-shrink-0 w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center\">\n                                <svg class=\"w-6 h-6 text-primary-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\"/>\n                                </svg>\n                            </div>\n                            <div>\n                                <h3 class=\"font-semibold text-gray-900\">Phone</h3>\n                                <a href=\"tel:${info.phone}\" class=\"text-gray-600 hover:text-primary-600\">${Templates.escapeHtml(info.phone)}</a>\n                            </div>\n                        </div>\n                    ` : ''}\n                    \n                    ${info.email ? `\n                        <div class=\"flex gap-4\">\n                            <div class=\"flex-shrink-0 w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center\">\n                                <svg class=\"w-6 h-6 text-primary-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"/>\n                                </svg>\n                            </div>\n                            <div>\n                                <h3 class=\"font-semibold text-gray-900\">Email</h3>\n                                <a href=\"mailto:${info.email}\" class=\"text-gray-600 hover:text-primary-600\">${Templates.escapeHtml(info.email)}</a>\n                            </div>\n                        </div>\n                    ` : ''}\n                    \n                    ${info.business_hours ? `\n                        <div class=\"flex gap-4\">\n                            <div class=\"flex-shrink-0 w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center\">\n                                <svg class=\"w-6 h-6 text-primary-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"/>\n                                </svg>\n                            </div>\n                            <div>\n                                <h3 class=\"font-semibold text-gray-900\">Business Hours</h3>\n                                <p class=\"text-gray-600\">${Templates.escapeHtml(info.business_hours)}</p>\n                            </div>\n                        </div>\n                    ` : ''}\n                    \n                    ${info.social_links && Object.keys(info.social_links).length > 0 ? `\n                        <div class=\"pt-4 border-t border-gray-200\">\n                            <h3 class=\"font-semibold text-gray-900 mb-3\">Follow Us</h3>\n                            <div class=\"flex gap-3\">\n                                ${info.social_links.facebook ? `\n                                    <a href=\"${info.social_links.facebook}\" target=\"_blank\" class=\"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200 transition-colors\">\n                                        <svg class=\"w-5 h-5 text-[#1877F2]\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"/></svg>\n                                    </a>\n                                ` : ''}\n                                ${info.social_links.instagram ? `\n                                    <a href=\"${info.social_links.instagram}\" target=\"_blank\" class=\"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200 transition-colors\">\n                                        <svg class=\"w-5 h-5 text-[#E4405F]\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z\"/></svg>\n                                    </a>\n                                ` : ''}\n                                ${info.social_links.twitter ? `\n                                    <a href=\"${info.social_links.twitter}\" target=\"_blank\" class=\"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200 transition-colors\">\n                                        <svg class=\"w-5 h-5 text-[#1DA1F2]\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z\"/></svg>\n                                    </a>\n                                ` : ''}\n                                ${info.social_links.youtube ? `\n                                    <a href=\"${info.social_links.youtube}\" target=\"_blank\" class=\"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center hover:bg-gray-200 transition-colors\">\n                                        <svg class=\"w-5 h-5 text-[#FF0000]\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z\"/></svg>\n                                    </a>\n                                ` : ''}\n                            </div>\n                        </div>\n                    ` : ''}\n                </div>\n            `;\n        } catch (error) {\n            console.error('Failed to load contact info:', error);\n        }\n    }\n\n    function destroy() {}\n\n    return {\n        init,\n        destroy\n    };\n})();\n\nwindow.ContactPage = ContactPage;\nexport default ContactPage;\n", "/**\n * FAQ Page\n * @module pages/faq\n */\n\nconst FAQPage = (function() {\n    'use strict';\n\n    let categories = [];\n\n    async function init() {\n        // Check if FAQs are already rendered server-side\n        const existingFAQList = document.getElementById('faq-list');\n        if (existingFAQList && existingFAQList.querySelector('.faq-item')) {\n            // Server-rendered content exists - just bind events\n            bindServerRenderedContent();\n        } else {\n            // Load dynamically\n            await loadFAQs();\n        }\n        initSearch();\n    }\n\n    function bindServerRenderedContent() {\n        // Bind category tabs\n        const categoryBtns = document.querySelectorAll('.category-tab');\n        const categoryGroups = document.querySelectorAll('.faq-category');\n\n        categoryBtns.forEach(btn => {\n            btn.addEventListener('click', (e) => {\n                e.preventDefault();\n                \n                // Update active state\n                categoryBtns.forEach(b => {\n                    b.classList.remove('bg-primary-600', 'text-white');\n                    b.classList.add('bg-gray-100', 'text-gray-700');\n                });\n                btn.classList.add('bg-primary-600', 'text-white');\n                btn.classList.remove('bg-gray-100', 'text-gray-700');\n\n                const category = btn.dataset.category;\n\n                // Show/hide categories\n                if (category === 'all') {\n                    categoryGroups.forEach(cat => cat.classList.remove('hidden'));\n                } else {\n                    categoryGroups.forEach(cat => {\n                        cat.classList.toggle('hidden', cat.dataset.category !== category);\n                    });\n                }\n\n                // Clear search and show all items\n                const searchInput = document.getElementById('faq-search');\n                if (searchInput) searchInput.value = '';\n                document.querySelectorAll('.faq-item').forEach(item => item.classList.remove('hidden'));\n            });\n        });\n\n        // Bind accordion toggles\n        const accordionToggles = document.querySelectorAll('.accordion-toggle');\n        accordionToggles.forEach(toggle => {\n            toggle.addEventListener('click', () => {\n                const item = toggle.closest('[data-accordion]');\n                const content = item.querySelector('.accordion-content');\n                const icon = item.querySelector('.accordion-icon');\n                const isOpen = !content.classList.contains('hidden');\n\n                // Close all others\n                document.querySelectorAll('[data-accordion]').forEach(otherItem => {\n                    if (otherItem !== item) {\n                        otherItem.querySelector('.accordion-content')?.classList.add('hidden');\n                        otherItem.querySelector('.accordion-icon')?.classList.remove('rotate-180');\n                    }\n                });\n\n                // Toggle current\n                if (!isOpen) {\n                    content.classList.remove('hidden');\n                    icon.classList.add('rotate-180');\n                } else {\n                    content.classList.add('hidden');\n                    icon.classList.remove('rotate-180');\n                }\n            });\n        });\n    }\n\n    async function loadFAQs() {\n        const container = document.getElementById('faq-container');\n        if (!container) return;\n\n        Loader.show(container, 'skeleton');\n\n        try {\n            const response = await PagesApi.getFAQs();\n            const faqs = response.data || [];\n\n            if (faqs.length === 0) {\n                container.innerHTML = '<p class=\"text-gray-500 text-center py-8\">No FAQs available at the moment.</p>';\n                return;\n            }\n\n            categories = groupByCategory(faqs);\n            renderFAQs(categories);\n        } catch (error) {\n            console.error('Failed to load FAQs:', error);\n            container.innerHTML = '<p class=\"text-red-500 text-center py-8\">Failed to load FAQs.</p>';\n        }\n    }\n\n    function groupByCategory(faqs) {\n        const grouped = {};\n        \n        faqs.forEach(faq => {\n            const category = faq.category || 'General';\n            if (!grouped[category]) {\n                grouped[category] = [];\n            }\n            grouped[category].push(faq);\n        });\n\n        return grouped;\n    }\n\n    function renderFAQs(categorizedFaqs, searchTerm = '') {\n        const container = document.getElementById('faq-container');\n        if (!container) return;\n\n        const categoryNames = Object.keys(categorizedFaqs);\n\n        if (categoryNames.length === 0) {\n            container.innerHTML = `\n                <div class=\"text-center py-12\">\n                    <svg class=\"w-16 h-16 text-gray-300 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"/>\n                    </svg>\n                    <p class=\"text-gray-500\">No FAQs found${searchTerm ? ` for \"${Templates.escapeHtml(searchTerm)}\"` : ''}.</p>\n                </div>\n            `;\n            return;\n        }\n\n        container.innerHTML = `\n            <!-- Category Tabs -->\n            <div class=\"mb-8 overflow-x-auto\">\n                <div class=\"flex gap-2 pb-2\">\n                    <button class=\"faq-category-btn px-4 py-2 bg-primary-100 text-primary-700 rounded-full text-sm font-medium whitespace-nowrap\" data-category=\"all\">\n                        All\n                    </button>\n                    ${categoryNames.map(cat => `\n                        <button class=\"faq-category-btn px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-full text-sm font-medium whitespace-nowrap transition-colors\" data-category=\"${Templates.escapeHtml(cat)}\">\n                            ${Templates.escapeHtml(cat)}\n                        </button>\n                    `).join('')}\n                </div>\n            </div>\n\n            <!-- FAQ Accordion -->\n            <div id=\"faq-list\" class=\"space-y-4\">\n                ${categoryNames.map(category => `\n                    <div class=\"faq-category\" data-category=\"${Templates.escapeHtml(category)}\">\n                        <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">${Templates.escapeHtml(category)}</h2>\n                        <div class=\"space-y-3\">\n                            ${categorizedFaqs[category].map(faq => renderFAQItem(faq, searchTerm)).join('')}\n                        </div>\n                    </div>\n                `).join('')}\n            </div>\n        `;\n\n        bindCategoryTabs();\n        bindAccordion();\n    }\n\n    function renderFAQItem(faq, searchTerm = '') {\n        let question = Templates.escapeHtml(faq.question);\n        let answer = faq.answer;\n\n        if (searchTerm) {\n            const regex = new RegExp(`(${searchTerm.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'gi');\n            question = question.replace(regex, '<mark class=\"bg-yellow-200\">$1</mark>');\n            answer = answer.replace(regex, '<mark class=\"bg-yellow-200\">$1</mark>');\n        }\n\n        return `\n            <div class=\"faq-item border border-gray-200 rounded-lg overflow-hidden\">\n                <button class=\"faq-trigger w-full px-6 py-4 text-left flex items-center justify-between hover:bg-gray-50 transition-colors\">\n                    <span class=\"font-medium text-gray-900 pr-4\">${question}</span>\n                    <svg class=\"faq-icon w-5 h-5 text-gray-500 flex-shrink-0 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\"/>\n                    </svg>\n                </button>\n                <div class=\"faq-content hidden px-6 pb-4\">\n                    <div class=\"prose prose-sm max-w-none text-gray-600\">\n                        ${answer}\n                    </div>\n                </div>\n            </div>\n        `;\n    }\n\n    function bindCategoryTabs() {\n        const categoryBtns = document.querySelectorAll('.faq-category-btn');\n        const categoryGroups = document.querySelectorAll('.faq-category');\n\n        categoryBtns.forEach(btn => {\n            btn.addEventListener('click', () => {\n                categoryBtns.forEach(b => {\n                    b.classList.remove('bg-primary-100', 'text-primary-700');\n                    b.classList.add('bg-gray-100', 'text-gray-600');\n                });\n                btn.classList.add('bg-primary-100', 'text-primary-700');\n                btn.classList.remove('bg-gray-100', 'text-gray-600');\n\n                const category = btn.dataset.category;\n\n                categoryGroups.forEach(group => {\n                    if (category === 'all' || group.dataset.category === category) {\n                        group.classList.remove('hidden');\n                    } else {\n                        group.classList.add('hidden');\n                    }\n                });\n            });\n        });\n    }\n\n    function bindAccordion() {\n        const triggers = document.querySelectorAll('.faq-trigger');\n\n        triggers.forEach(trigger => {\n            trigger.addEventListener('click', () => {\n                const item = trigger.closest('.faq-item');\n                const content = item.querySelector('.faq-content');\n                const icon = item.querySelector('.faq-icon');\n                const isOpen = !content.classList.contains('hidden');\n\n                // Close all others\n                document.querySelectorAll('.faq-item').forEach(otherItem => {\n                    if (otherItem !== item) {\n                        otherItem.querySelector('.faq-content')?.classList.add('hidden');\n                        otherItem.querySelector('.faq-icon')?.classList.remove('rotate-180');\n                    }\n                });\n\n                // Toggle current\n                content.classList.toggle('hidden');\n                icon.classList.toggle('rotate-180');\n            });\n        });\n    }\n\n    function initSearch() {\n        const searchInput = document.getElementById('faq-search');\n        if (!searchInput) return;\n\n        let debounceTimer = null;\n\n        searchInput.addEventListener('input', (e) => {\n            const query = e.target.value.trim().toLowerCase();\n\n            clearTimeout(debounceTimer);\n            debounceTimer = setTimeout(() => {\n                // Check if we're working with server-rendered or JS-rendered content\n                const serverRendered = document.querySelector('.accordion-toggle');\n                \n                if (serverRendered) {\n                    // Server-rendered: filter existing DOM elements\n                    filterServerRenderedFAQs(query);\n                } else if (categories && Object.keys(categories).length > 0) {\n                    // JS-rendered: re-render filtered content\n                    if (query.length < 2) {\n                        renderFAQs(categories);\n                        return;\n                    }\n\n                    const filtered = {};\n                    Object.entries(categories).forEach(([category, faqs]) => {\n                        const matchingFaqs = faqs.filter(faq => \n                            faq.question.toLowerCase().includes(query) ||\n                            faq.answer.toLowerCase().includes(query)\n                        );\n                        if (matchingFaqs.length > 0) {\n                            filtered[category] = matchingFaqs;\n                        }\n                    });\n\n                    renderFAQs(filtered, query);\n                }\n            }, 300);\n        });\n    }\n\n    function filterServerRenderedFAQs(query) {\n        const faqItems = document.querySelectorAll('.faq-item');\n        const categoryGroups = document.querySelectorAll('.faq-category');\n        const noResults = document.getElementById('no-results');\n        \n        let visibleCount = 0;\n        \n        faqItems.forEach(item => {\n            const questionEl = item.querySelector('.accordion-toggle span, button span');\n            const contentEl = item.querySelector('.accordion-content');\n            \n            const question = questionEl ? questionEl.textContent.toLowerCase() : '';\n            const answer = contentEl ? contentEl.textContent.toLowerCase() : '';\n            \n            if (!query || question.includes(query) || answer.includes(query)) {\n                item.classList.remove('hidden');\n                visibleCount++;\n            } else {\n                item.classList.add('hidden');\n            }\n        });\n        \n        // Hide empty categories\n        categoryGroups.forEach(cat => {\n            const visibleItems = cat.querySelectorAll('.faq-item:not(.hidden)');\n            cat.classList.toggle('hidden', visibleItems.length === 0);\n        });\n        \n        // Show no results message\n        if (noResults) {\n            noResults.classList.toggle('hidden', visibleCount > 0);\n        }\n    }\n\n    function destroy() {\n        categories = [];\n    }\n\n    return {\n        init,\n        destroy\n    };\n})();\n\nwindow.FAQPage = FAQPage;\nexport default FAQPage;\n", "/**\r\n * CategoryCard Component\r\n */\r\n\r\nexport function CategoryCard(category) {\r\n    // Create anchor element\r\n    const card = document.createElement('a');\r\n    card.href = `/categories/${category.slug}/`;\r\n    card.className = 'group block';\r\n\r\n    // Card inner (image or fallback)\r\n    const cardInner = document.createElement('div');\r\n    cardInner.className = 'relative aspect-square rounded-xl overflow-hidden bg-gray-100';\r\n\r\n    // Image or fallback\r\n    let imgSrc = '';\r\n    // API provides `image_url` by default; prefer that\r\n    if (typeof category.image_url === 'string' && category.image_url) imgSrc = category.image_url;\r\n    else if (typeof category.image === 'string' && category.image) imgSrc = category.image;\r\n    else if (category.image && typeof category.image === 'object') imgSrc = category.image.url || category.image.src || category.image_url || '';\r\n    else if (typeof category.banner_image === 'string' && category.banner_image) imgSrc = category.banner_image;\r\n    else if (category.banner_image && typeof category.banner_image === 'object') imgSrc = category.banner_image.url || category.banner_image.src || '';\r\n    else if (typeof category.hero_image === 'string' && category.hero_image) imgSrc = category.hero_image;\r\n    else if (category.hero_image && typeof category.hero_image === 'object') imgSrc = category.hero_image.url || category.hero_image.src || '';\r\n    else if (typeof category.thumbnail === 'string' && category.thumbnail) imgSrc = category.thumbnail;\r\n    else if (category.thumbnail && typeof category.thumbnail === 'object') imgSrc = category.thumbnail.url || category.thumbnail.src || '';\r\n\r\n\r\n\r\n    if (imgSrc) {\r\n        const img = document.createElement('img');\r\n        img.src = imgSrc;\r\n        img.alt = category.name || '';\r\n        img.className = 'w-full h-full object-cover group-hover:scale-105 transition-transform duration-300';\r\n        img.loading = 'lazy';\r\n        img.decoding = 'async';\r\n        // If image fails to load, show fallback block instead\r\n        img.onerror = (err) => {\r\n            try {\r\n                img.remove();\r\n                const fallback = document.createElement('div');\r\n                fallback.className = 'w-full h-full flex items-center justify-center bg-gradient-to-br from-primary-100 to-primary-200';\r\n                fallback.innerHTML = `<svg class=\"w-12 h-12 text-primary-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z\"/></svg>`;\r\n                cardInner.appendChild(fallback);\r\n            } catch (e) {}\r\n        }; \r\n        cardInner.appendChild(img);\r\n    } else {\r\n        const fallback = document.createElement('div');\r\n        fallback.className = 'w-full h-full flex items-center justify-center bg-gradient-to-br from-primary-100 to-primary-200';\r\n        fallback.innerHTML = `<svg class=\"w-12 h-12 text-primary-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z\"/></svg>`;\r\n        cardInner.appendChild(fallback);\r\n    }\r\n\r\n    const overlay = document.createElement('div');\r\n    // Lighter overlay on light mode, stronger on dark\r\n    overlay.className = 'absolute inset-0 bg-gradient-to-t from-black/30 dark:from-black/60 to-transparent';\r\n    cardInner.appendChild(overlay);\r\n    card.appendChild(cardInner);\r\n\r\n    const name = document.createElement('h3');\r\n    name.className = 'mt-3 text-sm font-medium text-stone-900 group-hover:text-primary-600 transition-colors text-center dark:text-white';\r\n    name.textContent = category.name;\r\n    card.appendChild(name);\r\n\r\n    if (category.product_count) {\r\n        const count = document.createElement('p');\r\n        count.className = 'text-xs text-stone-600 dark:text-white/60 text-center';\r\n        count.textContent = `${category.product_count} products`;\r\n        card.appendChild(count);\r\n    }\r\n\r\n    return card;\r\n}\r\n", "/**\n * Home Page\n * @module pages/home\n */\n\nconst HomePage = (function() {\n    'use strict';\n\n    let heroSliderInterval = null;\n\n    async function init() {\n        await Promise.all([\n            loadHeroBanners(),\n            loadFeaturedProducts(),\n            loadCategoriesShowcase(),\n            loadNewArrivals(),\n            loadPromotions(),\n            loadCustomOrderCTA(),\n            loadBestSellers(),\n            loadTestimonials()\n        ]);\n        initNewsletterForm();\n    }\n\n\n        async function loadTestimonials() {\n            const container = document.getElementById('testimonials-grid');\n            if (!container) return;\n            Loader.show(container, 'skeleton');\n            try {\n                // Fetch featured categories\n                let categoriesResponse = await CategoriesApi.getCategories({ pageSize: 6, featured: true });\n                let categories = categoriesResponse?.data?.results || categoriesResponse?.data || categoriesResponse?.results || [];\n                let allReviews = [];\n                // For each category, fetch featured products and their reviews\n                for (const category of categories) {\n                    let productsResponse = await ProductsApi.getProducts({ category: category.id, featured: true, pageSize: 3 });\n                    let products = productsResponse?.data?.results || productsResponse?.data || productsResponse?.results || [];\n                    for (const product of products) {\n                        let reviewsResponse = await ProductsApi.getReviews(product.id, { pageSize: 2 });\n                        let reviews = reviewsResponse?.data?.results || reviewsResponse?.data || reviewsResponse?.results || [];\n                        // Attach product/category info to review\n                        reviews.forEach(r => {\n                            r._product = product;\n                            r._category = category;\n                        });\n                        allReviews.push(...reviews);\n                    }\n                }\n                container.innerHTML = '';\n                if (!allReviews.length) {\n                    container.innerHTML = '<p class=\"text-gray-500 text-center py-8\">No user reviews available.</p>';\n                    return;\n                }\n                // Optionally, limit to 6 user reviews\n                allReviews = allReviews.slice(0, 6);\n                allReviews.forEach(review => {\n                    const card = document.createElement('div');\n                    card.className = 'rounded-2xl bg-white dark:bg-stone-800 shadow p-6 flex flex-col gap-3';\n                    card.innerHTML = `\n                        <div class=\"flex items-center gap-3 mb-2\">\n                            <div class=\"w-10 h-10 rounded-full bg-primary-100 dark:bg-stone-700 flex items-center justify-center text-lg font-bold text-primary-700 dark:text-amber-400\">\n                                ${review.user?.first_name?.[0] || review.user?.username?.[0] || '?'}\n                            </div>\n                            <div>\n                                <div class=\"font-semibold text-gray-900 dark:text-white\">${review.user?.first_name || review.user?.username || 'Anonymous'}</div>\n                                <div class=\"text-xs text-gray-500 dark:text-stone-400\">${review.created_at ? new Date(review.created_at).toLocaleDateString() : ''}</div>\n                            </div>\n                        </div>\n                        <div class=\"flex gap-1 mb-1\">\n                            ${'<svg class=\"w-4 h-4 text-amber-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.967a1 1 0 00.95.69h4.178c.969 0 1.371 1.24.588 1.81l-3.385 2.46a1 1 0 00-.364 1.118l1.287 3.966c.3.922-.755 1.688-1.54 1.118l-3.385-2.46a1 1 0 00-1.175 0l-3.385 2.46c-.784.57-1.838-.196-1.54-1.118l1.287-3.966a1 1 0 00-.364-1.118l-3.385-2.46c-.783-.57-.38-1.81.588-1.81h4.178a1 1 0 00.95-.69l1.286-3.967z\"/></svg>'.repeat(Math.round(review.rating || 5))}\n                        </div>\n                        <div class=\"text-gray-800 dark:text-stone-200 text-base mb-2\">${Templates.escapeHtml(review.title || '')}</div>\n                        <div class=\"text-gray-600 dark:text-stone-400 text-sm\">${Templates.escapeHtml(review.content || '')}</div>\n                        <div class=\"mt-2 text-xs text-primary-700 dark:text-amber-400 font-semibold\">${review._category ? Templates.escapeHtml(review._category.name) : ''}${review._product ? ' - ' + Templates.escapeHtml(review._product.name) : ''}</div>\n                    `;\n                    container.appendChild(card);\n                });\n            } catch (error) {\n                console.error('Failed to load testimonials:', error);\n                container.innerHTML = '<p class=\"text-red-500 text-center py-8\">Failed to load testimonials. Please try again later.</p>';\n            }\n        }\n    async function loadBestSellers() {\n        const container = document.getElementById('best-sellers');\n        if (!container) return;\n\n        const grid = container.querySelector('.products-grid') || container;\n        Loader.show(grid, 'skeleton');\n\n        try {\n            // Use backend bestseller logic, like featured\n            const response = await ProductsApi.getProducts({ bestseller: true, pageSize: 5 });\n            const products = response.data?.results || response.data || response.results || [];\n\n            if (products.length === 0) {\n                grid.innerHTML = '<p class=\"text-gray-500 text-center py-8\">No best sellers available.</p>';\n                return;\n            }\n\n            grid.innerHTML = products.map(product => {\n                // Only show discount badge if available\n                let badge = null;\n                if (product.discount_percent && product.discount_percent > 0) {\n                    badge = `-${product.discount_percent}%`;\n                }\n                return ProductCard.render(product, { showBadge: !!badge, badge, priceSize: 'small' });\n            }).join('');\n            // Eager-load first images\n            try {\n                const imgs = grid.querySelectorAll('img');\n                imgs.forEach((img, i) => {\n                    if (i < 2) {\n                        img.setAttribute('loading', 'eager');\n                        img.setAttribute('fetchpriority', 'high');\n                        img.setAttribute('decoding', 'async');\n                    }\n                });\n            } catch {}\n            ProductCard.bindEvents(grid);\n        } catch (error) {\n            console.error('Failed to load best sellers:', error);\n            grid.innerHTML = '<p class=\"text-red-500 text-center py-8\">Failed to load products. Please try again later.</p>';\n        }\n    }\n\n    async function loadHeroBanners() {\n        const container = document.getElementById('hero-slider');\n        if (!container) return;\n\n        try {\n            const response = await PagesApi.getBanners('home_hero');\n            const banners = response.data?.results || response.data || response.results || [];\n\n            if (banners.length === 0) {\n                container.innerHTML = '';\n                return;\n            }\n\n            container.innerHTML = `\n                <div class=\"relative overflow-hidden w-full h-[55vh] sm:h-[70vh] md:h-[80vh]\">\n                    <div class=\"hero-slides relative w-full h-full\">\n                        ${banners.map((banner, index) => `\n                            <div class=\"hero-slide ${index === 0 ? '' : 'hidden'} w-full h-full\" data-index=\"${index}\">\n                                <a href=\"${banner.link_url || '#'}\" class=\"block relative w-full h-full\">\n                                    <img \n                                        src=\"${banner.image}\" \n                                        alt=\"${Templates.escapeHtml(banner.title || '')}\"\n                                        class=\"absolute inset-0 w-full h-full object-cover\"\n                                        loading=\"${index === 0 ? 'eager' : 'lazy'}\"\n                                        decoding=\"async\"\n                                    >\n                                    ${banner.title || banner.subtitle ? `\n                                        <div class=\"absolute inset-0 bg-gradient-to-r from-black/60 via-black/30 to-transparent flex items-center\">\n                                            <div class=\"px-8 md:px-16 max-w-xl\">\n                                                ${banner.title ? `<h2 class=\"text-2xl sm:text-3xl md:text-5xl font-bold text-white mb-4\">${Templates.escapeHtml(banner.title)}</h2>` : ''}\n                                                ${banner.subtitle ? `<p class=\"text-sm sm:text-lg text-white/90 mb-6\">${Templates.escapeHtml(banner.subtitle)}</p>` : ''}\n                                                ${(banner.link_text || banner.button_text) ? `\n                                                    <span class=\"inline-flex items-center px-6 py-3 bg-white text-gray-900 font-semibold rounded-lg hover:bg-gray-100 transition-colors\">\n                                                        ${Templates.escapeHtml(banner.link_text || banner.button_text)}\n                                                        <svg class=\"w-5 h-5 ml-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\"/>\n                                                        </svg>\n                                                    </span>\n                                                ` : ''}\n                                            </div>\n                                        </div>\n                                    ` : ''}\n                                </a>\n                            </div>\n                        `).join('')}\n                    </div>\n                    ${banners.length > 1 ? `\n                        <button class=\"hero-prev absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/30 dark:bg-stone-800/30 hover:bg-white/40 dark:hover:bg-stone-700/40 rounded-full text-stone-900 dark:text-stone-100 flex items-center justify-center shadow-lg transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-500\" aria-label=\"Previous slide\">\n                            <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\"/>\n                            </svg>\n                        </button>\n                        <button class=\"hero-next absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/30 dark:bg-stone-800/30 hover:bg-white/40 dark:hover:bg-stone-700/40 rounded-full text-stone-900 dark:text-stone-100 flex items-center justify-center shadow-lg transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-500\" aria-label=\"Next slide\">\n                            <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"/>\n                            </svg>\n                        </button>\n                        <div class=\"hero-dots absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2\">\n                            ${banners.map((_, index) => `\n                                <button class=\"w-3 h-3 rounded-full transition-colors ${index === 0 ? 'bg-white dark:bg-stone-200' : 'bg-white/50 dark:bg-stone-600/60 hover:bg-white/75 dark:hover:bg-stone-500/80'}\" data-slide=\"${index}\" aria-label=\"Go to slide ${index + 1}\"></button>\n                            `).join('')}\n                        </div>\n                    ` : ''}\n                </div>\n            `;\n\n            if (banners.length > 1) {\n                initHeroSlider(banners.length);\n            }\n        } catch (error) {\n            // Gracefully ignore missing banners endpoint and render a simple fallback hero\n            console.warn('Hero banners unavailable:', error?.status || error);\n        }\n    }\n\n    function initHeroSlider(totalSlides) {\n        let currentSlide = 0;\n        const slides = document.querySelectorAll('.hero-slide');\n        const dots = document.querySelectorAll('.hero-dots button');\n        const prevBtn = document.querySelector('.hero-prev');\n        const nextBtn = document.querySelector('.hero-next');\n\n        function goToSlide(index) {\n            slides[currentSlide].classList.add('hidden');\n            dots[currentSlide]?.classList.remove('bg-white');\n            dots[currentSlide]?.classList.add('bg-white/50');\n\n            currentSlide = (index + totalSlides) % totalSlides;\n\n            slides[currentSlide].classList.remove('hidden');\n            dots[currentSlide]?.classList.add('bg-white');\n            dots[currentSlide]?.classList.remove('bg-white/50');\n        }\n\n        prevBtn?.addEventListener('click', () => {\n            goToSlide(currentSlide - 1);\n            resetAutoplay();\n        });\n\n        nextBtn?.addEventListener('click', () => {\n            goToSlide(currentSlide + 1);\n            resetAutoplay();\n        });\n\n        dots.forEach((dot, index) => {\n            dot.addEventListener('click', () => {\n                goToSlide(index);\n                resetAutoplay();\n            });\n        });\n\n        function resetAutoplay() {\n            if (heroSliderInterval) {\n                clearInterval(heroSliderInterval);\n            }\n            heroSliderInterval = setInterval(() => goToSlide(currentSlide + 1), 5000);\n        }\n\n        // Add simple touch/swipe support for mobile\n        try {\n            const slidesContainer = document.querySelector('.hero-slides');\n            let touchStartX = 0;\n            slidesContainer?.addEventListener('touchstart', (e) => {\n                touchStartX = e.touches[0].clientX;\n            }, { passive: true });\n            slidesContainer?.addEventListener('touchend', (e) => {\n                const touchEndX = e.changedTouches[0].clientX;\n                const dx = touchEndX - touchStartX;\n                if (Math.abs(dx) > 50) {\n                    if (dx < 0) {\n                        goToSlide(currentSlide + 1);\n                    } else {\n                        goToSlide(currentSlide - 1);\n                    }\n                    resetAutoplay();\n                }\n            });\n        } catch (err) {\n            // ignore if touch listeners fail\n        }\n\n        resetAutoplay();\n    }\n\n    async function loadFeaturedProducts() {\n        const container = document.getElementById('featured-products');\n        if (!container) return;\n\n        const grid = container.querySelector('.products-grid') || container;\n        Loader.show(grid, 'skeleton');\n\n        try {\n            const response = await ProductsApi.getFeatured(8);\n            const products = response.data?.results || response.data || response.results || [];\n\n            if (products.length === 0) {\n                grid.innerHTML = '<p class=\"text-gray-500 text-center py-8\">No featured products available.</p>';\n                return;\n            }\n\n            grid.innerHTML = products.map(product => {\n                let badge = null;\n                if (product.discount_percent && product.discount_percent > 0) {\n                    badge = `-${product.discount_percent}%`;\n                }\n                return ProductCard.render(product, { showBadge: !!badge, badge, priceSize: 'small' });\n            }).join('');\n            // Ensure top-of-viewport product images load eagerly for better LCP\n            try {\n                const imgs = grid.querySelectorAll('img');\n                imgs.forEach((img, i) => {\n                    if (i < 2) {\n                        img.setAttribute('loading', 'eager');\n                        img.setAttribute('fetchpriority', 'high');\n                        img.setAttribute('decoding', 'async');\n                    }\n                });\n            } catch {}\n            ProductCard.bindEvents(grid);\n        } catch (error) {\n            console.error('Failed to load featured products:', error);\n            grid.innerHTML = '<p class=\"text-red-500 text-center py-8\">Failed to load products. Please try again later.</p>';\n        }\n    }\n\n    async function loadCategoriesShowcase() {\n        const container = document.getElementById('categories-showcase');\n        if (!container) return;\n\n\n\n        Loader.show(container, 'skeleton');\n\n        try {\n            // Clear any client cache for categories and fetch fresh data\n            try { window.ApiClient?.clearCache('/api/v1/categories/'); } catch (e) {}\n            const response = await window.ApiClient.get('/categories/', { page_size: 6, is_featured: true }, { useCache: false });\n            // info removed\n            const categories = response.data?.results || response.data || response.results || [];\n\n            if (categories.length === 0) {\n                container.innerHTML = '';\n                return;\n            }\n\n            // Import CategoryCard component\n            let CategoryCard;\n            try {\n                CategoryCard = (await import('../components/CategoryCard.js')).CategoryCard;\n            } catch (e) {\n                console.error('Failed to import CategoryCard:', e);\n                return;\n            }\n\n            container.innerHTML = '';\n            // info removed\n            categories.forEach(category => {\n                const card = CategoryCard(category);\n                // Log whether the created card contains an <img> and its src (if present)\n                try {\n                    const imgEl = card.querySelector('img');\n                    console.info('[Home] card image for', category.name, imgEl ? imgEl.src : 'NO_IMAGE');\n                } catch (e) { /* error logging removed */ }\n                container.appendChild(card);\n            });\n            container.classList.add('grid','grid-cols-2','sm:grid-cols-2','md:grid-cols-3','lg:grid-cols-6','gap-4','lg:gap-6');\n        } catch (error) {\n            console.error('Failed to load categories:', error);\n            container.innerHTML = '';\n        }\n    }\n\n    async function loadNewArrivals() {\n        const container = document.getElementById('new-arrivals');\n        if (!container) return;\n\n        const grid = container.querySelector('.products-grid') || container;\n        Loader.show(grid, 'skeleton');\n\n        try {\n            const response = await ProductsApi.getNewArrivals(4);\n            const products = response.data?.results || response.data || response.results || [];\n\n            if (products.length === 0) {\n                grid.innerHTML = '<p class=\"text-gray-500 text-center py-8\">No new products available.</p>';\n                return;\n            }\n\n            grid.innerHTML = products.map(product => {\n                let badge = null;\n                if (product.discount_percent && product.discount_percent > 0) {\n                    badge = `-${product.discount_percent}%`;\n                }\n                return ProductCard.render(product, { showBadge: !!badge, badge, priceSize: 'small' });\n            }).join('');\n            // Eager-load first images to reduce lazy-load intervention note\n            try {\n                const imgs = grid.querySelectorAll('img');\n                imgs.forEach((img, i) => {\n                    if (i < 2) {\n                        img.setAttribute('loading', 'eager');\n                        img.setAttribute('fetchpriority', 'high');\n                        img.setAttribute('decoding', 'async');\n                    }\n                });\n            } catch {}\n            ProductCard.bindEvents(grid);\n        } catch (error) {\n            console.error('Failed to load new arrivals:', error);\n            grid.innerHTML = '<p class=\"text-red-500 text-center py-8\">Failed to load products.</p>';\n        }\n    }\n\n    async function loadPromotions() {\n        const container = document.getElementById('promotions-banner') || document.getElementById('promotion-banners');\n        if (!container) return;\n\n        try {\n            const response = await PagesApi.getPromotions();\n            let promotions = response?.data?.results ?? response?.results ?? response?.data ?? [];\n            if (!Array.isArray(promotions)) {\n                if (promotions && typeof promotions === 'object') {\n                    promotions = Array.isArray(promotions.items) ? promotions.items : [promotions];\n                } else {\n                    promotions = [];\n                }\n            }\n\n            if (promotions.length === 0) {\n                container.innerHTML = '';\n                return;\n            }\n\n            const promo = promotions[0] || {};\n            container.innerHTML = `\n                <div class=\"bg-gradient-to-r from-primary-600 to-primary-700 rounded-2xl overflow-hidden\">\n                    <div class=\"px-6 py-8 md:px-12 md:py-12 flex flex-col md:flex-row items-center justify-between gap-6\">\n                        <div class=\"text-center md:text-left\">\n                            <span class=\"inline-block px-3 py-1 bg-white/20 text-white text-sm font-medium rounded-full mb-3\">\n                                Limited Time Offer\n                            </span>\n                            <h3 class=\"text-2xl md:text-3xl font-bold text-white mb-2\">\n                                ${Templates.escapeHtml(promo.title || promo.name || '')}\n                            </h3>\n                            ${promo.description ? `\n                                <p class=\"text-white/90 max-w-lg\">${Templates.escapeHtml(promo.description)}</p>\n                            ` : ''}\n                            ${promo.discount_value ? `\n                                <p class=\"text-3xl font-bold text-white mt-4\">\n                                    ${promo.discount_type === 'percentage' ? `${promo.discount_value}% OFF` : `Save ${Templates.formatPrice(promo.discount_value)}`}\n                                </p>\n                            ` : ''}\n                        </div>\n                        <div class=\"flex flex-col items-center gap-4\">\n                            ${promo.code ? `\n                                <div class=\"bg-white/10 backdrop-blur-sm px-6 py-3 rounded-lg border-2 border-dashed border-white/30\">\n                                    <p class=\"text-sm text-white/80 mb-1\">Use code:</p>\n                                    <p class=\"text-2xl font-mono font-bold text-white tracking-wider\">${Templates.escapeHtml(promo.code)}</p>\n                                </div>\n                            ` : ''}\n                            <a href=\"/products/?promotion=${promo.id || ''}\" class=\"inline-flex items-center px-6 py-3 bg-white text-primary-600 font-semibold rounded-lg hover:bg-gray-100 transition-colors\">\n                                Shop Now\n                                <svg class=\"w-5 h-5 ml-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\"/>\n                                </svg>\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            `;\n        } catch (error) {\n            console.warn('Promotions unavailable:', error?.status || error);\n            container.innerHTML = '';\n        }\n    }\n\n    async function loadCustomOrderCTA() {\n        const container = document.getElementById('custom-order-cta');\n        if (!container) return;\n        // prevent double initialization\n        if (container.dataset?.loaded) return;\n        container.dataset.loaded = '1';\n\n        // Insert a lightweight skeleton first to avoid layout shift / flash\n        container.innerHTML = `\n            <div class=\"container mx-auto px-4\">\n                <div class=\"max-w-full w-full mx-auto rounded-3xl p-6 md:p-10\">\n                    <div class=\"animate-pulse\">\n                        <div class=\"h-6 w-1/3 bg-gray-200 dark:bg-stone-700 rounded mb-4\"></div>\n                        <div class=\"h-10 w-full bg-gray-200 dark:bg-stone-700 rounded mb-4\"></div>\n                        <div class=\"h-44 bg-gray-200 dark:bg-stone-800 rounded\"></div>\n                    </div>\n                </div>\n            </div>\n        `;\n\n        const routeMap = window.BUNORAA_ROUTES || {};\n        const wizardUrl = routeMap.preordersWizard || '/preorders/create/';\n        const landingUrl = routeMap.preordersLanding || '/preorders/';\n\n        try {\n            // Try to load featured pre-order categories\n            let categories = [];\n            if (typeof PreordersApi !== 'undefined' && PreordersApi.getCategories) {\n                try {\n                    const response = await PreordersApi.getCategories({ featured: true, pageSize: 4 });\n                    categories = response?.data?.results || response?.data || response?.results || [];\n                } catch (e) {\n                    console.warn('Pre-order categories unavailable:', e);\n                }\n            }\n\n            container.innerHTML = `\n                <div class=\"container mx-auto px-4 relative\">\n                    <div class=\"max-w-full w-full mx-auto rounded-3xl shadow-lg overflow-hidden bg-white dark:bg-neutral-900 p-6 md:p-10 border border-stone-100 dark:border-stone-700\">\n                      <div class=\"grid lg:grid-cols-2 gap-12 items-center\">\n                        <div class=\"text-stone-900 dark:text-white\">\n                            <span class=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-amber-100/40 dark:bg-amber-700/20 text-xs uppercase tracking-[0.2em] mb-6 text-amber-800 dark:text-white\">\n                                <span class=\"w-2 h-2 bg-purple-400 rounded-full animate-pulse\"></span>\n                                Made Just For You\n                            </span>\n                            <h2 class=\"text-3xl lg:text-5xl font-display font-bold mb-6 leading-tight text-stone-900 dark:text-white\">Create Your Perfect Custom Order</h2>\n                            <p class=\"text-stone-700 dark:text-white/80 text-lg mb-8 max-w-xl\">Have a unique vision? Our skilled artisans will bring your ideas to life. From personalized gifts to custom designs, we craft exactly what you need.</p>\n                            <div class=\"grid sm:grid-cols-3 gap-4 mb-8\">\n                                <div class=\"flex items-center gap-3 bg-white/5 dark:bg-stone-800/40 backdrop-blur-sm rounded-xl p-4 border border-stone-100 dark:border-stone-700\">\n                                    <div class=\"w-10 h-10 bg-purple-500/30 rounded-lg flex items-center justify-center\">\n                                        <svg class=\"w-5 h-5 text-purple-800\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"/></svg>\n                                    </div>\n                                    <div>\n                                        <p class=\"text-sm font-semibold text-stone-900 dark:text-white\">Custom Design</p>\n                                        <p class=\"text-xs text-stone-600 dark:text-white/60\">Your vision, our craft</p>\n                                    </div>\n                                </div>\n                                <div class=\"flex items-center gap-3 bg-white/5 dark:bg-stone-800/40 backdrop-blur-sm rounded-xl p-4 border border-stone-100 dark:border-stone-700\">\n                                    <div class=\"w-10 h-10 bg-indigo-500/30 rounded-lg flex items-center justify-center\">\n                                        <svg class=\"w-5 h-5 text-indigo-700 dark:text-indigo-200\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"/></svg>\n                                    </div>\n                                    <div>\n                                        <p class=\"text-sm font-semibold text-stone-900 dark:text-white\">Direct Chat</p>\n                                        <p class=\"text-xs text-stone-600 dark:text-white/60\">Talk to artisans</p>\n                                    </div>\n                                </div>\n                                <div class=\"flex items-center gap-3 bg-white/5 dark:bg-stone-800/40 backdrop-blur-sm rounded-xl p-4 border border-stone-100 dark:border-stone-700\">\n                                    <div class=\"w-10 h-10 bg-pink-500/30 rounded-lg flex items-center justify-center\">\n                                        <svg class=\"w-5 h-5 text-pink-700 dark:text-pink-200\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"/></svg>\n                                    </div>\n                                    <div>\n                                        <p class=\"text-sm font-semibold text-stone-900 dark:text-white\">Quality Assured</p>\n                                        <p class=\"text-xs text-stone-600 dark:text-white/60\">Satisfaction guaranteed</p>\n                                    </div>\n                                </div>\n                            </div>\n                            ${categories.length > 0 ? `\n                                <div class=\"mb-8\">\n                                    <p class=\"text-stone-600 dark:text-white/60 text-sm mb-3\">Popular categories:</p>\n                                    <div class=\"flex flex-wrap gap-2\">\n                                        ${categories.slice(0, 4).map(cat => `\n                                            <a href=\"${landingUrl}category/${cat.slug}/\" class=\"inline-flex items-center gap-2 px-4 py-2 bg-white/10 dark:bg-stone-800/30 hover:bg-white/20 dark:hover:bg-stone-700 rounded-full text-sm text-stone-900 dark:text-white transition-colors\">\n                                                ${cat.icon ? `<span>${cat.icon}</span>` : ''}\n                                                ${Templates.escapeHtml(cat.name)}\n                                            </a>\n                                        `).join('')}\n                                    </div>\n                                </div>\n                            ` : ''}\n                            <div class=\"flex flex-wrap gap-4\">\n                                <a href=\"${wizardUrl}\" class=\"cta-unlock inline-flex items-center gap-2 px-8 py-4 bg-amber-600 text-white font-bold rounded-xl shadow-lg hover:shadow-xl hover:text-black dark:hover:text-black transition-colors group dark:bg-amber-600 dark:text-white\">\n                                    Start Your Custom Order\n                                    <svg class=\"w-5 h-5 group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\"/></svg>\n                                </a>\n                                <a href=\"${landingUrl}\" class=\"inline-flex items-center gap-2 px-8 py-4 bg-transparent text-stone-900 dark:text-white font-semibold rounded-xl border-2 border-stone-200 dark:border-stone-700 hover:bg-stone-100 dark:hover:bg-stone-800 transition-all\">\n                                    Learn More\n                                </a>\n                            </div>\n                        </div>\n                        <div class=\"hidden lg:block\">\n                            <div class=\"relative\">\n                                <div class=\"absolute -inset-4 bg-gradient-to-r from-purple-500/30 to-indigo-500/30 rounded-3xl blur-2xl\"></div>\n                                <div class=\"relative bg-white/5 dark:bg-stone-800/40 backdrop-blur-md rounded-3xl p-8 border border-stone-100 dark:border-stone-700\">\n                                    <div class=\"space-y-6\">\n                                        <div class=\"flex items-start gap-4\">\n                                            <div class=\"w-12 h-12 bg-purple-600 rounded-xl flex items-center justify-center flex-shrink-0 text-white text-xl font-bold shadow-sm ring-1 ring-stone-100 dark:ring-stone-700\">1</div>\n                                            <div>\n                                                <h4 class=\"text-stone-900 dark:text-white font-semibold mb-1\">Choose Category</h4>\n                                                <p class=\"text-stone-600 dark:text-white/60 text-sm\">Select from custom apparel, gifts, home decor & more</p>\n                                            </div>\n                                        </div>\n                                        <div class=\"flex items-start gap-4\">\n                                            <div class=\"w-12 h-12 bg-indigo-600 rounded-xl flex items-center justify-center flex-shrink-0 text-white text-xl font-bold shadow-sm ring-1 ring-stone-100 dark:ring-stone-700\">2</div>\n                                            <div>\n                                                <h4 class=\"text-stone-900 dark:text-white font-semibold mb-1\">Share Your Vision</h4>\n                                                <p class=\"text-stone-600 dark:text-white/60 text-sm\">Upload designs, describe your requirements</p>\n                                            </div>\n                                        </div>\n                                        <div class=\"flex items-start gap-4\">\n                                            <div class=\"w-12 h-12 bg-amber-600 rounded-xl flex items-center justify-center flex-shrink-0 text-white text-xl font-bold shadow-sm ring-1 ring-stone-100 dark:ring-stone-700\">3</div>\n                                            <div>\n                                                <h4 class=\"text-stone-900 dark:text-white font-semibold mb-1\">Get Your Quote</h4>\n                                                <p class=\"text-stone-600 dark:text-white/60 text-sm\">Receive pricing and timeline from our team</p>\n                                            </div>\n                                        </div>\n                                        <div class=\"flex items-start gap-4\">\n                                            <div class=\"w-12 h-12 bg-emerald-600 rounded-xl flex items-center justify-center flex-shrink-0 text-white text-xl font-bold shadow-sm ring-1 ring-stone-100 dark:ring-stone-700\">4</div>\n                                            <div>\n                                                <h4 class=\"text-stone-900 dark:text-white font-semibold mb-1\">We Create & Deliver</h4>\n                                                <p class=\"text-stone-600 dark:text-white/60 text-sm\">Track progress and receive your masterpiece</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            `;\n        } catch (error) {\n            console.warn('Custom order CTA failed to load:', error);\n            // Fallback static content\n            container.innerHTML = `\n                <div class=\"container mx-auto px-4 text-center text-stone-900 dark:text-white\">\n                    <h2 class=\"text-3xl lg:text-4xl font-display font-bold mb-4 text-stone-900 dark:text-white\">Create Your Perfect Custom Order</h2>\n                    <p class=\"text-stone-700 dark:text-white/80 mb-8 max-w-2xl mx-auto\">Have a unique vision? Our skilled artisans will bring your ideas to life.</p>\n                    <a href=\"${wizardUrl}\" class=\"cta-unlock inline-flex items-center gap-2 px-8 py-4 bg-amber-600 text-white font-bold rounded-xl shadow-lg hover:shadow-xl hover:text-black dark:hover:text-black transition-colors group dark:bg-amber-600 dark:text-white\">\n                        Start Your Custom Order\n                    </a>\n                </div>\n            `;\n        }\n    }\n\n    function initNewsletterForm() {\n        const form = document.getElementById('newsletter-form');\n        if (!form) return;\n\n        form.addEventListener('submit', async (e) => {\n            e.preventDefault();\n            \n            const emailInput = form.querySelector('input[type=\"email\"]');\n            const submitBtn = form.querySelector('button[type=\"submit\"]');\n            const email = emailInput?.value?.trim();\n\n            if (!email) {\n                Toast.error('Please enter your email address.');\n                return;\n            }\n\n            const originalText = submitBtn.textContent;\n            submitBtn.disabled = true;\n            submitBtn.innerHTML = '<svg class=\"animate-spin h-5 w-5 mx-auto\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle><path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg>';\n\n            try {\n                await SupportApi.submitContactForm({ email, type: 'newsletter' });\n                Toast.success('Thank you for subscribing!');\n                emailInput.value = '';\n            } catch (error) {\n                Toast.error(error.message || 'Failed to subscribe. Please try again.');\n            } finally {\n                submitBtn.disabled = false;\n                submitBtn.textContent = originalText;\n            }\n        });\n    }\n\n    function destroy() {\n        if (heroSliderInterval) {\n            clearInterval(heroSliderInterval);\n            heroSliderInterval = null;\n        }\n    }\n\n    return {\n        init,\n        destroy\n    };\n})();\n\nwindow.HomePage = HomePage;\nexport default HomePage;\n", "/**\n * Legal Pages (Privacy Policy, Terms of Service, etc.)\n * @module pages/legal\n */\n\nconst LegalPage = (function() {\n    'use strict';\n\n    async function init() {\n        const pageType = getPageTypeFromUrl();\n        if (pageType) {\n            await loadLegalContent(pageType);\n        }\n        initTableOfContents();\n    }\n\n    function getPageTypeFromUrl() {\n        const path = window.location.pathname;\n        \n        if (path.includes('privacy')) return 'privacy-policy';\n        if (path.includes('terms')) return 'terms-of-service';\n        if (path.includes('refund') || path.includes('return')) return 'refund-policy';\n        if (path.includes('shipping')) return 'shipping-policy';\n        if (path.includes('cookie')) return 'cookie-policy';\n        \n        const match = path.match(/\\/legal\\/([^\\/]+)/);\n        return match ? match[1] : null;\n    }\n\n    async function loadLegalContent(pageType) {\n        const container = document.getElementById('legal-content');\n        if (!container) return;\n\n        Loader.show(container, 'skeleton');\n\n        try {\n            const response = await PagesApi.getLegalPage(pageType);\n            const page = response.data;\n\n            if (!page) {\n                container.innerHTML = '<p class=\"text-gray-500 text-center py-8\">Page not found.</p>';\n                return;\n            }\n\n            document.title = `${page.title} | Bunoraa`;\n\n            renderLegalPage(page);\n        } catch (error) {\n            console.error('Failed to load legal page:', error);\n            container.innerHTML = '<p class=\"text-red-500 text-center py-8\">Failed to load content.</p>';\n        }\n    }\n\n    function renderLegalPage(page) {\n        const container = document.getElementById('legal-content');\n        const titleContainer = document.getElementById('legal-title');\n        const tocContainer = document.getElementById('table-of-contents');\n\n        if (titleContainer) {\n            titleContainer.innerHTML = `\n                <h1 class=\"text-3xl md:text-4xl font-bold text-gray-900\">${Templates.escapeHtml(page.title)}</h1>\n                ${page.last_updated ? `\n                    <p class=\"mt-2 text-sm text-gray-500\">Last updated: ${Templates.formatDate(page.last_updated)}</p>\n                ` : ''}\n            `;\n        }\n\n        if (container) {\n            container.innerHTML = `\n                <div class=\"prose prose-lg max-w-none\">\n                    ${page.content}\n                </div>\n            `;\n\n            // Generate table of contents from headings\n            if (tocContainer) {\n                const headings = container.querySelectorAll('h2, h3');\n                if (headings.length > 0) {\n                    let tocHtml = '<nav class=\"space-y-2\">';\n                    headings.forEach((heading, index) => {\n                        const id = `section-${index}`;\n                        heading.id = id;\n                        \n                        const level = heading.tagName === 'H2' ? 'pl-0' : 'pl-4';\n                        tocHtml += `\n                            <a href=\"#${id}\" class=\"block text-sm ${level} text-gray-600 hover:text-primary-600 transition-colors\">\n                                ${heading.textContent}\n                            </a>\n                        `;\n                    });\n                    tocHtml += '</nav>';\n                    tocContainer.innerHTML = tocHtml;\n                }\n            }\n        }\n    }\n\n    function initTableOfContents() {\n        const tocLinks = document.querySelectorAll('#table-of-contents a');\n        \n        tocLinks.forEach(link => {\n            link.addEventListener('click', (e) => {\n                e.preventDefault();\n                const targetId = link.getAttribute('href').slice(1);\n                const target = document.getElementById(targetId);\n                \n                if (target) {\n                    const offset = 100; // Account for fixed header\n                    const targetPosition = target.getBoundingClientRect().top + window.pageYOffset - offset;\n                    \n                    window.scrollTo({\n                        top: targetPosition,\n                        behavior: 'smooth'\n                    });\n                }\n            });\n        });\n\n        // Highlight active section on scroll\n        const observerOptions = {\n            rootMargin: '-100px 0px -50% 0px',\n            threshold: 0\n        };\n\n        const observer = new IntersectionObserver((entries) => {\n            entries.forEach(entry => {\n                const id = entry.target.id;\n                const tocLink = document.querySelector(`#table-of-contents a[href=\"#${id}\"]`);\n                \n                if (entry.isIntersecting) {\n                    document.querySelectorAll('#table-of-contents a').forEach(link => {\n                        link.classList.remove('text-primary-600', 'font-medium');\n                        link.classList.add('text-gray-600');\n                    });\n                    \n                    if (tocLink) {\n                        tocLink.classList.add('text-primary-600', 'font-medium');\n                        tocLink.classList.remove('text-gray-600');\n                    }\n                }\n            });\n        }, observerOptions);\n\n        document.querySelectorAll('#legal-content h2, #legal-content h3').forEach(heading => {\n            if (heading.id) {\n                observer.observe(heading);\n            }\n        });\n    }\n\n    function destroy() {}\n\n    return {\n        init,\n        destroy\n    };\n})();\n\nwindow.LegalPage = LegalPage;\nexport default LegalPage;\n", "/**\n * Orders Page\n * @module pages/orders\n */\n\nconst OrdersPage = (function() {\n    'use strict';\n\n    let currentPage = 1;\n    let currentFilter = 'all';\n\n    async function init() {\n        if (!AuthGuard.protectPage()) return;\n\n        const orderId = getOrderIdFromUrl();\n        if (orderId) {\n            await loadOrderDetail(orderId);\n        } else {\n            await loadOrders();\n            initFilters();\n        }\n    }\n\n    function getOrderIdFromUrl() {\n        const path = window.location.pathname;\n        const match = path.match(/\\/orders\\/([^\\/]+)/);\n        return match ? match[1] : null;\n    }\n\n    async function loadOrders() {\n        const container = document.getElementById('orders-list');\n        if (!container) return;\n\n        Loader.show(container, 'skeleton');\n\n        try {\n            const params = {\n                page: currentPage,\n                limit: 10\n            };\n\n            if (currentFilter !== 'all') {\n                params.status = currentFilter;\n            }\n\n            const response = await OrdersApi.getAll(params);\n            const orders = response.data || [];\n            const meta = response.meta || {};\n\n            renderOrders(orders, meta);\n        } catch (error) {\n            console.error('Failed to load orders:', error);\n            container.innerHTML = '<p class=\"text-red-500 text-center py-8\">Failed to load orders.</p>';\n        }\n    }\n\n    function renderOrders(orders, meta) {\n        const container = document.getElementById('orders-list');\n        if (!container) return;\n\n        if (orders.length === 0) {\n            container.innerHTML = `\n                <div class=\"text-center py-16\">\n                    <svg class=\"w-24 h-24 text-gray-300 mx-auto mb-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"/>\n                    </svg>\n                    <h2 class=\"text-2xl font-bold text-gray-900 mb-2\">No orders yet</h2>\n                    <p class=\"text-gray-600 mb-8\">When you place an order, it will appear here.</p>\n                    <a href=\"/products/\" class=\"inline-flex items-center px-6 py-3 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 transition-colors\">\n                        Start Shopping\n                    </a>\n                </div>\n            `;\n            return;\n        }\n\n        container.innerHTML = `\n            <div class=\"space-y-4\">\n                ${orders.map(order => renderOrderCard(order)).join('')}\n            </div>\n            ${meta.total_pages > 1 ? `\n                <div id=\"orders-pagination\" class=\"mt-8\">${Pagination.render({\n                    currentPage: meta.current_page || currentPage,\n                    totalPages: meta.total_pages,\n                    totalItems: meta.total\n                })}</div>\n            ` : ''}\n        `;\n\n        const paginationContainer = document.getElementById('orders-pagination');\n        paginationContainer?.addEventListener('click', (e) => {\n            const pageBtn = e.target.closest('[data-page]');\n            if (pageBtn) {\n                currentPage = parseInt(pageBtn.dataset.page);\n                loadOrders();\n                window.scrollTo({ top: 0, behavior: 'smooth' });\n            }\n        });\n    }\n\n    function renderOrderCard(order) {\n        const statusClasses = {\n            pending: 'bg-yellow-100 text-yellow-700',\n            processing: 'bg-blue-100 text-blue-700',\n            shipped: 'bg-indigo-100 text-indigo-700',\n            delivered: 'bg-green-100 text-green-700',\n            cancelled: 'bg-red-100 text-red-700',\n            refunded: 'bg-gray-100 text-gray-700'\n        };\n\n        const statusClass = statusClasses[order.status] || 'bg-gray-100 text-gray-700';\n        const items = order.items || [];\n        const displayItems = items.slice(0, 3);\n        const remainingCount = items.length - 3;\n\n        return `\n            <div class=\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden\">\n                <div class=\"px-6 py-4 border-b border-gray-100 flex flex-wrap items-center justify-between gap-4\">\n                    <div>\n                        <p class=\"text-sm text-gray-500\">Order #${Templates.escapeHtml(order.order_number || order.id)}</p>\n                        <p class=\"text-sm text-gray-500\">Placed on ${Templates.formatDate(order.created_at)}</p>\n                    </div>\n                    <div class=\"flex items-center gap-4\">\n                        <span class=\"px-3 py-1 rounded-full text-sm font-medium ${statusClass}\">\n                            ${Templates.escapeHtml(order.status_display || order.status)}\n                        </span>\n                        <a href=\"/orders/${order.id}/\" class=\"text-primary-600 hover:text-primary-700 font-medium text-sm\">\n                            View Details\n                        </a>\n                    </div>\n                </div>\n                <div class=\"p-6\">\n                    <div class=\"flex flex-wrap gap-4\">\n                        ${displayItems.map(item => `\n                            <div class=\"flex items-center gap-3\">\n                                <div class=\"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0\">\n                                    <img src=\"${item.product?.image || '/static/images/placeholder.png'}\" alt=\"\" class=\"w-full h-full object-cover\">\n                                </div>\n                                <div>\n                                    <p class=\"text-sm font-medium text-gray-900\">${Templates.escapeHtml(item.product?.name || item.product_name)}</p>\n                                    <p class=\"text-sm text-gray-500\">Qty: ${item.quantity}</p>\n                                </div>\n                            </div>\n                        `).join('')}\n                        ${remainingCount > 0 ? `\n                            <div class=\"flex items-center justify-center w-16 h-16 bg-gray-100 rounded-lg\">\n                                <span class=\"text-sm text-gray-500\">+${remainingCount}</span>\n                            </div>\n                        ` : ''}\n                    </div>\n                    <div class=\"mt-4 pt-4 border-t border-gray-100 flex justify-between items-center\">\n                        <p class=\"text-sm text-gray-600\">\n                            ${items.length} ${items.length === 1 ? 'item' : 'items'}\n                        </p>\n                        <p class=\"font-semibold text-gray-900\">Total: ${Templates.formatPrice(order.total)}</p>\n                    </div>\n                </div>\n            </div>\n        `;\n    }\n\n    async function loadOrderDetail(orderId) {\n        const container = document.getElementById('order-detail');\n        if (!container) return;\n\n        Loader.show(container, 'skeleton');\n\n        try {\n            const response = await OrdersApi.getById(orderId);\n            const order = response.data;\n\n            if (!order) {\n                window.location.href = '/orders/';\n                return;\n            }\n\n            renderOrderDetail(order);\n        } catch (error) {\n            console.error('Failed to load order:', error);\n            container.innerHTML = '<p class=\"text-red-500 text-center py-8\">Failed to load order details.</p>';\n        }\n    }\n\n    function renderOrderDetail(order) {\n        const container = document.getElementById('order-detail');\n        if (!container) return;\n\n        const statusClasses = {\n            pending: 'bg-yellow-100 text-yellow-700',\n            processing: 'bg-blue-100 text-blue-700',\n            shipped: 'bg-indigo-100 text-indigo-700',\n            delivered: 'bg-green-100 text-green-700',\n            cancelled: 'bg-red-100 text-red-700',\n            refunded: 'bg-gray-100 text-gray-700'\n        };\n\n        const statusClass = statusClasses[order.status] || 'bg-gray-100 text-gray-700';\n        const items = order.items || [];\n\n        container.innerHTML = `\n            <div class=\"mb-6\">\n                <a href=\"/orders/\" class=\"inline-flex items-center text-primary-600 hover:text-primary-700\">\n                    <svg class=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 16l-4-4m0 0l4-4m-4 4h18\"/>\n                    </svg>\n                    Back to Orders\n                </a>\n            </div>\n\n            <div class=\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden\">\n                <div class=\"px-6 py-4 border-b border-gray-100\">\n                    <div class=\"flex flex-wrap items-center justify-between gap-4\">\n                        <div>\n                            <h1 class=\"text-xl font-bold text-gray-900\">Order #${Templates.escapeHtml(order.order_number || order.id)}</h1>\n                            <p class=\"text-sm text-gray-500\">Placed on ${Templates.formatDate(order.created_at)}</p>\n                        </div>\n                        <span class=\"px-4 py-1.5 rounded-full text-sm font-medium ${statusClass}\">\n                            ${Templates.escapeHtml(order.status_display || order.status)}\n                        </span>\n                    </div>\n                </div>\n\n                <!-- Order Timeline -->\n                ${order.timeline && order.timeline.length > 0 ? `\n                    <div class=\"px-6 py-4 border-b border-gray-100\">\n                        <h2 class=\"text-sm font-semibold text-gray-900 mb-4\">Order Timeline</h2>\n                        <div class=\"relative\">\n                            <div class=\"absolute left-2 top-2 bottom-2 w-0.5 bg-gray-200\"></div>\n                            <div class=\"space-y-4\">\n                                ${order.timeline.map((event, index) => `\n                                    <div class=\"relative pl-8\">\n                                        <div class=\"absolute left-0 w-4 h-4 rounded-full ${index === 0 ? 'bg-primary-600' : 'bg-gray-300'}\"></div>\n                                        <p class=\"text-sm font-medium text-gray-900\">${Templates.escapeHtml(event.status)}</p>\n                                        <p class=\"text-xs text-gray-500\">${Templates.formatDate(event.timestamp, { includeTime: true })}</p>\n                                        ${event.note ? `<p class=\"text-sm text-gray-600 mt-1\">${Templates.escapeHtml(event.note)}</p>` : ''}\n                                    </div>\n                                `).join('')}\n                            </div>\n                        </div>\n                    </div>\n                ` : ''}\n\n                <!-- Tracking Info -->\n                ${order.tracking_number ? `\n                    <div class=\"px-6 py-4 border-b border-gray-100 bg-blue-50\">\n                        <div class=\"flex items-center justify-between\">\n                            <div>\n                                <p class=\"text-sm font-medium text-blue-900\">Tracking Number</p>\n                                <p class=\"text-lg font-mono text-blue-700\">${Templates.escapeHtml(order.tracking_number)}</p>\n                            </div>\n                            ${order.tracking_url ? `\n                                <a href=\"${order.tracking_url}\" target=\"_blank\" class=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium\">\n                                    Track Package\n                                </a>\n                            ` : ''}\n                        </div>\n                    </div>\n                ` : ''}\n\n                <!-- Order Items -->\n                <div class=\"px-6 py-4 border-b border-gray-100\">\n                    <h2 class=\"text-sm font-semibold text-gray-900 mb-4\">Items Ordered</h2>\n                    <div class=\"space-y-4\">\n                        ${items.map(item => `\n                            <div class=\"flex gap-4\">\n                                <div class=\"w-20 h-20 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0\">\n                                    <img src=\"${item.product?.image || '/static/images/placeholder.png'}\" alt=\"\" class=\"w-full h-full object-cover\">\n                                </div>\n                                <div class=\"flex-1\">\n                                    <div class=\"flex justify-between\">\n                                        <div>\n                                            <h3 class=\"font-medium text-gray-900\">${Templates.escapeHtml(item.product?.name || item.product_name)}</h3>\n                                            ${item.variant ? `<p class=\"text-sm text-gray-500\">${Templates.escapeHtml(item.variant.name || item.variant_name)}</p>` : ''}\n                                            <p class=\"text-sm text-gray-500\">Qty: ${item.quantity}</p>\n                                        </div>\n                                        <p class=\"font-medium text-gray-900\">${Templates.formatPrice(item.price * item.quantity)}</p>\n                                    </div>\n                                    ${item.product?.slug ? `\n                                        <a href=\"/products/${item.product.slug}/\" class=\"text-sm text-primary-600 hover:text-primary-700 mt-2 inline-block\">\n                                            View Product\n                                        </a>\n                                    ` : ''}\n                                </div>\n                            </div>\n                        `).join('')}\n                    </div>\n                </div>\n\n                <!-- Addresses -->\n                <div class=\"px-6 py-4 border-b border-gray-100 grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div>\n                        <h2 class=\"text-sm font-semibold text-gray-900 mb-2\">Shipping Address</h2>\n                        ${order.shipping_address ? `\n                            <p class=\"text-sm text-gray-600\">${Templates.escapeHtml(order.shipping_address.full_name || `${order.shipping_address.first_name} ${order.shipping_address.last_name}`)}</p>\n                            <p class=\"text-sm text-gray-600\">${Templates.escapeHtml(order.shipping_address.address_line_1)}</p>\n                            ${order.shipping_address.address_line_2 ? `<p class=\"text-sm text-gray-600\">${Templates.escapeHtml(order.shipping_address.address_line_2)}</p>` : ''}\n                            <p class=\"text-sm text-gray-600\">${Templates.escapeHtml(order.shipping_address.city)}, ${Templates.escapeHtml(order.shipping_address.state || '')} ${Templates.escapeHtml(order.shipping_address.postal_code)}</p>\n                            <p class=\"text-sm text-gray-600\">${Templates.escapeHtml(order.shipping_address.country)}</p>\n                        ` : '<p class=\"text-sm text-gray-500\">Not available</p>'}\n                    </div>\n                    <div>\n                        <h2 class=\"text-sm font-semibold text-gray-900 mb-2\">Billing Address</h2>\n                        ${order.billing_address ? `\n                            <p class=\"text-sm text-gray-600\">${Templates.escapeHtml(order.billing_address.full_name || `${order.billing_address.first_name} ${order.billing_address.last_name}`)}</p>\n                            <p class=\"text-sm text-gray-600\">${Templates.escapeHtml(order.billing_address.address_line_1)}</p>\n                            ${order.billing_address.address_line_2 ? `<p class=\"text-sm text-gray-600\">${Templates.escapeHtml(order.billing_address.address_line_2)}</p>` : ''}\n                            <p class=\"text-sm text-gray-600\">${Templates.escapeHtml(order.billing_address.city)}, ${Templates.escapeHtml(order.billing_address.state || '')} ${Templates.escapeHtml(order.billing_address.postal_code)}</p>\n                            <p class=\"text-sm text-gray-600\">${Templates.escapeHtml(order.billing_address.country)}</p>\n                        ` : '<p class=\"text-sm text-gray-500\">Same as shipping</p>'}\n                    </div>\n                </div>\n\n                <!-- Order Summary -->\n                <div class=\"px-6 py-4\">\n                    <h2 class=\"text-sm font-semibold text-gray-900 mb-4\">Order Summary</h2>\n                    <div class=\"space-y-2 text-sm\">\n                        <div class=\"flex justify-between\">\n                            <span class=\"text-gray-600\">Subtotal</span>\n                            <span class=\"font-medium\">${Templates.formatPrice(order.subtotal || 0)}</span>\n                        </div>\n                        ${order.discount_amount ? `\n                            <div class=\"flex justify-between text-green-600\">\n                                <span>Discount</span>\n                                <span>-${Templates.formatPrice(order.discount_amount)}</span>\n                            </div>\n                        ` : ''}\n                        <div class=\"flex justify-between\">\n                            <span class=\"text-gray-600\">Shipping</span>\n                            <span class=\"font-medium\">${order.shipping_cost > 0 ? Templates.formatPrice(order.shipping_cost) : 'Free'}</span>\n                        </div>\n                        ${order.tax_amount ? `\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-gray-600\">Tax</span>\n                                <span class=\"font-medium\">${Templates.formatPrice(order.tax_amount)}</span>\n                            </div>\n                        ` : ''}\n                        <div class=\"flex justify-between pt-2 border-t border-gray-200\">\n                            <span class=\"font-semibold text-gray-900\">Total</span>\n                            <span class=\"font-bold text-gray-900\">${Templates.formatPrice(order.total)}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Actions -->\n            <div class=\"mt-6 flex flex-wrap gap-4\">\n                ${order.status === 'delivered' ? `\n                    <button id=\"reorder-btn\" class=\"px-6 py-3 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 transition-colors\" data-order-id=\"${order.id}\">\n                        Order Again\n                    </button>\n                ` : ''}\n                ${['pending', 'processing'].includes(order.status) ? `\n                    <button id=\"cancel-order-btn\" class=\"px-6 py-3 border border-red-300 text-red-600 font-semibold rounded-lg hover:bg-red-50 transition-colors\" data-order-id=\"${order.id}\">\n                        Cancel Order\n                    </button>\n                ` : ''}\n                <button id=\"print-invoice-btn\" class=\"px-6 py-3 border border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-colors\">\n                    Print Invoice\n                </button>\n            </div>\n        `;\n\n        bindOrderDetailEvents(order);\n    }\n\n    function bindOrderDetailEvents(order) {\n        const reorderBtn = document.getElementById('reorder-btn');\n        const cancelBtn = document.getElementById('cancel-order-btn');\n        const printBtn = document.getElementById('print-invoice-btn');\n\n        reorderBtn?.addEventListener('click', async () => {\n            try {\n                await OrdersApi.reorder(order.id);\n                Toast.success('Items added to cart!');\n                document.dispatchEvent(new CustomEvent('cart:updated'));\n                window.location.href = '/cart/';\n            } catch (error) {\n                Toast.error(error.message || 'Failed to reorder.');\n            }\n        });\n\n        cancelBtn?.addEventListener('click', async () => {\n            const confirmed = await Modal.confirm({\n                title: 'Cancel Order',\n                message: 'Are you sure you want to cancel this order? This action cannot be undone.',\n                confirmText: 'Cancel Order',\n                cancelText: 'Keep Order'\n            });\n\n            if (confirmed) {\n                try {\n                    await OrdersApi.cancel(order.id);\n                    Toast.success('Order cancelled.');\n                    window.location.reload();\n                } catch (error) {\n                    Toast.error(error.message || 'Failed to cancel order.');\n                }\n            }\n        });\n\n        printBtn?.addEventListener('click', () => {\n            window.print();\n        });\n    }\n\n    function initFilters() {\n        const filterBtns = document.querySelectorAll('[data-filter-status]');\n        \n        filterBtns.forEach(btn => {\n            btn.addEventListener('click', () => {\n                filterBtns.forEach(b => {\n                    b.classList.remove('bg-primary-100', 'text-primary-700');\n                    b.classList.add('text-gray-600');\n                });\n                btn.classList.add('bg-primary-100', 'text-primary-700');\n                btn.classList.remove('text-gray-600');\n\n                currentFilter = btn.dataset.filterStatus;\n                currentPage = 1;\n                loadOrders();\n            });\n        });\n    }\n\n    function destroy() {\n        currentPage = 1;\n        currentFilter = 'all';\n    }\n\n    return {\n        init,\n        destroy\n    };\n})();\n\nwindow.OrdersPage = OrdersPage;\nexport default OrdersPage;\n", "/**\n * Pre-orders Pages Module\n * @module pages/preorders\n */\n\nconst PreordersPage = (function() {\n    'use strict';\n\n    const routeMap = window.BUNORAA_ROUTES || {};\n    const wizardUrl = routeMap.preordersWizard || '/preorders/create/';\n    const landingUrl = routeMap.preordersLanding || '/preorders/';\n\n    /**\n     * Initialize the landing page\n     */\n    async function initLanding() {\n        await Promise.all([\n            loadFeaturedCategories(),\n            loadPopularTemplates(),\n            loadStats()\n        ]);\n    }\n\n    /**\n     * Load featured pre-order categories\n     */\n    async function loadFeaturedCategories() {\n        const container = document.getElementById('preorder-categories');\n        if (!container) return;\n\n        try {\n            const response = await PreordersApi.getCategories({ featured: true, pageSize: 8 });\n            const categories = response?.data?.results || response?.data || response?.results || [];\n\n            if (categories.length === 0) {\n                container.innerHTML = `\n                    <div class=\"col-span-full text-center py-12\">\n                        <svg class=\"w-16 h-16 mx-auto text-gray-400 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" \n                                  d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"/>\n                        </svg>\n                        <p class=\"text-gray-600 dark:text-gray-400 mb-4\">No categories available at the moment</p>\n                        <p class=\"text-sm text-gray-500 dark:text-gray-500\">Check back soon or contact us for custom requests</p>\n                    </div>\n                `;\n                return;\n            }\n\n            container.innerHTML = categories.map(category => renderCategoryCard(category)).join('');\n        } catch (error) {\n            console.error('Failed to load pre-order categories:', error);\n            container.innerHTML = `\n                <div class=\"col-span-full text-center py-12\">\n                    <svg class=\"w-16 h-16 mx-auto text-gray-400 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" \n                              d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"/>\n                    </svg>\n                    <p class=\"text-gray-600 dark:text-gray-400\">No categories available at the moment</p>\n                </div>\n            `;\n        }\n    }\n\n    /**\n     * Render a category card\n     */\n    function renderCategoryCard(category) {\n        const imageUrl = category.image?.url || category.image || category.thumbnail || '';\n        const hasImage = imageUrl && imageUrl.length > 0;\n        const escapeHtml = Templates?.escapeHtml || ((s) => s);\n        const formatPrice = Templates?.formatPrice || ((p) => `\u09F3${p}`);\n\n        return `\n            <a href=\"${landingUrl}category/${category.slug}/\" \n               class=\"group bg-white dark:bg-gray-800 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-200 dark:border-gray-700\">\n                ${hasImage ? `\n                    <div class=\"aspect-video relative overflow-hidden\">\n                        <img src=\"${imageUrl}\" alt=\"${escapeHtml(category.name)}\" \n                             class=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\n                             loading=\"lazy\">\n                        <div class=\"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent\"></div>\n                    </div>\n                ` : `\n                    <div class=\"aspect-video bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center\">\n                        ${category.icon ? `<span class=\"text-5xl\">${category.icon}</span>` : `\n                            <svg class=\"w-16 h-16 text-white/80\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" \n                                      d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"/>\n                            </svg>\n                        `}\n                    </div>\n                `}\n                \n                <div class=\"p-6\">\n                    <div class=\"flex items-start justify-between mb-3\">\n                        <h3 class=\"text-xl font-bold text-gray-900 dark:text-white group-hover:text-purple-600 transition-colors\">\n                            ${escapeHtml(category.name)}\n                        </h3>\n                        ${category.icon ? `<span class=\"text-2xl\">${category.icon}</span>` : ''}\n                    </div>\n                    \n                    ${category.description ? `\n                        <p class=\"text-gray-600 dark:text-gray-400 mb-4 line-clamp-2\">\n                            ${escapeHtml(category.description)}\n                        </p>\n                    ` : ''}\n                    \n                    <div class=\"flex items-center justify-between text-sm\">\n                        ${category.base_price ? `\n                            <span class=\"text-gray-500 dark:text-gray-500\">\n                                Starting from <span class=\"font-semibold text-purple-600\">${formatPrice(category.base_price)}</span>\n                            </span>\n                        ` : '<span></span>'}\n                        ${category.min_production_days && category.max_production_days ? `\n                            <span class=\"text-gray-500 dark:text-gray-500\">\n                                ${category.min_production_days}-${category.max_production_days} days\n                            </span>\n                        ` : ''}\n                    </div>\n                    \n                    <div class=\"mt-4 pt-4 border-t border-gray-100 dark:border-gray-700 flex items-center justify-between\">\n                        <div class=\"flex gap-2 flex-wrap\">\n                            ${category.requires_design ? `\n                                <span class=\"text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full\">\n                                    Design Required\n                                </span>\n                            ` : ''}\n                            ${category.allow_rush_order ? `\n                                <span class=\"text-xs px-2 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 rounded-full\">\n                                    Rush Available\n                                </span>\n                            ` : ''}\n                        </div>\n                        <svg class=\"w-5 h-5 text-gray-400 group-hover:text-purple-600 group-hover:translate-x-1 transition-all flex-shrink-0\" \n                             fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\"/>\n                        </svg>\n                    </div>\n                </div>\n            </a>\n        `;\n    }\n\n    /**\n     * Load popular templates\n     */\n    async function loadPopularTemplates() {\n        const container = document.getElementById('preorder-templates');\n        if (!container) return;\n\n        // Templates would be loaded from API when available\n        // For now, show a placeholder or hide the section\n        container.closest('section')?.classList.add('hidden');\n    }\n\n    /**\n     * Load statistics\n     */\n    async function loadStats() {\n        const statsContainer = document.getElementById('preorder-stats');\n        if (!statsContainer) return;\n\n        // Stats can be loaded from API or use defaults\n        const stats = {\n            totalOrders: '500+',\n            happyCustomers: '450+',\n            avgRating: '4.9'\n        };\n\n        statsContainer.innerHTML = `\n            <div class=\"flex items-center gap-8 justify-center flex-wrap\">\n                <div class=\"text-center\">\n                    <p class=\"text-3xl font-bold text-purple-600 dark:text-purple-400\">${stats.totalOrders}</p>\n                    <p class=\"text-sm text-gray-600 dark:text-gray-400\">Orders Completed</p>\n                </div>\n                <div class=\"h-12 w-px bg-gray-200 dark:bg-gray-700 hidden sm:block\"></div>\n                <div class=\"text-center\">\n                    <p class=\"text-3xl font-bold text-purple-600 dark:text-purple-400\">${stats.happyCustomers}</p>\n                    <p class=\"text-sm text-gray-600 dark:text-gray-400\">Happy Customers</p>\n                </div>\n                <div class=\"h-12 w-px bg-gray-200 dark:bg-gray-700 hidden sm:block\"></div>\n                <div class=\"text-center\">\n                    <p class=\"text-3xl font-bold text-purple-600 dark:text-purple-400\">${stats.avgRating}</p>\n                    <p class=\"text-sm text-gray-600 dark:text-gray-400\">Average Rating</p>\n                </div>\n            </div>\n        `;\n    }\n\n    /**\n     * Initialize category detail page\n     */\n    async function initCategoryDetail(categorySlug) {\n        const optionsContainer = document.getElementById('category-options');\n        if (!optionsContainer || !categorySlug) return;\n\n        try {\n            const category = await PreordersApi.getCategory(categorySlug);\n            const options = await PreordersApi.getCategoryOptions(category.id);\n\n            renderCategoryOptions(optionsContainer, options);\n        } catch (error) {\n            console.error('Failed to load category options:', error);\n        }\n    }\n\n    /**\n     * Render category customization options\n     */\n    function renderCategoryOptions(container, options) {\n        if (!options || options.length === 0) {\n            container.innerHTML = '<p class=\"text-gray-500\">No customization options available.</p>';\n            return;\n        }\n\n        container.innerHTML = options.map(option => `\n            <div class=\"border border-gray-200 dark:border-gray-700 rounded-xl p-4\">\n                <h4 class=\"font-semibold text-gray-900 dark:text-white mb-2\">${Templates.escapeHtml(option.name)}</h4>\n                ${option.description ? `<p class=\"text-sm text-gray-600 dark:text-gray-400 mb-3\">${Templates.escapeHtml(option.description)}</p>` : ''}\n                <div class=\"space-y-2\">\n                    ${option.choices?.map(choice => `\n                        <label class=\"flex items-center gap-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors\">\n                            <input type=\"${option.allow_multiple ? 'checkbox' : 'radio'}\" name=\"option_${option.id}\" value=\"${choice.id}\" class=\"text-purple-600 focus:ring-purple-500\">\n                            <span class=\"flex-1\">\n                                <span class=\"font-medium text-gray-900 dark:text-white\">${Templates.escapeHtml(choice.name)}</span>\n                                ${choice.price_modifier && choice.price_modifier !== '0.00' ? `\n                                    <span class=\"text-sm text-purple-600 dark:text-purple-400 ml-2\">+${Templates.formatPrice(choice.price_modifier)}</span>\n                                ` : ''}\n                            </span>\n                        </label>\n                    `).join('') || ''}\n                </div>\n            </div>\n        `).join('');\n    }\n\n    /**\n     * Initialize my pre-orders page\n     */\n    async function initMyPreorders() {\n        const container = document.getElementById('my-preorders-list');\n        if (!container) return;\n\n        Loader.show(container, 'skeleton');\n\n        try {\n            const response = await PreordersApi.getMyPreorders();\n            const preorders = response?.data?.results || response?.data || response?.results || [];\n\n            if (preorders.length === 0) {\n                container.innerHTML = `\n                    <div class=\"text-center py-12\">\n                        <svg class=\"w-20 h-20 text-gray-300 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"/>\n                        </svg>\n                        <h3 class=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">No custom orders yet</h3>\n                        <p class=\"text-gray-600 dark:text-gray-400 mb-6\">Start creating your first custom order today!</p>\n                        <a href=\"${wizardUrl}\" class=\"inline-flex items-center gap-2 px-6 py-3 bg-purple-600 text-white font-semibold rounded-xl hover:bg-purple-700 transition-colors\">\n                            Create Custom Order\n                            <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"/></svg>\n                        </a>\n                    </div>\n                `;\n                return;\n            }\n\n            container.innerHTML = preorders.map(preorder => renderPreorderCard(preorder)).join('');\n        } catch (error) {\n            console.error('Failed to load pre-orders:', error);\n            container.innerHTML = `\n                <div class=\"text-center py-12\">\n                    <p class=\"text-red-500\">Failed to load your orders. Please try again.</p>\n                </div>\n            `;\n        }\n    }\n\n    /**\n     * Render a pre-order card\n     */\n    function renderPreorderCard(preorder) {\n        const statusColors = {\n            'pending': 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400',\n            'quoted': 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400',\n            'accepted': 'bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400',\n            'in_progress': 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400',\n            'review': 'bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400',\n            'approved': 'bg-teal-100 text-teal-800 dark:bg-teal-900/30 dark:text-teal-400',\n            'completed': 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400',\n            'cancelled': 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400',\n            'refunded': 'bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400'\n        };\n\n        const statusLabels = {\n            'pending': 'Pending Review',\n            'quoted': 'Quote Sent',\n            'accepted': 'Quote Accepted',\n            'in_progress': 'In Progress',\n            'review': 'Under Review',\n            'approved': 'Approved',\n            'completed': 'Completed',\n            'cancelled': 'Cancelled',\n            'refunded': 'Refunded'\n        };\n\n        const statusClass = statusColors[preorder.status] || 'bg-gray-100 text-gray-800';\n        const statusLabel = statusLabels[preorder.status] || preorder.status;\n\n        return `\n            <a href=\"${landingUrl}order/${preorder.preorder_number}/\" class=\"block bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow\">\n                <div class=\"flex items-start justify-between gap-4 mb-4\">\n                    <div>\n                        <p class=\"text-sm text-gray-500 dark:text-gray-400\">${preorder.preorder_number}</p>\n                        <h3 class=\"text-lg font-semibold text-gray-900 dark:text-white\">${Templates.escapeHtml(preorder.title || preorder.category?.name || 'Custom Order')}</h3>\n                    </div>\n                    <span class=\"px-3 py-1 text-xs font-medium rounded-full ${statusClass}\">${statusLabel}</span>\n                </div>\n                ${preorder.description ? `\n                    <p class=\"text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-2\">${Templates.escapeHtml(preorder.description)}</p>\n                ` : ''}\n                <div class=\"flex items-center justify-between text-sm\">\n                    <span class=\"text-gray-500 dark:text-gray-400\">\n                        ${new Date(preorder.created_at).toLocaleDateString()}\n                    </span>\n                    ${preorder.final_price || preorder.estimated_price ? `\n                        <span class=\"font-semibold text-purple-600 dark:text-purple-400\">\n                            ${Templates.formatPrice(preorder.final_price || preorder.estimated_price)}\n                        </span>\n                    ` : ''}\n                </div>\n            </a>\n        `;\n    }\n\n    /**\n     * Initialize pre-order detail page\n     */\n    async function initDetail(preorderNumber) {\n        if (!preorderNumber) return;\n\n        // Load messages, status updates, etc.\n        await Promise.all([\n            loadPreorderStatus(preorderNumber),\n            initMessageForm(preorderNumber)\n        ]);\n    }\n\n    /**\n     * Load pre-order status\n     */\n    async function loadPreorderStatus(preorderNumber) {\n        const statusContainer = document.getElementById('preorder-status');\n        if (!statusContainer) return;\n\n        try {\n            const status = await PreordersApi.getPreorderStatus(preorderNumber);\n            // Update UI with status\n        } catch (error) {\n        }\n    }\n\n    /**\n     * Initialize message form\n     */\n    function initMessageForm(preorderNumber) {\n        const form = document.getElementById('message-form');\n        if (!form) return;\n\n        form.addEventListener('submit', async (e) => {\n            e.preventDefault();\n\n            const messageInput = form.querySelector('textarea[name=\"message\"]');\n            const submitBtn = form.querySelector('button[type=\"submit\"]');\n            const message = messageInput?.value?.trim();\n\n            if (!message) {\n                Toast.error('Please enter a message');\n                return;\n            }\n\n            const originalText = submitBtn.innerHTML;\n            submitBtn.disabled = true;\n            submitBtn.innerHTML = '<svg class=\"animate-spin h-5 w-5 mx-auto\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle><path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg>';\n\n            try {\n                await PreordersApi.sendMessage(preorderNumber, message);\n                Toast.success('Message sent successfully');\n                messageInput.value = '';\n                // Reload messages\n                location.reload();\n            } catch (error) {\n                Toast.error(error.message || 'Failed to send message');\n            } finally {\n                submitBtn.disabled = false;\n                submitBtn.innerHTML = originalText;\n            }\n        });\n    }\n\n    return {\n        initLanding,\n        initCategoryDetail,\n        initMyPreorders,\n        initDetail,\n        loadFeaturedCategories,\n        renderCategoryCard,\n        renderPreorderCard\n    };\n})();\n\nwindow.PreordersPage = PreordersPage;\n", "/**\r\n * Product Detail Page\r\n * @module pages/product\r\n */\r\n\r\nconst ProductPage = (function() {\r\n    'use strict';\r\n\r\n    let currentProduct = null;\r\n    let selectedVariant = null;\r\n    let gallery = null;\r\n    let initialized = false;\r\n    let serverRendered = false;\r\n\r\n    async function init() {\r\n        // Prevent multiple initializations\r\n        if (initialized) return;\r\n        initialized = true;\r\n\r\n        const container = document.getElementById('product-detail');\r\n        if (!container) return;\r\n\r\n        // Check if content is already server-rendered\r\n        const isServerRendered = container.querySelector('h1') || container.dataset.productId;\r\n        serverRendered = Boolean(isServerRendered);\r\n        \r\n        if (isServerRendered) {\r\n            // Server-rendered content - just bind event handlers\r\n            currentProduct = {\r\n                id: container.dataset.productId,\r\n                slug: container.dataset.productSlug\r\n            };\r\n            bindExistingEvents();\r\n            return;\r\n        }\r\n\r\n        // Dynamic loading for SPA navigation\r\n        const productSlug = getProductSlugFromUrl();\r\n        if (!productSlug) {\r\n            window.location.href = '/products/';\r\n            return;\r\n        }\r\n\r\n        await loadProduct(productSlug);\r\n    }\r\n\r\n    function bindExistingEvents() {\r\n        // Bind quantity controls\r\n        initQuantityControls();\r\n        // Bind add to cart\r\n        initAddToCartFromExisting();\r\n        // Bind wishlist\r\n        initWishlistFromExisting();\r\n        markWishlistButtonIfNeeded();\r\n            async function markWishlistButtonIfNeeded() {\r\n                const btn = document.getElementById('add-to-wishlist-btn');\r\n                if (!btn) return;\r\n                const productId = document.getElementById('product-detail')?.dataset.productId;\r\n                if (!productId) return;\r\n                if (typeof WishlistApi === 'undefined') return;\r\n                try {\r\n                    const resp = await WishlistApi.getWishlist({ pageSize: 100 });\r\n                    if (resp.success && resp.data?.items) {\r\n                        const found = resp.data.items.some(item => item.product_id === productId || item.product === productId);\r\n                        if (found) {\r\n                            btn.querySelector('svg')?.setAttribute('fill', 'currentColor');\r\n                            btn.classList.add('text-red-500');\r\n                        } else {\r\n                            btn.querySelector('svg')?.setAttribute('fill', 'none');\r\n                            btn.classList.remove('text-red-500');\r\n                        }\r\n                    }\r\n                } catch (e) {}\r\n            }\r\n        // Bind variant selection\r\n        initVariantSelectionFromExisting();\r\n        // Bind image gallery\r\n        initGalleryFromExisting();\r\n        // Bind tabs\r\n        initTabsFromExisting();\r\n    }\r\n\r\n    function initTabsFromExisting() {\r\n        const tabButtons = document.querySelectorAll('.tab-btn');\r\n        const tabContents = document.querySelectorAll('.tab-content');\r\n        \r\n        tabButtons.forEach(btn => {\r\n            btn.addEventListener('click', () => {\r\n                const tabName = btn.dataset.tab;\r\n                \r\n                // Update button styles\r\n                tabButtons.forEach(b => {\r\n                    b.classList.remove('border-primary-500', 'text-primary-600');\r\n                    b.classList.add('border-transparent', 'text-gray-500');\r\n                });\r\n                btn.classList.add('border-primary-500', 'text-primary-600');\r\n                btn.classList.remove('border-transparent', 'text-gray-500');\r\n                \r\n                // Show/hide content\r\n                tabContents.forEach(content => {\r\n                    if (content.id === `${tabName}-tab`) {\r\n                        content.classList.remove('hidden');\r\n                    } else {\r\n                        content.classList.add('hidden');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    function initQuantityControls() {\r\n        const decreaseBtn = document.getElementById('decrease-qty');\r\n        const increaseBtn = document.getElementById('increase-qty');\r\n        const qtyInput = document.getElementById('quantity');\r\n\r\n        decreaseBtn?.addEventListener('click', () => {\r\n            const current = parseInt(qtyInput?.value) || 1;\r\n            if (current > 1) qtyInput.value = current - 1;\r\n        });\r\n\r\n        increaseBtn?.addEventListener('click', () => {\r\n            const current = parseInt(qtyInput?.value) || 1;\r\n            const max = parseInt(qtyInput?.max) || 99;\r\n            if (current < max) qtyInput.value = current + 1;\r\n        });\r\n    }\r\n\r\n    function initAddToCartFromExisting() {\r\n        const btn = document.getElementById('add-to-cart-btn');\r\n        if (!btn) return;\r\n\r\n        btn.addEventListener('click', async () => {\r\n            const productId = document.getElementById('product-detail')?.dataset.productId;\r\n            const quantity = parseInt(document.getElementById('quantity')?.value) || 1;\r\n            const variantInput = document.querySelector('input[name=\"variant\"]');\r\n            const hasVariants = !!variantInput;\r\n            const variantId = document.querySelector('input[name=\"variant\"]:checked')?.value;\r\n\r\n            if (!productId) return;\r\n\r\n            // If product has variants, enforce selection\r\n            if (hasVariants && !variantId) {\r\n                Toast.warning('Please select a variant before adding to cart.');\r\n                return;\r\n            }\r\n\r\n            btn.disabled = true;\r\n            const originalHtml = btn.innerHTML;\r\n            btn.innerHTML = '<svg class=\"animate-spin h-5 w-5 mx-auto\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle><path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg>';\r\n\r\n\r\n\r\n            try {\r\n\r\n                await CartApi.addItem(productId, quantity, variantId || null);\r\n\r\n                Toast.success('Added to cart!');\r\n                document.dispatchEvent(new CustomEvent('cart:updated'));\r\n            } catch (error) {\r\n                Toast.error(error.message || 'Failed to add to cart.');\r\n            } finally {\r\n                btn.disabled = false;\r\n                btn.innerHTML = originalHtml;\r\n            }\r\n        });\r\n    }\r\n\r\n    function initWishlistFromExisting() {\r\n        const btn = document.getElementById('add-to-wishlist-btn');\r\n        if (!btn) return;\r\n\r\n        btn.addEventListener('click', async () => {\r\n            const productId = document.getElementById('product-detail')?.dataset.productId;\r\n            if (!productId) return;\r\n\r\n            if (typeof AuthApi !== 'undefined' && !AuthApi.isAuthenticated()) {\r\n                Toast.warning('Please login to add items to your wishlist.');\r\n                window.location.href = '/account/login/?next=' + encodeURIComponent(window.location.pathname);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                // Check if already in wishlist\r\n                let inWishlist = false;\r\n                if (typeof WishlistApi !== 'undefined') {\r\n                    const resp = await WishlistApi.getWishlist({ pageSize: 100 });\r\n                    if (resp.success && resp.data?.items) {\r\n                        inWishlist = resp.data.items.some(item => item.product_id === productId || item.product === productId);\r\n                    }\r\n                }\r\n                if (inWishlist) {\r\n                    // Remove from wishlist\r\n                    // Find the wishlist item id\r\n                    const resp = await WishlistApi.getWishlist({ pageSize: 100 });\r\n                    const item = resp.data.items.find(item => item.product_id === productId || item.product === productId);\r\n                    if (item) {\r\n                        await WishlistApi.removeItem(item.id);\r\n                        Toast.success('Removed from wishlist!');\r\n                        btn.querySelector('svg')?.setAttribute('fill', 'none');\r\n                        btn.classList.remove('text-red-500');\r\n                    }\r\n                } else {\r\n                    // Add to wishlist\r\n                    await WishlistApi.addItem(productId);\r\n                    Toast.success('Added to wishlist!');\r\n                    btn.querySelector('svg')?.setAttribute('fill', 'currentColor');\r\n                    btn.classList.add('text-red-500');\r\n                }\r\n            } catch (error) {\r\n                Toast.error(error.message || 'Wishlist action failed.');\r\n            }\r\n        });\r\n    }\r\n\r\n    function initVariantSelectionFromExisting() {\r\n        const variantInputs = document.querySelectorAll('input[name=\"variant\"]');\r\n        variantInputs.forEach(input => {\r\n            input.addEventListener('change', () => {\r\n                selectedVariant = input.value;\r\n                // Update price if variant has different price\r\n                const price = input.dataset.price;\r\n                if (price) {\r\n                    const priceEl = document.getElementById('product-price');\r\n                    if (priceEl && window.Templates?.formatPrice) {\r\n                        priceEl.textContent = window.Templates.formatPrice(parseFloat(price));\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    function initGalleryFromExisting() {\r\n        // Image change is handled via onclick in template\r\n        // Just setup zoom functionality if needed\r\n        const mainImage = document.getElementById('main-image');\r\n        mainImage?.addEventListener('click', () => {\r\n            // Could open lightbox here\r\n        });\r\n    }\r\n\r\n    function getProductSlugFromUrl() {\r\n        const path = window.location.pathname;\r\n        const match = path.match(/\\/products\\/([^\\/]+)/);\r\n        return match ? match[1] : null;\r\n    }\r\n\r\n    async function loadProduct(slug) {\r\n        const container = document.getElementById('product-detail');\r\n        if (!container) return;\r\n\r\n        Loader.show(container, 'skeleton');\r\n\r\n        try {\r\n            const response = await ProductsApi.getBySlug(slug);\r\n            currentProduct = response.data;\r\n\r\n            if (!currentProduct) {\r\n                window.location.href = '/404/';\r\n                return;\r\n            }\r\n\r\n            document.title = `${currentProduct.name} | Bunoraa`;\r\n            \r\n            renderProduct(currentProduct);\r\n            await Promise.all([\r\n                loadBreadcrumbs(currentProduct),\r\n                loadRelatedProducts(currentProduct),\r\n                loadReviews(currentProduct)\r\n            ]);\r\n\r\n            trackProductView(currentProduct);\r\n        } catch (error) {\r\n            console.error('Failed to load product:', error);\r\n            container.innerHTML = '<p class=\"text-red-500 text-center py-8\">Failed to load product. Please try again.</p>';\r\n        }\r\n    }\r\n\r\n    // Refresh product when currency changes (support SPA flows)\r\n    document.addEventListener('currency:changed', async (e) => {\r\n        try {\r\n            if (!serverRendered && currentProduct && currentProduct.slug) {\r\n                await loadProduct(currentProduct.slug);\r\n            } else {\r\n                // For server-rendered pages, perform a full reload to pick up server-side formatting\r\n                location.reload();\r\n            }\r\n        } catch (err) {\r\n        }\r\n    });\r\n\r\n    function renderProduct(product) {\r\n        const container = document.getElementById('product-detail');\r\n        if (!container) return;\r\n\r\n        const images = product.images || [];\r\n        const mainImage = product.image || images[0]?.image || '/static/images/placeholder.png';\r\n        const hasVariants = product.variants && product.variants.length > 0;\r\n        const inStock = product.stock_quantity > 0 || product.in_stock;\r\n        const onSale = product.sale_price && product.sale_price < product.price;\r\n\r\n        container.innerHTML = `\r\n            <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12\">\r\n                <!-- Gallery -->\r\n                <div id=\"product-gallery\" class=\"product-gallery\">\r\n                    <div class=\"main-image-container relative rounded-xl overflow-hidden bg-gray-100\" style=\"aspect-ratio: ${product?.aspect?.css || '1/1'};\">\r\n                        <img \r\n                            src=\"${mainImage}\" \r\n                            alt=\"${Templates.escapeHtml(product.name)}\"\r\n                            class=\"main-image w-full h-full object-cover cursor-zoom-in\"\r\n                            id=\"main-product-image\"\r\n                        >\r\n                        ${onSale ? `\r\n                            <span class=\"absolute top-4 left-4 px-3 py-1 bg-red-500 text-white text-sm font-medium rounded-full\">\r\n                                Sale\r\n                            </span>\r\n                        ` : ''}\r\n                        ${!inStock ? `\r\n                            <span class=\"absolute top-4 right-4 px-3 py-1 bg-gray-900 text-white text-sm font-medium rounded-full\">\r\n                                Out of Stock\r\n                            </span>\r\n                        ` : ''}\r\n                    </div>\r\n                    ${images.length > 1 ? `\r\n                        <div class=\"thumbnails flex gap-2 mt-4 overflow-x-auto pb-2\">\r\n                            ${images.map((img, index) => `\r\n                                <button \r\n                                    class=\"thumbnail flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 ${index === 0 ? 'border-primary-500' : 'border-transparent'} hover:border-primary-500 transition-colors\"\r\n                                    data-image=\"${img.image}\"\r\n                                    data-index=\"${index}\"\r\n                                >\r\n                                    <img src=\"${img.image}\" alt=\"\" class=\"w-full h-full object-cover\">\r\n                                </button>\r\n                            `).join('')}\r\n                        </div>\r\n                    ` : ''}\r\n                </div>\r\n\r\n                <!-- Product Info -->\r\n                <div class=\"product-info\">\r\n                    <!-- Brand -->\r\n                    ${product.brand ? `\r\n                        <a href=\"/products/?brand=${product.brand.id}\" class=\"text-sm text-primary-600 hover:text-primary-700 font-medium\">\r\n                            ${Templates.escapeHtml(product.brand.name)}\r\n                        </a>\r\n                    ` : ''}\r\n\r\n                    <!-- Title -->\r\n                    <h1 class=\"text-2xl md:text-3xl font-bold text-gray-900 mt-2\">\r\n                        ${Templates.escapeHtml(product.name)}\r\n                    </h1>\r\n\r\n                    <!-- Rating -->\r\n                    ${product.average_rating ? `\r\n                        <div class=\"flex items-center gap-2 mt-3\">\r\n                            <div class=\"flex items-center\">\r\n                                ${Templates.renderStars(product.average_rating)}\r\n                            </div>\r\n                            <span class=\"text-sm text-gray-600\">\r\n                                ${product.average_rating.toFixed(1)} (${product.review_count || 0} reviews)\r\n                            </span>\r\n                            <a href=\"#reviews\" class=\"text-sm text-primary-600 hover:text-primary-700\">\r\n                                Read reviews\r\n                            </a>\r\n                        </div>\r\n                    ` : ''}\r\n\r\n                    <!-- Price -->\r\n                    <div class=\"mt-4\">\r\n                        ${Price.render({\r\n                            price: product.current_price ?? product.price_converted ?? product.price,\r\n                            salePrice: product.sale_price_converted ?? product.sale_price,\r\n                            size: 'large'\r\n                        })}\r\n                    </div>\r\n\r\n                    <!-- Short Description -->\r\n                    ${product.short_description ? `\r\n                        <p class=\"mt-4 text-gray-600\">${Templates.escapeHtml(product.short_description)}</p>\r\n                    ` : ''}\r\n\r\n                    <!-- Variants -->\r\n                    ${hasVariants ? renderVariants(product.variants) : ''}\r\n\r\n                    <!-- Quantity & Add to Cart -->\r\n                    <div class=\"mt-6 space-y-4\">\r\n                        <div class=\"flex items-center gap-4\">\r\n                            <label class=\"text-sm font-medium text-gray-700\">Quantity:</label>\r\n                            <div class=\"flex items-center border border-gray-300 rounded-lg\">\r\n                                <button \r\n                                    class=\"qty-decrease px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors\"\r\n                                    aria-label=\"Decrease quantity\"\r\n                                >\r\n                                    <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20 12H4\"/>\r\n                                    </svg>\r\n                                </button>\r\n                                <input \r\n                                    type=\"number\" \r\n                                    id=\"product-quantity\"\r\n                                    value=\"1\" \r\n                                    min=\"1\" \r\n                                    max=\"${product.stock_quantity || 99}\"\r\n                                    class=\"w-16 text-center border-0 focus:ring-0\"\r\n                                >\r\n                                <button \r\n                                    class=\"qty-increase px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors\"\r\n                                    aria-label=\"Increase quantity\"\r\n                                >\r\n                                    <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"/>\r\n                                    </svg>\r\n                                </button>\r\n                            </div>\r\n                            ${product.stock_quantity ? `\r\n                                <span class=\"text-sm text-gray-500\">${product.stock_quantity} available</span>\r\n                            ` : ''}\r\n                        </div>\r\n\r\n                        <div class=\"flex gap-3\">\r\n                            <button \r\n                                id=\"add-to-cart-btn\"\r\n                                class=\"flex-1 px-6 py-3 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2\"\r\n                                ${!inStock ? 'disabled' : ''}\r\n                            >\r\n                                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z\"/>\r\n                                </svg>\r\n                                ${inStock ? 'Add to Cart' : 'Out of Stock'}\r\n                            </button>\r\n                            <button \r\n                                id=\"add-to-wishlist-btn\"\r\n                                class=\"px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\r\n                                aria-label=\"Add to wishlist\"\r\n                                data-product-id=\"${product.id}\"\r\n                            >\r\n                                <svg class=\"w-6 h-6 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"/>\r\n                                </svg>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <!-- Product Meta -->\r\n                    <div class=\"mt-6 pt-6 border-t border-gray-200 space-y-3 text-sm\">\r\n                        ${product.sku ? `\r\n                            <div class=\"flex\">\r\n                                <span class=\"text-gray-500 w-24\">SKU:</span>\r\n                                <span class=\"text-gray-900\">${Templates.escapeHtml(product.sku)}</span>\r\n                            </div>\r\n                        ` : ''}\r\n                        ${product.category ? `\r\n                            <div class=\"flex\">\r\n                                <span class=\"text-gray-500 w-24\">Category:</span>\r\n                                <a href=\"/categories/${product.category.slug}/\" class=\"text-primary-600 hover:text-primary-700\">\r\n                                    ${Templates.escapeHtml(product.category.name)}\r\n                                </a>\r\n                            </div>\r\n                        ` : ''}\r\n                        ${product.tags && product.tags.length ? `\r\n                            <div class=\"flex\">\r\n                                <span class=\"text-gray-500 w-24\">Tags:</span>\r\n                                <div class=\"flex flex-wrap gap-1\">\r\n                                    ${product.tags.map(tag => `\r\n                                        <a href=\"/products/?tag=${tag.slug}\" class=\"px-2 py-0.5 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition-colors\">\r\n                                            ${Templates.escapeHtml(tag.name)}\r\n                                        </a>\r\n                                    `).join('')}\r\n                                </div>\r\n                            </div>\r\n                        ` : ''}\r\n                    </div>\r\n\r\n                    <!-- Share -->\r\n                    <div class=\"mt-6 pt-6 border-t border-gray-200\">\r\n                        <span class=\"text-sm text-gray-500\">Share:</span>\r\n                        <div class=\"flex gap-2 mt-2\">\r\n                            <button class=\"share-btn p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors\" data-platform=\"facebook\" aria-label=\"Share on Facebook\">\r\n                                <svg class=\"w-5 h-5 text-[#1877F2]\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\"/></svg>\r\n                            </button>\r\n                            <button class=\"share-btn p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors\" data-platform=\"twitter\" aria-label=\"Share on Twitter\">\r\n                                <svg class=\"w-5 h-5 text-[#1DA1F2]\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z\"/></svg>\r\n                            </button>\r\n                            <button class=\"share-btn p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors\" data-platform=\"pinterest\" aria-label=\"Share on Pinterest\">\r\n                                <svg class=\"w-5 h-5 text-[#E60023]\" fill=\"currentColor\" viewBox=\"0 0 24 24\"><path d=\"M12 0C5.373 0 0 5.372 0 12c0 5.084 3.163 9.426 7.627 11.174-.105-.949-.2-2.405.042-3.441.218-.937 1.407-5.965 1.407-5.965s-.359-.719-.359-1.782c0-1.668.967-2.914 2.171-2.914 1.023 0 1.518.769 1.518 1.69 0 1.029-.655 2.568-.994 3.995-.283 1.194.599 2.169 1.777 2.169 2.133 0 3.772-2.249 3.772-5.495 0-2.873-2.064-4.882-5.012-4.882-3.414 0-5.418 2.561-5.418 5.207 0 1.031.397 2.138.893 2.738a.36.36 0 01.083.345l-.333 1.36c-.053.22-.174.267-.402.161-1.499-.698-2.436-2.889-2.436-4.649 0-3.785 2.75-7.262 7.929-7.262 4.163 0 7.398 2.967 7.398 6.931 0 4.136-2.607 7.464-6.227 7.464-1.216 0-2.359-.631-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24 12 24c6.627 0 12-5.373 12-12 0-6.628-5.373-12-12-12z\"/></svg>\r\n                            </button>\r\n                            <button class=\"share-btn p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors\" data-platform=\"copy\" aria-label=\"Copy link\">\r\n                                <svg class=\"w-5 h-5 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3\"/>\r\n                                </svg>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- Product Tabs -->\r\n            <div class=\"mt-12\" data-tabs data-variant=\"underline\" id=\"product-tabs\">\r\n                <div class=\"border-b border-gray-200\">\r\n                    <nav class=\"flex -mb-px\">\r\n                        <button data-tab class=\"px-6 py-4 text-sm font-medium text-gray-600 hover:text-gray-900 border-b-2 border-transparent\">\r\n                            Description\r\n                        </button>\r\n                        ${product.specifications && Object.keys(product.specifications).length ? `\r\n                            <button data-tab class=\"px-6 py-4 text-sm font-medium text-gray-600 hover:text-gray-900 border-b-2 border-transparent\">\r\n                                Specifications\r\n                            </button>\r\n                        ` : ''}\r\n                        <button data-tab class=\"px-6 py-4 text-sm font-medium text-gray-600 hover:text-gray-900 border-b-2 border-transparent\">\r\n                            Reviews (${product.review_count || 0})\r\n                        </button>\r\n                    </nav>\r\n                </div>\r\n                <div class=\"py-6\">\r\n                    <div data-tab-panel>\r\n                        <div class=\"prose max-w-none\">\r\n                            ${product.description || '<p class=\"text-gray-500\">No description available.</p>'}\r\n                        </div>\r\n                    </div>\r\n                    ${product.specifications && Object.keys(product.specifications).length ? `\r\n                        <div data-tab-panel>\r\n                            <table class=\"w-full\">\r\n                                <tbody>\r\n                                    ${Object.entries(product.specifications).map(([key, value]) => `\r\n                                        <tr class=\"border-b border-gray-100\">\r\n                                            <td class=\"py-3 text-sm font-medium text-gray-500 w-1/3\">${Templates.escapeHtml(key)}</td>\r\n                                            <td class=\"py-3 text-sm text-gray-900\">${Templates.escapeHtml(String(value))}</td>\r\n                                        </tr>\r\n                                    `).join('')}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    ` : ''}\r\n                    <div data-tab-panel id=\"reviews\">\r\n                        <div id=\"reviews-container\">\r\n                            <!-- Reviews loaded here -->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n\r\n        initGallery();\r\n        initQuantityControls();\r\n        initAddToCart();\r\n        initWishlist();\r\n        initShare();\r\n        Tabs.init();\r\n    }\r\n\r\n    function renderVariants(variants) {\r\n        const grouped = {};\r\n        variants.forEach(variant => {\r\n            if (!grouped[variant.attribute_name]) {\r\n                grouped[variant.attribute_name] = [];\r\n            }\r\n            grouped[variant.attribute_name].push(variant);\r\n        });\r\n\r\n        return Object.entries(grouped).map(([attrName, options]) => `\r\n            <div class=\"mt-6\">\r\n                <label class=\"text-sm font-medium text-gray-700\">${Templates.escapeHtml(attrName)}:</label>\r\n                <div class=\"flex flex-wrap gap-2 mt-2\">\r\n                    ${options.map((opt, index) => `\r\n                        <button \r\n                            class=\"variant-btn px-4 py-2 border rounded-lg text-sm transition-colors ${index === 0 ? 'border-primary-500 bg-primary-50 text-primary-700' : 'border-gray-300 hover:border-gray-400'}\"\r\n                            data-variant-id=\"${opt.id}\"\r\n                            data-price=\"${opt.price_converted ?? opt.price ?? ''}\"\r\n                            data-stock=\"${opt.stock_quantity || 0}\"\r\n                        >\r\n                            ${Templates.escapeHtml(opt.value)}\r\n                            ${((opt.price_converted ?? opt.price) && (opt.price !== currentProduct.price)) ? `\r\n                                <span class=\"text-xs text-gray-500\">(${Templates.formatPrice(opt.price_converted ?? opt.price)})</span>\r\n                            ` : ''}\r\n                        </button>\r\n                    `).join('')}\r\n                </div>\r\n            </div>\r\n        `).join('');\r\n    }\r\n\r\n    function initGallery() {\r\n        const thumbnails = document.querySelectorAll('.thumbnail');\r\n        const mainImage = document.getElementById('main-product-image');\r\n\r\n        thumbnails.forEach(thumb => {\r\n            thumb.addEventListener('click', () => {\r\n                thumbnails.forEach(t => t.classList.remove('border-primary-500'));\r\n                thumb.classList.add('border-primary-500');\r\n                mainImage.src = thumb.dataset.image;\r\n            });\r\n        });\r\n\r\n        mainImage?.addEventListener('click', () => {\r\n            const images = currentProduct.images?.map(img => img.image) || [currentProduct.image];\r\n            const currentIndex = parseInt(document.querySelector('.thumbnail.border-primary-500')?.dataset.index) || 0;\r\n            ProductGallery.openLightbox(images, currentIndex);\r\n        });\r\n    }\r\n\r\n    function initQuantityControls() {\r\n        const qtyInput = document.getElementById('product-quantity');\r\n        const decreaseBtn = document.querySelector('.qty-decrease');\r\n        const increaseBtn = document.querySelector('.qty-increase');\r\n\r\n        decreaseBtn?.addEventListener('click', () => {\r\n            const current = parseInt(qtyInput.value) || 1;\r\n            if (current > 1) {\r\n                qtyInput.value = current - 1;\r\n            }\r\n        });\r\n\r\n        increaseBtn?.addEventListener('click', () => {\r\n            const current = parseInt(qtyInput.value) || 1;\r\n            const max = parseInt(qtyInput.max) || 99;\r\n            if (current < max) {\r\n                qtyInput.value = current + 1;\r\n            }\r\n        });\r\n\r\n        const variantBtns = document.querySelectorAll('.variant-btn');\r\n        variantBtns.forEach(btn => {\r\n            btn.addEventListener('click', () => {\r\n                variantBtns.forEach(b => {\r\n                    b.classList.remove('border-primary-500', 'bg-primary-50', 'text-primary-700');\r\n                    b.classList.add('border-gray-300');\r\n                });\r\n                btn.classList.add('border-primary-500', 'bg-primary-50', 'text-primary-700');\r\n                btn.classList.remove('border-gray-300');\r\n\r\n                selectedVariant = btn.dataset.variantId;\r\n                \r\n                if (btn.dataset.price) {\r\n                    const priceContainer = document.querySelector('.product-info .mt-4');\r\n                    if (priceContainer) {\r\n                        priceContainer.innerHTML = Price.render({\r\n                            price: parseFloat(btn.dataset.price),\r\n                            size: 'large'\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        });\r\n\r\n        if (variantBtns.length > 0) {\r\n            selectedVariant = variantBtns[0].dataset.variantId;\r\n        }\r\n    }\r\n\r\n    function initAddToCart() {\r\n        const btn = document.getElementById('add-to-cart-btn');\r\n        if (!btn) return;\r\n\r\n        btn.addEventListener('click', async () => {\r\n            const quantity = parseInt(document.getElementById('product-quantity')?.value) || 1;\r\n\r\n            btn.disabled = true;\r\n            btn.innerHTML = '<svg class=\"animate-spin h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle><path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg>';\r\n\r\n            try {\r\n                await CartApi.addItem(currentProduct.id, quantity, selectedVariant || null);\r\n\r\n                Toast.success('Added to cart!');\r\n                document.dispatchEvent(new CustomEvent('cart:updated'));\r\n            } catch (error) {\r\n                Toast.error(error.message || 'Failed to add to cart.');\r\n            } finally {\r\n                btn.disabled = false;\r\n                btn.innerHTML = `\r\n                    <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z\"/>\r\n                    </svg>\r\n                    Add to Cart\r\n                `;\r\n            }\r\n        });\r\n    }\r\n\r\n    function initWishlist() {\r\n        const btn = document.getElementById('add-to-wishlist-btn');\r\n        if (!btn) return;\r\n\r\n        btn.addEventListener('click', async () => {\r\n            if (!AuthApi.isAuthenticated()) {\r\n                Toast.warning('Please login to add items to your wishlist.');\r\n                window.location.href = '/account/login/?next=' + encodeURIComponent(window.location.pathname);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                await WishlistApi.addItem(currentProduct.id);\r\n                Toast.success('Added to wishlist!');\r\n                \r\n                btn.querySelector('svg').setAttribute('fill', 'currentColor');\r\n                btn.classList.add('text-red-500');\r\n            } catch (error) {\r\n                if (error.message?.includes('already')) {\r\n                    Toast.info('This item is already in your wishlist.');\r\n                } else {\r\n                    Toast.error(error.message || 'Failed to add to wishlist.');\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    function initShare() {\r\n        const shareBtns = document.querySelectorAll('.share-btn');\r\n        const url = encodeURIComponent(window.location.href);\r\n        const title = encodeURIComponent(currentProduct?.name || document.title);\r\n\r\n        shareBtns.forEach(btn => {\r\n            btn.addEventListener('click', () => {\r\n                const platform = btn.dataset.platform;\r\n                let shareUrl = '';\r\n\r\n                switch (platform) {\r\n                    case 'facebook':\r\n                        shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${url}`;\r\n                        break;\r\n                    case 'twitter':\r\n                        shareUrl = `https://twitter.com/intent/tweet?url=${url}&text=${title}`;\r\n                        break;\r\n                    case 'pinterest':\r\n                        const image = encodeURIComponent(currentProduct?.image || '');\r\n                        shareUrl = `https://pinterest.com/pin/create/button/?url=${url}&media=${image}&description=${title}`;\r\n                        break;\r\n                    case 'copy':\r\n                        navigator.clipboard.writeText(window.location.href)\r\n                            .then(() => Toast.success('Link copied to clipboard!'))\r\n                            .catch(() => Toast.error('Failed to copy link.'));\r\n                        return;\r\n                }\r\n\r\n                if (shareUrl) {\r\n                    window.open(shareUrl, '_blank', 'width=600,height=400');\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    async function loadBreadcrumbs(product) {\r\n        const container = document.getElementById('breadcrumbs');\r\n        if (!container) return;\r\n\r\n        const items = [\r\n            { label: 'Home', url: '/' },\r\n            { label: 'Products', url: '/products/' }\r\n        ];\r\n\r\n        if (product.category) {\r\n            try {\r\n                const response = await CategoriesAPI.getBreadcrumbs(product.category.id);\r\n                const categoryBreadcrumbs = response.data || [];\r\n                categoryBreadcrumbs.forEach(cat => {\r\n                    items.push({ label: cat.name, url: `/categories/${cat.slug}/` });\r\n                });\r\n            } catch (error) {\r\n                items.push({ label: product.category.name, url: `/categories/${product.category.slug}/` });\r\n            }\r\n        }\r\n\r\n        items.push({ label: product.name });\r\n\r\n        container.innerHTML = Breadcrumb.render(items);\r\n    }\r\n\r\n    async function loadRelatedProducts(product) {\r\n        const container = document.getElementById('related-products');\r\n        if (!container) return;\r\n\r\n        try {\r\n            const response = await ProductsAPI.getRelated(product.id, { limit: 4 });\r\n            const products = response.data || [];\r\n\r\n            if (products.length === 0) {\r\n                container.innerHTML = '';\r\n                return;\r\n            }\r\n\r\n            container.innerHTML = `\r\n                <h2 class=\"text-2xl font-bold text-gray-900 mb-6\">You may also like</h2>\r\n                <div class=\"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6\">\r\n                    ${products.map(p => ProductCard.render(p)).join('')}\r\n                </div>\r\n            `;\r\n\r\n            ProductCard.bindEvents(container);\r\n        } catch (error) {\r\n            console.error('Failed to load related products:', error);\r\n            container.innerHTML = '';\r\n        }\r\n    }\r\n\r\n    async function loadReviews(product) {\r\n        const container = document.getElementById('reviews-container');\r\n        if (!container) return;\r\n\r\n        Loader.show(container, 'spinner');\r\n\r\n        try {\r\n            const response = await ProductsAPI.getReviews(product.id);\r\n            const reviews = response.data || [];\r\n\r\n            container.innerHTML = `\r\n                <!-- Review Summary -->\r\n                <div class=\"flex flex-col md:flex-row gap-8 mb-8 pb-8 border-b border-gray-200\">\r\n                    <div class=\"text-center\">\r\n                        <div class=\"text-5xl font-bold text-gray-900\">${product.average_rating?.toFixed(1) || '0.0'}</div>\r\n                        <div class=\"flex justify-center mt-2\">\r\n                            ${Templates.renderStars(product.average_rating || 0)}\r\n                        </div>\r\n                        <div class=\"text-sm text-gray-500 mt-1\">${product.review_count || 0} reviews</div>\r\n                    </div>\r\n                    ${AuthAPI.isAuthenticated() ? `\r\n                        <div class=\"flex-1\">\r\n                            <button id=\"write-review-btn\" class=\"px-6 py-3 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 transition-colors\">\r\n                                Write a Review\r\n                            </button>\r\n                        </div>\r\n                    ` : `\r\n                        <div class=\"flex-1\">\r\n                            <p class=\"text-gray-600\">\r\n                                <a href=\"/account/login/?next=${encodeURIComponent(window.location.pathname)}\" class=\"text-primary-600 hover:text-primary-700\">Sign in</a> \r\n                                to write a review.\r\n                            </p>\r\n                        </div>\r\n                    `}\r\n                </div>\r\n\r\n                <!-- Reviews List -->\r\n                ${reviews.length > 0 ? `\r\n                    <div class=\"space-y-6\">\r\n                        ${reviews.map(review => `\r\n                            <div class=\"border-b border-gray-100 pb-6\">\r\n                                <div class=\"flex items-start gap-4\">\r\n                                    <div class=\"flex-shrink-0 w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center\">\r\n                                        <span class=\"text-gray-600 font-medium\">${(review.user?.first_name?.[0] || review.user?.email?.[0] || 'U').toUpperCase()}</span>\r\n                                    </div>\r\n                                    <div class=\"flex-1\">\r\n                                        <div class=\"flex items-center gap-2\">\r\n                                            <span class=\"font-medium text-gray-900\">${Templates.escapeHtml(review.user?.first_name || 'Anonymous')}</span>\r\n                                            ${review.verified_purchase ? `\r\n                                                <span class=\"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded\">Verified Purchase</span>\r\n                                            ` : ''}\r\n                                        </div>\r\n                                        <div class=\"flex items-center gap-2 mt-1\">\r\n                                            ${Templates.renderStars(review.rating)}\r\n                                            <span class=\"text-sm text-gray-500\">${Templates.formatDate(review.created_at)}</span>\r\n                                        </div>\r\n                                        ${review.title ? `<h4 class=\"font-medium text-gray-900 mt-2\">${Templates.escapeHtml(review.title)}</h4>` : ''}\r\n                                        <p class=\"text-gray-600 mt-2\">${Templates.escapeHtml(review.comment)}</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        `).join('')}\r\n                    </div>\r\n                ` : `\r\n                    <p class=\"text-gray-500 text-center py-8\">No reviews yet. Be the first to review this product!</p>\r\n                `}\r\n            `;\r\n\r\n            document.getElementById('write-review-btn')?.addEventListener('click', () => {\r\n                showReviewForm(product);\r\n            });\r\n        } catch (error) {\r\n            console.error('Failed to load reviews:', error);\r\n            container.innerHTML = '<p class=\"text-red-500\">Failed to load reviews.</p>';\r\n        }\r\n    }\r\n\r\n    function showReviewForm(product) {\r\n        Modal.open({\r\n            title: 'Write a Review',\r\n            content: `\r\n                <form id=\"review-form\" class=\"space-y-4\">\r\n                    <div>\r\n                        <label class=\"block text-sm font-medium text-gray-700 mb-2\">Rating</label>\r\n                        <div class=\"flex gap-1\" id=\"rating-stars\">\r\n                            ${[1, 2, 3, 4, 5].map(i => `\r\n                                <button type=\"button\" class=\"rating-star text-gray-300 hover:text-yellow-400\" data-rating=\"${i}\">\r\n                                    <svg class=\"w-8 h-8\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                                        <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"/>\r\n                                    </svg>\r\n                                </button>\r\n                            `).join('')}\r\n                        </div>\r\n                        <input type=\"hidden\" id=\"review-rating\" value=\"0\">\r\n                    </div>\r\n                    <div>\r\n                        <label for=\"review-title\" class=\"block text-sm font-medium text-gray-700 mb-1\">Title (optional)</label>\r\n                        <input type=\"text\" id=\"review-title\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500\">\r\n                    </div>\r\n                    <div>\r\n                        <label for=\"review-comment\" class=\"block text-sm font-medium text-gray-700 mb-1\">Your Review</label>\r\n                        <textarea id=\"review-comment\" rows=\"4\" class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary-500 focus:border-primary-500\" required></textarea>\r\n                    </div>\r\n                </form>\r\n            `,\r\n            confirmText: 'Submit Review',\r\n            onConfirm: async () => {\r\n                const rating = parseInt(document.getElementById('review-rating').value);\r\n                const title = document.getElementById('review-title').value.trim();\r\n                const comment = document.getElementById('review-comment').value.trim();\r\n\r\n                if (!rating || rating < 1) {\r\n                    Toast.error('Please select a rating.');\r\n                    return false;\r\n                }\r\n\r\n                if (!comment) {\r\n                    Toast.error('Please write a review.');\r\n                    return false;\r\n                }\r\n\r\n                try {\r\n                    await ProductsAPI.createReview(product.id, { rating, title, comment });\r\n                    Toast.success('Thank you for your review!');\r\n                    loadReviews(product);\r\n                    return true;\r\n                } catch (error) {\r\n                    Toast.error(error.message || 'Failed to submit review.');\r\n                    return false;\r\n                }\r\n            }\r\n        });\r\n\r\n        const stars = document.querySelectorAll('.rating-star');\r\n        const ratingInput = document.getElementById('review-rating');\r\n\r\n        stars.forEach(star => {\r\n            star.addEventListener('click', () => {\r\n                const rating = parseInt(star.dataset.rating);\r\n                ratingInput.value = rating;\r\n                \r\n                stars.forEach((s, i) => {\r\n                    if (i < rating) {\r\n                        s.classList.remove('text-gray-300');\r\n                        s.classList.add('text-yellow-400');\r\n                    } else {\r\n                        s.classList.add('text-gray-300');\r\n                        s.classList.remove('text-yellow-400');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    async function trackProductView(product) {\r\n        try {\r\n            await ProductsAPI.trackView(product.id);\r\n        } catch (error) {\r\n            // error logging removed\r\n        }\r\n    }\r\n\r\n    function destroy() {\r\n        currentProduct = null;\r\n        selectedVariant = null;\r\n        gallery = null;\r\n        initialized = false;\r\n    }\r\n\r\n    return {\r\n        init,\r\n        destroy\r\n    };\r\n})();\r\n\r\nwindow.ProductPage = ProductPage;\r\nexport default ProductPage;\r\n", "/**\n * Search Page\n * @module pages/search\n */\n\nconst SearchPage = (function() {\n    'use strict';\n\n    let currentQuery = '';\n    let currentPage = 1;\n    let currentFilters = {};\n    let abortController = null;\n    let initialized = false;\n\n    async function init() {\n        // Prevent multiple initializations\n        if (initialized) return;\n        initialized = true;\n\n        // Check if content is already server-rendered\n        const resultsContainer = document.getElementById('search-results') || document.getElementById('products-grid');\n        const hasServerContent = resultsContainer && resultsContainer.querySelector('.product-card, [data-product-id]');\n        \n        if (hasServerContent) {\n            // Server-rendered content exists - just bind event handlers\n            initSearchForm();\n            initFilters();\n            initSorting();\n            initViewToggle();\n            return;\n        }\n\n        currentQuery = getQueryFromUrl();\n        currentFilters = getFiltersFromUrl();\n        currentPage = parseInt(new URLSearchParams(window.location.search).get('page')) || 1;\n\n        // Load products whether there's a search query or not\n        await loadProducts();\n\n        initSearchForm();\n        initFilters();\n        initSorting();\n        initViewToggle();\n    }\n\n    function initViewToggle() {\n        const gridBtn = document.getElementById('view-grid');\n        const listBtn = document.getElementById('view-list');\n        \n        gridBtn?.addEventListener('click', () => {\n            gridBtn.classList.add('bg-primary-100', 'text-primary-700');\n            gridBtn.classList.remove('text-gray-400');\n            listBtn?.classList.remove('bg-primary-100', 'text-primary-700');\n            listBtn?.classList.add('text-gray-400');\n            Storage?.set('productViewMode', 'grid');\n            loadProducts();\n        });\n        \n        listBtn?.addEventListener('click', () => {\n            listBtn.classList.add('bg-primary-100', 'text-primary-700');\n            listBtn.classList.remove('text-gray-400');\n            gridBtn?.classList.remove('bg-primary-100', 'text-primary-700');\n            gridBtn?.classList.add('text-gray-400');\n            Storage?.set('productViewMode', 'list');\n            loadProducts();\n        });\n    }\n\n    async function loadProducts() {\n        const resultsContainer = document.getElementById('search-results') || document.getElementById('products-grid');\n        const resultsCount = document.getElementById('results-count') || document.getElementById('product-count');\n        \n        if (!resultsContainer) return;\n\n        if (abortController) {\n            abortController.abort();\n        }\n        abortController = new AbortController();\n\n        Loader.show(resultsContainer, 'skeleton');\n\n        try {\n            const params = {\n                page: currentPage,\n                pageSize: 12,\n                ...currentFilters\n            };\n            \n            if (currentQuery) {\n                params.search = currentQuery;\n            }\n\n            // Check if we're on categories page\n            const path = window.location.pathname;\n            if (path === '/categories/') {\n                // Load categories instead of products\n                await loadCategories();\n                return;\n            }\n\n            const response = await ProductsApi.getProducts(params);\n            const products = Array.isArray(response) ? response : (response.data || response.results || []);\n            const meta = response.meta || {};\n\n            if (resultsCount) {\n                if (currentQuery) {\n                    resultsCount.textContent = `${meta.total || products.length} results for \"${Templates.escapeHtml(currentQuery)}\"`;\n                } else {\n                    resultsCount.textContent = `${meta.total || products.length} products`;\n                }\n            }\n\n            renderResults(products, meta);\n            await loadFilterOptions();\n        } catch (error) {\n            if (error.name === 'AbortError') return;\n            console.error('Failed to load products:', error);\n            resultsContainer.innerHTML = '<p class=\"text-red-500 text-center py-8\">Failed to load products. Please try again.</p>';\n        }\n    }\n\n    async function loadCategories() {\n        const resultsContainer = document.getElementById('search-results') || document.getElementById('products-grid');\n        const resultsCount = document.getElementById('results-count') || document.getElementById('product-count');\n        const pageTitle = document.getElementById('page-title');\n        \n        if (!resultsContainer) return;\n\n        try {\n            const response = await CategoriesApi.getCategories({ limit: 50 });\n            const categories = Array.isArray(response) ? response : (response.data || response.results || []);\n\n            if (pageTitle) {\n                pageTitle.textContent = 'All Categories';\n            }\n\n            if (resultsCount) {\n                resultsCount.textContent = `${categories.length} categories`;\n            }\n\n            if (categories.length === 0) {\n                resultsContainer.innerHTML = `\n                    <div class=\"text-center py-16\">\n                        <svg class=\"w-24 h-24 text-gray-300 mx-auto mb-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\"/>\n                        </svg>\n                        <h2 class=\"text-2xl font-bold text-gray-900 mb-2\">No categories found</h2>\n                        <p class=\"text-gray-600\">Check back later for new categories.</p>\n                    </div>\n                `;\n                return;\n            }\n\n            resultsContainer.innerHTML = `\n                <div class=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6\">\n                    ${categories.map(cat => `\n                        <a href=\"/categories/${cat.slug}/\" class=\"group bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden\">\n                            <div class=\"relative overflow-hidden\" style=\"aspect-ratio: ${product?.aspect?.css || '1/1'};\">\n                                ${cat.image ? `\n                                    <img src=\"${cat.image}\" alt=\"${Templates.escapeHtml(cat.name)}\" class=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\">\n                                ` : `\n                                    <div class=\"w-full h-full flex items-center justify-center\">\n                                        <svg class=\"w-16 h-16 text-gray-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\"/>\n                                        </svg>\n                                    </div>\n                                `}\n                            </div>\n                            <div class=\"p-4 text-center\">\n                                <h3 class=\"font-semibold text-gray-900 group-hover:text-primary-600 transition-colors\">${Templates.escapeHtml(cat.name)}</h3>\n                                ${cat.product_count ? `<p class=\"text-sm text-gray-500 mt-1\">${cat.product_count} products</p>` : ''}\n                            </div>\n                        </a>\n                    `).join('')}\n                </div>\n            `;\n        } catch (error) {\n            console.error('Failed to load categories:', error);\n            resultsContainer.innerHTML = '<p class=\"text-red-500 text-center py-8\">Failed to load categories. Please try again.</p>';\n        }\n    }\n\n    function getQueryFromUrl() {\n        const params = new URLSearchParams(window.location.search);\n        return params.get('q') || '';\n    }\n\n    function getFiltersFromUrl() {\n        const params = new URLSearchParams(window.location.search);\n        const filters = {};\n\n        if (params.get('category')) filters.category = params.get('category');\n        if (params.get('min_price')) filters.minPrice = params.get('min_price');\n        if (params.get('max_price')) filters.maxPrice = params.get('max_price');\n        if (params.get('ordering')) filters.ordering = params.get('ordering');\n        if (params.get('in_stock')) filters.inStock = params.get('in_stock') === 'true';\n        if (params.get('sale')) filters.onSale = params.get('sale') === 'true';\n        if (params.get('featured')) filters.featured = params.get('featured') === 'true';\n\n        return filters;\n    }\n\n    function initSearchForm() {\n        const searchForm = document.getElementById('search-form');\n        const searchInput = document.getElementById('search-input');\n\n        if (searchInput) {\n            searchInput.value = currentQuery;\n        }\n\n        searchForm?.addEventListener('submit', (e) => {\n            e.preventDefault();\n            const query = searchInput?.value.trim();\n            \n            if (query) {\n                currentQuery = query;\n                currentPage = 1;\n                updateUrl();\n                performSearch();\n            }\n        });\n\n        // Live search suggestions\n        const suggestionsContainer = document.getElementById('search-suggestions');\n        let debounceTimer = null;\n\n        searchInput?.addEventListener('input', (e) => {\n            const query = e.target.value.trim();\n            \n            clearTimeout(debounceTimer);\n\n            if (query.length < 2) {\n                if (suggestionsContainer) {\n                    suggestionsContainer.innerHTML = '';\n                    suggestionsContainer.classList.add('hidden');\n                }\n                return;\n            }\n\n            debounceTimer = setTimeout(async () => {\n                try {\n                    const response = await ProductsApi.search({ q: query, limit: 5 });\n                    const products = response.data || [];\n\n                    if (suggestionsContainer && products.length > 0) {\n                        suggestionsContainer.innerHTML = `\n                            <div class=\"py-2\">\n                                ${products.map(product => `\n                                    <a href=\"/products/${product.slug}/\" class=\"flex items-center gap-3 px-4 py-2 hover:bg-gray-50\">\n                                        <img src=\"${product.image || '/static/images/placeholder.png'}\" alt=\"\" class=\"w-10 h-10 object-cover rounded\">\n                                        <div>\n                                            <p class=\"text-sm font-medium text-gray-900\">${Templates.escapeHtml(product.name)}</p>\n                                            <p class=\"text-sm text-primary-600\">${Templates.formatPrice(product.current_price ?? product.price_converted ?? product.price)}</p>\n                                        </div>\n                                    </a>\n                                `).join('')}\n                            </div>\n                        `;\n                        suggestionsContainer.classList.remove('hidden');\n                    }\n                } catch (error) {\n                    console.error('Search suggestions failed:', error);\n                }\n            }, 300);\n        });\n\n        // Hide suggestions on blur\n        searchInput?.addEventListener('blur', () => {\n            setTimeout(() => {\n                if (suggestionsContainer) {\n                    suggestionsContainer.classList.add('hidden');\n                }\n            }, 200);\n        });\n    }\n\n    async function performSearch() {\n        // Delegate to loadProducts which handles both search and browse\n        await loadProducts();\n    }\n\n    function renderResults(products, meta) {\n    }\n\n    function renderResults(products, meta) {\n        const container = document.getElementById('search-results');\n        if (!container) return;\n\n        if (products.length === 0) {\n            container.innerHTML = `\n                <div class=\"text-center py-16\">\n                    <svg class=\"w-24 h-24 text-gray-300 mx-auto mb-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"/>\n                    </svg>\n                    <h2 class=\"text-2xl font-bold text-gray-900 mb-2\">No results found</h2>\n                    <p class=\"text-gray-600 mb-4\">We couldn't find any products matching \"${Templates.escapeHtml(currentQuery)}\"</p>\n                    <p class=\"text-gray-500 text-sm\">Try different keywords or browse our categories</p>\n                </div>\n            `;\n            return;\n        }\n\n        const viewMode = Storage.get('productViewMode') || 'grid';\n        const gridClass = viewMode === 'list' \n            ? 'space-y-4' \n            : 'grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6';\n\n        container.innerHTML = `\n            <div class=\"${gridClass}\">\n                ${products.map(product => ProductCard.render(product, { layout: viewMode })).join('')}\n            </div>\n            ${meta.total_pages > 1 ? `\n                <div id=\"search-pagination\" class=\"mt-8\">${Pagination.render({\n                    currentPage: meta.current_page || currentPage,\n                    totalPages: meta.total_pages,\n                    totalItems: meta.total\n                })}</div>\n            ` : ''}\n        `;\n\n        ProductCard.bindEvents(container);\n\n        const paginationContainer = document.getElementById('search-pagination');\n        paginationContainer?.addEventListener('click', (e) => {\n            const pageBtn = e.target.closest('[data-page]');\n            if (pageBtn) {\n                currentPage = parseInt(pageBtn.dataset.page);\n                updateUrl();\n                performSearch();\n                window.scrollTo({ top: 0, behavior: 'smooth' });\n            }\n        });\n    }\n\n    async function loadFilterOptions() {\n        const categoriesContainer = document.getElementById('filter-categories');\n        if (!categoriesContainer) return;\n\n        try {\n            const response = await CategoriesAPI.getAll({ has_products: true, limit: 20 });\n            const categories = response.data || [];\n\n            categoriesContainer.innerHTML = `\n                <div class=\"space-y-2\">\n                    <label class=\"flex items-center\">\n                        <input type=\"radio\" name=\"category\" value=\"\" ${!currentFilters.category ? 'checked' : ''} class=\"text-primary-600 focus:ring-primary-500\">\n                        <span class=\"ml-2 text-sm text-gray-600\">All Categories</span>\n                    </label>\n                    ${categories.map(cat => `\n                        <label class=\"flex items-center\">\n                            <input type=\"radio\" name=\"category\" value=\"${cat.id}\" ${currentFilters.category === String(cat.id) ? 'checked' : ''} class=\"text-primary-600 focus:ring-primary-500\">\n                            <span class=\"ml-2 text-sm text-gray-600\">${Templates.escapeHtml(cat.name)}</span>\n                        </label>\n                    `).join('')}\n                </div>\n            `;\n\n            bindCategoryFilter();\n        } catch (error) {\n            // error logging removed\n        }\n    }\n\n    function bindCategoryFilter() {\n        const categoryRadios = document.querySelectorAll('input[name=\"category\"]');\n        categoryRadios.forEach(radio => {\n            radio.addEventListener('change', (e) => {\n                if (e.target.value) {\n                    currentFilters.category = e.target.value;\n                } else {\n                    delete currentFilters.category;\n                }\n                currentPage = 1;\n                updateUrl();\n                performSearch();\n            });\n        });\n    }\n\n    function initFilters() {\n        const applyPriceBtn = document.getElementById('apply-price-filter');\n        const inStockCheckbox = document.getElementById('filter-in-stock');\n        const clearFiltersBtn = document.getElementById('clear-filters');\n\n        applyPriceBtn?.addEventListener('click', () => {\n            const minPrice = document.getElementById('filter-min-price')?.value;\n            const maxPrice = document.getElementById('filter-max-price')?.value;\n\n            if (minPrice) currentFilters.min_price = minPrice;\n            else delete currentFilters.min_price;\n            \n            if (maxPrice) currentFilters.max_price = maxPrice;\n            else delete currentFilters.max_price;\n\n            currentPage = 1;\n            updateUrl();\n            performSearch();\n        });\n\n        inStockCheckbox?.addEventListener('change', (e) => {\n            if (e.target.checked) {\n                currentFilters.in_stock = true;\n            } else {\n                delete currentFilters.in_stock;\n            }\n            currentPage = 1;\n            updateUrl();\n            performSearch();\n        });\n\n        clearFiltersBtn?.addEventListener('click', () => {\n            currentFilters = {};\n            currentPage = 1;\n            \n            document.querySelectorAll('input[name=\"category\"]').forEach(r => {\n                r.checked = r.value === '';\n            });\n            \n            const minInput = document.getElementById('filter-min-price');\n            const maxInput = document.getElementById('filter-max-price');\n            if (minInput) minInput.value = '';\n            if (maxInput) maxInput.value = '';\n            \n            if (inStockCheckbox) inStockCheckbox.checked = false;\n\n            updateUrl();\n            performSearch();\n        });\n\n        // Initialize filter values\n        const minInput = document.getElementById('filter-min-price');\n        const maxInput = document.getElementById('filter-max-price');\n        if (minInput && currentFilters.min_price) minInput.value = currentFilters.min_price;\n        if (maxInput && currentFilters.max_price) maxInput.value = currentFilters.max_price;\n        if (inStockCheckbox && currentFilters.in_stock) inStockCheckbox.checked = true;\n    }\n\n    function initSorting() {\n        const sortSelect = document.getElementById('sort-select');\n        if (!sortSelect) return;\n\n        sortSelect.value = currentFilters.ordering || '';\n\n        sortSelect.addEventListener('change', (e) => {\n            if (e.target.value) {\n                currentFilters.ordering = e.target.value;\n            } else {\n                delete currentFilters.ordering;\n            }\n            currentPage = 1;\n            updateUrl();\n            performSearch();\n        });\n    }\n\n    function updateUrl() {\n        const params = new URLSearchParams();\n        \n        if (currentQuery) params.set('q', currentQuery);\n        if (currentFilters.category) params.set('category', currentFilters.category);\n        if (currentFilters.min_price) params.set('min_price', currentFilters.min_price);\n        if (currentFilters.max_price) params.set('max_price', currentFilters.max_price);\n        if (currentFilters.ordering) params.set('ordering', currentFilters.ordering);\n        if (currentFilters.in_stock) params.set('in_stock', 'true');\n        if (currentPage > 1) params.set('page', currentPage);\n\n        const newUrl = `${window.location.pathname}?${params.toString()}`;\n        window.history.pushState({}, '', newUrl);\n    }\n\n    function destroy() {\n        if (abortController) {\n            abortController.abort();\n            abortController = null;\n        }\n        currentQuery = '';\n        currentPage = 1;\n        currentFilters = {};\n        initialized = false;\n    }\n\n    return {\n        init,\n        destroy\n    };\n})();\n\nwindow.SearchPage = SearchPage;\nexport default SearchPage;\n", "/**\r\n * Wishlist Page\r\n * @module pages/wishlist\r\n */\r\n\r\nconst WishlistPage = (function() {\r\n    'use strict';\r\n\r\n    let currentPage = 1;\r\n\r\n    async function init() {\r\n        if (!AuthGuard.protectPage()) return;\r\n\r\n        await loadWishlist();\r\n    }\r\n\r\n    function resolveProductImage(item = {}) {\r\n        const product = item.product || item || {};\r\n        const candidates = [\r\n            item.product_image,\r\n            product.product_image,\r\n            product.primary_image,\r\n            product.image,\r\n            Array.isArray(product.images) ? product.images[0] : null,\r\n            product.image_url,\r\n            product.thumbnail\r\n        ];\r\n\r\n        const pick = (val) => {\r\n            if (!val) return '';\r\n            if (typeof val === 'string') return val;\r\n            if (typeof val === 'object') {\r\n                if (typeof val.image === 'string' && val.image) return val.image;\r\n                if (val.image && typeof val.image === 'object') {\r\n                    if (typeof val.image.url === 'string' && val.image.url) return val.image.url;\r\n                    if (typeof val.image.src === 'string' && val.image.src) return val.image.src;\r\n                }\r\n                if (typeof val.url === 'string' && val.url) return val.url;\r\n                if (typeof val.src === 'string' && val.src) return val.src;\r\n            }\r\n            return '';\r\n        };\r\n\r\n        for (const candidate of candidates) {\r\n            const url = pick(candidate);\r\n            if (url) return url;\r\n        }\r\n\r\n        return '';\r\n    }\r\n\r\n    function resolvePrices(item = {}) {\r\n        const product = item.product || item || {};\r\n        // For wishlist items, API now returns:\r\n        // - item.product_price (original price)\r\n        // - item.product_sale_price (sale price if on sale)\r\n        \r\n        const pickNumber = (val) => {\r\n            if (val === null || val === undefined) return null;\r\n            const num = Number(val);\r\n            return Number.isFinite(num) ? num : null;\r\n        };\r\n\r\n        // Get regular price - prefer product_price from wishlist API\r\n        const priceCandidates = [\r\n            item.product_price,\r\n            product.price,\r\n            item.price,\r\n            item.current_price,\r\n            item.price_at_add\r\n        ];\r\n        \r\n        let price = null;\r\n        for (const p of priceCandidates) {\r\n            price = pickNumber(p);\r\n            if (price !== null) break;\r\n        }\r\n\r\n        // Get sale price - prefer product_sale_price from wishlist API\r\n        const saleCandidates = [\r\n            item.product_sale_price,\r\n            product.sale_price,\r\n            item.sale_price\r\n        ];\r\n        \r\n        let salePrice = null;\r\n        for (const s of saleCandidates) {\r\n            salePrice = pickNumber(s);\r\n            if (salePrice !== null) break;\r\n        }\r\n\r\n        return {\r\n            price: price !== null ? price : 0,\r\n            salePrice: salePrice !== null ? salePrice : null\r\n        };\r\n    }\r\n\r\n    async function loadWishlist() {\r\n        const container = document.getElementById('wishlist-container');\r\n        if (!container) return;\r\n\r\n        Loader.show(container, 'skeleton');\r\n\r\n        try {\r\n            const response = await WishlistApi.getWishlist({ page: currentPage });\r\n            // Normalize various API shapes to a flat array and meta\r\n            let items = [];\r\n            let meta = {};\r\n\r\n            if (Array.isArray(response)) {\r\n                items = response;\r\n            } else if (response && typeof response === 'object') {\r\n                // Common shapes: { data: [...] }, { results: [...] }, { items: [...] }\r\n                items = response.data || response.results || response.items || [];\r\n                // Some APIs return { data: { items: [...], meta: {...} } }\r\n                if (!Array.isArray(items) && response.data && typeof response.data === 'object') {\r\n                    items = response.data.items || response.data.results || [];\r\n                    meta = response.data.meta || response.meta || {};\r\n                } else {\r\n                    meta = response.meta || {};\r\n                }\r\n            }\r\n\r\n            if (!Array.isArray(items)) {\r\n                // Last-ditch attempt: single item object => wrap; otherwise empty\r\n                items = items && typeof items === 'object' ? [items] : [];\r\n            }\r\n\r\n            renderWishlist(items, meta);\r\n        } catch (error) {\r\n            const msg = (error && (error.message || error.detail)) || 'Failed to load wishlist.';\r\n\r\n            // If authentication is required, redirect to login (AuthGuard will handle)\r\n            if (error && error.status === 401) {\r\n                // Trigger login redirect\r\n                AuthGuard.redirectToLogin();\r\n                return;\r\n            }\r\n\r\n            container.innerHTML = `<p class=\"text-red-500 text-center py-8\">${Templates.escapeHtml(msg)}</p>`;\r\n        }\r\n    }\r\n\r\n    function renderWishlist(items, meta) {\r\n        const container = document.getElementById('wishlist-container');\r\n        if (!container) return;\r\n\r\n        if (items.length === 0) {\r\n            container.innerHTML = `\r\n                <div class=\"text-center py-16\">\r\n                    <svg class=\"w-24 h-24 text-gray-300 mx-auto mb-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"/>\r\n                    </svg>\r\n                    <h2 class=\"text-2xl font-bold text-gray-900 mb-2\">Your wishlist is empty</h2>\r\n                    <p class=\"text-gray-600 mb-8\">Start adding items you love to your wishlist.</p>\r\n                    <a href=\"/products/\" class=\"inline-flex items-center px-6 py-3 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 transition-colors\">\r\n                        Browse Products\r\n                    </a>\r\n                </div>\r\n            `;\r\n            return;\r\n        }\r\n\r\n        container.innerHTML = `\r\n            <div class=\"mb-6 flex items-center justify-between\">\r\n                <h1 class=\"text-2xl font-bold text-gray-900\">My Wishlist (${items.length} items)</h1>\r\n                <button id=\"clear-wishlist-btn\" class=\"text-red-600 hover:text-red-700 font-medium text-sm\">\r\n                    Clear All\r\n                </button>\r\n            </div>\r\n            <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n                ${items.map(item => renderWishlistItem(item)).join('')}\r\n            </div> \r\n            ${meta.total_pages > 1 ? `\r\n                <div id=\"wishlist-pagination\" class=\"mt-8\"></div>\r\n            ` : ''}\r\n        `;\r\n\r\n        // Mount modern Pagination component if needed\r\n        if (meta && meta.total_pages > 1) {\r\n            const mount = document.getElementById('wishlist-pagination');\r\n            if (mount && window.Pagination) {\r\n                const paginator = new window.Pagination({\r\n                    totalPages: meta.total_pages,\r\n                    currentPage: meta.current_page || currentPage,\r\n                    className: 'justify-center',\r\n                    onChange: (page) => {\r\n                        currentPage = page;\r\n                        loadWishlist();\r\n                        window.scrollTo({ top: 0, behavior: 'smooth' });\r\n                    }\r\n                });\r\n                mount.innerHTML = '';\r\n                mount.appendChild(paginator.create());\r\n            }\r\n        }\r\n\r\n        bindEvents();\r\n    }\r\n\r\n    function renderWishlistItem(item) {\r\n        try {\r\n            const product = item.product || item || {};\r\n            const productName = item.product_name || product.name || '';\r\n            const productSlug = item.product_slug || product.slug || '';\r\n            const inStock = item.is_in_stock !== undefined ? item.is_in_stock : (product.is_in_stock !== undefined ? product.is_in_stock : (product.stock_quantity > 0));\r\n            const imageUrl = resolveProductImage(item || {});\r\n            const requiresVariants = !!item.product_has_variants;\r\n\r\n            let priceObj = { price: 0, salePrice: null };\r\n            try { priceObj = resolvePrices(item || {}); } catch { priceObj = { price: 0, salePrice: null }; }\r\n            const { price, salePrice } = priceObj;\r\n\r\n            const safeEscape = (s) => {\r\n                try { return Templates.escapeHtml(s || ''); } catch { return String(s || ''); }\r\n            };\r\n\r\n            const safePriceRender = (p) => {\r\n                try { return Price.render({ price: p.price, salePrice: p.salePrice }); } catch { return `<span class=\"font-bold\">${p.price || ''}</span>`; }\r\n            };\r\n\r\n            const aspectCss = (product && product.aspect && (product.aspect.css || (product.aspect.width && product.aspect.height ? `${product.aspect.width}/${product.aspect.height}` : null))) || '1/1';\r\n\r\n            return `\r\n                <div class=\"wishlist-item relative bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden\" data-item-id=\"${item && item.id ? item.id : ''}\" data-product-id=\"${(product && product.id) ? product.id : (item && item.product) ? item.product : ''}\" data-product-slug=\"${safeEscape(productSlug)}\" data-product-has-variants=\"${requiresVariants}\">\r\n                    <div class=\"relative\" style=\"aspect-ratio: ${aspectCss};\">\r\n                        ${item && item.discount_percentage ? `\r\n                            <div class=\"absolute top-2 left-2 z-10 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded\">\r\n                                -${item.discount_percentage}%\r\n                            </div>\r\n                        ` : ''}\r\n                        <button class=\"remove-btn absolute top-2 right-2 z-20 w-10 h-10 bg-gray-900 text-white rounded-full shadow-lg ring-2 ring-white/25 border border-white/30 flex items-center justify-center hover:bg-gray-800 transition-colors\" aria-label=\"Remove from wishlist\" style=\"pointer-events:auto;\">\r\n                            <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"white\" viewBox=\"0 0 24 24\">\r\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2.5\" d=\"M6 18L18 6M6 6l12 12\"/>\r\n                            </svg>\r\n                        </button>\r\n                        <a href=\"/products/${safeEscape(productSlug)}/\">\r\n                            ${imageUrl ? `\r\n                                <img \r\n                                    src=\"${imageUrl}\" \r\n                                    alt=\"${safeEscape(productName)}\"\r\n                                    class=\"w-full h-full object-cover\"\r\n                                    loading=\"lazy\"\r\n                                >\r\n                            ` : `\r\n                                <div class=\"w-full h-full bg-gray-200 flex items-center justify-center text-gray-400 text-xs uppercase tracking-wide\">No Image</div>\r\n                            `}\r\n                        </a>\r\n                    </div>\r\n                    <div class=\"p-4\">\r\n                        ${product && product.category ? `\r\n                            <a href=\"/categories/${safeEscape(product.category.slug)}/\" class=\"text-xs text-gray-500 hover:text-primary-600\">\r\n                                ${safeEscape(product.category.name)}\r\n                            </a>\r\n                        ` : ''}\r\n                        <h3 class=\"font-medium text-gray-900 mt-1 line-clamp-2\">\r\n                            <a href=\"/products/${safeEscape(productSlug)}/\" class=\"hover:text-primary-600\">\r\n                                ${safeEscape(productName)}\r\n                            </a>\r\n                        </h3>\r\n                        <div class=\"mt-2\">\r\n                            ${safePriceRender({ price, salePrice })}\r\n                        </div>\r\n                        ${product && product.average_rating ? `\r\n                            <div class=\"flex items-center gap-1 mt-2\">\r\n                                ${Templates.renderStars(product.average_rating)}\r\n                                <span class=\"text-xs text-gray-500\">(${product.review_count || 0})</span>\r\n                            </div>\r\n                        ` : ''}\r\n                        <button \r\n                            class=\"add-to-cart-btn mt-4 w-full px-4 py-2 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm\"\r\n                            ${!inStock ? 'disabled' : ''}\r\n                        >\r\n                            ${requiresVariants ? 'Select variant' : (inStock ? 'Add to Cart' : 'Out of Stock')}\r\n                        </button>\r\n                    </div>\r\n                    ${item && item.added_at ? `\r\n                        <div class=\"px-4 pb-4\">\r\n                            <p class=\"text-xs text-gray-400\">Added ${Templates.formatDate(item.added_at)}</p>\r\n                        </div>\r\n                    ` : ''}\r\n                </div>\r\n            `;\r\n        } catch (err) {\r\n            return '<div class=\"p-4 bg-white rounded shadow text-gray-500\">Failed to render item</div>';\r\n        }\r\n    }\r\n\r\n    function bindEvents() {\r\n        const clearAllBtn = document.getElementById('clear-wishlist-btn');\r\n        const wishlistItems = document.querySelectorAll('.wishlist-item');\r\n        const paginationContainer = document.getElementById('wishlist-pagination');\r\n\r\n        clearAllBtn?.addEventListener('click', async () => {\r\n            const confirmed = await Modal.confirm({\r\n                title: 'Clear Wishlist',\r\n                message: 'Are you sure you want to remove all items from your wishlist?',\r\n                confirmText: 'Clear All',\r\n                cancelText: 'Cancel'\r\n            });\r\n\r\n            if (confirmed) {\r\n                try {\r\n                    await WishlistApi.clear();\r\n                    Toast.success('Wishlist cleared.');\r\n                    await loadWishlist();\r\n                } catch (error) {\r\n                    Toast.error(error.message || 'Failed to clear wishlist.');\r\n                }\r\n            }\r\n        });\r\n\r\n        wishlistItems.forEach(item => {\r\n            const itemId = item.dataset.itemId;\r\n            const productId = item.dataset.productId;\r\n\r\n            item.querySelector('.remove-btn')?.addEventListener('click', async () => {\r\n                try {\r\n                    await WishlistApi.removeItem(itemId);\r\n                    Toast.success('Removed from wishlist.');\r\n                    item.remove();\r\n\r\n                    const remaining = document.querySelectorAll('.wishlist-item');\r\n                    if (remaining.length === 0) {\r\n                        await loadWishlist();\r\n                    }\r\n                } catch (error) {\r\n                    Toast.error(error.message || 'Failed to remove item.');\r\n                }\r\n            });\r\n\r\n            item.querySelector('.add-to-cart-btn')?.addEventListener('click', async (e) => {\r\n                const btn = e.target;\r\n                if (btn.disabled) return;\r\n\r\n                btn.disabled = true;\r\n                btn.textContent = 'Adding...';\r\n\r\n                const productSlug = item.dataset.productSlug || ''; // fallback if not present\r\n                const requiresVariants = item.dataset.productHasVariants === 'true' || item.dataset.productHasVariants === 'True' || item.dataset.productHasVariants === '1';\r\n\r\n                // If product requires variants, redirect user to product page to choose\r\n                if (requiresVariants) {\r\n                    // Open inline variant picker modal\r\n                    showVariantPicker(item);\r\n                    return;\r\n                }\r\n\r\n                try {\r\n                    await CartApi.addItem(productId, 1);\r\n                    Toast.success('Added to cart!');\r\n                    document.dispatchEvent(new CustomEvent('cart:updated'));\r\n                } catch (error) {\r\n                    // If the product requires a variant, redirect user to product page to choose variant\r\n                    const hasVariantError = Boolean(\r\n                        error && (\r\n                            (error.errors && error.errors.variant_id) ||\r\n                            (error.message && typeof error.message === 'string' && error.message.toLowerCase().includes('variant'))\r\n                        )\r\n                    );\r\n\r\n                    if (hasVariantError) {\r\n                        Toast.info('This product requires selecting a variant. Redirecting to the product page...');\r\n                        // If we don't have a slug, fall back to using the product anchor\r\n                        let slug = productSlug;\r\n                        if (!slug) {\r\n                            const href = item.querySelector('a')?.getAttribute('href');\r\n                            if (href) {\r\n                                const m = href.match(/\\/products\\/(.*)\\/?$/);\r\n                                if (m) slug = m[1];\r\n                            }\r\n                        }\r\n                        if (slug) {\r\n                            window.location.href = `/products/${slug}/`;\r\n                            return;\r\n                        }\r\n                    }\r\n\r\n                    Toast.error(error.message || 'Failed to add to cart.');\r\n                } finally {\r\n                    btn.disabled = false;\r\n                    btn.textContent = 'Add to Cart';\r\n                }\r\n            });\r\n        });\r\n\r\n        // Pagination handled by component onChange\r\n    }\r\n\r\n    function renderModalVariants(variants) {\r\n        const grouped = {};\r\n        variants.forEach(variant => {\r\n            if (!grouped[variant.attribute_name]) grouped[variant.attribute_name] = [];\r\n            grouped[variant.attribute_name].push(variant);\r\n        });\r\n\r\n        return Object.entries(grouped).map(([attrName, options]) => `\r\n            <div class=\"mt-4\">\r\n                <label class=\"text-sm font-medium text-gray-700\">${Templates.escapeHtml(attrName)}:</label>\r\n                <div class=\"flex flex-wrap gap-2 mt-2\" id=\"wishlist-variant-group-${Templates.slugify(attrName)}\">\r\n                    ${options.map((opt, index) => `\r\n                        <button type=\"button\" class=\"wishlist-modal-variant-btn px-3 py-2 border rounded-lg text-sm transition-colors ${index === 0 ? 'border-primary-500 bg-primary-50 text-primary-700' : 'border-gray-300 hover:border-gray-400'}\" data-variant-id=\"${opt.id}\" data-price=\"${opt.price_converted ?? opt.price ?? ''}\" data-stock=\"${opt.stock_quantity || 0}\">\r\n                            ${Templates.escapeHtml(opt.value)}\r\n                            ${(opt.price_converted ?? opt.price) ? `<span class=\"text-xs text-gray-500\"> (${Templates.formatPrice(opt.price_converted ?? opt.price)})</span>` : ''}\r\n                        </button>\r\n                    `).join('')}\r\n                </div>\r\n            </div>\r\n        `).join('');\r\n    }\r\n\r\n    async function showVariantPicker(item) {\r\n        // item: wishlist item object or DOM element dataset; prefer slug\r\n        const slug = item.product_slug || item.dataset?.productSlug || '';\r\n        const id = item.product || item.dataset?.productId || '';\r\n\r\n        try {\r\n            // Support environments where ProductsApi may not be available (fallback to ApiClient)\r\n            let res;\r\n            if (typeof ProductsApi !== 'undefined' && ProductsApi.getProduct) {\r\n                res = await ProductsApi.getProduct(slug || id);\r\n            } else {\r\n                const currency = (window.BUNORAA_CURRENCY && window.BUNORAA_CURRENCY.code) || undefined;\r\n                res = await ApiClient.get(`/products/${slug || id}/`, { currency });\r\n            }\r\n\r\n            if (!res || !res.success || !res.data) {\r\n                const msg = res && res.message ? res.message : 'Failed to load product variants.';\r\n                Toast.error(msg);\r\n                return;\r\n            }\r\n\r\n            const product = res.data;\r\n            const variants = product.variants || [];\r\n            if (!variants.length) {\r\n                // fallback to product page\r\n                window.location.href = `/products/${product.slug || slug || id}/`;\r\n                return;\r\n            }\r\n\r\n            const firstImage = product.images?.[0]?.image || product.primary_image || product.image || '';\r\n\r\n            const content = `\r\n                <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                    <div class=\"col-span-1\">\r\n                        ${firstImage ? `<img src=\"${firstImage}\" class=\"w-full h-48 object-cover rounded\" alt=\"${Templates.escapeHtml(product.name)}\">` : `<div class=\"w-full h-48 bg-gray-100 rounded\"></div>`}\r\n                    </div>\r\n                    <div class=\"col-span-2\">\r\n                        <h3 class=\"text-lg font-semibold\">${Templates.escapeHtml(product.name)}</h3>\r\n                        <div id=\"wishlist-variant-price\" class=\"mt-2 text-lg font-bold\">${Templates.formatPrice(variants?.[0]?.price_converted ?? variants?.[0]?.price ?? product.price)}</div>\r\n                        <div id=\"wishlist-variant-options\" class=\"mt-4\">\r\n                            ${renderModalVariants(variants)}\r\n                        </div>\r\n                        <div class=\"mt-4 flex items-center gap-2\">\r\n                            <label class=\"text-sm text-gray-700\">Qty</label>\r\n                            <input id=\"wishlist-variant-qty\" type=\"number\" value=\"1\" min=\"1\" class=\"w-20 px-3 py-2 border rounded\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            `;\r\n\r\n            const confirmed = await Modal.open({\r\n                title: 'Select Variant',\r\n                content,\r\n                confirmText: 'Add to Cart',\r\n                cancelText: 'Cancel',\r\n                size: 'md',\r\n                onConfirm: async () => {\r\n                    // find selected variant\r\n                    const active = document.querySelector('.wishlist-modal-variant-btn.border-primary-500');\r\n                    const btn = active || document.querySelector('.wishlist-modal-variant-btn');\r\n                    if (!btn) {\r\n                        Toast.error('Please select a variant.');\r\n                        return false;\r\n                    }\r\n                    const variantId = btn.dataset.variantId;\r\n                    const qty = parseInt(document.getElementById('wishlist-variant-qty')?.value) || 1;\r\n\r\n                    try {\r\n                        await CartApi.addItem(product.id, qty, variantId);\r\n                        Toast.success('Added to cart!');\r\n                        document.dispatchEvent(new CustomEvent('cart:updated'));\r\n                        return true;\r\n                    } catch (err) {\r\n                        Toast.error(err.message || 'Failed to add to cart.');\r\n                        return false;\r\n                    }\r\n                }\r\n            });\r\n\r\n            // bind variant buttons to update selection and price after modal is rendered\r\n            setTimeout(() => {\r\n                const variantBtns = document.querySelectorAll('.wishlist-modal-variant-btn');\r\n                variantBtns.forEach(btn => {\r\n                    btn.addEventListener('click', () => {\r\n                        variantBtns.forEach(b => b.classList.remove('border-primary-500', 'bg-primary-50', 'text-primary-700'));\r\n                        btn.classList.add('border-primary-500', 'bg-primary-50', 'text-primary-700');\r\n\r\n                        const price = btn.dataset.price;\r\n                        if (price !== undefined) {\r\n                            const priceEl = document.getElementById('wishlist-variant-price');\r\n                            if (priceEl) priceEl.textContent = Templates.formatPrice(price);\r\n                        }\r\n                    });\r\n                });\r\n                // preselect first variant\r\n                const first = document.querySelector('.wishlist-modal-variant-btn');\r\n                if (first) first.click();\r\n            }, 20);\r\n\r\n        } catch (error) {\r\n            Toast.error('Failed to load variants.');\r\n        }\r\n    }\r\n\r\n    function destroy() {\r\n        currentPage = 1;\r\n    }\r\n\r\n    return {\r\n        init,\r\n        destroy\r\n    };\r\n})();\r\n\r\nwindow.WishlistPage = WishlistPage;\r\nexport default WishlistPage;\r\n", "/**\r\n * Bunoraa - Main Application Entry Point\r\n * @module app\r\n */\r\n\r\nimport { initLazyHydration } from './utils/lazyHydrate.js';\r\n\r\nconst App = (function() {\r\n    'use strict';\r\n\r\n    // Page controllers will be loaded on-demand via dynamic import for smaller initial bundle\r\n    const pageControllers = {};\r\n\r\n    let currentPage = null;\r\n    let currentController = null;\r\n\r\n    async function loadPageController(page) {\r\n        try {\r\n            const mod = await import(`./pages/${page}.js`);\r\n            return mod.default || mod;\r\n        } catch (e) {\r\n            // no controller for this page\r\n            return null;\r\n        }\r\n    }\r\n\r\n    function init() {\r\n        detectCurrentPage();\r\n        initGlobalComponents();\r\n        initCurrentPage();\r\n        initCartBadge();\r\n        initWishlistBadge();\r\n        initGlobalEventListeners();\r\n        initMobileMenu();\r\n        initLanguageSelector();\r\n        // Currency selector disabled in single-currency mode\r\n    }\r\n    async function initWishlistBadge() {\r\n        // Update wishlist badge on page load; sync wishlist button states. Fallback to cached value if API fails\r\n        try {\r\n            // If user is not authenticated, rely on cached/local storage value and clear active states\r\n            if (!AuthApi.isAuthenticated()) {\r\n                const raw = localStorage.getItem('wishlist');\r\n                if (raw) {\r\n                    const parsed = JSON.parse(raw);\r\n                    WishlistApi.updateBadge(parsed);\r\n                    const items = parsed.items || (parsed.data && parsed.data.items) || [];\r\n                    syncWishlistButtons(items);\r\n                } else {\r\n                    // Clear any filled buttons for anonymous users\r\n                    syncWishlistButtons([]);\r\n                }\r\n                return;\r\n            }\r\n\r\n            const response = await WishlistApi.getWishlist({ pageSize: 200 });\r\n            const payload = response.data || {};\r\n            const items = payload.items || payload.data || [];\r\n            WishlistApi.updateBadge(payload);\r\n            syncWishlistButtons(items);\r\n        } catch (error) {\r\n            try {\r\n                const raw = localStorage.getItem('wishlist');\r\n                if (raw) {\r\n                    const parsed = JSON.parse(raw);\r\n                    WishlistApi.updateBadge(parsed);\r\n                    const items = parsed.items || (parsed.data && parsed.data.items) || [];\r\n                    syncWishlistButtons(items);\r\n                }\r\n            } catch (e) {\r\n                // ignore\r\n            }\r\n        }\r\n    }\r\n\r\n    // Keep last loaded wishlist items for re-sync (used by mutation observer)\r\n    let _lastWishlistItems = [];\r\n\r\n    // Set wishlist button states (filled/outlined) based on wishlist items array\r\n    function syncWishlistButtons(items) {\r\n        try {\r\n            _lastWishlistItems = items || [];\r\n\r\n            const mapById = {};\r\n            const mapBySlug = {};\r\n\r\n            (items || []).forEach(it => {\r\n                // Support multiple shapes: item.product (uuid/string), item.product_id, item.product.slug or item.product_slug\r\n                const pid = (it.product || it.product_id || (it.product && it.product.id) || null);\r\n                const pslug = it.product_slug || (it.product && it.product.slug) || null;\r\n                const id = it.id || it.pk || it.uuid || it.item || null;\r\n                if (pid) mapById[String(pid)] = id || true;\r\n                if (pslug) mapBySlug[String(pslug)] = id || true;\r\n            });\r\n\r\n            document.querySelectorAll('.wishlist-btn').forEach(btn => { \r\n                try {\r\n                    const svg = btn.querySelector('svg');\r\n                    const fillPath = svg?.querySelector('.heart-fill');\r\n                    const productId = btn.dataset.productId || btn.closest('[data-product-id]')?.dataset.productId;\r\n                    const productSlug = btn.dataset.productSlug || btn.closest('[data-product-slug]')?.dataset.productSlug;\r\n\r\n                    let itemId = null;\r\n                    if (productId && mapById.hasOwnProperty(String(productId))) itemId = mapById[String(productId)];\r\n                    else if (productSlug && mapBySlug.hasOwnProperty(String(productSlug))) itemId = mapBySlug[String(productSlug)];\r\n\r\n                    if (itemId) {\r\n                        btn.dataset.wishlistItemId = itemId;\r\n                        btn.classList.add('text-red-500');\r\n                        btn.setAttribute('aria-pressed', 'true');\r\n                        svg?.classList.add('fill-current');\r\n                        if (fillPath) fillPath.style.opacity = '1';\r\n                    } else {\r\n                        btn.removeAttribute('data-wishlist-item-id');\r\n                        btn.classList.remove('text-red-500');\r\n                        btn.setAttribute('aria-pressed', 'false');\r\n                        svg?.classList.remove('fill-current');\r\n                        if (fillPath) fillPath.style.opacity = '0';\r\n                    }\r\n                } catch (e) {\r\n                    // ignore per-button errors\r\n                }\r\n            });\r\n        } catch (e) {\r\n            // error logging removed\r\n        }\r\n    }\r\n\r\n    // Observe DOM additions and re-sync wishlist buttons when new product cards appear\r\n    (function() {\r\n        if (typeof MutationObserver === 'undefined') return;\r\n        let debounceTimer = null;\r\n        const observer = new MutationObserver(function(mutations) {\r\n            let found = false;\r\n            for (const m of mutations) {\r\n                if (m.addedNodes && m.addedNodes.length) {\r\n                    for (const n of m.addedNodes) {\r\n                        if (n.nodeType === 1 && (n.matches?.('.product-card') || n.querySelector?.('.product-card') || n.querySelector?.('.wishlist-btn'))) {\r\n                            found = true; break;\r\n                        }\r\n                    }\r\n                }\r\n                if (found) break;\r\n            }\r\n            if (found) {\r\n                clearTimeout(debounceTimer);\r\n                debounceTimer = setTimeout(() => {\r\n                    try { syncWishlistButtons(_lastWishlistItems); } catch (e) {}\r\n                }, 150);\r\n            }\r\n        });\r\n        observer.observe(document.body, { childList: true, subtree: true });\r\n    })();\r\n\r\n    async function initCartBadge() {\r\n        const cartBadges = document.querySelectorAll('[data-cart-count]');\r\n        if (!cartBadges.length) return;\r\n        try {\r\n            const response = await CartApi.getCart();\r\n            const count = response.data?.item_count || 0;\r\n            updateCartBadge(count);\r\n        } catch (error) {\r\n            // Fallback to cached cart in localStorage to show counts immediately\r\n            try {\r\n                const raw = localStorage.getItem('cart');\r\n                if (raw) {\r\n                    const parsed = JSON.parse(raw);\r\n                    const count = parsed?.item_count || parsed?.items?.length || 0;\r\n                    updateCartBadge(count);\r\n                }\r\n            } catch (e) {\r\n                // error logging removed\r\n            }\r\n        }\r\n    }\r\n\r\n    function detectCurrentPage() {\r\n        const path = window.location.pathname;\r\n        const body = document.body;\r\n        \r\n        // Check for data-page attribute first\r\n        if (body.dataset.page) {\r\n            currentPage = body.dataset.page;\r\n            return;\r\n        }\r\n\r\n        // Avoid initializing account controller for general /account(s)/* routes (login, register, etc.)\r\n        // Only profile pages (e.g. /account/profile or /accounts/profile) should be considered account pages\r\n        if ((path.startsWith('/accounts/') || path.startsWith('/account/')) && !(path.startsWith('/accounts/profile') || path.startsWith('/account/profile'))) {\r\n            currentPage = null;\r\n            return;\r\n        }\r\n\r\n        // Detect from URL\r\n        if (path === '/' || path === '/home/') {\r\n            currentPage = 'home';\r\n        } else if (path === '/categories/' || path === '/products/') {\r\n            currentPage = 'search';\r\n        } else if (path.startsWith('/categories/') && path !== '/categories/') {\r\n            currentPage = 'category';\r\n        } else if (path.startsWith('/products/') && path !== '/products/') {\r\n            currentPage = 'product';\r\n        } else if (path === '/search/' || path.startsWith('/search')) {\r\n            currentPage = 'search';\r\n        } else if (path.startsWith('/cart')) {\r\n            currentPage = 'cart';\r\n        } else if (path.startsWith('/checkout')) {\r\n            currentPage = 'checkout';\r\n        } else if (path === '/account' || path.startsWith('/account/') || path.startsWith('/accounts/profile')) {\r\n            currentPage = 'account';\r\n        } else if (path.startsWith('/orders')) {\r\n            currentPage = 'orders';\r\n        } else if (path.startsWith('/wishlist')) {\r\n            currentPage = 'wishlist';\r\n        } else if (path.startsWith('/contact')) {\r\n            currentPage = 'contact';\r\n        } else if (path.startsWith('/faq')) {\r\n            currentPage = 'faq';\r\n        } else if (path.includes('privacy') || path.includes('terms') || path.includes('legal') || path.includes('policy')) {\r\n            currentPage = 'legal';\r\n        }\r\n    }\r\n\r\n    function initGlobalComponents() {\r\n        // Initialize global UI components\r\n        // Modal, Toast, and Dropdown are lazy-initialized when needed\r\n        \r\n        // Initialize tabs if present on page\r\n        if (typeof Tabs !== 'undefined' && document.querySelector('[data-tabs]')) {\r\n            Tabs.init();\r\n        }\r\n        \r\n        // Initialize any existing dropdowns on the page\r\n        if (typeof Dropdown !== 'undefined') {\r\n            document.querySelectorAll('[data-dropdown-trigger]').forEach(trigger => {\r\n                const targetId = trigger.dataset.dropdownTarget;\r\n                const target = document.getElementById(targetId);\r\n                if (target) {\r\n                    Dropdown.create(trigger, { content: target.innerHTML });\r\n                }\r\n            });\r\n        }\r\n\r\n        // Initialize lazy hydration for components marked with `data-hydrate`\r\n        try { initLazyHydration(); } catch (e) { /* ignore */ }\r\n    }\r\n\r\n    async function initCurrentPage() {\r\n        if (!currentPage) return;\r\n        // Destroy previous controller if it exposes destroy()\r\n        try {\r\n            if (currentController && typeof currentController.destroy === 'function') {\r\n                currentController.destroy();\r\n            }\r\n        } catch (e) { /* ignore */ }\r\n\r\n        const controller = await loadPageController(currentPage);\r\n        if (controller && typeof controller.init === 'function') {\r\n            currentController = controller;\r\n            try { await currentController.init(); } catch (e) { console.error('failed to init page controller', e); }\r\n        }\r\n    }\r\n\r\n    // Register service worker (if supported)\r\n    try {\r\n        if ('serviceWorker' in navigator) {\r\n            navigator.serviceWorker.register('/static/js/sw.js').catch(() => {});\r\n        }\r\n    } catch (e) { /* ignore */ }\r\n\r\n    async function initCartBadge() {\r\n        const cartBadges = document.querySelectorAll('[data-cart-count]');\r\n        if (!cartBadges.length) return;\r\n        try {\r\n            const response = await CartApi.getCart();\r\n            const count = response.data?.item_count || 0;\r\n            // Persist latest cart count for offline/failure fallback\r\n            try { localStorage.setItem('cart', JSON.stringify({ item_count: count, savedAt: Date.now() })); } catch(e) {}\r\n            updateCartBadge(count);\r\n        } catch (error) {\r\n            // Fallback to cached cart in localStorage to show counts immediately\r\n            try {\r\n                const raw = localStorage.getItem('cart');\r\n                if (raw) {\r\n                    const parsed = JSON.parse(raw);\r\n                    const count = parsed?.item_count || 0;\r\n                    updateCartBadge(count);\r\n                    return;\r\n                }\r\n            } catch (e) {\r\n                console.error('Failed to get cart count fallback:', e);\r\n            }\r\n            // error logging removed\r\n        }\r\n    }\r\n\r\n    async function findWishlistItemId(productId) {\r\n        try {\r\n            const response = await WishlistApi.getWishlist({ pageSize: 200 });\r\n            const payload = response.data || {};\r\n            const items = payload.items || [];\r\n            const match = items.find(item => String(item.product) === String(productId));\r\n            return match?.id || null;\r\n        } catch (error) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    function updateCartBadge(count) {\r\n        const cartBadges = document.querySelectorAll('[data-cart-count]');\r\n        cartBadges.forEach(badge => {\r\n            badge.textContent = count > 99 ? '99+' : count;\r\n            badge.classList.toggle('hidden', count === 0);\r\n        });\r\n    }\r\n\r\n    function initGlobalEventListeners() {\r\n        // Listen for cart updates\r\n        document.addEventListener('cart:updated', async () => {\r\n            await initCartBadge();\r\n        });\r\n\r\n        // Listen for wishlist updates\r\n        document.addEventListener('wishlist:updated', async () => {\r\n            await initWishlistBadge();\r\n        });\r\n\r\n        // Listen for auth state changes\r\n        document.addEventListener('auth:login', () => {\r\n            updateAuthUI(true);\r\n        });\r\n\r\n        document.addEventListener('auth:logout', () => {\r\n            updateAuthUI(false);\r\n        });\r\n\r\n        // Initialize wishlist icon fill state for existing buttons\r\n        document.querySelectorAll('.wishlist-btn').forEach(btn => {\r\n            try {\r\n                const svg = btn.querySelector('svg');\r\n                const fillPath = svg?.querySelector('.heart-fill');\r\n                if (btn.classList.contains('text-red-500')) {\r\n                    svg?.classList.add('fill-current');\r\n                    if (fillPath) fillPath.style.opacity = '1';\r\n                } else {\r\n                    if (fillPath) fillPath.style.opacity = '0';\r\n                }\r\n            } catch (e) {\r\n                // ignore\r\n            }\r\n        });\r\n\r\n        // Global quick add to cart (data-attribute and class-based)\r\n        document.addEventListener('click', async (e) => {\r\n            const quickAddBtn = e.target.closest('[data-quick-add], [data-add-to-cart], .add-to-cart-btn');\r\n            if (quickAddBtn) {\r\n                e.preventDefault();\r\n                const productId = quickAddBtn.dataset.productId || quickAddBtn.dataset.quickAdd || quickAddBtn.dataset.addToCart;\r\n                if (!productId) return;\r\n                \r\n                quickAddBtn.disabled = true;\r\n                const originalHtml = quickAddBtn.innerHTML;\r\n                quickAddBtn.innerHTML = '<svg class=\"animate-spin h-4 w-4 mx-auto\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle><path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg>';\r\n\r\n                try {\r\n                    await CartApi.addItem(productId, 1);\r\n                    Toast.success('Added to cart!');\r\n                    document.dispatchEvent(new CustomEvent('cart:updated'));\r\n                } catch (error) {\r\n                    Toast.error(error.message || 'Failed to add to cart.');\r\n                } finally {\r\n                    quickAddBtn.disabled = false;\r\n                    quickAddBtn.innerHTML = originalHtml;\r\n                }\r\n            }\r\n        });\r\n\r\n        // Global quick add to wishlist (data-attribute and class-based)\r\n        document.addEventListener('click', async (e) => {\r\n            const wishlistBtn = e.target.closest('[data-wishlist-toggle], .wishlist-btn');\r\n            if (wishlistBtn) {\r\n                e.preventDefault();\r\n\r\n                if (!AuthApi.isAuthenticated()) {\r\n                    Toast.warning('Please login to add items to your wishlist.');\r\n                    window.location.href = '/account/login/?next=' + encodeURIComponent(window.location.pathname);\r\n                    return;\r\n                }\r\n\r\n                const productId = wishlistBtn.dataset.wishlistToggle || wishlistBtn.dataset.productId || wishlistBtn.closest('[data-product-id]')?.dataset.productId;\r\n                if (!productId) {\r\n                        // missing productId\r\n                }\r\n\r\n                wishlistBtn.disabled = true;\r\n                let wishlistItemId = wishlistBtn.dataset.wishlistItemId || '';\r\n\r\n                if (!wishlistItemId && wishlistBtn.classList.contains('text-red-500')) {\r\n                    wishlistItemId = await findWishlistItemId(productId) || '';\r\n                }\r\n\r\n                const isActive = wishlistBtn.classList.contains('text-red-500');\r\n                const shouldRemove = isActive && wishlistItemId;\r\n\r\n                try {\r\n                    if (shouldRemove) {\r\n                        const res = await WishlistApi.removeItem(wishlistItemId);\r\n                        wishlistBtn.classList.remove('text-red-500');\r\n                        wishlistBtn.setAttribute('aria-pressed', 'false');\r\n                        wishlistBtn.querySelector('svg')?.classList.remove('fill-current');\r\n                        const fillPath = wishlistBtn.querySelector('svg')?.querySelector('.heart-fill');\r\n                        if (fillPath) fillPath.style.opacity = '0';\r\n                        wishlistBtn.removeAttribute('data-wishlist-item-id');\r\n                        Toast.success('Removed from wishlist.');\r\n                    } else {\r\n                        const response = await WishlistApi.addItem(productId);\r\n                        const createdId = response.data?.id || response.data?.item?.id || await findWishlistItemId(productId);\r\n                        if (createdId) {\r\n                            wishlistBtn.dataset.wishlistItemId = createdId;\r\n                        }\r\n                        wishlistBtn.classList.add('text-red-500');\r\n                        wishlistBtn.setAttribute('aria-pressed', 'true');\r\n                        wishlistBtn.querySelector('svg')?.classList.add('fill-current');\r\n                        const fillPath = wishlistBtn.querySelector('svg')?.querySelector('.heart-fill');\r\n                        if (fillPath) fillPath.style.opacity = '1';\r\n                        Toast.success(response.message || 'Added to wishlist!');\r\n                    }\r\n                } catch (error) {\r\n                    console.error('wishlist:error', error);\r\n                    Toast.error(error.message || 'Failed to update wishlist.');\r\n                } finally {\r\n                    wishlistBtn.disabled = false;\r\n                }\r\n            }\r\n        });\r\n\r\n        // Quick view handler\r\n        document.addEventListener('click', (e) => {\r\n            const quickViewBtn = e.target.closest('[data-quick-view], .quick-view-btn');\r\n            if (quickViewBtn) {\r\n                e.preventDefault();\r\n                const productId = quickViewBtn.dataset.quickView || quickViewBtn.dataset.productId;\r\n                const productSlug = quickViewBtn.dataset.productSlug;\r\n                \r\n                if (productSlug) {\r\n                    window.location.href = `/products/${productSlug}/`;\r\n                } else if (productId) {\r\n                    // If we have Modal component, show quick view modal\r\n                    if (typeof Modal !== 'undefined' && Modal.showQuickView) {\r\n                        Modal.showQuickView(productId);\r\n                    } else {\r\n                        window.location.href = `/products/${productId}/`;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // Handle logout\r\n        document.addEventListener('click', async (e) => {\r\n            const logoutBtn = e.target.closest('[data-logout]');\r\n            if (logoutBtn) {\r\n                e.preventDefault();\r\n                \r\n                try {\r\n                    await AuthApi.logout();\r\n                    Toast.success('Logged out successfully.');\r\n                    document.dispatchEvent(new CustomEvent('auth:logout'));\r\n                    window.location.href = '/';\r\n                } catch (error) {\r\n                    Toast.error('Failed to logout.');\r\n                }\r\n            }\r\n        });\r\n\r\n        // Handle back to top\r\n        const backToTopBtn = document.getElementById('back-to-top');\r\n        if (backToTopBtn) {\r\n            window.addEventListener('scroll', Debounce.throttle(() => {\r\n                if (window.scrollY > 500) {\r\n                    backToTopBtn.classList.remove('opacity-0', 'pointer-events-none');\r\n                } else {\r\n                    backToTopBtn.classList.add('opacity-0', 'pointer-events-none');\r\n                }\r\n            }, 100));\r\n\r\n            backToTopBtn.addEventListener('click', () => {\r\n                window.scrollTo({ top: 0, behavior: 'smooth' });\r\n            });\r\n        }\r\n    }\r\n\r\n    function updateAuthUI(isLoggedIn) {\r\n        const authElements = document.querySelectorAll('[data-auth-state]');\r\n        \r\n        authElements.forEach(el => {\r\n            const state = el.dataset.authState;\r\n            if (state === 'logged-in') {\r\n                el.classList.toggle('hidden', !isLoggedIn);\r\n            } else if (state === 'logged-out') {\r\n                el.classList.toggle('hidden', isLoggedIn);\r\n            }\r\n        });\r\n    }\r\n\r\n    function initMobileMenu() {\r\n        const menuBtn = document.getElementById('mobile-menu-btn');\r\n        const closeBtn = document.getElementById('close-mobile-menu');\r\n        const mobileMenu = document.getElementById('mobile-menu');\r\n        const overlay = document.getElementById('mobile-menu-overlay');\r\n\r\n        function openMenu() {\r\n            mobileMenu?.classList.remove('translate-x-full');\r\n            overlay?.classList.remove('hidden');\r\n            document.body.classList.add('overflow-hidden');\r\n        }\r\n\r\n        function closeMenu() {\r\n            mobileMenu?.classList.add('translate-x-full');\r\n            overlay?.classList.add('hidden');\r\n            document.body.classList.remove('overflow-hidden');\r\n        }\r\n\r\n        menuBtn?.addEventListener('click', openMenu);\r\n        closeBtn?.addEventListener('click', closeMenu);\r\n        overlay?.addEventListener('click', closeMenu);\r\n    }\r\n\r\n\r\n\r\n    function initLanguageSelector() {\r\n        const languageBtn = document.querySelector('[data-language-selector]');\r\n        const languageDropdown = document.getElementById('language-dropdown');\r\n\r\n        if (languageBtn && languageDropdown) {\r\n            Dropdown.create(languageBtn, languageDropdown);\r\n\r\n            languageDropdown.querySelectorAll('[data-language]').forEach(item => {\r\n                item.addEventListener('click', async () => {\r\n                    const lang = item.dataset.language;\r\n                    \r\n                    try {\r\n                        await LocalizationApi.setLanguage(lang);\r\n                        Storage.set('language', lang);\r\n                        window.location.reload();\r\n                    } catch (error) {\r\n                        Toast.error('Failed to change language.');\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    function destroy() {\r\n        if (currentController && typeof currentController.destroy === 'function') {\r\n            currentController.destroy();\r\n        }\r\n        currentPage = null;\r\n        currentController = null;\r\n    }\r\n\r\n    return {\r\n        init,\r\n        destroy,\r\n        getCurrentPage: () => currentPage,\r\n        updateCartBadge\r\n    };\r\n})();\r\n\r\n// Initialize app when DOM is ready\r\nif (document.readyState === 'loading') {\r\n    document.addEventListener('DOMContentLoaded', App.init);\r\n} else {\r\n    App.init();\r\n}\r\n\r\nwindow.App = App;\r\n"],
  "mappings": "ktBAgEA,SAASA,KAAQC,EAAS,CACxB,OAAOA,EACJ,KAAK,EACL,OAAOC,GAAKA,GAAK,OAAOA,GAAM,QAAQ,EACtC,KAAK,GAAG,CACb,CAKA,SAASC,EAAcC,EAAM,MAAO,CAAE,GAAAC,EAAK,GAAI,UAAAC,EAAY,GAAI,MAAAC,EAAQ,CAAC,EAAG,KAAAC,EAAO,GAAI,KAAAC,EAAO,EAAG,EAAI,CAAC,EAAG,CACtG,IAAMC,EAAK,SAAS,cAAcN,CAAG,EAErC,OAAIC,IAAIK,EAAG,GAAKL,GACZC,IAAWI,EAAG,UAAYJ,GAC1BG,IAAMC,EAAG,YAAcD,GACvBD,IAAME,EAAG,UAAYF,GAEzB,OAAO,QAAQD,CAAK,EAAE,QAAQ,CAAC,CAACI,EAAKC,CAAK,IAAM,CAC1CA,IAAU,GACZF,EAAG,aAAaC,EAAK,EAAE,EACdC,IAAU,IAASA,IAAU,MACtCF,EAAG,aAAaC,EAAKC,CAAK,CAE9B,CAAC,EAEMF,CACT,CAKA,SAASG,GAAYH,EAAII,EAAOC,EAASC,EAAU,CAAC,EAAG,CACrD,GAAKN,EACL,OAAAA,EAAG,iBAAiBI,EAAOC,EAASC,CAAO,EAEpC,IAAMN,EAAG,oBAAoBI,EAAOC,EAASC,CAAO,CAC7D,CAgDA,SAASC,EAAgBC,EAAW,CAClC,IAAMC,EAAoBD,EAAU,iBAClC,0EACF,EAEME,EAAeD,EAAkB,CAAC,EAClCE,EAAcF,EAAkBA,EAAkB,OAAS,CAAC,EAElE,MAAO,CACL,MAAO,CACLD,EAAU,iBAAiB,UAAYI,GAAM,CACvCA,EAAE,MAAQ,QAEVA,EAAE,SACA,SAAS,gBAAkBF,IAC7BE,EAAE,eAAe,EACjBD,EAAY,MAAM,GAGhB,SAAS,gBAAkBA,IAC7BC,EAAE,eAAe,EACjBF,EAAa,MAAM,GAGzB,CAAC,CACH,EACA,SAAU,CAEV,CACF,CACF,CA+CA,SAASG,IAAa,CACpB,MAAO,MAAQ,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,OAAO,EAAG,CAAC,EAAI,KAAK,IAAI,EAAE,SAAS,EAAE,CACjF,CAkBA,SAASC,EAAelB,EAAY,GAAI,CAQtC,OAPiBH,EAAc,MAAO,CACpC,UAAWH,EACT,4EACAM,CACF,EACA,MAAO,CAAE,gBAAiB,MAAO,CACnC,CAAC,CAEH,CA/PA,IAwLMmB,EAxLNC,EAAAC,EAAA,KAwLMF,EAAW,CACf,QAAUH,GAAMA,EAAE,MAAQ,QAC1B,SAAWA,GAAMA,EAAE,MAAQ,SAC3B,UAAYA,GAAMA,EAAE,MAAQ,UAC5B,YAAcA,GAAMA,EAAE,MAAQ,YAC9B,YAAcA,GAAMA,EAAE,MAAQ,YAC9B,aAAeA,GAAMA,EAAE,MAAQ,aAC/B,QAAUA,GAAMA,EAAE,MAAQ,IAC1B,MAAQA,GAAMA,EAAE,MAAQ,KAC1B,ICjMA,IAOaM,EAPbC,EAAAC,EAAA,KAKAC,IAEaH,EAAN,MAAMI,CAAc,CACzB,YAAYC,EAAU,CAAC,EAAG,CACxB,KAAK,GAAKA,EAAQ,IAAMC,GAAW,EACnC,KAAK,QAAU,KACf,KAAK,UAAY,CAAC,EAClB,KAAK,cAAgB,GACrB,KAAK,OAASD,CAChB,CAKA,OAAOE,EAAM,MAAO,CAAE,UAAAC,EAAY,GAAI,MAAAC,EAAQ,CAAC,EAAG,KAAAC,EAAO,EAAG,EAAI,CAAC,EAAG,CAClE,YAAK,QAAUC,EAAcJ,EAAK,CAChC,GAAI,KAAK,GACT,UAAAC,EACA,MAAAC,EACA,KAAAC,CACF,CAAC,EACM,KAAK,OACd,CAKA,MAAME,EAAU,CACd,GAAI,CAAC,KAAK,QACR,MAAO,GAGT,IAAMC,EAAS,OAAOD,GAAa,SAC/B,SAAS,cAAcA,CAAQ,EAC/BA,EAEJ,OAAKC,GAILA,EAAO,YAAY,KAAK,OAAO,EAC/B,KAAK,cAAgB,GACd,IALE,EAMX,CAKA,GAAGC,EAAOC,EAASV,EAAU,CAAC,EAAG,CAC/B,GAAI,CAAC,KAAK,QAAS,OAEnB,IAAMW,EAAUC,GAAY,KAAK,QAASH,EAAOC,EAASV,CAAO,EACjE,YAAK,UAAU,KAAKW,CAAO,EACpBA,CACT,CAKA,SAASJ,EAAUE,EAAOC,EAAS,CACjC,GAAI,CAAC,KAAK,QAAS,OAEnB,IAAMG,EAAYC,GAAM,CACtB,IAAMN,EAASM,EAAE,OAAO,QAAQP,CAAQ,EACpCC,GAAQE,EAAQ,KAAKF,EAAQM,CAAC,CACpC,EAEA,KAAK,QAAQ,iBAAiBL,EAAOI,CAAQ,EAC7C,KAAK,UAAU,KAAK,IAAM,KAAK,QAAQ,oBAAoBJ,EAAOI,CAAQ,CAAC,CAC7E,CAKA,YAAYE,EAAS,CACf,KAAK,SACP,KAAK,QAAQ,UAAU,IAAI,GAAGA,CAAO,CAEzC,CAKA,eAAeA,EAAS,CAClB,KAAK,SACP,KAAK,QAAQ,UAAU,OAAO,GAAGA,CAAO,CAE5C,CAKA,YAAYZ,EAAWa,EAAO,CACxB,KAAK,SACP,KAAK,QAAQ,UAAU,OAAOb,EAAWa,CAAK,CAElD,CAKA,SAASb,EAAW,CAClB,OAAO,KAAK,SAAS,UAAU,SAASA,CAAS,GAAK,EACxD,CAKA,KAAKc,EAAMC,EAAO,CAChB,GAAK,KAAK,QAEV,IAAIA,IAAU,OACZ,OAAO,KAAK,QAAQ,aAAaD,CAAI,EAGnCC,IAAU,MAAQA,IAAU,GAC9B,KAAK,QAAQ,gBAAgBD,CAAI,EACxBC,IAAU,GACnB,KAAK,QAAQ,aAAaD,EAAM,EAAE,EAElC,KAAK,QAAQ,aAAaA,EAAMC,CAAK,EAEzC,CAKA,MAAMC,EAAY,CAChB,OAAO,QAAQA,CAAU,EAAE,QAAQ,CAAC,CAACC,EAAKF,CAAK,IAAM,CACnD,KAAK,KAAKE,EAAKF,CAAK,CACtB,CAAC,CACH,CAKA,KAAKG,EAAS,CACR,KAAK,UACP,KAAK,QAAQ,YAAcA,EAE/B,CAKA,KAAKA,EAAS,CACR,KAAK,UACP,KAAK,QAAQ,UAAYA,EAE7B,CAKA,OAAOC,EAAS,CACV,KAAK,SAAWA,GAClB,KAAK,QAAQ,YAAYA,aAAmBvB,EAAgBuB,EAAQ,QAAUA,CAAO,CAEzF,CAKA,QAAQA,EAAS,CACX,KAAK,SAAWA,GAClB,KAAK,QAAQ,QAAQA,aAAmBvB,EAAgBuB,EAAQ,QAAUA,CAAO,CAErF,CAKA,MAAO,CACD,KAAK,UACP,KAAK,QAAQ,MAAM,QAAU,GAC7B,KAAK,QAAQ,gBAAgB,QAAQ,EAEzC,CAKA,MAAO,CACD,KAAK,UACP,KAAK,QAAQ,MAAM,QAAU,OAEjC,CAKA,OAAON,EAAO,CACR,KAAK,UACHA,IAAU,SACZA,EAAQ,KAAK,QAAQ,MAAM,UAAY,QAEzCA,EAAQ,KAAK,KAAK,EAAI,KAAK,KAAK,EAEpC,CAKA,SAASO,EAAU,CACjB,OAAK,KAAK,QACH,OAAO,iBAAiB,KAAK,OAAO,EAAE,iBAAiBA,CAAQ,EAD5C,IAE5B,CAKA,SAASA,EAAUL,EAAO,CACpB,KAAK,UACP,KAAK,QAAQ,MAAMK,CAAQ,EAAIL,EAEnC,CAKA,UAAUM,EAAQ,CAChB,OAAO,QAAQA,CAAM,EAAE,QAAQ,CAAC,CAACJ,EAAKF,CAAK,IAAM,CAC/C,KAAK,SAASE,EAAKF,CAAK,CAC1B,CAAC,CACH,CAKA,OAAQ,CACF,KAAK,SACP,KAAK,QAAQ,MAAM,CAEvB,CAKA,MAAO,CACD,KAAK,SACP,KAAK,QAAQ,KAAK,CAEtB,CAKA,aAAc,CACZ,OAAK,KAAK,QACH,KAAK,QAAQ,sBAAsB,EADhB,IAE5B,CAKA,SAAU,CAER,KAAK,UAAU,QAAQP,GAAWA,IAAU,CAAC,EAC7C,KAAK,UAAY,CAAC,EAGd,KAAK,SAAS,YAChB,KAAK,QAAQ,WAAW,YAAY,KAAK,OAAO,EAGlD,KAAK,QAAU,KACf,KAAK,cAAgB,EACvB,CAKA,MAAO,CACD,KAAK,SAAW,CAAC,KAAK,gBACxB,KAAK,cAAgB,GAEzB,CAKA,QAAS,CACP,OAAO,KAAK,OACd,CACF,ICjSA,IAAAc,GAAA,GAAAC,EAAAD,GAAA,WAAAE,IAAA,IAOaA,EAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,EAAN,cAAoBK,CAAc,CACvC,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,MAAQA,EAAQ,OAAS,GAC9B,KAAK,QAAUA,EAAQ,SAAW,GAClC,KAAK,KAAOA,EAAQ,MAAQ,UAC5B,KAAK,KAAOA,EAAQ,MAAQ,KAC5B,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,UAAYA,EAAQ,WAAa,EACxC,CAEA,QAAS,CACP,IAAMC,EAAa,CACjB,QAAS,CACP,GAAI,aACJ,OAAQ,kBACR,MAAO,gBACP,QAAS,gBACT,KAAM,QACR,EACA,QAAS,CACP,GAAI,cACJ,OAAQ,mBACR,MAAO,iBACP,QAAS,iBACT,KAAM,QACR,EACA,QAAS,CACP,GAAI,eACJ,OAAQ,oBACR,MAAO,kBACP,QAAS,kBACT,KAAM,QACR,EACA,MAAO,CACL,GAAI,YACJ,OAAQ,iBACR,MAAO,eACP,QAAS,eACT,KAAM,QACR,EACA,KAAM,CACJ,GAAI,aACJ,OAAQ,kBACR,MAAO,gBACP,QAAS,gBACT,KAAM,QACR,CACF,EAEMC,EAASD,EAAW,KAAK,IAAI,GAAKA,EAAW,QAG7CE,EAAe,MAAM,OAAO,MAAO,CACvC,UAAWC,EAHO,0BAGWF,EAAO,GAAIA,EAAO,OAAQ,KAAK,SAAS,EACrE,MAAO,CAAE,KAAM,OAAQ,CACzB,CAAC,EAEGG,EAAO,GAGX,OAAI,KAAK,OAAS,KAAK,QACrBA,GAAQ,6CACJ,KAAK,KACPA,GAAQ,kCAAkCH,EAAO,KAAK,KAAK,KAAK,MAAQA,EAAO,IAAI,UAEjF,KAAK,QACPG,GAAQ,4BAA4BH,EAAO,KAAK,KAAK,KAAK,KAAK,SAEjEG,GAAQ,UAIN,KAAK,UACPA,GAAQ,aAAaH,EAAO,OAAO,KAAK,KAAK,OAAO,QAIlD,KAAK,YACPG,GAAQ,mHAGVF,EAAa,UAAYE,EAErB,KAAK,WACUF,EAAa,cAAc,QAAQ,GAC1C,iBAAiB,QAAS,IAAM,CACxC,KAAK,QAAQ,CACf,CAAC,EAGIA,CACT,CAEA,WAAWG,EAAS,CAElB,GADA,KAAK,QAAUA,EACX,KAAK,QAAS,CAChB,IAAMC,EAAQ,KAAK,QAAQ,cAAc,GAAG,EACxCA,IACFA,EAAM,YAAcD,EAExB,CACF,CACF,IC/GA,IAAAE,GAAA,GAAAC,EAAAD,GAAA,iBAAAE,IAAA,IAOaA,EAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,EAAN,cAA0BK,CAAc,CAC7C,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,MAAQA,EAAQ,OAAS,GAC9B,KAAK,QAAUA,EAAQ,SAAW,GAClC,KAAK,YAAcA,EAAQ,aAAe,UAC1C,KAAK,WAAaA,EAAQ,YAAc,SACxC,KAAK,KAAOA,EAAQ,MAAQ,UAC5B,KAAK,UAAYA,EAAQ,WAAa,KACtC,KAAK,SAAWA,EAAQ,UAAY,KACpC,KAAK,KAAOA,EAAQ,MAAQ,EAC9B,CAEA,QAAS,CACP,IAAMC,EAAmB,MAAM,OAAO,MAAO,CAC3C,UAAWC,EACT,sDACA,KAAK,KAAO,GAAK,QACnB,EACA,MAAO,CACL,KAAM,cACN,aAAc,OACd,kBAAmB,GAAG,KAAK,EAAE,SAC7B,mBAAoB,GAAG,KAAK,EAAE,UAChC,CACF,CAAC,EAGKC,EAAWC,EAAe,EAChCH,EAAiB,YAAYE,CAAQ,EAGrC,IAAME,EAAgB,SAAS,cAAc,KAAK,EAClDA,EAAc,UAAY,mEAG1B,IAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,qCAEnB,IAAMC,EAAQ,SAAS,cAAc,IAAI,EACzCA,EAAM,GAAK,GAAG,KAAK,EAAE,SACrBA,EAAM,UAAY,sCAClBA,EAAM,YAAc,KAAK,MACzBD,EAAO,YAAYC,CAAK,EAExBF,EAAc,YAAYC,CAAM,EAGhC,IAAME,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,GAAK,GAAG,KAAK,EAAE,WAC1BA,EAAW,UAAY,0BACvBA,EAAW,YAAc,KAAK,QAC9BH,EAAc,YAAYG,CAAU,EAGpC,IAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,oFAEnB,IAAMC,EAAY,SAAS,cAAc,QAAQ,EACjDA,EAAU,UAAY,6GACtBA,EAAU,YAAc,KAAK,WAC7BA,EAAU,iBAAiB,QAAS,IAAM,KAAK,aAAa,CAAC,EAC7DD,EAAO,YAAYC,CAAS,EAE5B,IAAMC,EAAa,SAAS,cAAc,QAAQ,EAC5CC,EAAoB,KAAK,OAAS,SACpC,yCACA,2CACJ,OAAAD,EAAW,UAAYT,EAAK,sDAAuDU,CAAiB,EACpGD,EAAW,YAAc,KAAK,YAC9BA,EAAW,iBAAiB,QAAS,IAAM,KAAK,cAAc,CAAC,EAC/DF,EAAO,YAAYE,CAAU,EAE7BN,EAAc,YAAYI,CAAM,EAChCR,EAAiB,YAAYI,CAAa,EAE1C,KAAK,UAAYQ,EAAgBR,CAAa,EACvCJ,CACT,CAEA,MAAO,CACA,KAAK,SAAS,KAAK,OAAO,EAE/B,KAAK,KAAO,GACZ,KAAK,QAAQ,UAAU,OAAO,QAAQ,EACtC,KAAK,UAAU,KAAK,EACpB,SAAS,KAAK,MAAM,SAAW,QACjC,CAEA,OAAQ,CACN,KAAK,KAAO,GACZ,KAAK,SAAS,UAAU,IAAI,QAAQ,EACpC,SAAS,KAAK,MAAM,SAAW,EACjC,CAEA,eAAgB,CACV,KAAK,WACP,KAAK,UAAU,EAEjB,KAAK,MAAM,CACb,CAEA,cAAe,CACT,KAAK,UACP,KAAK,SAAS,EAEhB,KAAK,MAAM,CACb,CACF,ICpHA,IAAAa,GAAA,GAAAC,EAAAD,GAAA,YAAAE,IAAA,IAOaA,EAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,EAAN,cAAqBK,CAAc,CACxC,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,IAAMA,EAAQ,KAAO,GAC1B,KAAK,IAAMA,EAAQ,KAAO,GAC1B,KAAK,SAAWA,EAAQ,UAAY,GACpC,KAAK,KAAOA,EAAQ,MAAQ,KAC5B,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,WAAaA,EAAQ,YAAc,aAC1C,CAEA,QAAS,CACP,IAAMC,EAAc,CAClB,GAAI,kBACJ,GAAI,kBACJ,GAAI,sBACJ,GAAI,oBACJ,GAAI,mBACN,EAEMC,EAAc,4FAEpB,OAAI,KAAK,IACe,MAAM,OAAO,MAAO,CACxC,UAAWC,EAAKD,EAAaD,EAAY,KAAK,IAAI,EAAG,KAAK,SAAS,EACnE,MAAO,CACL,IAAK,KAAK,IACV,IAAK,KAAK,IACV,KAAM,KACR,CACF,CAAC,EAEQ,KAAK,SACQ,MAAM,OAAO,MAAO,CACxC,UAAWE,EACTD,EACAD,EAAY,KAAK,IAAI,EACrB,aACA,KAAK,WACL,KAAK,SACP,EACA,KAAM,KAAK,SAAS,YAAY,CAClC,CAAC,EAGqB,MAAM,OAAO,MAAO,CACxC,UAAWE,EAAKD,EAAaD,EAAY,KAAK,IAAI,EAAG,cAAe,KAAK,SAAS,EAClF,KAAM,kNACR,CAAC,CAGL,CAEA,OAAOG,EAAKC,EAAM,GAAI,CACpB,KAAK,IAAMD,EACX,KAAK,IAAMC,EACP,KAAK,SAAW,KAAK,QAAQ,UAAY,QAC3C,KAAK,QAAQ,IAAMD,EACnB,KAAK,QAAQ,IAAMC,EAEvB,CAEA,YAAYC,EAAUC,EAAU,GAAI,CAGlC,GAFA,KAAK,SAAWD,EACZC,IAAS,KAAK,WAAaA,GAC3B,KAAK,UACP,KAAK,QAAQ,YAAcD,EAAS,YAAY,EAC5CC,GAAW,KAAK,QAAQ,UAAU,SAAS,KAAK,GAAG,CACrD,IAAMC,EAAU,KAAK,QAAQ,UAAU,MAAM,QAAQ,EAAE,CAAC,EACxD,KAAK,QAAQ,UAAU,OAAOA,CAAO,EACrC,KAAK,QAAQ,UAAU,IAAID,CAAO,CACpC,CAEJ,CACF,IClFA,IAAAE,GAAA,GAAAC,EAAAD,GAAA,WAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAoBK,CAAc,CACvC,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,MAAQA,EAAQ,OAAS,QAC9B,KAAK,QAAUA,EAAQ,SAAW,UAClC,KAAK,KAAOA,EAAQ,MAAQ,KAC5B,KAAK,UAAYA,EAAQ,WAAa,EACxC,CAEA,QAAS,CACP,IAAMC,EAAc,mEAEdC,EAAiB,CACrB,QAAS,4BACT,QAAS,4BACT,QAAS,8BACT,QAAS,gCACT,YAAa,0BACb,QAAS,sCACX,EAEMC,EAAc,CAClB,GAAI,oBACJ,GAAI,oBACJ,GAAI,qBACN,EAEMC,EAAe,MAAM,OAAO,OAAQ,CACxC,UAAWC,EACTJ,EACAC,EAAe,KAAK,OAAO,EAC3BC,EAAY,KAAK,IAAI,EACrB,KAAK,SACP,CACF,CAAC,EAED,OAAAC,EAAa,YAAc,KAAK,MACzBA,CACT,CAEA,SAASE,EAAO,CACd,KAAK,MAAQA,EACT,KAAK,UACP,KAAK,QAAQ,YAAcA,EAE/B,CACF,ICtDA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,YAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAqBK,CAAc,CACxC,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,MAAQA,EAAQ,OAAS,SAC9B,KAAK,QAAUA,EAAQ,SAAW,UAClC,KAAK,KAAOA,EAAQ,MAAQ,KAC5B,KAAK,SAAWA,EAAQ,UAAY,GACpC,KAAK,QAAUA,EAAQ,SAAW,KAClC,KAAK,UAAYA,EAAQ,WAAa,EACxC,CAEA,QAAS,CACP,IAAMC,EAAc,mKAEdC,EAAiB,CACrB,QAAS,8CACT,QAAS,+DACT,UAAW,kEACX,YAAa,4DACb,QAAS,0DACT,MAAO,iCACT,EAEMC,EAAc,CAClB,GAAI,oBACJ,GAAI,sBACJ,GAAI,mBACN,EAEMC,EAAgB,MAAM,OAAO,SAAU,CAC3C,UAAWC,EACTJ,EACAC,EAAe,KAAK,OAAO,EAC3BC,EAAY,KAAK,IAAI,EACrB,KAAK,SACP,EACA,MAAO,CAAE,SAAU,KAAK,QAAS,CACnC,CAAC,EAED,OAAAC,EAAc,YAAc,KAAK,MAE7B,KAAK,SACP,KAAK,GAAG,QAAS,KAAK,OAAO,EAGxBA,CACT,CAEA,SAASE,EAAO,CACd,KAAK,MAAQA,EACT,KAAK,UACP,KAAK,QAAQ,YAAcA,EAE/B,CAEA,YAAYC,EAAU,CACpB,KAAK,SAAWA,EAChB,KAAK,KAAK,WAAYA,EAAW,GAAK,IAAI,CAC5C,CAEA,WAAWC,EAAS,CAClB,KAAK,YAAYA,CAAO,EACpBA,EACF,KAAK,KAAK,0KAA0K,EAEpL,KAAK,KAAK,KAAK,KAAK,CAExB,CACF,IC5EA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,iBAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAA0BK,CAAc,CAC7C,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,QAAUA,EAAQ,SAAW,CAAC,EACnC,KAAK,YAAcA,EAAQ,aAAe,aAC1C,KAAK,KAAOA,EAAQ,MAAQ,KAC5B,KAAK,UAAYA,EAAQ,WAAa,EACxC,CAEA,QAAS,CACP,IAAMC,EAAmB,KAAK,cAAgB,WAAa,WAAa,WAGlEC,EAAe,MAAM,OAAO,MAAO,CACvC,UAAWC,EAAK,OAAQF,EAHN,gEAGqC,KAAK,SAAS,EACrE,MAAO,CAAE,KAAM,OAAQ,CACzB,CAAC,EAED,YAAK,QAAQ,QAAQ,CAACG,EAAWC,IAAU,CACzC,IAAMC,EAAM,SAAS,cAAc,QAAQ,EAC3CA,EAAI,YAAcF,EAAU,OAAS,SACrCE,EAAI,UAAYH,EACd,sFACAE,EAAQ,EAAK,KAAK,cAAgB,WAAa,2BAA6B,2BAA8B,GAC1GD,EAAU,SAAW,gCAAkC,EACzD,EACAE,EAAI,SAAWF,EAAU,UAAY,GAEjCA,EAAU,SACZE,EAAI,iBAAiB,QAASF,EAAU,OAAO,EAGjDF,EAAa,YAAYI,CAAG,CAC9B,CAAC,EAEMJ,CACT,CAEA,UAAUK,EAAOC,EAAS,CACxB,GAAI,KAAK,QAAS,CAChB,IAAMF,EAAM,SAAS,cAAc,QAAQ,EAC3CA,EAAI,YAAcC,EAClBD,EAAI,UAAYH,EACd,8GACF,EACIK,GACFF,EAAI,iBAAiB,QAASE,CAAO,EAEvC,KAAK,QAAQ,YAAYF,CAAG,CAC9B,CACF,CACF,IC3DA,IAAAG,GAAA,GAAAC,EAAAD,GAAA,gBAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAyBK,CAAc,CAC5C,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,MAAQA,EAAQ,OAAS,CAAC,EAC/B,KAAK,UAAYA,EAAQ,WAAa,EACxC,CAEA,QAAS,CAGP,IAAMC,EAAoB,MAAM,OAAO,MAAO,CAC5C,UAAWC,EAHO,0BAGW,KAAK,SAAS,EAC3C,MAAO,CAAE,aAAc,YAAa,CACtC,CAAC,EAED,YAAK,MAAM,QAAQ,CAACC,EAAMC,IAAU,CAClC,GAAIA,EAAQ,EAAG,CACb,IAAMC,EAAYC,EAAc,OAAQ,CACtC,UAAW,qBACX,KAAM,GACR,CAAC,EACDL,EAAkB,YAAYI,CAAS,CACzC,CAEA,GAAID,IAAU,KAAK,MAAM,OAAS,EAAG,CACnC,IAAMG,EAAOD,EAAc,OAAQ,CACjC,UAAW,4BACX,KAAMH,EAAK,MACX,MAAO,CAAE,eAAgB,MAAO,CAClC,CAAC,EACDF,EAAkB,YAAYM,CAAI,CACpC,KAAO,CACL,IAAMC,EAAOF,EAAc,IAAK,CAC9B,UAAW,mFACX,KAAMH,EAAK,MACX,MAAO,CAAE,KAAMA,EAAK,MAAQ,GAAI,CAClC,CAAC,EACDF,EAAkB,YAAYO,CAAI,CACpC,CACF,CAAC,EAEMP,CACT,CAEA,QAAQQ,EAAOC,EAAO,IAAK,CACzB,GAAI,KAAK,QAAS,CAChB,GAAI,KAAK,QAAQ,SAAS,OAAS,EAAG,CACpC,IAAML,EAAYC,EAAc,OAAQ,CACtC,UAAW,qBACX,KAAM,GACR,CAAC,EACD,KAAK,QAAQ,YAAYD,CAAS,CACpC,CAEA,IAAMG,EAAOF,EAAc,IAAK,CAC9B,UAAW,mFACX,KAAMG,EACN,MAAO,CAAE,KAAAC,CAAK,CAChB,CAAC,EACD,KAAK,QAAQ,YAAYF,CAAI,EAC7B,KAAK,MAAM,KAAK,CAAE,MAAAC,EAAO,KAAAC,CAAK,CAAC,CACjC,CACF,CACF,ICvEA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,UAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAmBK,CAAc,CACtC,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,MAAQA,EAAQ,OAAS,GAC9B,KAAK,SAAWA,EAAQ,UAAY,GACpC,KAAK,QAAUA,EAAQ,SAAW,GAClC,KAAK,OAASA,EAAQ,QAAU,GAChC,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,UAAYA,EAAQ,YAAc,EACzC,CAEA,QAAS,CACP,IAAMC,EAAc,6DACdC,EAAa,KAAK,UAAY,iDAAmD,GAEjFC,EAAc,MAAM,OAAO,MAAO,CACtC,UAAWC,EAAKH,EAAaC,EAAY,KAAK,SAAS,CACzD,CAAC,EAGD,GAAI,KAAK,MAAO,CACd,IAAMG,EAAgBC,EAAc,MAAO,CACzC,UAAW,+CACb,CAAC,EAEGC,EAAO,mDAAmD,KAAK,KAAK,QACpE,KAAK,WACPA,GAAQ,yCAAyC,KAAK,QAAQ,QAGhEF,EAAc,UAAYE,EAC1BJ,EAAY,YAAYE,CAAa,CACvC,CAGA,GAAI,KAAK,QAAS,CAChB,IAAMG,EAAiBF,EAAc,MAAO,CAC1C,UAAW,YACX,KAAM,KAAK,OACb,CAAC,EACDH,EAAY,YAAYK,CAAc,CACxC,CAGA,GAAI,KAAK,OAAQ,CACf,IAAMC,EAAgBH,EAAc,MAAO,CACzC,UAAW,gDACX,KAAM,KAAK,MACb,CAAC,EACDH,EAAY,YAAYM,CAAa,CACvC,CAEA,OAAON,CACT,CAEA,WAAWO,EAAS,CAElB,GADA,KAAK,QAAUA,EACX,KAAK,QAAS,CAChB,IAAMC,EAAa,KAAK,QAAQ,cAAc,0CAA0C,EACpFA,IACFA,EAAW,UAAYD,EAE3B,CACF,CAEA,WAAWE,EAAS,CAClB,GAAI,KAAK,QAAS,CAChB,IAAMD,EAAa,KAAK,QAAQ,cAAc,0CAA0C,EACpFA,GACFA,EAAW,YAAYC,aAAmBb,EAAgBa,EAAQ,QAAUA,CAAO,CAEvF,CACF,CACF,ICjFA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,cAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAuBK,CAAc,CAC1C,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,MAAQA,EAAQ,OAAS,CAAC,EAC/B,KAAK,SAAWA,EAAQ,UAAY,GACpC,KAAK,SAAWA,EAAQ,UAAY,IACpC,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,aAAe,EACpB,KAAK,cAAgB,IACvB,CAEA,QAAS,CACP,IAAMC,EAAmB,MAAM,OAAO,MAAO,CAC3C,UAAWC,EAAK,sDAAuD,KAAK,SAAS,CACvF,CAAC,EAGKC,EAAgBC,EAAc,MAAO,CACzC,UAAW,sCACb,CAAC,EAED,KAAK,MAAM,QAAQ,CAACC,EAAMC,IAAU,CAClC,IAAMC,EAAQH,EAAc,MAAO,CACjC,UAAWF,EACT,mDACAI,IAAU,KAAK,aAAe,cAAgB,WAChD,CACF,CAAC,EAEKE,EAAM,SAAS,cAAc,KAAK,EAOxC,GANAA,EAAI,IAAMH,EAAK,IACfG,EAAI,IAAMH,EAAK,KAAO,GACtBG,EAAI,UAAY,6BAEhBD,EAAM,YAAYC,CAAG,EAEjBH,EAAK,MAAO,CACd,IAAMI,EAAeL,EAAc,MAAO,CACxC,UAAW,kFACX,KAAM,uCAAuCC,EAAK,KAAK,MACzD,CAAC,EACDE,EAAM,YAAYE,CAAY,CAChC,CAEAN,EAAc,YAAYI,CAAK,CACjC,CAAC,EAEDN,EAAiB,YAAYE,CAAa,EAG1C,IAAMO,EAAUN,EAAc,SAAU,CACtC,UAAW,gJACX,KAAM,QACR,CAAC,EAEDM,EAAQ,iBAAiB,QAAS,IAAM,CACtC,KAAK,SAAS,CAChB,CAAC,EAED,IAAMC,EAAUP,EAAc,SAAU,CACtC,UAAW,iJACX,KAAM,QACR,CAAC,EAEDO,EAAQ,iBAAiB,QAAS,IAAM,CACtC,KAAK,KAAK,CACZ,CAAC,EAEDV,EAAiB,YAAYS,CAAO,EACpCT,EAAiB,YAAYU,CAAO,EAGpC,IAAMC,EAAcR,EAAc,MAAO,CACvC,UAAW,uEACb,CAAC,EAED,YAAK,MAAM,QAAQ,CAACS,EAAGP,IAAU,CAC/B,IAAMQ,EAAMV,EAAc,SAAU,CAClC,UAAWF,EACT,sCACAI,IAAU,KAAK,aAAe,eAAiB,aACjD,EACA,MAAO,CAAE,aAAcA,CAAM,CAC/B,CAAC,EAEDQ,EAAI,iBAAiB,QAAS,IAAM,CAClC,KAAK,KAAKR,CAAK,CACjB,CAAC,EAEDM,EAAY,YAAYE,CAAG,CAC7B,CAAC,EAEDb,EAAiB,YAAYW,CAAW,EAExC,KAAK,cAAgBT,EACrB,KAAK,YAAcS,EAEf,KAAK,UACP,KAAK,cAAc,EAGdX,CACT,CAEA,MAAO,CACL,KAAK,cAAgB,KAAK,aAAe,GAAK,KAAK,MAAM,OACzD,KAAK,aAAa,CACpB,CAEA,UAAW,CACT,KAAK,cAAgB,KAAK,aAAe,EAAI,KAAK,MAAM,QAAU,KAAK,MAAM,OAC7E,KAAK,aAAa,CACpB,CAEA,KAAKK,EAAO,CACV,KAAK,aAAeA,EACpB,KAAK,aAAa,EACd,KAAK,UACP,KAAK,cAAc,CAEvB,CAEA,cAAe,CACb,IAAMS,EAAS,KAAK,cAAc,iBAAiB,KAAK,EAClDC,EAAO,KAAK,YAAY,iBAAiB,QAAQ,EAEvDD,EAAO,QAAQ,CAACR,EAAOD,IAAU,CAC/BC,EAAM,UAAYL,EAChB,mDACAI,IAAU,KAAK,aAAe,cAAgB,WAChD,CACF,CAAC,EAEDU,EAAK,QAAQ,CAACF,EAAKR,IAAU,CAC3BQ,EAAI,UAAYZ,EACd,sCACAI,IAAU,KAAK,aAAe,eAAiB,aACjD,CACF,CAAC,CACH,CAEA,eAAgB,CACd,KAAK,cAAgB,YAAY,IAAM,CACrC,KAAK,KAAK,CACZ,EAAG,KAAK,QAAQ,CAClB,CAEA,cAAe,CACT,KAAK,eACP,cAAc,KAAK,aAAa,CAEpC,CAEA,eAAgB,CACd,KAAK,aAAa,EACd,KAAK,UACP,KAAK,cAAc,CAEvB,CAEA,SAAU,CACR,KAAK,aAAa,EAClB,MAAM,QAAQ,CAChB,CACF,IC5KA,IAAAW,GAAA,GAAAC,EAAAD,GAAA,WAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAoBK,CAAc,CACvC,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,KAAOA,EAAQ,MAAQ,MAC5B,KAAK,KAAOA,EAAQ,MAAQ,CAAC,EAC7B,KAAK,MAAQA,EAAQ,OAAS,GAC9B,KAAK,OAASA,EAAQ,QAAU,QAChC,KAAK,UAAYA,EAAQ,WAAa,EACxC,CAEA,QAAS,CACP,IAAMC,EAAmB,MAAM,OAAO,MAAO,CAC3C,UAAWC,EAAK,iDAAkD,KAAK,SAAS,CAClF,CAAC,EAGD,GAAI,KAAK,MAAO,CACd,IAAMC,EAAeC,EAAc,KAAM,CACvC,UAAW,2CACX,KAAM,KAAK,KACb,CAAC,EACDH,EAAiB,YAAYE,CAAY,CAC3C,CAGA,IAAME,EAAa,KAAK,UAAU,EAClC,OAAAJ,EAAiB,YAAYI,CAAU,EAEhCJ,CACT,CAEA,WAAY,CACV,IAAMK,EAAW,KAAK,IAAI,GAAG,KAAK,KAAK,IAAIC,GAAKA,EAAE,KAAK,CAAC,EAClDC,EAAQ,IACRC,EAAS,IACTC,EAAU,GAEVC,EAAM,SAAS,gBAAgB,6BAA8B,KAAK,EAIxE,GAHAA,EAAI,aAAa,UAAW,OAAOH,CAAK,IAAIC,CAAM,EAAE,EACpDE,EAAI,aAAa,QAAS,QAAQ,EAE9B,KAAK,OAAS,MAAO,CACvB,IAAMC,GAAYJ,EAAQE,EAAU,GAAK,KAAK,KAAK,OAEnD,KAAK,KAAK,QAAQ,CAACH,EAAGM,IAAM,CAC1B,IAAMC,EAAaP,EAAE,MAAQD,GAAaG,EAASC,EAAU,GACvDK,EAAIL,EAAUG,EAAID,EAAWA,EAAW,IACxCI,EAAIP,EAASC,EAAUI,EAEvBG,EAAO,SAAS,gBAAgB,6BAA8B,MAAM,EAC1EA,EAAK,aAAa,IAAKF,CAAC,EACxBE,EAAK,aAAa,IAAKD,CAAC,EACxBC,EAAK,aAAa,QAASL,EAAW,EAAG,EACzCK,EAAK,aAAa,SAAUH,CAAS,EACrCG,EAAK,aAAa,OAAQ,SAAS,EACnCA,EAAK,aAAa,QAAS,uCAAuC,EAElEN,EAAI,YAAYM,CAAI,EAGpB,IAAMC,EAAO,SAAS,gBAAgB,6BAA8B,MAAM,EAC1EA,EAAK,aAAa,IAAKH,EAAIH,EAAW,GAAI,EAC1CM,EAAK,aAAa,IAAKT,EAAS,EAAE,EAClCS,EAAK,aAAa,cAAe,QAAQ,EACzCA,EAAK,aAAa,YAAa,IAAI,EACnCA,EAAK,aAAa,OAAQ,SAAS,EACnCA,EAAK,YAAcX,EAAE,MACrBI,EAAI,YAAYO,CAAI,CACtB,CAAC,CACH,CAEA,OAAOP,CACT,CAEA,QAAQQ,EAAM,CAEZ,GADA,KAAK,KAAOA,EACR,KAAK,SAAW,KAAK,QAAQ,WAAY,CAC3C,IAAMC,EAAa,KAAK,OAAO,EAC/B,KAAK,QAAQ,WAAW,aAAaA,EAAY,KAAK,OAAO,EAC7D,KAAK,QAAUA,CACjB,CACF,CACF,IC1FA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,cAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAuBK,CAAc,CAC1C,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,MAAQA,EAAQ,OAAS,GAC9B,KAAK,QAAUA,EAAQ,SAAW,GAClC,KAAK,SAAWA,EAAQ,UAAY,GACpC,KAAK,SAAWA,EAAQ,UAAY,GACpC,KAAK,KAAOA,EAAQ,MAAQ,GAC5B,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,SAAWA,EAAQ,UAAY,IACtC,CAEA,QAAS,CAGP,IAAMC,EAAmB,MAAM,OAAO,MAAO,CAC3C,UAAWC,EAHO,0BAGW,KAAK,SAAS,CAC7C,CAAC,EAEKC,EAAkB,qLAElBC,EAAe,SAAS,cAAc,OAAO,EAUnD,GATAA,EAAa,KAAO,WACpBA,EAAa,UAAYD,EACzBC,EAAa,QAAU,KAAK,QAC5BA,EAAa,SAAW,KAAK,SAC7BA,EAAa,SAAW,KAAK,SACzB,KAAK,OAAMA,EAAa,KAAO,KAAK,MAExCH,EAAiB,YAAYG,CAAY,EAErC,KAAK,MAAO,CACd,IAAMC,EAAe,SAAS,cAAc,OAAO,EACnDA,EAAa,UAAY,6BACzBA,EAAa,YAAc,KAAK,MAChCJ,EAAiB,YAAYI,CAAY,EAEzCA,EAAa,iBAAiB,QAAS,IAAM,CAC3CD,EAAa,MAAM,CACrB,CAAC,CACH,CAEA,OAAI,KAAK,UACPA,EAAa,iBAAiB,SAAU,KAAK,QAAQ,EAGvD,KAAK,aAAeA,EACbH,CACT,CAEA,WAAY,CACV,OAAO,KAAK,cAAc,SAAW,EACvC,CAEA,WAAWK,EAAS,CAClB,KAAK,QAAUA,EACX,KAAK,eACP,KAAK,aAAa,QAAUA,EAEhC,CAEA,YAAYC,EAAU,CACpB,KAAK,SAAWA,EACZ,KAAK,eACP,KAAK,aAAa,SAAWA,EAEjC,CAEA,QAAS,CACP,KAAK,WAAW,CAAC,KAAK,UAAU,CAAC,CACnC,CACF,IC/EA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,iBAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAA0BK,CAAc,CAC7C,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,MAAQA,EAAQ,OAAS,GAC9B,KAAK,QAAUA,EAAQ,SAAW,GAClC,KAAK,KAAOA,EAAQ,MAAQ,GAC5B,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,SAAWA,EAAQ,UAAY,IACtC,CAEA,QAAS,CACP,IAAMC,EAAmB,MAAM,OAAO,MAAO,CAC3C,UAAWC,EAAK,oDAAqD,KAAK,SAAS,CACrF,CAAC,EAGKC,EAAiBC,EAAc,SAAU,CAC7C,UAAWF,EACT,qDACA,2DACF,EACA,MAAO,CAAE,gBAAiB,KAAK,IAAK,CACtC,CAAC,EAEKG,EAAYD,EAAc,OAAQ,CACtC,UAAW,8BACX,KAAM,KAAK,KACb,CAAC,EAEKE,EAAUF,EAAc,OAAQ,CACpC,UAAWF,EACT,4CACA,KAAK,KAAO,aAAe,EAC7B,EACA,KAAM,QACR,CAAC,EAEDC,EAAe,YAAYE,CAAS,EACpCF,EAAe,YAAYG,CAAO,EAElCH,EAAe,iBAAiB,QAAS,IAAM,CAC7C,KAAK,OAAO,CACd,CAAC,EAEDF,EAAiB,YAAYE,CAAc,EAG3C,IAAMI,EAAiBH,EAAc,MAAO,CAC1C,UAAWF,EACT,8CACA,KAAK,KAAO,WAAa,UACzB,0BACF,CACF,CAAC,EAEKM,EAAeJ,EAAc,MAAO,CACxC,UAAW,YACX,KAAM,KAAK,OACb,CAAC,EAED,OAAAG,EAAe,YAAYC,CAAY,EACvCP,EAAiB,YAAYM,CAAc,EAE3C,KAAK,eAAiBJ,EACtB,KAAK,eAAiBI,EACtB,KAAK,QAAUD,EAERL,CACT,CAEA,QAAS,CACP,KAAK,KAAO,CAAC,KAAK,KAClB,KAAK,SAAS,EACV,KAAK,UACP,KAAK,SAAS,KAAK,IAAI,CAE3B,CAEA,MAAO,CACA,KAAK,OACR,KAAK,KAAO,GACZ,KAAK,SAAS,EACV,KAAK,UACP,KAAK,SAAS,EAAI,EAGxB,CAEA,OAAQ,CACF,KAAK,OACP,KAAK,KAAO,GACZ,KAAK,SAAS,EACV,KAAK,UACP,KAAK,SAAS,EAAK,EAGzB,CAEA,UAAW,CACT,KAAK,eAAe,aAAa,gBAAiB,KAAK,IAAI,EAC3D,KAAK,eAAe,UAAYC,EAC9B,8CACA,KAAK,KAAO,WAAa,UACzB,0BACF,EACA,KAAK,QAAQ,UAAYA,EACvB,4CACA,KAAK,KAAO,aAAe,EAC7B,CACF,CAEA,WAAWO,EAAS,CAElB,GADA,KAAK,QAAUA,EACX,KAAK,eAAgB,CACvB,IAAMC,EAAQ,KAAK,eAAe,cAAc,KAAK,EACjDA,IACFA,EAAM,UAAYD,EAEtB,CACF,CACF,IChIA,IAAAE,GAAA,GAAAC,EAAAD,GAAA,aAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAsBK,CAAc,CACzC,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,SAAWA,EAAQ,UAAY,CAAC,EACrC,KAAK,YAAcA,EAAQ,aAAe,oBAC1C,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,KAAO,EACd,CAEA,QAAS,CACP,IAAMC,EAAmB,MAAM,OAAO,MAAO,CAC3C,UAAWC,EACT,kEACA,KAAK,KAAO,OAAS,EACvB,CACF,CAAC,EAGKC,EAAWC,EAAc,MAAO,CACpC,UAAW,yCACb,CAAC,EACDH,EAAiB,YAAYE,CAAQ,EAErCA,EAAS,iBAAiB,QAAS,IAAM,KAAK,MAAM,CAAC,EAGrD,IAAME,EAAiBD,EAAc,MAAO,CAC1C,UAAW,6DACb,CAAC,EAGKE,EAAe,SAAS,cAAc,OAAO,EACnDA,EAAa,KAAO,OACpBA,EAAa,YAAc,KAAK,YAChCA,EAAa,UAAY,+DACzBA,EAAa,UAAY,GAEzBD,EAAe,YAAYC,CAAY,EAGvC,IAAMC,EAAiBH,EAAc,MAAO,CAC1C,UAAW,0BACb,CAAC,EAEKI,EAAgB,CAACC,EAAQ,KAAO,CACpCF,EAAe,UAAY,GAE3B,IAAMG,EAAWD,EACb,KAAK,SAAS,OAAOE,GACnBA,EAAI,MAAM,YAAY,EAAE,SAASF,EAAM,YAAY,CAAC,CACtD,EACA,KAAK,SAET,GAAIC,EAAS,SAAW,EAAG,CACzB,IAAME,EAAYR,EAAc,MAAO,CACrC,UAAW,kCACX,KAAM,mBACR,CAAC,EACDG,EAAe,YAAYK,CAAS,EACpC,MACF,CAEA,IAAIC,EAAkB,GAEtBH,EAAS,QAAQC,GAAO,CACtB,GAAIA,EAAI,UAAYA,EAAI,WAAaE,EAAiB,CACpDA,EAAkBF,EAAI,SACtB,IAAMG,EAAiBV,EAAc,MAAO,CAC1C,UAAW,qEACX,KAAMS,CACR,CAAC,EACDN,EAAe,YAAYO,CAAc,CAC3C,CAEA,IAAMC,EAAaX,EAAc,MAAO,CACtC,UAAWF,EACT,qGACF,CACF,CAAC,EAEKc,EAAQZ,EAAc,OAAQ,CAClC,KAAMO,EAAI,MACV,UAAW,uBACb,CAAC,EAGD,GAFAI,EAAW,YAAYC,CAAK,EAExBL,EAAI,SAAU,CAChB,IAAMM,EAAWb,EAAc,OAAQ,CACrC,UAAW,kDACX,KAAMO,EAAI,QACZ,CAAC,EACDI,EAAW,YAAYE,CAAQ,CACjC,CAEAF,EAAW,iBAAiB,QAAS,IAAM,CACrCJ,EAAI,QACNA,EAAI,OAAO,EAEb,KAAK,MAAM,CACb,CAAC,EAEDJ,EAAe,YAAYQ,CAAU,CACvC,CAAC,CACH,EAEA,OAAAT,EAAa,iBAAiB,QAAUY,GAAM,CAC5CV,EAAcU,EAAE,OAAO,KAAK,CAC9B,CAAC,EAEDb,EAAe,YAAYE,CAAc,EACzCN,EAAiB,YAAYI,CAAc,EAE3CC,EAAa,iBAAiB,UAAYY,GAAM,CAC1CA,EAAE,MAAQ,UACZ,KAAK,MAAM,CAEf,CAAC,EAEDV,EAAc,EACd,KAAK,iBAAmBP,EAEjBA,CACT,CAEA,MAAO,CACA,KAAK,SAAS,KAAK,OAAO,EAC/B,KAAK,KAAO,GACZ,KAAK,QAAQ,UAAU,OAAO,QAAQ,EACtC,KAAK,QAAQ,UAAU,IAAI,MAAM,CACnC,CAEA,OAAQ,CACN,KAAK,KAAO,GACZ,KAAK,SAAS,UAAU,OAAO,MAAM,EACrC,KAAK,SAAS,UAAU,IAAI,QAAQ,CACtC,CAEA,QAAS,CACP,KAAK,KAAO,KAAK,MAAM,EAAI,KAAK,KAAK,CACvC,CACF,ICpJA,IAAAkB,GAAA,GAAAC,EAAAD,GAAA,cAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAuBK,CAAc,CAC1C,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,MAAQA,EAAQ,OAAS,CAAC,EAC/B,KAAK,MAAQA,EAAQ,OAAS,GAC9B,KAAK,YAAcA,EAAQ,aAAe,YAC1C,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,SAAWA,EAAQ,UAAY,KACpC,KAAK,KAAO,EACd,CAEA,QAAS,CACP,IAAMC,EAAmB,MAAM,OAAO,MAAO,CAC3C,UAAW,iBACb,CAAC,EAGKC,EAAe,SAAS,cAAc,OAAO,EACnDA,EAAa,KAAO,OACpBA,EAAa,YAAc,KAAK,YAChCA,EAAa,MAAQ,KAAK,MAC1BA,EAAa,UAAYC,EACvB,qDACA,8EACF,EAGA,IAAMC,EAAcC,EAAc,MAAO,CACvC,UAAWF,EACT,yGACA,0BACF,CACF,CAAC,EAEKG,EAAa,CAACC,EAAQ,KAAO,CACjCH,EAAY,UAAY,GACxB,IAAMI,EAAW,KAAK,MAAM,OAAOC,GACjCA,EAAK,MAAM,YAAY,EAAE,SAASF,EAAM,YAAY,CAAC,CACvD,EAEA,GAAIC,EAAS,SAAW,EAAG,CACzB,IAAME,EAAYL,EAAc,MAAO,CACrC,UAAW,0BACX,KAAM,kBACR,CAAC,EACDD,EAAY,YAAYM,CAAS,EACjC,MACF,CAEAF,EAAS,QAAQC,GAAQ,CACvB,IAAME,EAASN,EAAc,MAAO,CAClC,UAAWF,EACT,8DACAM,EAAK,QAAU,KAAK,MAAQ,cAAgB,EAC9C,EACA,KAAMA,EAAK,MACX,MAAO,CAAE,aAAcA,EAAK,KAAM,CACpC,CAAC,EAEDE,EAAO,iBAAiB,QAAS,IAAM,CACrC,KAAK,MAAQF,EAAK,MAClBP,EAAa,MAAQO,EAAK,MAC1BL,EAAY,UAAU,IAAI,QAAQ,EAC9B,KAAK,UACP,KAAK,SAAS,KAAK,MAAOK,CAAI,CAElC,CAAC,EAEDL,EAAY,YAAYO,CAAM,CAChC,CAAC,CACH,EAEA,OAAAT,EAAa,iBAAiB,QAAUU,GAAM,CAC5CN,EAAWM,EAAE,OAAO,KAAK,EACzBR,EAAY,UAAU,OAAO,QAAQ,CACvC,CAAC,EAEDF,EAAa,iBAAiB,QAAS,IAAM,CAC3CI,EAAWJ,EAAa,KAAK,EAC7BE,EAAY,UAAU,OAAO,QAAQ,CACvC,CAAC,EAEDF,EAAa,iBAAiB,OAAQ,IAAM,CAC1C,WAAW,IAAM,CACfE,EAAY,UAAU,IAAI,QAAQ,CACpC,EAAG,GAAG,CACR,CAAC,EAEDH,EAAiB,YAAYC,CAAY,EACzCD,EAAiB,YAAYG,CAAW,EAExC,SAAS,iBAAiB,QAAUQ,GAAM,CACnCX,EAAiB,SAASW,EAAE,MAAM,GACrCR,EAAY,UAAU,IAAI,QAAQ,CAEtC,CAAC,EAED,KAAK,aAAeF,EACpB,KAAK,YAAcE,EACnBE,EAAW,EAEJL,CACT,CAEA,UAAW,CACT,OAAO,KAAK,KACd,CAEA,SAASY,EAAO,CACd,KAAK,MAAQA,EACb,IAAMJ,EAAO,KAAK,MAAM,KAAKK,GAAKA,EAAE,QAAUD,CAAK,EAC/CJ,GAAQ,KAAK,eACf,KAAK,aAAa,MAAQA,EAAK,MAEnC,CACF,IC3HA,IAAAM,GAAA,GAAAC,EAAAD,GAAA,iBAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAA0BK,CAAc,CAC7C,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,MAAQA,EAAQ,OAAS,CAAC,EAC/B,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,QAAU,EACjB,CAEA,QAAS,CACP,IAAMC,EAAmB,MAAM,OAAO,MAAO,CAC3C,UAAW,8BACb,CAAC,EAGKC,EAAc,SAAS,cAAc,KAAK,EAChD,OAAAA,EAAY,UAAYC,EACtB,2FACA,KAAK,SACP,EAEA,KAAK,MAAM,QAASC,GAAS,CAC3B,IAAMC,EAAcC,EAAc,SAAU,CAC1C,UAAWH,EACT,sGACAC,EAAK,SAAW,gCAAkC,gBACpD,EACA,MAAO,CACL,SAAUA,EAAK,SAAW,GAAK,KAC/B,cAAeA,EAAK,KACtB,CACF,CAAC,EAED,GAAIA,EAAK,KAAM,CACb,IAAMG,EAAW,SAAS,cAAc,MAAM,EAC9CA,EAAS,UAAYH,EAAK,KAC1BC,EAAY,YAAYE,CAAQ,CAClC,CAEA,IAAMC,EAAY,SAAS,cAAc,MAAM,EAC/CA,EAAU,YAAcJ,EAAK,MAC7BC,EAAY,YAAYG,CAAS,EAEjCH,EAAY,iBAAiB,QAAS,IAAM,CACtC,CAACD,EAAK,UAAYA,EAAK,SACzBA,EAAK,QAAQ,EAEf,KAAK,KAAK,CACZ,CAAC,EAEDF,EAAY,YAAYG,CAAW,CACrC,CAAC,EAEDJ,EAAiB,YAAYC,CAAW,EAGxCD,EAAiB,iBAAiB,cAAgBQ,GAAM,CACtDA,EAAE,eAAe,EACjB,KAAK,OAAOA,EAAE,QAASA,EAAE,QAASP,CAAW,CAC/C,CAAC,EAGD,SAAS,iBAAiB,QAAS,IAAM,CACnC,KAAK,SACP,KAAK,KAAK,CAEd,CAAC,EAED,KAAK,YAAcA,EACZD,CACT,CAEA,OAAOS,EAAGC,EAAGT,EAAa,CACnBA,IAEL,KAAK,QAAU,GACfA,EAAY,UAAU,OAAO,QAAQ,EACrCA,EAAY,MAAM,SAAW,QAC7BA,EAAY,MAAM,KAAOQ,EAAI,KAC7BR,EAAY,MAAM,IAAMS,EAAI,KAC9B,CAEA,MAAO,CACL,KAAK,QAAU,GACX,KAAK,cACP,KAAK,YAAY,UAAU,IAAI,QAAQ,EACvC,KAAK,YAAY,MAAM,SAAW,WAEtC,CAEA,QAAQC,EAAOC,EAASC,EAAO,KAAM,CACnC,IAAMV,EAAO,CAAE,MAAAQ,EAAO,QAAAC,EAAS,KAAAC,CAAK,EAGpC,GAFA,KAAK,MAAM,KAAKV,CAAI,EAEhB,KAAK,YAAa,CACpB,IAAMC,EAAcC,EAAc,SAAU,CAC1C,UAAW,qGACb,CAAC,EAED,GAAIQ,EAAM,CACR,IAAMP,EAAW,SAAS,cAAc,MAAM,EAC9CA,EAAS,UAAYO,EACrBT,EAAY,YAAYE,CAAQ,CAClC,CAEAF,EAAY,YAAcO,EAC1BP,EAAY,iBAAiB,QAAS,IAAM,CAC1CQ,EAAQ,EACR,KAAK,KAAK,CACZ,CAAC,EAED,KAAK,YAAY,YAAYR,CAAW,CAC1C,CACF,CACF,ICzHA,IAAAU,GAAA,GAAAC,EAAAD,GAAA,gBAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAyBK,CAAc,CAC5C,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,MAAQA,EAAQ,OAAS,GAC9B,KAAK,YAAcA,EAAQ,aAAe,iBAC1C,KAAK,OAASA,EAAQ,QAAU,aAChC,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,SAAWA,EAAQ,UAAY,KACpC,KAAK,KAAO,EACd,CAEA,QAAS,CACP,IAAMC,EAAmB,MAAM,OAAO,MAAO,CAC3C,UAAW,iBACb,CAAC,EAGKC,EAAe,SAAS,cAAc,OAAO,EACnDA,EAAa,KAAO,OACpBA,EAAa,YAAc,KAAK,YAChCA,EAAa,MAAQ,KAAK,MAC1BA,EAAa,UAAYC,EACvB,qDACA,8EACF,EAEAD,EAAa,iBAAiB,QAAS,IAAM,CAC3C,KAAK,WAAW,CAClB,CAAC,EAEDA,EAAa,iBAAiB,SAAWE,GAAM,CAC7C,KAAK,MAAQA,EAAE,OAAO,MAClB,KAAK,UACP,KAAK,SAAS,KAAK,KAAK,CAE5B,CAAC,EAEDH,EAAiB,YAAYC,CAAY,EAGzC,IAAMG,EAAc,SAAS,cAAc,OAAO,EAClD,OAAAA,EAAY,KAAO,OACnBA,EAAY,MAAM,QAAU,OAC5BA,EAAY,MAAQ,KAAK,MAEzBA,EAAY,iBAAiB,SAAWD,GAAM,CAC5C,IAAME,EAAO,IAAI,KAAKF,EAAE,OAAO,KAAK,EACpC,KAAK,MAAQ,KAAK,WAAWE,CAAI,EACjCJ,EAAa,MAAQ,KAAK,MAEtB,KAAK,UACP,KAAK,SAAS,KAAK,KAAK,CAE5B,CAAC,EAEDD,EAAiB,YAAYI,CAAW,EAExC,KAAK,aAAeH,EACpB,KAAK,YAAcG,EAEZJ,CACT,CAEA,YAAa,CACX,KAAK,YAAY,MAAM,CACzB,CAEA,WAAWK,EAAM,CACf,IAAMC,EAAOD,EAAK,YAAY,EACxBE,EAAQ,OAAOF,EAAK,SAAS,EAAI,CAAC,EAAE,SAAS,EAAG,GAAG,EACnDG,EAAM,OAAOH,EAAK,QAAQ,CAAC,EAAE,SAAS,EAAG,GAAG,EAElD,OAAI,KAAK,SAAW,aACX,GAAGG,CAAG,IAAID,CAAK,IAAID,CAAI,GAEzB,GAAGA,CAAI,IAAIC,CAAK,IAAIC,CAAG,EAChC,CAEA,UAAW,CACT,OAAO,KAAK,KACd,CAEA,SAASC,EAAO,CACd,KAAK,MAAQA,EACT,KAAK,eACP,KAAK,aAAa,MAAQA,EAE9B,CACF,IChGA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,YAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAqBK,CAAc,CACxC,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,MAAQA,EAAQ,OAAS,GAC9B,KAAK,QAAUA,EAAQ,SAAW,GAClC,KAAK,KAAOA,EAAQ,MAAQ,KAC5B,KAAK,KAAOA,EAAQ,MAAQ,GAC5B,KAAK,QAAUA,EAAQ,SAAW,KAClC,KAAK,YAAcA,EAAQ,cAAgB,GAC3C,KAAK,gBAAkBA,EAAQ,kBAAoB,GACnD,KAAK,cAAgBA,EAAQ,gBAAkB,EACjD,CAEA,QAAS,CACP,IAAMC,EAAmB,MAAM,OAAO,MAAO,CAC3C,UAAWC,EACT,sDACA,KAAK,KAAO,GAAK,QACnB,EACA,MAAO,CACL,KAAM,SACN,aAAc,OACd,kBAAmB,GAAG,KAAK,EAAE,SAC7B,mBAAoB,GAAG,KAAK,EAAE,cAChC,CACF,CAAC,EAGKC,EAAWC,EAAe,iBAAiB,EACjDH,EAAiB,YAAYE,CAAQ,EAEjC,KAAK,iBACPA,EAAS,iBAAiB,QAAS,IAAM,KAAK,MAAM,CAAC,EAIvD,IAAME,EAAc,CAClB,GAAI,kBACJ,GAAI,kBACJ,GAAI,kBACJ,GAAI,iBACN,EAEMC,EAAgB,SAAS,cAAc,KAAK,EAQlD,GAPAA,EAAc,UAAYJ,EACxB,8CACAG,EAAY,KAAK,IAAI,EACrB,mCACF,EAGI,KAAK,MAAO,CACd,IAAME,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,uEAEnB,IAAMC,EAAQ,SAAS,cAAc,IAAI,EAMzC,GALAA,EAAM,GAAK,GAAG,KAAK,EAAE,SACrBA,EAAM,UAAY,sCAClBA,EAAM,YAAc,KAAK,MACzBD,EAAO,YAAYC,CAAK,EAEpB,KAAK,YAAa,CACpB,IAAMC,EAAW,SAAS,cAAc,QAAQ,EAChDA,EAAS,UAAY,mEACrBA,EAAS,UAAY,OACrBA,EAAS,aAAa,aAAc,OAAO,EAC3CA,EAAS,iBAAiB,QAAS,IAAM,KAAK,MAAM,CAAC,EACrDF,EAAO,YAAYE,CAAQ,CAC7B,CAEAH,EAAc,YAAYC,CAAM,CAClC,CAGA,GAAI,KAAK,QAAS,CAChB,IAAMG,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,GAAK,GAAG,KAAK,EAAE,eAC1BA,EAAW,UAAY,YACvBA,EAAW,UAAY,KAAK,QAC5BJ,EAAc,YAAYI,CAAU,CACtC,CAEA,OAAAT,EAAiB,YAAYK,CAAa,EAG1C,KAAK,GAAG,UAAYK,GAAM,CACpBC,EAAS,SAASD,CAAC,GAAK,KAAK,eAC/B,KAAK,MAAM,CAEf,EAAG,CAAE,KAAM,EAAM,CAAC,EAElB,KAAK,SAAWR,EAChB,KAAK,cAAgBG,EACrB,KAAK,UAAYO,EAAgBP,CAAa,EAEvCL,CACT,CAEA,MAAO,CACA,KAAK,SAAS,KAAK,OAAO,EAE/B,KAAK,KAAO,GACZ,KAAK,QAAQ,UAAU,OAAO,QAAQ,EACtC,KAAK,UAAU,KAAK,EACpB,SAAS,KAAK,MAAM,SAAW,QACjC,CAEA,OAAQ,CACN,KAAK,KAAO,GACZ,KAAK,SAAS,UAAU,IAAI,QAAQ,EACpC,SAAS,KAAK,MAAM,SAAW,GAE3B,KAAK,SACP,KAAK,QAAQ,CAEjB,CAEA,QAAS,CACP,KAAK,KAAO,KAAK,MAAM,EAAI,KAAK,KAAK,CACvC,CAEA,WAAWa,EAAS,CAElB,GADA,KAAK,QAAUA,EACX,KAAK,cAAe,CACtB,IAAMJ,EAAa,KAAK,cAAc,cAAc,IAAI,KAAK,EAAE,cAAc,EACzEA,IACFA,EAAW,UAAYI,EAE3B,CACF,CACF,IC1IA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,kBAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAA2BK,CAAc,CAC9C,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,QAAUA,EAAQ,SAAW,OAClC,KAAK,MAAQA,EAAQ,OAAS,CAAC,EAC/B,KAAK,SAAWA,EAAQ,UAAY,SACpC,KAAK,MAAQA,EAAQ,OAAS,OAC9B,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,KAAO,EACd,CAEA,QAAS,CACP,IAAMC,EAAmB,MAAM,OAAO,MAAO,CAC3C,UAAW,uBACb,CAAC,EAGKC,EAAa,SAAS,cAAc,QAAQ,EAClDA,EAAW,UAAY,uHACvBA,EAAW,UAAY,GAAG,KAAK,OAAO,iMACtCA,EAAW,iBAAiB,QAAS,IAAM,KAAK,OAAO,CAAC,EAExDD,EAAiB,YAAYC,CAAU,EAGvC,IAAMC,EAAgB,KAAK,WAAa,MAAQ,mBAAqB,gBAC/DC,EAAa,KAAK,QAAU,QAAU,UAAY,SAElDC,EAAc,SAAS,cAAc,KAAK,EAChD,OAAAA,EAAY,UAAYC,EACtB,2FACAH,EACAC,EACA,KAAK,SACP,EAEA,KAAK,MAAM,QAASG,GAAS,CAC3B,GAAIA,EAAK,QAAS,CAChB,IAAMC,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,gCACpBH,EAAY,YAAYG,CAAO,EAC/B,MACF,CAEA,IAAMC,EAAcC,EAAc,SAAU,CAC1C,UAAWJ,EACT,sGACAC,EAAK,SAAW,gCAAkC,gBACpD,EACA,MAAO,CACL,SAAUA,EAAK,SAAW,GAAK,IACjC,CACF,CAAC,EAED,GAAIA,EAAK,KAAM,CACb,IAAMI,EAAW,SAAS,cAAc,MAAM,EAC9CA,EAAS,UAAYJ,EAAK,KAC1BI,EAAS,UAAY,UACrBF,EAAY,YAAYE,CAAQ,CAClC,CAEA,IAAMC,EAAY,SAAS,cAAc,MAAM,EAC/CA,EAAU,YAAcL,EAAK,MAC7BE,EAAY,YAAYG,CAAS,EAEjCH,EAAY,iBAAiB,QAAS,IAAM,CACtC,CAACF,EAAK,UAAYA,EAAK,SACzBA,EAAK,QAAQ,EAEf,KAAK,MAAM,CACb,CAAC,EAEDF,EAAY,YAAYI,CAAW,CACrC,CAAC,EAEDR,EAAiB,YAAYI,CAAW,EAGxC,SAAS,iBAAiB,QAAUQ,GAAM,CACpC,CAACZ,EAAiB,SAASY,EAAE,MAAM,GAAK,KAAK,MAC/C,KAAK,MAAM,CAEf,CAAC,EAED,KAAK,WAAaX,EAClB,KAAK,YAAcG,EAEZJ,CACT,CAEA,QAAS,CACP,KAAK,KAAO,KAAK,MAAM,EAAI,KAAK,KAAK,CACvC,CAEA,MAAO,CACL,KAAK,KAAO,GACZ,KAAK,YAAY,UAAU,OAAO,QAAQ,CAC5C,CAEA,OAAQ,CACN,KAAK,KAAO,GACZ,KAAK,YAAY,UAAU,IAAI,QAAQ,CACzC,CAEA,QAAQa,EAAOC,EAASC,EAAO,KAAM,CACnC,IAAMT,EAAO,CAAE,MAAAO,EAAO,QAAAC,EAAS,KAAAC,CAAK,EAGpC,GAFA,KAAK,MAAM,KAAKT,CAAI,EAEhB,KAAK,YAAa,CACpB,IAAME,EAAcC,EAAc,SAAU,CAC1C,UAAW,qGACb,CAAC,EAED,GAAIM,EAAM,CACR,IAAML,EAAW,SAAS,cAAc,MAAM,EAC9CA,EAAS,UAAYK,EACrBL,EAAS,UAAY,UACrBF,EAAY,YAAYE,CAAQ,CAClC,CAEA,IAAMC,EAAY,SAAS,cAAc,MAAM,EAC/CA,EAAU,YAAcE,EACxBL,EAAY,YAAYG,CAAS,EAEjCH,EAAY,iBAAiB,QAAS,IAAM,CAC1CM,EAAQ,EACR,KAAK,MAAM,CACb,CAAC,EAED,KAAK,YAAY,YAAYN,CAAW,CAC1C,CACF,CACF,IC5IA,IAAAQ,GAAA,GAAAC,EAAAD,GAAA,YAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAqBK,CAAc,CACxC,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,MAAQA,EAAQ,OAAS,GAC9B,KAAK,QAAUA,EAAQ,SAAW,GAClC,KAAK,SAAWA,EAAQ,UAAY,QACpC,KAAK,KAAOA,EAAQ,MAAQ,GAC5B,KAAK,QAAUA,EAAQ,SAAW,KAClC,KAAK,YAAcA,EAAQ,cAAgB,GAC3C,KAAK,gBAAkBA,EAAQ,kBAAoB,GACnD,KAAK,cAAgBA,EAAQ,gBAAkB,EACjD,CAEA,QAAS,CACP,IAAMC,EAAmB,MAAM,OAAO,MAAO,CAC3C,UAAWC,EACT,qBACA,KAAK,KAAO,GAAK,QACnB,CACF,CAAC,EAGKC,EAAWC,EAAe,EAChCH,EAAiB,YAAYE,CAAQ,EAEjC,KAAK,iBACPA,EAAS,iBAAiB,QAAS,IAAM,KAAK,MAAM,CAAC,EAIvD,IAAME,EAAkB,KAAK,WAAa,OAAS,SAAW,UACxDC,EAAgB,SAAS,cAAc,KAAK,EAQlD,GAPAA,EAAc,UAAYJ,EACxB,qGACAG,EACA,KAAK,KAAO,gBAAmB,KAAK,WAAa,OAAS,oBAAsB,kBAClF,EAGI,KAAK,MAAO,CACd,IAAME,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,uEAEnB,IAAMC,EAAQ,SAAS,cAAc,IAAI,EAKzC,GAJAA,EAAM,UAAY,sCAClBA,EAAM,YAAc,KAAK,MACzBD,EAAO,YAAYC,CAAK,EAEpB,KAAK,YAAa,CACpB,IAAMC,EAAW,SAAS,cAAc,QAAQ,EAChDA,EAAS,UAAY,mEACrBA,EAAS,UAAY,OACrBA,EAAS,iBAAiB,QAAS,IAAM,KAAK,MAAM,CAAC,EACrDF,EAAO,YAAYE,CAAQ,CAC7B,CAEAH,EAAc,YAAYC,CAAM,CAClC,CAGA,IAAMG,EAAa,SAAS,cAAc,KAAK,EAC/C,OAAAA,EAAW,UAAY,mCACvBA,EAAW,UAAY,KAAK,QAC5BJ,EAAc,YAAYI,CAAU,EAEpCT,EAAiB,YAAYK,CAAa,EAG1C,KAAK,GAAG,UAAYK,GAAM,CACpBC,EAAS,SAASD,CAAC,GAAK,KAAK,eAC/B,KAAK,MAAM,CAEf,EAAG,CAAE,KAAM,EAAM,CAAC,EAElB,KAAK,SAAWR,EAChB,KAAK,cAAgBG,EAEdL,CACT,CAEA,MAAO,CACA,KAAK,SAAS,KAAK,OAAO,EAE/B,KAAK,KAAO,GACZ,KAAK,QAAQ,UAAU,OAAO,QAAQ,EACtC,KAAK,cAAc,UAAU,OAAO,oBAAqB,kBAAkB,EAC3E,KAAK,cAAc,UAAU,IAAI,eAAe,EAChD,SAAS,KAAK,MAAM,SAAW,QACjC,CAEA,OAAQ,CACN,KAAK,KAAO,GACZ,IAAMY,EAAiB,KAAK,WAAa,OAAS,oBAAsB,mBACxE,KAAK,cAAc,UAAU,OAAO,eAAe,EACnD,KAAK,cAAc,UAAU,IAAIA,CAAc,EAE/C,WAAW,IAAM,CACX,KAAK,SAAS,YAChB,KAAK,QAAQ,UAAU,IAAI,QAAQ,EAErC,SAAS,KAAK,MAAM,SAAW,EACjC,EAAG,GAAG,EAEF,KAAK,SACP,KAAK,QAAQ,CAEjB,CAEA,QAAS,CACP,KAAK,KAAO,KAAK,MAAM,EAAI,KAAK,KAAK,CACvC,CACF,ICvHA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,WAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAoBK,CAAc,CACvC,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,KAAOA,EAAQ,MAAQ,YAC5B,KAAK,MAAQA,EAAQ,OAAS,UAC9B,KAAK,QAAUA,EAAQ,SAAW,8BAClC,KAAK,OAASA,EAAQ,QAAU,KAChC,KAAK,UAAYA,EAAQ,WAAa,EACxC,CAEA,QAAS,CACP,IAAMC,EAAmB,MAAM,OAAO,MAAO,CAC3C,UAAWC,EACT,4DACA,KAAK,SACP,CACF,CAAC,EAGKC,EAAcC,EAAc,MAAO,CACvC,UAAW,gBACX,KAAM,KAAK,IACb,CAAC,EACDH,EAAiB,YAAYE,CAAW,EAGxC,IAAME,EAAeD,EAAc,KAAM,CACvC,UAAW,2CACX,KAAM,KAAK,KACb,CAAC,EACDH,EAAiB,YAAYI,CAAY,EAGzC,IAAMC,EAAiBF,EAAc,IAAK,CACxC,UAAW,qBACX,KAAM,KAAK,OACb,CAAC,EAID,GAHAH,EAAiB,YAAYK,CAAc,EAGvC,KAAK,OAAQ,CACf,IAAMC,EAAYH,EAAc,SAAU,CACxC,UAAW,+EACX,KAAM,KAAK,OAAO,KACpB,CAAC,EAEDG,EAAU,iBAAiB,QAAS,KAAK,OAAO,OAAO,EACvDN,EAAiB,YAAYM,CAAS,CACxC,CAEA,OAAON,CACT,CACF,IC5DA,IAAAO,GAAA,GAAAC,EAAAD,GAAA,UAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAmBK,CAAc,CACtC,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,OAASA,EAAQ,QAAU,CAAC,EACjC,KAAK,SAAWA,EAAQ,UAAY,KACpC,KAAK,WAAaA,EAAQ,YAAc,SACxC,KAAK,UAAYA,EAAQ,WAAa,EACxC,CAEA,QAAS,CACP,IAAMC,EAAc,MAAM,OAAO,OAAQ,CACvC,UAAWC,EAAK,YAAa,KAAK,SAAS,CAC7C,CAAC,EAEDD,EAAY,iBAAiB,SAAWE,GAAM,CAC5CA,EAAE,eAAe,EACjB,KAAK,aAAa,CACpB,CAAC,EAGD,KAAK,cAAgB,CAAC,EAEtB,KAAK,OAAO,QAAQC,GAAS,CAC3B,IAAMC,EAAiBC,EAAc,MAAO,CAC1C,UAAW,WACb,CAAC,EAGD,GAAIF,EAAM,MAAO,CACf,IAAMG,EAAQD,EAAc,QAAS,CACnC,UAAW,0CACX,KAAMF,EAAM,MACZ,MAAO,CAAE,IAAKA,EAAM,IAAK,CAC3B,CAAC,EACDC,EAAe,YAAYE,CAAK,CAClC,CAGA,IAAMC,EAAQ,SAAS,cAAcJ,EAAM,OAAS,WAAa,WAAa,OAAO,EACrFI,EAAM,GAAKJ,EAAM,KACjBI,EAAM,KAAOJ,EAAM,KACnBI,EAAM,UAAYN,EAChB,qDACA,8EACF,EAEIE,EAAM,OAAS,aACjBI,EAAM,KAAOJ,EAAM,MAAQ,QAGzBA,EAAM,cAAaI,EAAM,YAAcJ,EAAM,aAC7CA,EAAM,WAAUI,EAAM,SAAW,IACjCJ,EAAM,WAAUI,EAAM,SAAW,IAErCA,EAAM,MAAQJ,EAAM,OAAS,GAE7BC,EAAe,YAAYG,CAAK,EAGhC,IAAMC,EAAWH,EAAc,MAAO,CACpC,UAAW,8BACX,MAAO,CAAE,aAAcF,EAAM,IAAK,CACpC,CAAC,EACDC,EAAe,YAAYI,CAAQ,EAEnCR,EAAY,YAAYI,CAAc,EACtC,KAAK,cAAcD,EAAM,IAAI,EAAII,CACnC,CAAC,EAGD,IAAME,EAAYJ,EAAc,SAAU,CACxC,UAAWJ,EACT,8DACA,kDACF,EACA,KAAM,KAAK,WACX,MAAO,CAAE,KAAM,QAAS,CAC1B,CAAC,EAED,OAAAD,EAAY,YAAYS,CAAS,EAE1BT,CACT,CAEA,cAAe,CACb,IAAMU,EAAW,CAAC,EAElB,OAAO,QAAQ,KAAK,aAAa,EAAE,QAAQ,CAAC,CAACC,EAAMJ,CAAK,IAAM,CAC5DG,EAASC,CAAI,EAAIJ,EAAM,KACzB,CAAC,EAEG,KAAK,UACP,KAAK,SAASG,CAAQ,CAE1B,CAEA,WAAY,CACV,IAAME,EAAS,CAAC,EAChB,cAAO,QAAQ,KAAK,aAAa,EAAE,QAAQ,CAAC,CAACD,EAAMJ,CAAK,IAAM,CAC5DK,EAAOD,CAAI,EAAIJ,EAAM,KACvB,CAAC,EACMK,CACT,CAEA,UAAUA,EAAQ,CAChB,OAAO,QAAQA,CAAM,EAAE,QAAQ,CAAC,CAACD,EAAME,CAAK,IAAM,CAC5C,KAAK,cAAcF,CAAI,IACzB,KAAK,cAAcA,CAAI,EAAE,MAAQE,EAErC,CAAC,CACH,CAEA,SAASC,EAAWC,EAAS,CAC3B,IAAMP,EAAW,KAAK,QAAQ,cAAc,gBAAgBM,CAAS,IAAI,EACrEN,IACFA,EAAS,YAAcO,EACvBP,EAAS,UAAU,OAAO,QAAQ,EAEtC,CAEA,WAAWM,EAAW,CACpB,IAAMN,EAAW,KAAK,QAAQ,cAAc,gBAAgBM,CAAS,IAAI,EACrEN,IACFA,EAAS,YAAc,GACvBA,EAAS,UAAU,IAAI,QAAQ,EAEnC,CAEA,OAAQ,CACF,KAAK,SACP,KAAK,QAAQ,MAAM,CAEvB,CACF,IC7IA,IAAAQ,GAAA,GAAAC,EAAAD,GAAA,eAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAwBK,CAAc,CAC3C,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,QAAUA,EAAQ,SAAW,WAClC,KAAK,QAAUA,EAAQ,SAAW,GAClC,KAAK,SAAWA,EAAQ,UAAY,SACpC,KAAK,MAAQA,EAAQ,OAAS,IAC9B,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,QAAU,GACf,KAAK,UAAY,IACnB,CAEA,QAAS,CACP,IAAMC,EAAmB,MAAM,OAAO,MAAO,CAC3C,UAAW,uBACb,CAAC,EAGKC,EAAiB,SAAS,cAAc,KAAK,EACnDA,EAAe,UAAY,oFAC3BA,EAAe,YAAc,KAAK,QAElCD,EAAiB,YAAYC,CAAc,EAG3C,IAAMC,EAAc,SAAS,cAAc,KAAK,EAChD,OAAAA,EAAY,UAAYC,EACtB,gFACA,qBACA,KAAK,mBAAmB,EACxB,KAAK,SACP,EACAD,EAAY,UAAY,KAAK,QAE7BF,EAAiB,YAAYE,CAAW,EAGxCF,EAAiB,iBAAiB,aAAc,IAAM,KAAK,KAAKE,CAAW,CAAC,EAC5EF,EAAiB,iBAAiB,aAAc,IAAM,KAAK,KAAKE,CAAW,CAAC,EAE5E,KAAK,YAAcA,EAEZF,CACT,CAEA,oBAAqB,CACnB,IAAMI,EAAY,CAChB,IAAK,0BACL,OAAQ,uBACR,KAAM,wBACN,MAAO,sBACT,EACA,OAAOA,EAAU,KAAK,QAAQ,GAAKA,EAAU,MAC/C,CAEA,KAAKF,EAAc,KAAK,YAAa,CAC/B,KAAK,SAAW,CAACA,IAErB,KAAK,UAAY,WAAW,IAAM,CAChC,KAAK,QAAU,GACfA,EAAY,UAAU,OAAO,QAAQ,EACrCA,EAAY,UAAU,IAAI,cAAe,qBAAsB,cAAc,CAC/E,EAAG,KAAK,KAAK,EACf,CAEA,KAAKA,EAAc,KAAK,YAAa,CAC/B,CAAC,KAAK,SAAW,CAACA,IAEtB,aAAa,KAAK,SAAS,EAC3B,KAAK,QAAU,GACfA,EAAY,UAAU,IAAI,QAAQ,EAClCA,EAAY,UAAU,OAAO,aAAa,EAC5C,CAEA,WAAWG,EAAS,CAClB,KAAK,QAAUA,EACX,KAAK,cACP,KAAK,YAAY,UAAYA,EAEjC,CACF,ICxFA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,WAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAoBK,CAAc,CACvC,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,KAAOA,EAAQ,MAAQ,OAC5B,KAAK,YAAcA,EAAQ,aAAe,GAC1C,KAAK,MAAQA,EAAQ,OAAS,GAC9B,KAAK,KAAOA,EAAQ,MAAQ,GAC5B,KAAK,SAAWA,EAAQ,UAAY,GACpC,KAAK,SAAWA,EAAQ,UAAY,GACpC,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,SAAWA,EAAQ,UAAY,IACtC,CAEA,QAAS,CAGP,IAAMC,EAAe,MAAM,OAAO,QAAS,CACzC,UAAWC,EAHO,qPAGW,KAAK,SAAS,EAC3C,MAAO,CACL,KAAM,KAAK,KACX,YAAa,KAAK,YAClB,MAAO,KAAK,MACZ,KAAM,KAAK,KACX,SAAU,KAAK,SAAW,GAAK,KAC/B,SAAU,KAAK,SAAW,GAAK,IACjC,CACF,CAAC,EAED,OAAI,KAAK,WACP,KAAK,GAAG,SAAU,KAAK,QAAQ,EAC/B,KAAK,GAAG,QAAS,KAAK,QAAQ,GAGzBD,CACT,CAEA,UAAW,CACT,OAAO,KAAK,SAAS,OAAS,EAChC,CAEA,SAASE,EAAO,CACd,KAAK,MAAQA,EACT,KAAK,UACP,KAAK,QAAQ,MAAQA,EAEzB,CAEA,YAAYC,EAAU,CACpB,KAAK,SAAWA,EAChB,KAAK,KAAK,WAAYA,EAAW,GAAK,IAAI,CAC5C,CAEA,eAAeC,EAAa,CAC1B,KAAK,YAAcA,EACf,KAAK,UACP,KAAK,QAAQ,YAAcA,EAE/B,CAEA,OAAQ,CACN,MAAM,MAAM,CACd,CAEA,OAAQ,CACN,KAAK,SAAS,EAAE,CAClB,CACF,IC1EA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,gBAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAyBK,CAAc,CAC5C,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,OAASA,EAAQ,QAAU,KAChC,KAAK,OAASA,EAAQ,QAAU,KAChC,KAAK,MAAQA,EAAQ,OAAS,KAC9B,KAAK,UAAYA,EAAQ,WAAa,EACxC,CAEA,QAAS,CAGP,IAAMC,EAAe,MAAM,OAAO,MAAO,CACvC,UAAWC,EAHO,qHAGW,KAAK,SAAS,CAC7C,CAAC,EAED,GAAI,KAAK,OAAQ,CACf,IAAMC,EAAWC,EAAc,MAAO,CACpC,UAAW,yDACX,KAAM,KAAK,MACb,CAAC,EACDH,EAAa,YAAYE,CAAQ,CACnC,CAEA,GAAI,KAAK,MAAO,CACd,IAAME,EAAU,KAAK,MAAM,SAAW,KAAK,MAAM,OAAO,EACxDA,EAAQ,UAAU,OAAO,SAAU,eAAgB,qBAAqB,EACxEJ,EAAa,YAAYI,CAAO,CAClC,CAEA,GAAI,KAAK,OAAQ,CACf,IAAMC,EAAWF,EAAc,MAAO,CACpC,UAAW,yDACX,KAAM,KAAK,MACb,CAAC,EACDH,EAAa,YAAYK,CAAQ,CACnC,CAEA,OAAOL,CACT,CACF,IChDA,IAAAM,GAAA,GAAAC,EAAAD,GAAA,cAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAuBK,CAAc,CAC1C,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,OAASA,EAAQ,QAAU,EAChC,KAAK,MAAQA,EAAQ,OAAS,GAC9B,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,SAAWA,EAAQ,UAAY,KACpC,KAAK,WAAaA,EAAQ,YAAc,IAC1C,CAEA,QAAS,CACP,IAAMC,EAAmB,MAAM,OAAO,MAAO,CAC3C,UAAWC,EAAK,aAAc,KAAK,SAAS,CAC9C,CAAC,EAED,KAAK,OAAS,CAAC,EAEf,QAASC,EAAI,EAAGA,EAAI,KAAK,OAAQA,IAAK,CACpC,IAAMC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,KAAO,OACbA,EAAM,UAAY,IAClBA,EAAM,UAAY,UAClBA,EAAM,UAAYF,EAChB,kFACA,4EACA,gCACF,EAEI,KAAK,OAAS,KAAK,MAAMC,CAAC,IAC5BC,EAAM,MAAQ,KAAK,MAAMD,CAAC,GAG5BC,EAAM,iBAAiB,QAAUC,GAAM,CACrC,IAAMC,EAAQD,EAAE,OAAO,MACvB,GAAI,CAAC,QAAQ,KAAKC,CAAK,EAAG,CACxBD,EAAE,OAAO,MAAQ,GACjB,MACF,CAEIC,GAASH,EAAI,KAAK,OAAS,GAC7B,KAAK,OAAOA,EAAI,CAAC,EAAE,MAAM,EAG3B,KAAK,YAAY,CACnB,CAAC,EAEDC,EAAM,iBAAiB,UAAYC,GAAM,CACnCA,EAAE,MAAQ,YACR,CAACD,EAAM,OAASD,EAAI,GACtB,KAAK,OAAOA,EAAI,CAAC,EAAE,MAAM,EAElBE,EAAE,MAAQ,aAAeF,EAAI,EACtC,KAAK,OAAOA,EAAI,CAAC,EAAE,MAAM,EAChBE,EAAE,MAAQ,cAAgBF,EAAI,KAAK,OAAS,GACrD,KAAK,OAAOA,EAAI,CAAC,EAAE,MAAM,CAE7B,CAAC,EAED,KAAK,OAAO,KAAKC,CAAK,EACtBH,EAAiB,YAAYG,CAAK,CACpC,CAEA,OAAOH,CACT,CAEA,aAAc,CACZ,KAAK,MAAQ,KAAK,OAAO,IAAIG,GAASA,EAAM,KAAK,EAAE,KAAK,EAAE,EAEtD,KAAK,UACP,KAAK,SAAS,KAAK,KAAK,EAGtB,KAAK,MAAM,SAAW,KAAK,QAAU,KAAK,YAC5C,KAAK,WAAW,KAAK,KAAK,CAE9B,CAEA,UAAW,CACT,OAAO,KAAK,KACd,CAEA,SAASE,EAAO,CACd,KAAK,MAAQA,EACb,QAASH,EAAI,EAAGA,EAAI,KAAK,OAAQA,IAC/B,KAAK,OAAOA,CAAC,EAAE,MAAQG,EAAMH,CAAC,GAAK,EAEvC,CAEA,OAAQ,CACN,KAAK,OAAO,QAAQC,GAAS,CAC3BA,EAAM,MAAQ,EAChB,CAAC,EACD,KAAK,MAAQ,EACf,CAEA,OAAQ,CACF,KAAK,OAAO,OAAS,GACvB,KAAK,OAAO,CAAC,EAAE,MAAM,CAEzB,CACF,IC5GA,IAAAG,GAAA,GAAAC,EAAAD,GAAA,UAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAmBK,CAAc,CACtC,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,MAAQA,EAAQ,OAAS,GAC9B,KAAK,MAAQA,EAAQ,OAAS,GAC9B,KAAK,KAAOA,EAAQ,MAAQ,KAC5B,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,SAAWA,EAAQ,UAAY,GACpC,KAAK,SAAWA,EAAQ,UAAY,EACtC,CAEA,QAAS,CACP,IAAMC,EAAc,4JAEdC,EAAe,KAAK,SAAW,2BAA6B,gBAE5DC,EAAc,MAAM,OAAO,MAAO,CACtC,UAAWC,EAAKH,EAAaC,EAAc,KAAK,SAAS,EACzD,MAAO,CACL,KAAM,SACN,gBAAiB,KAAK,SACtB,SAAU,KAAK,SAAW,GAAK,KAC/B,aAAc,KAAK,KACrB,CACF,CAAC,EAEGG,EAAO,GACX,OAAI,KAAK,OACPA,GAAQ,+BAA+B,KAAK,IAAI,WAElDA,GAAQ,SAAS,KAAK,KAAK,UAE3BF,EAAY,UAAYE,EACjBF,CACT,CAEA,YAAYG,EAAU,CACpB,KAAK,SAAWA,EACZ,KAAK,UACP,KAAK,KAAK,gBAAiBA,CAAQ,EACnC,KAAK,YAAY,2BAA4BA,CAAQ,EAEzD,CAEA,YAAYC,EAAU,CACpB,KAAK,SAAWA,EAChB,KAAK,KAAK,WAAYA,EAAW,GAAK,IAAI,CAC5C,CACF,ICxDA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,WAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAoBK,CAAc,CACvC,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,KAAOA,EAAQ,MAAQ,GAC5B,KAAK,QAAUA,EAAQ,SAAW,GAClC,KAAK,SAAWA,EAAQ,UAAY,GACpC,KAAK,UAAYA,EAAQ,WAAa,EACxC,CAEA,QAAS,CAGP,IAAMC,EAAe,MAAM,OAAO,QAAS,CACzC,UAAWC,EAHO,+CAGW,KAAK,SAAS,EAC3C,MAAO,CAAE,IAAK,KAAK,OAAQ,CAC7B,CAAC,EAEGC,EAAO,KAAK,KAChB,OAAI,KAAK,WACPA,GAAQ,6CAGVF,EAAa,UAAYE,EAClBF,CACT,CAEA,QAAQG,EAAM,CAEZ,GADA,KAAK,KAAOA,EACR,KAAK,QAAS,CAChB,IAAID,EAAOC,EACP,KAAK,WACPD,GAAQ,6CAEV,KAAK,QAAQ,UAAYA,CAC3B,CACF,CAEA,YAAYE,EAAU,CAEpB,GADA,KAAK,SAAWA,EACZ,KAAK,QAAS,CAChB,IAAMC,EAAe,KAAK,QAAQ,cAAc,qBAAqB,EACjED,GAAY,CAACC,EACf,KAAK,QAAQ,WAAa,4CACjB,CAACD,GAAYC,GACtBA,EAAa,OAAO,CAExB,CACF,CACF,ICxDA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,SAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAkBK,CAAc,CACrC,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,MAAQA,EAAQ,OAAS,IAC9B,KAAK,UAAYA,EAAQ,WAAa,EACxC,CAEA,QAAS,CAGP,IAAMC,EAAa,MAAM,OAAO,MAAO,CACrC,UAAWC,EAHO,kHAGW,KAAK,SAAS,CAC7C,CAAC,EAED,OAAAD,EAAW,YAAc,KAAK,MACvBA,CACT,CAEA,SAASE,EAAO,CACd,KAAK,MAAQA,EACT,KAAK,UACP,KAAK,QAAQ,YAAcA,EAE/B,CACF,IChCA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,kBAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAA2BK,CAAc,CAC9C,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,MAAQA,EAAQ,OAAS,CAAC,EAC/B,KAAK,SAAWA,EAAQ,UAAY,GACpC,KAAK,YAAcA,EAAQ,aAAe,YAC1C,KAAK,SAAWA,EAAQ,UAAY,GACpC,KAAK,SAAWA,EAAQ,UAAY,GACpC,KAAK,KAAOA,EAAQ,MAAQ,GAC5B,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,SAAWA,EAAQ,UAAY,IACtC,CAEA,QAAS,CAGP,IAAMC,EAAgB,MAAM,OAAO,SAAU,CAC3C,UAAWC,EAHO,wQAGW,KAAK,SAAS,EAC3C,MAAO,CACL,SAAU,KAAK,SAAW,GAAK,KAC/B,SAAU,KAAK,SAAW,GAAK,KAC/B,GAAI,KAAK,MAAQ,CAAE,KAAM,KAAK,IAAK,CACrC,CACF,CAAC,EAGD,GAAI,KAAK,YAAa,CACpB,IAAMC,EAAoB,SAAS,cAAc,QAAQ,EACzDA,EAAkB,MAAQ,GAC1BA,EAAkB,YAAc,KAAK,YACrCA,EAAkB,SAAW,GAC7BF,EAAc,YAAYE,CAAiB,CAC7C,CAGA,YAAK,MAAM,QAAQC,GAAQ,CACzB,IAAMC,EAAgB,SAAS,cAAc,QAAQ,EACrDA,EAAc,MAAQD,EAAK,MAC3BC,EAAc,YAAcD,EAAK,MAC7BA,EAAK,QAAU,KAAK,WACtBC,EAAc,SAAW,IAE3BJ,EAAc,YAAYI,CAAa,CACzC,CAAC,EAEG,KAAK,UACP,KAAK,GAAG,SAAU,KAAK,QAAQ,EAG1BJ,CACT,CAEA,UAAW,CACT,OAAO,KAAK,SAAS,OAAS,EAChC,CAEA,SAASK,EAAO,CACd,KAAK,SAAWA,EACZ,KAAK,UACP,KAAK,QAAQ,MAAQA,EAEzB,CAEA,YAAYC,EAAU,CACpB,KAAK,SAAWA,EAChB,KAAK,KAAK,WAAYA,EAAW,GAAK,IAAI,CAC5C,CAEA,QAAQC,EAAOF,EAAO,CACpB,GAAI,KAAK,QAAS,CAChB,IAAMG,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,MAAQH,EACfG,EAAO,YAAcD,EACrB,KAAK,QAAQ,YAAYC,CAAM,CACjC,CACF,CAEA,WAAWH,EAAO,CAChB,GAAI,KAAK,QAAS,CAChB,IAAMG,EAAS,KAAK,QAAQ,cAAc,iBAAiBH,CAAK,IAAI,EAChEG,GACFA,EAAO,OAAO,CAElB,CACF,CACF,IC7FA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,aAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAsBK,CAAc,CACzC,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,QAAUA,EAAQ,SAAW,GAClC,KAAK,SAAWA,EAAQ,UAAY,MACpC,KAAK,MAAQA,EAAQ,OAAS,IAC9B,KAAK,QAAUA,EAAQ,SAAW,QAClC,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,QAAU,GACf,KAAK,UAAY,IACnB,CAEA,QAAS,CACP,IAAMC,EAAmB,MAAM,OAAO,MAAO,CAC3C,UAAW,uBACb,CAAC,EAGKC,EAAiB,SAAS,cAAc,KAAK,EACnDA,EAAe,UAAYC,EACzB,0FACA,4CACA,KAAK,mBAAmB,EACxB,KAAK,SACP,EACAD,EAAe,YAAc,KAAK,QAGlC,IAAME,EAAQ,SAAS,cAAc,KAAK,EAC1C,OAAAA,EAAM,UAAYD,EAChB,mDACA,KAAK,gBAAgB,CACvB,EACAD,EAAe,YAAYE,CAAK,EAEhCH,EAAiB,YAAYC,CAAc,EAE3C,KAAK,eAAiBA,EAGlB,KAAK,UAAY,SACnBD,EAAiB,iBAAiB,aAAc,IAAM,KAAK,KAAK,CAAC,EACjEA,EAAiB,iBAAiB,aAAc,IAAM,KAAK,KAAK,CAAC,GACxD,KAAK,UAAY,UAC1BA,EAAiB,iBAAiB,QAAS,IAAM,KAAK,KAAK,EAAG,EAAI,EAClEA,EAAiB,iBAAiB,OAAQ,IAAM,KAAK,KAAK,EAAG,EAAI,GAG5DA,CACT,CAEA,oBAAqB,CACnB,IAAMI,EAAY,CAChB,IAAK,uDACL,OAAQ,oDACR,KAAM,qDACN,MAAO,mDACT,EACA,OAAOA,EAAU,KAAK,QAAQ,GAAKA,EAAU,GAC/C,CAEA,iBAAkB,CAChB,IAAMC,EAAiB,CACrB,IAAK,gEACL,OAAQ,kEACR,KAAM,+DACN,MAAO,gEACT,EACA,OAAOA,EAAe,KAAK,QAAQ,GAAKA,EAAe,GACzD,CAEA,MAAO,CACD,KAAK,UAET,KAAK,UAAY,WAAW,IAAM,CAChC,KAAK,QAAU,GACf,KAAK,eAAe,UAAU,OAAO,QAAQ,EAC7C,KAAK,eAAe,UAAU,IAAI,aAAa,CACjD,EAAG,KAAK,KAAK,EACf,CAEA,MAAO,CACA,KAAK,UAEV,aAAa,KAAK,SAAS,EAC3B,KAAK,QAAU,GACf,KAAK,eAAe,UAAU,OAAO,aAAa,EAClD,KAAK,eAAe,UAAU,IAAI,QAAQ,EAC5C,CAEA,WAAWC,EAAS,CAClB,KAAK,QAAUA,EACX,KAAK,iBACP,KAAK,eAAe,YAAcA,EAEtC,CACF,ICxGA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,YAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAAqBK,CAAc,CACxC,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,MAAQA,EAAQ,OAAS,GAC9B,KAAK,QAAUA,EAAQ,SAAW,GAClC,KAAK,SAAWA,EAAQ,UAAY,GACpC,KAAK,QAAUA,EAAQ,SAAW,UAClC,KAAK,KAAOA,EAAQ,MAAQ,KAC5B,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,SAAWA,EAAQ,UAAY,IACtC,CAEA,QAAS,CACP,IAAMC,EAAc,gKAEdC,EAAiB,CACrB,QAAS,KAAK,QACV,yBACA,8CACJ,QAAS,KAAK,QACV,kDACA,yDACN,EAEMC,EAAc,CAClB,GAAI,oBACJ,GAAI,sBACJ,GAAI,mBACN,EAEMC,EAAgB,MAAM,OAAO,SAAU,CAC3C,UAAWC,EACTJ,EACAC,EAAe,KAAK,OAAO,EAC3BC,EAAY,KAAK,IAAI,EACrB,KAAK,SACP,EACA,MAAO,CACL,eAAgB,KAAK,QACrB,SAAU,KAAK,SAAW,GAAK,IACjC,CACF,CAAC,EAED,OAAAC,EAAc,YAAc,KAAK,MAEjC,KAAK,GAAG,QAAS,IAAM,CACrB,KAAK,OAAO,CACd,CAAC,EAEMA,CACT,CAEA,WAAY,CACV,OAAO,KAAK,OACd,CAEA,WAAWE,EAAS,CAClB,KAAK,QAAUA,EACX,KAAK,UACP,KAAK,KAAK,eAAgBA,CAAO,EACjC,KAAK,YAAY,yBAA0BA,CAAO,EAC9C,KAAK,UACP,KAAK,SAASA,CAAO,EAG3B,CAEA,QAAS,CACP,KAAK,WAAW,CAAC,KAAK,OAAO,CAC/B,CAEA,YAAYC,EAAU,CACpB,KAAK,SAAWA,EAChB,KAAK,KAAK,WAAYA,EAAW,GAAK,IAAI,CAC5C,CACF,ICnFA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,iBAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,cAA0BK,CAAc,CAC7C,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,MAAQA,EAAQ,OAAS,CAAC,EAC/B,KAAK,SAAWA,EAAQ,UAAY,KACpC,KAAK,SAAWA,EAAQ,UAAY,GACpC,KAAK,YAAcA,EAAQ,aAAe,aAC1C,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,SAAWA,EAAQ,UAAY,IACtC,CAEA,QAAS,CACP,IAAMC,EAAmB,KAAK,cAAgB,WAAa,WAAa,WAGlEC,EAAe,MAAM,OAAO,MAAO,CACvC,UAAWC,EAAK,OAAQF,EAHN,gEAGqC,KAAK,SAAS,EACrE,MAAO,CAAE,KAAM,OAAQ,CACzB,CAAC,EAED,YAAK,cAAgB,CAAC,EAEtB,KAAK,MAAM,QAAQ,CAACG,EAAMC,IAAU,CAClC,IAAMC,EAAa,KAAK,SACnB,MAAM,QAAQ,KAAK,QAAQ,GAAK,KAAK,SAAS,SAASF,EAAK,KAAK,EAClEA,EAAK,QAAU,KAAK,SAElBG,EAAaJ,EACjB,8DACAG,EAAa,yBAA2B,0CACxCD,EAAQ,EAAK,KAAK,cAAgB,WAAa,2BAA6B,2BAA8B,EAC5G,EAEMG,EAAMC,EAAc,SAAU,CAClC,UAAWF,EACX,KAAMH,EAAK,MACX,MAAO,CACL,aAAcA,EAAK,MACnB,eAAgBE,EAChB,KAAM,QACR,CACF,CAAC,EAEDE,EAAI,iBAAiB,QAAS,IAAM,CAClC,GAAI,KAAK,SAAU,CACZ,MAAM,QAAQ,KAAK,QAAQ,IAAG,KAAK,SAAW,CAAC,GACpD,IAAMH,EAAQ,KAAK,SAAS,QAAQD,EAAK,KAAK,EAC1CC,EAAQ,GACV,KAAK,SAAS,OAAOA,EAAO,CAAC,EAE7B,KAAK,SAAS,KAAKD,EAAK,KAAK,CAEjC,MACE,KAAK,SAAWA,EAAK,MAEvB,KAAK,WAAW,EACZ,KAAK,UACP,KAAK,SAAS,KAAK,QAAQ,CAE/B,CAAC,EAEDF,EAAa,YAAYM,CAAG,EAC5B,KAAK,cAAc,KAAKA,CAAG,CAC7B,CAAC,EAEMN,CACT,CAEA,YAAa,CACX,KAAK,cAAc,QAAQM,GAAO,CAChC,IAAME,EAAQF,EAAI,aAAa,YAAY,EACrCF,EAAa,KAAK,SACnB,MAAM,QAAQ,KAAK,QAAQ,GAAK,KAAK,SAAS,SAASI,CAAK,EAC7DA,IAAU,KAAK,SAEnBF,EAAI,aAAa,eAAgBF,CAAU,EAC3CE,EAAI,UAAYL,EACd,8DACAG,EAAa,yBAA2B,yCAC1C,CACF,CAAC,CACH,CAEA,UAAW,CACT,OAAO,KAAK,QACd,CAEA,SAASI,EAAO,CACd,KAAK,SAAWA,EAChB,KAAK,WAAW,CAClB,CACF,ICnGA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,WAAAE,KAAA,IAOaA,GAPbC,GAAAC,EAAA,KAIAC,IACAC,IAEaJ,GAAN,MAAMK,UAAcC,CAAc,CACvC,YAAYC,EAAU,CAAC,EAAG,CACxB,MAAMA,CAAO,EAEb,KAAK,QAAUA,EAAQ,SAAW,GAClC,KAAK,KAAOA,EAAQ,MAAQ,UAExB,OAAOA,EAAQ,SAAa,IAC9B,KAAK,SAAWA,EAAQ,SAExB,KAAK,SAAY,OAAO,OAAW,KAAe,OAAO,WAAa,IAAO,KAAO,IAEtF,KAAK,SAAWA,EAAQ,UAAY,YACpC,KAAK,UAAYA,EAAQ,WAAa,GACtC,KAAK,QAAUA,EAAQ,SAAW,IACpC,CAEA,SAAU,CACR,GAAI,CAAC,KAAK,QAAS,OACnB,IAAMC,EAAK,KAAK,QAEhBA,EAAG,UAAU,IAAI,KAAK,sBAAsB,CAAC,EAC7C,IAAMC,EAAS,IAAM,CACnBD,EAAG,oBAAoB,eAAgBC,CAAM,EAE7C,MAAM,QAAQ,EAEd,IAAMC,EAAYL,EAAM,aAAa,KAAK,QAAQ,EAC9CK,GAAaA,EAAU,oBAAsB,GAAKA,EAAU,aAC9DA,EAAU,WAAW,YAAYA,CAAS,EACtCL,EAAM,aACR,OAAOA,EAAM,YAAY,KAAK,UAAY,WAAW,EAG3D,EACAG,EAAG,iBAAiB,eAAgBC,CAAM,EAE1C,WAAWA,EAAQ,GAAG,CACxB,CAEA,OAAO,aAAaE,EAAU,CAC5B,IAAMC,EAAMD,GAAY,YAExB,GADK,KAAK,cAAa,KAAK,YAAc,CAAC,GACvC,KAAK,YAAYC,CAAG,GAAK,SAAS,KAAK,SAAS,KAAK,YAAYA,CAAG,CAAC,EACvE,OAAO,KAAK,YAAYA,CAAG,EAE7B,IAAMF,EAAYG,EAAc,MAAO,CACrC,UAAWC,EACT,yDACA,KAAK,+BAA+BF,CAAG,CACzC,CACF,CAAC,EACD,gBAAS,KAAK,YAAYF,CAAS,EACnC,KAAK,YAAYE,CAAG,EAAIF,EACjBA,CACT,CAEA,OAAO,+BAA+BC,EAAU,CAC9C,OAAQA,EAAU,CAChB,IAAK,WACH,MAAO,2BACT,IAAK,YACH,MAAO,0BACT,IAAK,cACH,MAAO,8BACT,IAAK,eACH,MAAO,6BACT,IAAK,aACH,MAAO,yDACT,QACE,MAAO,yBACX,CACF,CAEA,QAAS,CACP,IAAMI,EAAmBV,EAAM,aAAa,KAAK,QAAQ,EAEnDW,EAAeH,EAAc,MAAO,CACxC,UAAWC,EAET,oGACA,KAAK,uBAAuB,EAC5B,KAAK,eAAe,EACpB,KAAK,SACP,CACF,CAAC,EAGKG,EAAcJ,EAAc,OAAQ,CACxC,UAAW,0BACX,KAAM,KAAK,QAAQ,CACrB,CAAC,EACDG,EAAa,YAAYC,CAAW,EAGpC,IAAMC,EAAiBL,EAAc,OAAQ,CAC3C,KAAM,KAAK,QAEX,UAAW,6BACb,CAAC,EACDG,EAAa,YAAYE,CAAc,EAGvC,IAAMC,EAAWN,EAAc,SAAU,CACvC,UAAW,8DACX,KAAM,MACR,CAAC,EAaD,IAXAM,EAAS,iBAAiB,QAAS,IAAM,CACvC,KAAK,QAAQ,CACf,CAAC,EAEDH,EAAa,YAAYG,CAAQ,EAGjC,KAAK,QAAUH,EACfD,EAAiB,YAAY,KAAK,OAAO,EAGlCA,EAAiB,SAAS,OAAS,GACxCA,EAAiB,YAAYA,EAAiB,iBAAiB,EAIjE,OAAI,KAAK,SAAW,GAClB,WAAW,IAAM,CACf,KAAK,QAAQ,CACf,EAAG,KAAK,QAAQ,EAGX,KAAK,OACd,CAEA,wBAAyB,CACvB,IAAMK,EAAM,KAAK,UAAY,YAC7B,OAAIA,IAAQ,aAAeA,IAAQ,eAAuB,yEACtDA,IAAQ,YAAcA,IAAQ,cAAsB,wEACjD,sEACT,CAEA,uBAAwB,CACtB,IAAMA,EAAM,KAAK,UAAY,YAC7B,OAAIA,IAAQ,aAAeA,IAAQ,eAAuB,0BACtDA,IAAQ,YAAcA,IAAQ,cAAsB,yBACjD,uBACT,CAEA,oBAAqB,CACnB,IAAMC,EAAY,CAChB,WAAY,eACZ,YAAa,gBACb,cAAe,kBACf,eAAgB,mBAChB,aAAc,2CAChB,EACA,OAAOA,EAAU,KAAK,QAAQ,GAAKA,EAAU,cAAc,CAC7D,CAEA,gBAAiB,CACf,IAAMC,EAAQ,CACZ,QAAS,yBACT,QAAS,0BACT,MAAO,wBACP,QAAS,2BACT,KAAM,wBACR,EACA,OAAOA,EAAM,KAAK,IAAI,GAAKA,EAAM,OACnC,CAEA,SAAU,CACR,IAAMC,EAAQ,CACZ,QAAS,SACT,QAAS,SACT,MAAO,SACP,QAAS,SACT,KAAM,QACR,EACA,OAAOA,EAAM,KAAK,IAAI,GAAKA,EAAM,OACnC,CAEA,OAAO,KAAKC,EAASjB,EAAU,CAAC,EAAG,CACjC,IAAMkB,EAAQ,IAAIpB,EAAM,CAAE,QAAAmB,EAAS,GAAGjB,CAAQ,CAAC,EACzCmB,EAAUD,EAAM,OAAO,EAC7B,OAAOA,CACT,CACF,EAGA,GAAI,CAAC,SAAS,cAAc,mBAAmB,EAAG,CAChD,IAAME,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,aAAa,aAAc,MAAM,EACvCA,EAAM,YAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAqCpB,SAAS,KAAK,YAAYA,CAAK,CACjC,ICjMO,SAASC,GAAkB,CAAC,KAAAC,EAAO,SAAU,SAAAC,EAAW,iBAAkB,UAAAC,EAAY,GAAI,EAAI,CAAC,EAAG,CACvG,GAAI,OAAO,qBAAyB,IAAa,OACjD,IAAMC,EAAW,IAAI,qBAAqB,MAAOC,EAASC,IAAQ,CAChE,QAAWC,KAASF,EAAS,CAC3B,GAAI,CAACE,EAAM,eAAgB,SAC3B,IAAMC,EAAKD,EAAM,OACXE,EAAOD,EAAG,QAAQ,SAAW,GAC7B,CAACE,EAAYC,EAAW,MAAM,EAAIF,EAAK,MAAM,GAAG,EACtD,GAAI,CAACC,EAAY,CAAEJ,EAAI,UAAUE,CAAE,EAAG,QAAU,CAChD,GAAI,CACF,IAAII,EAAM,KACJC,EAASC,GAAgBJ,CAAU,EACzC,GAAI,OAAOG,GAAW,WACpBD,EAAM,MAAMC,EAAO,MAGnB,OAAM,IAAI,MAAM,6CAA+CH,CAAU,EAE3E,IAAMK,EAAKH,EAAID,CAAQ,GAAKC,EAAI,SAAW,KAC3C,GAAI,OAAOG,GAAO,WAChB,GAAI,CAAEA,EAAGP,CAAE,CAAG,OAASQ,EAAG,CAAE,QAAQ,MAAM,sBAAuBA,CAAC,CAAG,CAEzE,OAASA,EAAG,CACV,QAAQ,MAAM,iCAAkCN,EAAYM,CAAC,CAC/D,QAAE,CACAV,EAAI,UAAUE,CAAE,CAClB,CACF,CACF,EAAG,CAAC,UAAAL,CAAS,CAAC,EACdF,EAAK,iBAAiBC,CAAQ,EAAE,QAAQM,GAAMJ,EAAS,QAAQI,CAAE,CAAC,CACpE,CAzEA,IAIMM,GAJNG,GAAAC,EAAA,KAIMJ,GAAkB,CAEtB,sBAAuB,IAAM,sCAC7B,4BAA6B,IAAM,sCACnC,uBAAwB,IAAM,sCAC9B,sBAAuB,IAAM,sCAC7B,uBAAwB,IAAM,sCAC9B,4BAA6B,IAAM,sCACnC,2BAA4B,IAAM,sCAClC,qBAAsB,IAAM,sCAC5B,yBAA0B,IAAM,sCAChC,sBAAuB,IAAM,sCAC7B,yBAA0B,IAAM,sCAChC,4BAA6B,IAAM,sCACnC,wBAAyB,IAAM,sCAC/B,yBAA0B,IAAM,sCAChC,4BAA6B,IAAM,sCACnC,2BAA4B,IAAM,sCAClC,uBAAwB,IAAM,sCAC9B,6BAA8B,IAAM,sCACpC,uBAAwB,IAAM,sCAC9B,sBAAuB,IAAM,sCAC7B,qBAAsB,IAAM,sCAC5B,0BAA2B,IAAM,sCACjC,sBAAuB,IAAM,sCAC7B,2BAA4B,IAAM,sCAClC,yBAA0B,IAAM,sCAChC,qBAAsB,IAAM,sCAC5B,sBAAuB,IAAM,sCAC7B,oBAAqB,IAAM,sCAC3B,6BAA8B,IAAM,sCACpC,wBAAyB,IAAM,sCAC/B,uBAAwB,IAAM,sCAC9B,4BAA6B,IAAM,sCACnC,sBAAuB,IAAM,qCAG/B,ICzCA,IAAAK,GAAA,GAAAC,EAAAD,GAAA,aAAAE,KAAA,IAKMC,GAmdCD,GAxdPE,GAAAC,EAAA,KAKMF,IAAe,UAAW,CAC5B,aAEA,IAAIG,EAAc,KAElB,eAAeC,GAAO,CAElB,GAAK,UAAU,YAAY,EAE3B,OAAMC,EAAgB,EAEtB,GAAI,CACAC,EAAoB,CACxB,MAAY,CAEZ,CACAC,EAAgB,EAChBC,EAAgB,EAChBC,EAAiB,EACjBC,EAAsB,EAC1B,CAEA,eAAeL,GAAkB,CAC7B,GAAK,QAAQ,gBAAgB,EAI7B,GAAI,CAEAF,GADiB,MAAM,QAAQ,WAAW,GACnB,KACvBQ,EAAc,CAClB,MAAgB,CAEZ,MAAM,MAAM,yBAAyB,CACzC,CACJ,CAEA,SAASJ,GAAkB,CACvB,IAAMK,EAAO,SAAS,iBAAiB,oBAAoB,EACrDC,EAAS,SAAS,iBAAiB,sBAAsB,EAC/D,GAAI,CAACD,EAAK,QAAU,CAACC,EAAO,OAAQ,OAEpC,IAAMC,EAAaC,GAAW,CAC1BF,EAAO,QAAQG,GAAS,CACpBA,EAAM,UAAU,OAAO,SAAUA,EAAM,QAAQ,eAAiBD,CAAM,CAC1E,CAAC,EACDH,EAAK,QAAQK,GAAO,CAChB,IAAMC,EAAWD,EAAI,QAAQ,aAAeF,EAC5CE,EAAI,UAAU,OAAO,eAAgBC,CAAQ,EAC7CD,EAAI,UAAU,OAAO,aAAcC,CAAQ,EAC3CD,EAAI,UAAU,OAAO,YAAaC,CAAQ,EAC1CD,EAAI,UAAU,OAAO,iBAAkB,CAACC,CAAQ,EAChDD,EAAI,UAAU,OAAO,sBAAuB,CAACC,CAAQ,CACzD,CAAC,EACD,aAAa,QAAQ,aAAcH,CAAM,CAC7C,EAEMI,EAAU,aAAa,QAAQ,YAAY,GAAK,WACtDL,EAAUK,CAAO,EAEjBP,EAAK,QAAQK,GAAO,CAChBA,EAAI,iBAAiB,QAAS,IAAM,CAChCH,EAAUG,EAAI,QAAQ,UAAU,CACpC,CAAC,CACL,CAAC,CACL,CAEA,SAASN,GAAgB,CACrB,IAAMS,EAAY,SAAS,eAAe,cAAc,EACxD,GAAI,CAACA,GAAa,CAACjB,EAAa,OAEhC,IAAMkB,EAAO,GAAG,UAAU,WAAWlB,EAAY,YAAc,EAAE,CAAC,IAAI,UAAU,WAAWA,EAAY,WAAa,EAAE,CAAC,GAAG,KAAK,GAAK,UAAU,WAAWA,EAAY,OAAS,MAAM,EAC9KmB,EAAc,UAAU,WAAWnB,EAAY,YAAcA,EAAY,WAAW,EACpFoB,EAAYpB,EAAY,OAAS,iCAAiCA,EAAY,MAAM,sDAAwD;AAAA;AAAA,mBAEvIA,EAAY,aAAa,CAAC,GAAKA,EAAY,QAAQ,CAAC,GAAK,KAAK,YAAY,CAAC;AAAA,qBAGtFiB,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA,0BAKJG,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,2GAKwEF,CAAI;AAAA,qFAC1B,UAAU,WAAWlB,EAAY,KAAK,CAAC;AAAA,8FAC9BmB,CAAW;AAAA;AAAA;AAAA,0BAG/EnB,EAAY,OAAS,oJAAsJ,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,UAO/LG,EAAoB,CACxB,CAEA,SAASkB,GAAW,CAChB,KAAK,KAAK,CACd,CAEA,SAAShB,GAAkB,CACvB,IAAMiB,EAAO,SAAS,eAAe,cAAc,EACnD,GAAI,CAACA,GAAQ,CAACtB,EAAa,OAE3B,IAAMuB,EAAiB,SAAS,eAAe,oBAAoB,EAC7DC,EAAgB,SAAS,eAAe,mBAAmB,EAC3DC,EAAa,SAAS,eAAe,eAAe,EACpDC,EAAa,SAAS,eAAe,eAAe,EAEtDH,IAAgBA,EAAe,MAAQvB,EAAY,YAAc,IACjEwB,IAAeA,EAAc,MAAQxB,EAAY,WAAa,IAC9DyB,IAAYA,EAAW,MAAQzB,EAAY,OAAS,IACpD0B,IAAYA,EAAW,MAAQ1B,EAAY,OAAS,IAExDsB,EAAK,iBAAiB,SAAU,MAAOK,GAAM,CACzCA,EAAE,eAAe,EAEjB,IAAMC,EAAW,IAAI,SAASN,CAAI,EAC5BO,EAAO,CACT,WAAYD,EAAS,IAAI,YAAY,EACrC,UAAWA,EAAS,IAAI,WAAW,EACnC,MAAOA,EAAS,IAAI,OAAO,CAC/B,EAEME,EAAYR,EAAK,cAAc,uBAAuB,EAC5DQ,EAAU,SAAW,GACrBA,EAAU,YAAc,YAExB,GAAI,CACA,MAAM,QAAQ,cAAcD,CAAI,EAChC,MAAM,QAAQ,+BAA+B,EAC7C,MAAM3B,EAAgB,CAC1B,OAAS6B,EAAO,CACZ,MAAM,MAAMA,EAAM,SAAW,2BAA2B,CAC5D,QAAE,CACED,EAAU,SAAW,GACrBA,EAAU,YAAc,cAC5B,CACJ,CAAC,CACL,CAEA,SAAS3B,GAAsB,CAC3B,IAAI6B,EAAc,SAAS,eAAe,cAAc,EAClDC,EAAY,SAAS,eAAe,mBAAmB,EACvDC,EAAY,SAAS,eAAe,mBAAmB,EAGxDF,IACDA,EAAc,SAAS,cAAc,OAAO,EAC5CA,EAAY,KAAO,OACnBA,EAAY,GAAK,eACjBA,EAAY,KAAO,SACnBA,EAAY,OAAS,UACrBA,EAAY,UAAY,SACxB,SAAS,KAAK,YAAYA,CAAW,GAItB,SAAS,iBAAiB,oBAAoB,EACtD,QAAQlB,GAAOA,EAAI,iBAAiB,QAAS,IAAMkB,EAAY,MAAM,CAAC,CAAC,EAG/D,SAAS,iBAAiB,oBAAoB,EACtD,QAAQlB,GAAOA,EAAI,iBAAiB,QAAS,IAAM,CACtD,OAAO,OAAO,cAAiB,YAC/B,OAAO,aAAa,CAE5B,CAAC,CAAC,EAGFkB,EAAY,sBAAsB,SAAU,OAAO,oBAAoB,EACvE,OAAO,qBAAuB,eAAgBL,EAAG,CAC7C,IAAMQ,EAAOR,EAAE,OAAO,QAAQ,CAAC,EAC/B,GAAKQ,EAEL,IAAI,CAACA,EAAK,KAAK,WAAW,QAAQ,EAAG,CACjC,MAAM,MAAM,8BAA8B,EAC1C,MACJ,CAEA,GAAIA,EAAK,KAAO,QAAiB,CAC7B,MAAM,MAAM,iCAAiC,EAC7C,MACJ,CAEA,GAAI,CACA,MAAM,QAAQ,aAAaA,CAAI,EAC/B,MAAM,QAAQ,iBAAiB,EAC/B,MAAMjC,EAAgB,CAC1B,OAAS6B,EAAO,CACZ,MAAM,MAAMA,EAAM,SAAW,0BAA0B,CAC3D,EACJ,EAEAC,EAAY,iBAAiB,SAAU,OAAO,oBAAoB,CACtE,CAEA,SAAS1B,GAAmB,CACxB,IAAMgB,EAAO,SAAS,eAAe,eAAe,EAC/CA,GAELA,EAAK,iBAAiB,SAAU,MAAOK,GAAM,CACzCA,EAAE,eAAe,EAEjB,IAAMC,EAAW,IAAI,SAASN,CAAI,EAC5Bc,EAAkBR,EAAS,IAAI,kBAAkB,EACjDS,EAAcT,EAAS,IAAI,cAAc,EACzCU,EAAkBV,EAAS,IAAI,kBAAkB,EAEvD,GAAIS,IAAgBC,EAAiB,CACjC,MAAM,MAAM,yBAAyB,EACrC,MACJ,CAEA,GAAID,EAAY,OAAS,EAAG,CACxB,MAAM,MAAM,yCAAyC,EACrD,MACJ,CAEA,IAAMP,EAAYR,EAAK,cAAc,uBAAuB,EAC5DQ,EAAU,SAAW,GACrBA,EAAU,YAAc,cAExB,GAAI,CACA,MAAM,QAAQ,eAAeM,EAAiBC,CAAW,EACzD,MAAM,QAAQ,gCAAgC,EAC9Cf,EAAK,MAAM,CACf,OAASS,EAAO,CACZ,MAAM,MAAMA,EAAM,SAAW,4BAA4B,CAC7D,QAAE,CACED,EAAU,SAAW,GACrBA,EAAU,YAAc,iBAC5B,CACJ,CAAC,CACL,CAEA,SAASvB,GAAwB,CAC7BgC,EAAc,EAEQ,SAAS,eAAe,iBAAiB,GAChD,iBAAiB,QAAS,IAAM,CAC3CC,EAAiB,CACrB,CAAC,CACL,CAEA,eAAeD,GAAgB,CAC3B,IAAMtB,EAAY,SAAS,eAAe,gBAAgB,EAC1D,GAAKA,EAEL,QAAO,KAAKA,EAAW,SAAS,EAEhC,GAAI,CAEA,IAAMwB,GADW,MAAM,QAAQ,aAAa,GACjB,MAAQ,CAAC,EAEpC,GAAIA,EAAU,SAAW,EAAG,CACxBxB,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAStB,MACJ,CAEAA,EAAU,UAAY;AAAA;AAAA,sBAEZwB,EAAU,IAAIC,GAAQ;AAAA,uGAC2DA,EAAK,EAAE;AAAA,8BAChFA,EAAK,WAAa;AAAA;AAAA,8BAEhB,EAAE;AAAA,mEACiC,UAAU,WAAWA,EAAK,WAAa,GAAGA,EAAK,UAAU,IAAIA,EAAK,SAAS,EAAE,CAAC;AAAA,oEAC7E,UAAU,WAAWA,EAAK,cAAc,CAAC;AAAA,8BAC/EA,EAAK,eAAiB,oCAAoC,UAAU,WAAWA,EAAK,cAAc,CAAC,OAAS,EAAE;AAAA,+DAC7E,UAAU,WAAWA,EAAK,IAAI,CAAC,KAAK,UAAU,WAAWA,EAAK,OAAS,EAAE,CAAC,IAAI,UAAU,WAAWA,EAAK,WAAW,CAAC;AAAA,+DACpH,UAAU,WAAWA,EAAK,OAAO,CAAC;AAAA,8BACnEA,EAAK,MAAQ,yCAAyC,UAAU,WAAWA,EAAK,KAAK,CAAC,OAAS,EAAE;AAAA;AAAA;AAAA,oIAGKA,EAAK,EAAE;AAAA,kCACxGA,EAAK,WAEJ,GAFiB;AAAA,iIAC4EA,EAAK,EAAE;AAAA,iCAClG;AAAA,8HACwFA,EAAK,EAAE;AAAA;AAAA;AAAA,qBAGhH,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,cAInBC,EAAkB,CACtB,OAASZ,EAAO,CACZ,QAAQ,MAAM,4BAA6BA,CAAK,EAChDd,EAAU,UAAY,uDAC1B,EACJ,CAEA,SAAS0B,GAAoB,CACzB,SAAS,iBAAiB,mBAAmB,EAAE,QAAQ7B,GAAO,CAC1DA,EAAI,iBAAiB,QAAS,SAAY,CACtC,IAAM8B,EAAY9B,EAAI,QAAQ,UAC9B,GAAI,CACA,IAAM+B,EAAW,MAAM,QAAQ,WAAWD,CAAS,EACnDJ,EAAiBK,EAAS,IAAI,CAClC,MAAgB,CACZ,MAAM,MAAM,yBAAyB,CACzC,CACJ,CAAC,CACL,CAAC,EAED,SAAS,iBAAiB,kBAAkB,EAAE,QAAQ/B,GAAO,CACzDA,EAAI,iBAAiB,QAAS,SAAY,CACtC,IAAM8B,EAAY9B,EAAI,QAAQ,UAC9B,GAAI,CACA,MAAM,QAAQ,kBAAkB8B,CAAS,EACzC,MAAM,QAAQ,0BAA0B,EACxC,MAAML,EAAc,CACxB,MAAgB,CACZ,MAAM,MAAM,mCAAmC,CACnD,CACJ,CAAC,CACL,CAAC,EAED,SAAS,iBAAiB,qBAAqB,EAAE,QAAQzB,GAAO,CAC5DA,EAAI,iBAAiB,QAAS,SAAY,CACtC,IAAM8B,EAAY9B,EAAI,QAAQ,UAQ9B,GAPkB,MAAM,MAAM,QAAQ,CAClC,MAAO,iBACP,QAAS,gDACT,YAAa,SACb,WAAY,QAChB,CAAC,EAGG,GAAI,CACA,MAAM,QAAQ,cAAc8B,CAAS,EACrC,MAAM,QAAQ,kBAAkB,EAChC,MAAML,EAAc,CACxB,MAAgB,CACZ,MAAM,MAAM,2BAA2B,CAC3C,CAER,CAAC,CACL,CAAC,CACL,CAEA,SAASC,EAAiBM,EAAU,KAAM,CACtC,IAAMC,EAAS,CAAC,CAACD,EAEjB,MAAM,KAAK,CACP,MAAOC,EAAS,eAAiB,kBACjC,QAAS;AAAA;AAAA;AAAA;AAAA;AAAA,0EAKqDD,GAAS,YAAc,EAAE;AAAA;AAAA;AAAA;AAAA,yEAI1BA,GAAS,WAAa,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,gEAKjCA,GAAS,OAAS,EAAE;AAAA;AAAA;AAAA;AAAA,0EAIVA,GAAS,gBAAkB,EAAE;AAAA;AAAA;AAAA;AAAA,0EAI7BA,GAAS,gBAAkB,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,oEAKnCA,GAAS,MAAQ,EAAE;AAAA;AAAA;AAAA;AAAA,qEAIlBA,GAAS,OAAS,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2EAMdA,GAAS,aAAe,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDAMhDA,GAAS,UAAY,KAAO,WAAa,EAAE;AAAA,qDAC3CA,GAAS,UAAY,KAAO,WAAa,EAAE;AAAA,qDAC3CA,GAAS,UAAY,KAAO,WAAa,EAAE;AAAA,qDAC3CA,GAAS,UAAY,KAAO,WAAa,EAAE;AAAA,qDAC3CA,GAAS,UAAY,KAAO,WAAa,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uEAMzBA,GAAS,WAAa,UAAY,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,cAM/F,YAAaC,EAAS,eAAiB,cACvC,UAAW,SAAY,CACnB,IAAMzB,EAAO,SAAS,eAAe,oBAAoB,EACnDM,EAAW,IAAI,SAASN,CAAI,EAC5BO,EAAO,CACT,WAAYD,EAAS,IAAI,YAAY,EACrC,UAAWA,EAAS,IAAI,WAAW,EACnC,MAAOA,EAAS,IAAI,OAAO,EAC3B,eAAgBA,EAAS,IAAI,gBAAgB,EAC7C,eAAgBA,EAAS,IAAI,gBAAgB,EAC7C,KAAMA,EAAS,IAAI,MAAM,EACzB,MAAOA,EAAS,IAAI,OAAO,EAC3B,YAAaA,EAAS,IAAI,aAAa,EACvC,QAASA,EAAS,IAAI,SAAS,EAC/B,WAAYA,EAAS,IAAI,YAAY,IAAM,IAC/C,EAEA,GAAI,CACA,OAAImB,GACA,MAAM,QAAQ,cAAcD,EAAQ,GAAIjB,CAAI,EAC5C,MAAM,QAAQ,kBAAkB,IAEhC,MAAM,QAAQ,WAAWA,CAAI,EAC7B,MAAM,QAAQ,gBAAgB,GAElC,MAAMU,EAAc,EACb,EACX,OAASR,EAAO,CACZ,aAAM,MAAMA,EAAM,SAAW,yBAAyB,EAC/C,EACX,CACJ,CACJ,CAAC,CACL,CAEA,SAASiB,GAAU,CACfhD,EAAc,IAClB,CAEA,MAAO,CACH,KAAAC,EACA,QAAA+C,CACJ,CACJ,GAAG,EAEH,OAAO,YAAcnD,GACdD,GAAQC,KCxdf,IAAAoD,GAAA,GAAAC,EAAAD,GAAA,aAAAE,KAAA,IAKMC,GAqaCD,GA1aPE,GAAAC,EAAA,KAKMF,IAAY,UAAW,CACzB,aAEA,IAAIG,EAAO,KAEX,SAASC,GAAkC,CAE3C,CAEA,SAASC,EAAYC,EAAO,CACxB,GAAIA,GAAU,MAA+BA,IAAU,GAAI,MAAO,GAClE,GAAI,OAAOA,GAAU,UAAY,OAAO,SAASA,CAAK,EAAG,OAAOA,EAChE,IAAMC,EAAU,WAAWD,CAAK,EAChC,OAAO,OAAO,SAASC,CAAO,EAAIA,EAAU,CAChD,CAEA,SAASC,EAAgBF,EAAO,CAC5B,IAAMG,EAASJ,EAAYC,CAAK,EAChC,OAAO,UAAU,YAAYG,CAAM,CACvC,CAEA,eAAeC,GAAO,CAClB,MAAMC,EAAS,EACfC,EAAe,CACnB,CAEA,eAAeD,GAAW,CACtB,IAAME,EAAY,SAAS,eAAe,gBAAgB,EAC1D,GAAKA,EAEL,QAAO,KAAKA,EAAW,UAAU,EAEjC,GAAI,CAEAV,GADiB,MAAM,QAAQ,QAAQ,GACvB,KAEhBW,EAAWX,CAAI,CACnB,OAASY,EAAO,CACZ,QAAQ,MAAM,uBAAwBA,CAAK,EAC3CF,EAAU,UAAY,qFAC1B,EACJ,CAEA,SAASC,EAAWE,EAAU,CAC1B,IAAMH,EAAY,SAAS,eAAe,gBAAgB,EAC1D,GAAI,CAACA,EAAW,OAEhB,IAAMI,EAAQD,GAAU,OAAS,CAAC,EAC5BE,EAAUF,GAAU,SAAW,CAAC,EAChCG,EAAgBD,EAAQ,UAAYF,GAAU,UAAY,EAC1DI,EAAgBf,EAAYa,EAAQ,iBAAmBF,GAAU,eAAe,EAChFK,EAAWH,EAAQ,YAAcF,GAAU,YAAc,EACzDM,EAAaJ,EAAQ,OAASF,GAAU,OAAS,EACjDO,EAAaP,GAAU,QAAQ,MAAQ,GAE7C,GAAIC,EAAM,SAAW,EAAG,CACpBJ,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAetB,MACJ,CAEAA,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6FAM+DI,EAAM,MAAM;AAAA;AAAA;AAAA,8BAG3EA,EAAM,IAAIO,GAAQC,EAAeD,CAAI,CAAC,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0EA0BJhB,EAAgBW,CAAa,CAAC;AAAA;AAAA,8BAE1EC,EAAgB,EAAI;AAAA;AAAA;AAAA,6CAGLZ,EAAgBY,CAAa,CAAC;AAAA;AAAA,8BAE3C,EAAE;AAAA,8BACJf,EAAYgB,CAAQ,EAAI,EAAI;AAAA;AAAA;AAAA,8EAGoBb,EAAgBa,CAAQ,CAAC;AAAA;AAAA,8BAEvE,EAAE;AAAA;AAAA;AAAA;AAAA,sFAIoDb,EAAgBc,CAAU,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAQnFC,EAAa;AAAA;AAAA;AAAA;AAAA,4EAIiC,UAAU,WAAWA,CAAU,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAQ5E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iDAOiB,UAAU,WAAWA,CAAU,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAMpD;AAAA;AAAA;AAAA;AAAA,mCAIM,OAAO,cAAgB,OAAO,aAAa,YAAc,OAAO,aAAa,YAAc,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAmClIG,EAAe,CACnB,CAEA,SAASD,EAAeD,EAAM,CAC1B,IAAMG,EAAUH,EAAK,SAAW,CAAC,EAC3BI,EAAUJ,EAAK,QACfK,EAAcF,EAAQ,MAAQ,IAC9BG,EAAcH,EAAQ,MAAQ,UAC9BI,EAAeJ,EAAQ,eAAiBA,EAAQ,OAAS,iCACzDK,EAAa3B,EAAYmB,EAAK,YAAY,EAC1CS,EAAe5B,EAAYmB,EAAK,aAAa,EAC7CU,EAAY7B,EAAYmB,EAAK,UAAU,GAAKS,GAAgBT,EAAK,UAAY,GAC7EW,EAAeH,EAAaC,EAElC,MAAO;AAAA,kEACmDT,EAAK,EAAE;AAAA;AAAA,yCAEhCK,CAAW;AAAA;AAAA,mCAEjBE,CAAY;AAAA,mCACZ,UAAU,WAAWD,CAAW,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDASfD,CAAW;AAAA,sCAC1B,UAAU,WAAWC,CAAW,CAAC;AAAA;AAAA;AAAA,8BAGzCF,EAAU;AAAA,wEACgC,UAAU,WAAWA,EAAQ,MAAQA,EAAQ,KAAK,CAAC;AAAA,8BAC3F,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAqBOJ,EAAK,QAAQ;AAAA;AAAA,uCAEfG,EAAQ,gBAAkB,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAYrCQ,EAAe;AAAA,mFACsC3B,EAAgBwB,EAAaR,EAAK,QAAQ,CAAC;AAAA,8BAC9F,EAAE;AAAA,8EAC4ChB,EAAgB0B,CAAS,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,SAMpG,CAEA,SAASR,GAAiB,CACtB,IAAMU,EAAY,SAAS,eAAe,YAAY,EAChDC,EAAe,SAAS,eAAe,gBAAgB,EACvDC,EAAkB,SAAS,eAAe,mBAAmB,EAEnEF,GAAW,iBAAiB,QAAS,MAAOG,GAAM,CAC9C,IAAMC,EAAWD,EAAE,OAAO,QAAQ,YAAY,EAC9C,GAAI,CAACC,EAAU,OAEf,IAAMC,EAASD,EAAS,QAAQ,OAC1BE,EAAWF,EAAS,cAAc,gBAAgB,EAExD,GAAID,EAAE,OAAO,QAAQ,kBAAkB,EACnC,MAAMI,EAAWF,CAAM,UAChBF,EAAE,OAAO,QAAQ,eAAe,EAAG,CAC1C,IAAMK,EAAU,SAASF,EAAS,KAAK,GAAK,EACxCE,EAAU,GACV,MAAMC,EAAeJ,EAAQG,EAAU,CAAC,CAEhD,SAAWL,EAAE,OAAO,QAAQ,eAAe,EAAG,CAC1C,IAAMK,EAAU,SAASF,EAAS,KAAK,GAAK,EACtCI,EAAM,SAASJ,EAAS,GAAG,GAAK,GAClCE,EAAUE,GACV,MAAMD,EAAeJ,EAAQG,EAAU,CAAC,CAEhD,CACJ,CAAC,EAEDR,GAAW,iBAAiB,SAAU,MAAOG,GAAM,CAC/C,GAAIA,EAAE,OAAO,UAAU,SAAS,eAAe,EAAG,CAE9C,IAAME,EADWF,EAAE,OAAO,QAAQ,YAAY,GACrB,QAAQ,OAC3BQ,EAAW,SAASR,EAAE,OAAO,KAAK,GAAK,EAEzCE,GAAUM,EAAW,GACrB,MAAMF,EAAeJ,EAAQM,CAAQ,CAE7C,CACJ,CAAC,EAEDV,GAAc,iBAAiB,QAAS,SAAY,CAC9B,MAAM,MAAM,QAAQ,CAClC,MAAO,aACP,QAAS,4DACT,YAAa,aACb,WAAY,QAChB,CAAC,GAGG,MAAMW,EAAU,CAExB,CAAC,EAEDV,GAAiB,iBAAiB,QAAS,SAAY,CACnD,MAAMW,EAAa,CACvB,CAAC,CACL,CAEA,eAAeJ,EAAeJ,EAAQM,EAAU,CAC5C,GAAI,CACA,MAAM,QAAQ,WAAWN,EAAQM,CAAQ,EACzC,MAAMpC,EAAS,EACf,SAAS,cAAc,IAAI,YAAY,cAAc,CAAC,CAC1D,OAASI,EAAO,CACZ,MAAM,MAAMA,EAAM,SAAW,4BAA4B,CAC7D,CACJ,CAEA,eAAe4B,EAAWF,EAAQ,CAC9B,GAAI,CACA,MAAM,QAAQ,WAAWA,CAAM,EAC/B,MAAM,QAAQ,yBAAyB,EACvC,MAAM9B,EAAS,EACf,SAAS,cAAc,IAAI,YAAY,cAAc,CAAC,CAC1D,OAASI,EAAO,CACZ,MAAM,MAAMA,EAAM,SAAW,wBAAwB,CACzD,CACJ,CAEA,eAAeiC,GAAY,CACvB,GAAI,CACA,MAAM,QAAQ,UAAU,EACxB,MAAM,QAAQ,eAAe,EAC7B,MAAMrC,EAAS,EACf,SAAS,cAAc,IAAI,YAAY,cAAc,CAAC,CAC1D,OAASI,EAAO,CACZ,MAAM,MAAMA,EAAM,SAAW,uBAAuB,CACxD,CACJ,CAEA,SAASH,GAAiB,CACtB,IAAMsC,EAAO,SAAS,eAAe,aAAa,EAElDA,GAAM,iBAAiB,SAAU,MAAOX,GAAM,CAC1CA,EAAE,eAAe,EAGjB,IAAMY,EADY,SAAS,eAAe,aAAa,GAC/B,MAAM,KAAK,EAEnC,GAAI,CAACA,EAAM,CACP,MAAM,MAAM,6BAA6B,EACzC,MACJ,CAEA,IAAMC,EAAYF,EAAK,cAAc,uBAAuB,EAC5DE,EAAU,SAAW,GACrBA,EAAU,YAAc,cAExB,GAAI,CACA,MAAM,QAAQ,YAAYD,CAAI,EAC9B,MAAM,QAAQ,iBAAiB,EAC/B,MAAMxC,EAAS,CACnB,OAASI,EAAO,CACZ,MAAM,MAAMA,EAAM,SAAW,sBAAsB,CACvD,QAAE,CACEqC,EAAU,SAAW,GACrBA,EAAU,YAAc,OAC5B,CACJ,CAAC,CACL,CAEA,eAAeH,GAAe,CAC1B,GAAI,CACA,MAAM,QAAQ,aAAa,EAC3B,MAAM,QAAQ,iBAAiB,EAC/B,MAAMtC,EAAS,CACnB,OAASI,EAAO,CACZ,MAAM,MAAMA,EAAM,SAAW,0BAA0B,CAC3D,CACJ,CAEA,SAASsC,GAAU,CACflD,EAAO,IACX,CAEA,MAAO,CACH,KAAAO,EACA,QAAA2C,CACJ,CACJ,GAAG,EAEH,OAAO,SAAWrD,GACXD,GAAQC,KC1af,IAAAsD,GAAA,GAAAC,EAAAD,GAAA,aAAAE,KAAA,IAKMC,GAqhBCD,GA1hBPE,GAAAC,EAAA,KAKMF,IAAgB,UAAW,CAC7B,aAEA,IAAIG,EAAiB,CAAC,EAClBC,EAAc,EACdC,EAAkB,KAClBC,EAAkB,KAClBC,EAAc,GAElB,eAAeC,GAAO,CAElB,GAAID,EAAa,OACjBA,EAAc,GAEd,IAAME,EAAeC,EAAuB,EAG5C,GAAI,CAACD,EAED,OAIJ,IAAME,EAAkB,SAAS,eAAe,iBAAiB,EACjE,GAAIA,GAAmBA,EAAgB,cAAc,IAAI,EAAG,CAExDC,EAAmB,EACnBC,EAAgB,EAChBC,EAAe,EACf,MACJ,CAEAX,EAAiBY,EAAkB,EACnCX,EAAc,SAAS,IAAI,gBAAgB,OAAO,SAAS,MAAM,EAAE,IAAI,MAAM,CAAC,GAAK,EAEnF,MAAMY,EAAaP,CAAY,EAC/BG,EAAmB,EACnBC,EAAgB,EAChBC,EAAe,CACnB,CAEA,SAASJ,GAAyB,CAE9B,IAAMO,EADO,OAAO,SAAS,SACV,MAAM,wBAAwB,EACjD,OAAOA,EAAQA,EAAM,CAAC,EAAI,IAC9B,CAEA,SAASF,GAAoB,CACzB,IAAMG,EAAS,IAAI,gBAAgB,OAAO,SAAS,MAAM,EACnDC,EAAU,CAAC,EAEbD,EAAO,IAAI,WAAW,IAAGC,EAAQ,UAAYD,EAAO,IAAI,WAAW,GACnEA,EAAO,IAAI,WAAW,IAAGC,EAAQ,UAAYD,EAAO,IAAI,WAAW,GACnEA,EAAO,IAAI,UAAU,IAAGC,EAAQ,SAAWD,EAAO,IAAI,UAAU,GAChEA,EAAO,IAAI,UAAU,IAAGC,EAAQ,SAAWD,EAAO,IAAI,UAAU,IAAM,QACtEA,EAAO,IAAI,SAAS,IAAGC,EAAQ,QAAUD,EAAO,IAAI,SAAS,IAAM,QAEvE,IAAME,EAAaF,EAAO,OAAO,MAAM,EACvC,OAAIE,EAAW,SAAQD,EAAQ,WAAaC,GAErCD,CACX,CAEA,eAAeH,EAAaK,EAAM,CAC9B,IAAMV,EAAkB,SAAS,eAAe,iBAAiB,EAC3DW,EAAoB,SAAS,eAAe,mBAAmB,EAC/DC,EAAmB,SAAS,eAAe,kBAAkB,EAE/DZ,GAAiB,OAAO,KAAKA,EAAiB,UAAU,EACxDW,GAAmB,OAAO,KAAKA,EAAmB,UAAU,EAEhE,GAAI,CACA,IAAME,EAAmB,MAAM,cAAc,YAAYH,CAAI,EAG7D,GAFAhB,EAAkBmB,EAAiB,MAAQA,EAEvC,CAACnB,EAAiB,CAClB,OAAO,SAAS,KAAO,QACvB,MACJ,CAEAoB,EAAqBpB,CAAe,EACpC,MAAMqB,EAAgBrB,CAAe,EACrC,MAAMsB,EAAYtB,CAAe,EACjC,MAAMuB,EAAa,EACnB,MAAMC,EAAkBxB,CAAe,CAC3C,OAASyB,EAAO,CACZ,QAAQ,MAAM,2BAA4BA,CAAK,EAC3CnB,IACAA,EAAgB,UAAY,uDAEpC,CACJ,CAEA,SAASc,EAAqBM,EAAU,CACpC,IAAMC,EAAY,SAAS,eAAe,iBAAiB,EACtDA,IAEL,SAAS,MAAQ,GAAGD,EAAS,IAAI,aAEjCC,EAAU,UAAY;AAAA;AAAA,kBAEZD,EAAS,MAAQ;AAAA;AAAA,oCAECA,EAAS,KAAK;AAAA;AAAA;AAAA,kBAG9B,EAAE;AAAA;AAAA,oFAE8D,UAAU,WAAWA,EAAS,IAAI,CAAC;AAAA,sBACjGA,EAAS,YAAc;AAAA,6DACgB,UAAU,WAAWA,EAAS,WAAW,CAAC;AAAA,sBAC/E,EAAE;AAAA,sBACJA,EAAS,cAAgB;AAAA,gEACiBA,EAAS,aAAa;AAAA,sBAC9D,EAAE;AAAA;AAAA;AAAA,UAItB,CAEA,eAAeL,EAAgBK,EAAU,CACrC,IAAMC,EAAY,SAAS,eAAe,aAAa,EACvD,GAAKA,EAEL,GAAI,CAEA,IAAMC,GADW,MAAM,cAAc,eAAeF,EAAS,EAAE,GAClC,MAAQ,CAAC,EAEhCG,EAAQ,CACV,CAAE,MAAO,OAAQ,IAAK,GAAI,EAC1B,CAAE,MAAO,aAAc,IAAK,cAAe,EAC3C,GAAGD,EAAY,IAAIE,IAAS,CACxB,MAAOA,EAAK,KACZ,IAAK,eAAeA,EAAK,IAAI,GACjC,EAAE,CACN,EAEAH,EAAU,UAAY,WAAW,OAAOE,CAAK,CACjD,OAASJ,EAAO,CACZ,QAAQ,MAAM,8BAA+BA,CAAK,CACtD,CACJ,CAEA,eAAeH,EAAYI,EAAU,CACjC,IAAMC,EAAY,SAAS,eAAe,kBAAkB,EAC5D,GAAKA,EAEL,GAAI,CAEA,IAAMI,GADW,MAAM,YAAY,iBAAiB,CAAE,SAAUL,EAAS,EAAG,CAAC,GAC9C,MAAQ,CAAC,EAExCC,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAUO7B,EAAe,WAAa,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAQ9BA,EAAe,WAAa,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAiBjCA,EAAe,SAAW,UAAY,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCASxCA,EAAe,QAAU,UAAY,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAQvDiC,EAAc,YAAcA,EAAc,WAAW,OAAS;AAAA,0BAC1DA,EAAc,WAAW,IAAIC,GAAQ;AAAA;AAAA,uFAEwB,UAAU,WAAWA,EAAK,IAAI,CAAC;AAAA;AAAA,sCAEhFA,EAAK,OAAO,IAAIC,GAAS;AAAA;AAAA;AAAA;AAAA,6DAIFD,EAAK,IAAI;AAAA,yDACb,UAAU,WAAWC,EAAM,KAAK,CAAC;AAAA,kDACxCnC,EAAe,YAAY,SAAS,GAAGkC,EAAK,IAAI,IAAIC,EAAM,KAAK,EAAE,EAAI,UAAY,EAAE;AAAA;AAAA,kEAEnED,EAAK,IAAI;AAAA;AAAA,uFAEY,UAAU,WAAWC,EAAM,KAAK,CAAC;AAAA,8CAC1EA,EAAM,MAAQ,gDAAgDA,EAAM,KAAK,WAAa,EAAE;AAAA;AAAA,qCAEjG,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,yBAGtB,EAAE,KAAK,EAAE,CAAC;AAAA,sBACX,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cASdC,EAAiB,CACrB,OAAST,EAAO,CACZ,QAAQ,MAAM,0BAA2BA,CAAK,EAC9CE,EAAU,UAAY,EAC1B,CACJ,CAEA,SAASO,GAAmB,CACxB,IAAMC,EAAgB,SAAS,eAAe,oBAAoB,EAC5DC,EAAkB,SAAS,eAAe,iBAAiB,EAC3DC,EAAiB,SAAS,eAAe,gBAAgB,EACzDC,EAAW,SAAS,eAAe,eAAe,EAClDC,EAAsB,SAAS,iBAAiB,mBAAmB,EAEzEJ,GAAe,iBAAiB,QAAS,IAAM,CAC3C,IAAMK,EAAW,SAAS,eAAe,kBAAkB,GAAG,MACxDC,EAAW,SAAS,eAAe,kBAAkB,GAAG,MAE1DD,EAAU1C,EAAe,UAAY0C,EACpC,OAAO1C,EAAe,UAEvB2C,EAAU3C,EAAe,UAAY2C,EACpC,OAAO3C,EAAe,UAE3B4C,EAAa,CACjB,CAAC,EAEDN,GAAiB,iBAAiB,SAAWO,GAAM,CAC3CA,EAAE,OAAO,QAAS7C,EAAe,SAAW,GAC3C,OAAOA,EAAe,SAC3B4C,EAAa,CACjB,CAAC,EAEDL,GAAgB,iBAAiB,SAAWM,GAAM,CAC1CA,EAAE,OAAO,QAAS7C,EAAe,QAAU,GAC1C,OAAOA,EAAe,QAC3B4C,EAAa,CACjB,CAAC,EAEDH,EAAoB,QAAQK,GAAY,CACpCA,EAAS,iBAAiB,SAAU,IAAM,CACtCC,EAAuB,EACvBH,EAAa,CACjB,CAAC,CACL,CAAC,EAEDJ,GAAU,iBAAiB,QAAS,IAAM,CACtCxC,EAAiB,CAAC,EAClBC,EAAc,EACd2C,EAAa,CACjB,CAAC,CACL,CAEA,SAASG,GAAyB,CAC9B,IAAMC,EAAa,SAAS,iBAAiB,2BAA2B,EAClE/B,EAAa,CAAC,EAEpB+B,EAAW,QAAQC,GAAM,CACrBhC,EAAW,KAAK,GAAGgC,EAAG,QAAQ,SAAS,IAAIA,EAAG,KAAK,EAAE,CACzD,CAAC,EAEGhC,EAAW,OACXjB,EAAe,WAAaiB,EAE5B,OAAOjB,EAAe,UAE9B,CAEA,SAAS4C,GAAe,CACpB3C,EAAc,EACdiD,EAAU,EACVzB,EAAa,CACjB,CAEA,SAASyB,GAAY,CACjB,IAAMnC,EAAS,IAAI,gBAEff,EAAe,WAAWe,EAAO,IAAI,YAAaf,EAAe,SAAS,EAC1EA,EAAe,WAAWe,EAAO,IAAI,YAAaf,EAAe,SAAS,EAC1EA,EAAe,UAAUe,EAAO,IAAI,WAAYf,EAAe,QAAQ,EACvEA,EAAe,UAAUe,EAAO,IAAI,WAAY,MAAM,EACtDf,EAAe,SAASe,EAAO,IAAI,UAAW,MAAM,EACpDf,EAAe,YACfA,EAAe,WAAW,QAAQkC,GAAQnB,EAAO,OAAO,OAAQmB,CAAI,CAAC,EAErEjC,EAAc,GAAGc,EAAO,IAAI,OAAQd,CAAW,EAEnD,IAAMkD,EAAS,GAAG,OAAO,SAAS,QAAQ,GAAGpC,EAAO,SAAS,EAAI,IAAMA,EAAO,SAAS,EAAI,EAAE,GAC7F,OAAO,QAAQ,UAAU,CAAC,EAAG,GAAIoC,CAAM,CAC3C,CAEA,eAAe1B,GAAe,CAC1B,IAAMI,EAAY,SAAS,eAAe,mBAAmB,EAC7D,GAAI,GAACA,GAAa,CAAC3B,GAEnB,CAAIC,GACAA,EAAgB,MAAM,EAE1BA,EAAkB,IAAI,gBAEtB,OAAO,KAAK0B,EAAW,UAAU,EAEjC,GAAI,CACA,IAAMd,EAAS,CACX,SAAUb,EAAgB,GAC1B,KAAMD,EACN,MAAO,GACP,GAAGD,CACP,EAEIA,EAAe,aACf,OAAOe,EAAO,WACdf,EAAe,WAAW,QAAQkC,GAAQ,CACtC,GAAM,CAACkB,EAAKjB,CAAK,EAAID,EAAK,MAAM,GAAG,EACnCnB,EAAO,QAAQqC,CAAG,EAAE,EAAIjB,CAC5B,CAAC,GAGL,IAAMkB,EAAW,MAAM,YAAY,OAAOtC,CAAM,EAC1CuC,EAAWD,EAAS,MAAQ,CAAC,EAC7BE,EAAOF,EAAS,MAAQ,CAAC,EAE/BG,EAAeF,EAAUC,CAAI,CACjC,OAAS5B,EAAO,CACZ,GAAIA,EAAM,OAAS,aAAc,OACjC,QAAQ,MAAM,2BAA4BA,CAAK,EAC/CE,EAAU,UAAY,yFAC1B,EACJ,CAEA,SAAS2B,EAAeF,EAAUC,EAAM,CACpC,IAAM1B,EAAY,SAAS,eAAe,mBAAmB,EAC7D,GAAI,CAACA,EAAW,OAEhB,IAAM4B,EAAW,QAAQ,IAAI,iBAAiB,GAAK,OAC7CC,EAAYD,IAAa,OACzB,YACA,gEAEN,GAAIH,EAAS,SAAW,EAAG,CACvBzB,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAatB,SAAS,eAAe,qBAAqB,GAAG,iBAAiB,QAAS,IAAM,CAC5E7B,EAAiB,CAAC,EAClBC,EAAc,EACd2C,EAAa,CACjB,CAAC,EACD,MACJ,CAaA,GAXAf,EAAU,UAAY;AAAA,0BACJ6B,CAAS;AAAA,kBACjBJ,EAAS,IAAIK,GAAW,YAAY,OAAOA,EAAS,CAAE,OAAQF,CAAS,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,cAEvFF,EAAK,YAAc,EAAI;AAAA;AAAA,cAErB,EAAE;AAAA,UAGV,YAAY,WAAW1B,CAAS,EAE5B0B,EAAK,YAAc,EAAG,CACtB,IAAMK,EAAsB,SAAS,eAAe,qBAAqB,EACzEA,EAAoB,UAAY,WAAW,OAAO,CAC9C,YAAaL,EAAK,cAAgBtD,EAClC,WAAYsD,EAAK,YACjB,WAAYA,EAAK,KACrB,CAAC,EAEDK,EAAoB,iBAAiB,QAAUf,GAAM,CACjD,IAAMgB,EAAUhB,EAAE,OAAO,QAAQ,aAAa,EAC1CgB,IACA5D,EAAc,SAAS4D,EAAQ,QAAQ,IAAI,EAC3CX,EAAU,EACVzB,EAAa,EACb,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,QAAS,CAAC,EAEtD,CAAC,CACL,CACJ,CAEA,eAAeC,EAAkBE,EAAU,CACvC,IAAMC,EAAY,SAAS,eAAe,eAAe,EACzD,GAAKA,EAEL,GAAI,CAEA,IAAMiC,GADW,MAAM,cAAc,iBAAiBlC,EAAS,EAAE,GAClC,MAAQ,CAAC,EAExC,GAAIkC,EAAc,SAAW,EAAG,CAC5BjC,EAAU,UAAY,GACtB,MACJ,CAEAA,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA,0BAIRiC,EAAc,IAAIC,GAAO;AAAA,mDACAA,EAAI,IAAI;AAAA,kCACzB,UAAU,WAAWA,EAAI,IAAI,CAAC;AAAA,kCAC9BA,EAAI,cAAgB,qCAAqCA,EAAI,aAAa,WAAa,EAAE;AAAA;AAAA,yBAElG,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,aAI3B,OAASpC,EAAO,CACZ,QAAQ,MAAM,gCAAiCA,CAAK,EACpDE,EAAU,UAAY,EAC1B,CACJ,CAEA,SAASpB,GAAqB,CAC1B,IAAMuD,EAAkB,SAAS,eAAe,mBAAmB,EAC7DC,EAAgB,SAAS,eAAe,gBAAgB,EACxDC,EAAiB,SAAS,eAAe,kBAAkB,EAEjEF,GAAiB,iBAAiB,QAAS,IAAM,CAC7CC,GAAe,UAAU,OAAO,QAAQ,EACxC,SAAS,KAAK,UAAU,IAAI,iBAAiB,CACjD,CAAC,EAEDC,GAAgB,iBAAiB,QAAS,IAAM,CAC5CD,GAAe,UAAU,IAAI,QAAQ,EACrC,SAAS,KAAK,UAAU,OAAO,iBAAiB,CACpD,CAAC,CACL,CAEA,SAASvD,GAAkB,CACvB,IAAMyD,EAAa,SAAS,eAAe,aAAa,EACnDA,IAELA,EAAW,MAAQnE,EAAe,UAAY,GAE9CmE,EAAW,iBAAiB,SAAWtB,GAAM,CACrCA,EAAE,OAAO,MACT7C,EAAe,SAAW6C,EAAE,OAAO,MAEnC,OAAO7C,EAAe,SAE1B4C,EAAa,CACjB,CAAC,EACL,CAEA,SAASjC,GAAiB,CACtB,IAAMyD,EAAU,SAAS,eAAe,WAAW,EAC7CC,EAAU,SAAS,eAAe,WAAW,GAC/B,QAAQ,IAAI,iBAAiB,GAAK,UAElC,SAChBD,GAAS,UAAU,OAAO,aAAa,EACvCC,GAAS,UAAU,IAAI,aAAa,GAGxCD,GAAS,iBAAiB,QAAS,IAAM,CACrC,QAAQ,IAAI,kBAAmB,MAAM,EACrCA,EAAQ,UAAU,IAAI,aAAa,EACnCC,GAAS,UAAU,OAAO,aAAa,EACvC5C,EAAa,CACjB,CAAC,EAED4C,GAAS,iBAAiB,QAAS,IAAM,CACrC,QAAQ,IAAI,kBAAmB,MAAM,EACrCA,EAAQ,UAAU,IAAI,aAAa,EACnCD,GAAS,UAAU,OAAO,aAAa,EACvC3C,EAAa,CACjB,CAAC,CACL,CAEA,SAAS6C,GAAU,CACXnE,IACAA,EAAgB,MAAM,EACtBA,EAAkB,MAEtBH,EAAiB,CAAC,EAClBC,EAAc,EACdC,EAAkB,KAClBE,EAAc,EAClB,CAEA,MAAO,CACH,KAAAC,EACA,QAAAiE,CACJ,CACJ,GAAG,EAEH,OAAO,aAAezE,GACfD,GAAQC,KC1hBf,IAAA0E,GAAA,GAAAC,EAAAD,GAAA,aAAAE,KAAA,IAKMC,GAm1BCD,GAx1BPE,GAAAC,EAAA,KAKMF,IAAgB,gBAAiB,CACnC,aAEA,IAAIG,EAAO,KACPC,EAAe,CACf,iBAAkB,KAClB,gBAAiB,KACjB,iBAAkB,GAClB,gBAAiB,KACjB,eAAgB,KAChB,MAAO,EACX,EACIC,EAAc,EAElB,eAAeC,GAAO,CAClB,GAAI,CAAC,QAAQ,gBAAgB,GAErB,CADoB,SAAS,eAAe,gBAAgB,EAC1C,CAClB,MAAM,KAAK,oCAAoC,EAC/C,OAAO,SAAS,KAAO,kCACvB,MACJ,CAKJ,GAFA,MAAMC,EAAS,EAEX,CAACJ,GAAQ,CAACA,EAAK,OAASA,EAAK,MAAM,SAAW,EAAG,CACjD,MAAM,QAAQ,qBAAqB,EACnC,OAAO,SAAS,KAAO,SACvB,MACJ,CAEA,MAAMK,EAAkB,EACxBC,EAAmB,EACnBC,EAAmB,EACnBC,EAAuB,CAC3B,CAEA,eAAeJ,GAAW,CACtB,GAAI,CAEAJ,GADiB,MAAM,QAAQ,QAAQ,GACvB,KAChBS,EAAmB,CACvB,OAASC,EAAO,CACZ,QAAQ,MAAM,uBAAwBA,CAAK,EAC3C,MAAM,MAAM,sBAAsB,CACtC,CACJ,CAEA,SAASD,GAAqB,CAC1B,IAAME,EAAY,SAAS,eAAe,eAAe,EACrD,CAACA,GAAa,CAACX,IAEnBW,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAMRX,EAAK,MAAM,IAAIY,GAAQ;AAAA;AAAA;AAAA,4CAGDA,EAAK,SAAS,OAAS,gCAAgC;AAAA;AAAA;AAAA,yFAGV,UAAU,WAAWA,EAAK,SAAS,IAAI,CAAC;AAAA,kCAC/FA,EAAK,QAAU,oCAAoC,UAAU,WAAWA,EAAK,QAAQ,MAAQA,EAAK,QAAQ,KAAK,CAAC,OAAS,EAAE;AAAA;AAAA,+EAE9EA,EAAK,QAAQ;AAAA,wEACpB,UAAU,YAAYA,EAAK,MAAQA,EAAK,QAAQ,CAAC;AAAA;AAAA;AAAA;AAAA,qBAIpG,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAMqB,UAAU,YAAYZ,EAAK,UAAY,CAAC,CAAC;AAAA;AAAA,sBAEvEA,EAAK,gBAAkB;AAAA;AAAA;AAAA,qCAGR,UAAU,YAAYA,EAAK,eAAe,CAAC;AAAA;AAAA,sBAExD,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,sBAKJA,EAAK,WAAa;AAAA;AAAA;AAAA,wDAGgB,UAAU,YAAYA,EAAK,UAAU,CAAC;AAAA;AAAA,sBAEtE,EAAE;AAAA;AAAA;AAAA,2FAGiE,UAAU,YAAYA,EAAK,OAAS,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA,UAK7H,CAEA,eAAeK,GAAoB,CAC/B,GAAK,QAAQ,gBAAgB,EAE7B,GAAI,CAEA,IAAMQ,GADW,MAAM,QAAQ,aAAa,GACjB,MAAQ,CAAC,EAE9BC,EAAoB,SAAS,eAAe,iBAAiB,EAC/DA,GAAqBD,EAAU,OAAS,IACxCC,EAAkB,UAAY;AAAA;AAAA;AAAA;AAAA,8BAIhBD,EAAU,IAAIE,GAAQ;AAAA;AAAA,sFAEkCA,EAAK,EAAE;AAAA;AAAA,+EAEd,UAAU,WAAWA,EAAK,WAAa,GAAGA,EAAK,UAAU,IAAIA,EAAK,SAAS,EAAE,CAAC;AAAA,2EAClF,UAAU,WAAWA,EAAK,cAAc,CAAC;AAAA,0CAC1EA,EAAK,eAAiB,oCAAoC,UAAU,WAAWA,EAAK,cAAc,CAAC,OAAS,EAAE;AAAA,2EAC7E,UAAU,WAAWA,EAAK,IAAI,CAAC,KAAK,UAAU,WAAWA,EAAK,OAAS,EAAE,CAAC,IAAI,UAAU,WAAWA,EAAK,WAAW,CAAC;AAAA,2EACpH,UAAU,WAAWA,EAAK,OAAO,CAAC;AAAA,0CACnEA,EAAK,WAAa,6GAA+G,EAAE;AAAA;AAAA;AAAA,6BAGhJ,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBASvBC,EAAqB,EAE7B,OAASN,EAAO,CACZ,QAAQ,MAAM,4BAA6BA,CAAK,CACpD,CACJ,CAEA,SAASM,GAAuB,CAC5B,IAAMC,EAAgB,SAAS,iBAAiB,6BAA6B,EACvEC,EAAiB,SAAS,eAAe,kBAAkB,EAEjED,EAAc,QAAQE,GAAS,CAC3BA,EAAM,iBAAiB,SAAWC,GAAM,CAChCA,EAAE,OAAO,QAAU,MACnBF,GAAgB,UAAU,OAAO,QAAQ,GAEzCA,GAAgB,UAAU,IAAI,QAAQ,EACtCjB,EAAa,iBAAmBmB,EAAE,OAAO,MAEjD,CAAC,CACL,CAAC,CACL,CAEA,SAASd,GAAqB,CAC1B,IAAMe,EAAQ,SAAS,iBAAiB,aAAa,EAC/CC,EAAiB,SAAS,iBAAiB,uBAAuB,EAClEC,EAAW,SAAS,iBAAiB,kBAAkB,EACvDC,EAAW,SAAS,iBAAiB,kBAAkB,EAE7D,SAASC,EAASC,EAAY,CAC1BL,EAAM,QAAQM,GAAQ,CAClBA,EAAK,UAAU,OAAO,SAAU,SAASA,EAAK,QAAQ,IAAI,IAAMD,CAAU,CAC9E,CAAC,EAEDJ,EAAe,QAAQM,GAAa,CAChC,IAAMC,EAAgB,SAASD,EAAU,QAAQ,aAAa,EAC9DA,EAAU,UAAU,OAAO,iBAAkBC,GAAiBH,CAAU,EACxEE,EAAU,UAAU,OAAO,aAAcC,GAAiBH,CAAU,EACpEE,EAAU,UAAU,OAAO,cAAeC,EAAgBH,CAAU,EACpEE,EAAU,UAAU,OAAO,gBAAiBC,EAAgBH,CAAU,CAC1E,CAAC,EAEDxB,EAAcwB,CAClB,CAEAH,EAAS,QAAQO,GAAO,CACpBA,EAAI,iBAAiB,QAAS,SAAY,CACxB,MAAMC,EAAoB,IAEhC7B,IAAgB,GAChB,MAAM8B,EAAoB,EAE9BP,EAASvB,EAAc,CAAC,EACxB,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,QAAS,CAAC,EAEtD,CAAC,CACL,CAAC,EAEDsB,EAAS,QAAQM,GAAO,CACpBA,EAAI,iBAAiB,QAAS,IAAM,CAChCL,EAASvB,EAAc,CAAC,EACxB,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,QAAS,CAAC,CAClD,CAAC,CACL,CAAC,EAEDuB,EAAS,CAAC,CACd,CAEA,eAAeM,GAAsB,CACjC,OAAQ7B,EAAa,CACjB,IAAK,GACD,OAAO+B,EAAwB,EACnC,IAAK,GACD,OAAOC,EAAuB,EAClC,IAAK,GACD,OAAOC,EAAsB,EACjC,QACI,MAAO,EACf,CACJ,CAGA,SAASC,EAAgBzB,EAAW,CAC3BA,IACLA,EAAU,iBAAiB,kBAAkB,EAAE,QAAQ0B,GAAMA,EAAG,OAAO,CAAC,EACxE1B,EAAU,iBAAiB,kBAAkB,EAAE,QAAQ0B,GAAMA,EAAG,UAAU,OAAO,iBAAiB,CAAC,EACvG,CAEA,SAASC,EAAgBC,EAASC,EAAS,CACvC,GAAI,CAACD,EAAS,OAEd,IAAME,EAAOF,EAAQ,aAAa,MAAM,GAAKA,EAAQ,IAAM,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,MAAM,EAAG,CAAC,EAC1FG,EAAWH,EAAQ,QAAQ,MAAM,GAAG,cAAc,oBAAoBE,CAAI,IAAI,EAChFC,GAAUA,EAAS,OAAO,EAE9B,IAAMC,EAAM,SAAS,cAAc,GAAG,EACtCA,EAAI,UAAY,4BAChBA,EAAI,aAAa,iBAAkBF,CAAI,EACvCE,EAAI,YAAcH,EAGlBD,EAAQ,UAAU,IAAI,iBAAiB,EAGnCA,EAAQ,YACRA,EAAQ,WAAW,aAAaI,EAAKJ,EAAQ,WAAW,EAExDA,EAAQ,WAAW,YAAYI,CAAG,CAE1C,CAEA,SAASC,EAAkBjC,EAAW,CAClC,GAAI,CAACA,EAAW,OAChB,IAAMkC,EAAQlC,EAAU,cAAc,kBAAkB,EACxD,GAAI,CAACkC,EAAO,OAEZ,IAAMJ,EAAOI,EAAM,aAAa,gBAAgB,EAC1CC,EAAQnC,EAAU,cAAc,UAAU8B,CAAI,IAAI,GAAK9B,EAAU,cAAc,IAAI8B,CAAI,EAAE,GAAKI,EAAM,uBACtGC,GAAS,OAAOA,EAAM,OAAU,YAAYA,EAAM,MAAM,CAChE,CAEA,SAASb,GAA0B,CAE/B,IAAMc,EAAoB,SAAS,cAAc,qCAAqC,EAEtF,GAAIA,GAAqBA,EAAkB,QAAU,MACjD,OAAAX,EAAgB,SAAS,eAAe,kBAAkB,GAAK,SAAS,eAAe,kBAAkB,CAAC,EAC1GnC,EAAa,iBAAmB8C,EAAkB,MAC3C,GAGX,IAAMC,EAAO,SAAS,eAAe,uBAAuB,GAAK,SAAS,eAAe,kBAAkB,GAAK,SAAS,eAAe,kBAAkB,EAC1J,GAAI,CAACA,EAAM,MAAO,GAElBZ,EAAgBY,CAAI,EAEpB,IAAMC,EAAW,IAAI,SAASD,CAAI,EAC5BE,EAAU,CACZ,WAAYD,EAAS,IAAI,YAAY,GAAKA,EAAS,IAAI,WAAW,GAAG,MAAM,GAAG,IAAI,CAAC,EACnF,UAAWA,EAAS,IAAI,WAAW,IAAMA,EAAS,IAAI,WAAW,EAAIA,EAAS,IAAI,WAAW,EAAE,MAAM,GAAG,EAAE,MAAM,CAAC,EAAE,KAAK,GAAG,EAAI,IAC/H,MAAOA,EAAS,IAAI,OAAO,EAC3B,MAAOA,EAAS,IAAI,OAAO,EAC3B,eAAgBA,EAAS,IAAI,eAAe,GAAKA,EAAS,IAAI,gBAAgB,EAC9E,eAAgBA,EAAS,IAAI,eAAe,GAAKA,EAAS,IAAI,gBAAgB,EAC9E,KAAMA,EAAS,IAAI,MAAM,EACzB,MAAOA,EAAS,IAAI,OAAO,EAC3B,YAAaA,EAAS,IAAI,aAAa,EACvC,QAASA,EAAS,IAAI,SAAS,CACnC,EAIME,EADW,CAAC,QAAS,aAAc,iBAAkB,OAAQ,aAAa,EACvD,OAAOC,GAAS,CAACF,EAAQE,CAAK,CAAC,EAExD,GAAID,EAAQ,OAAS,EAEjB,OAAAA,EAAQ,QAAQC,GAAS,CAErB,IAAIC,EAAW,UAAUD,CAAK,KAC1BA,IAAU,mBAAkBC,EAAW,kDAC3C,IAAMd,EAAUS,EAAK,cAAcK,CAAQ,EAC3Cf,EAAgBC,GAAWS,EAAMI,EAAM,QAAQ,IAAK,GAAG,EAAE,QAAQ,QAASE,GAAKA,EAAE,YAAY,CAAC,EAAI,eAAe,CACrH,CAAC,EAEDV,EAAkBI,CAAI,EACf,GAIX,GAAIE,EAAQ,OAAS,CAAC,6BAA6B,KAAKA,EAAQ,KAAK,EAAG,CACpE,IAAMK,EAAUP,EAAK,cAAc,gBAAgB,EACnD,OAAAV,EAAgBiB,GAAWP,EAAM,qCAAqC,EACtEJ,EAAkBI,CAAI,EACf,EACX,CAEA,OAAA/C,EAAa,iBAAmBiD,EACzB,EACX,CAEA,eAAelB,GAAsB,CACjC,IAAMrB,EAAY,SAAS,eAAe,kBAAkB,EAC5D,GAAKA,EAEL,QAAO,KAAKA,EAAW,SAAS,EAEhC,GAAI,CACA,IAAMuC,EAAUjD,EAAa,iBAE7B,GAAI,CAACiD,EAAS,CAEVvC,EAAU,UAAY,2FACtB,MACJ,CAEA,IAAM6C,EAAS,OAAON,GAAY,SAAW,CACzC,QAASA,EAAQ,QACjB,YAAaA,EAAQ,YACrB,KAAMA,EAAQ,IAClB,EAAI,CAAE,WAAYA,CAAQ,EAGpBO,GADW,MAAM,YAAY,SAASD,CAAM,GACzB,MAAQ,CAAC,EAElC,GAAIC,EAAQ,SAAW,EAAG,CACtB9C,EAAU,UAAY,gFACtB,MACJ,CAEAA,EAAU,UAAY;AAAA;AAAA,sBAEZ8C,EAAQ,IAAI,CAACC,EAAQC,IAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAMRD,EAAO,EAAE;AAAA,sCAChBC,IAAU,EAAI,UAAY,EAAE;AAAA;AAAA,kDAEhBD,EAAO,KAAK;AAAA;AAAA;AAAA,2EAGa,UAAU,WAAWA,EAAO,IAAI,CAAC;AAAA,sCACtEA,EAAO,YAAc,oCAAoC,UAAU,WAAWA,EAAO,WAAW,CAAC,OAAS,EAAE;AAAA,sCAC5GA,EAAO,eAAiB,gDAAgDA,EAAO,cAAc,YAAc,EAAE;AAAA;AAAA;AAAA,wEAG3EA,EAAO,MAAQ,EAAI,UAAU,YAAYA,EAAO,KAAK,EAAI,MAAM;AAAA;AAAA,qBAElH,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,cAII/C,EAAU,iBAAiB,+BAA+B,EAClE,QAAQ,CAACQ,EAAOyC,IAAQ,CAEnCzC,EAAM,QAAUsC,EAAQG,CAAG,EAAIH,EAAQG,CAAG,EAAE,MAAQ,EACpDzC,EAAM,iBAAiB,SAAU,IAAM,CACnC0C,EAAmB,WAAW1C,EAAM,OAAO,GAAK,CAAC,CACrD,CAAC,CACL,CAAC,EAEGsC,EAAQ,OAAS,IACjBxD,EAAa,gBAAkBwD,EAAQ,CAAC,EAAE,GAC1CI,EAAmBJ,EAAQ,CAAC,EAAE,OAAS,CAAC,EAEhD,OACO/C,EAAO,CACV,QAAQ,MAAM,mCAAoCA,CAAK,EACvDC,EAAU,UAAY,gFAC1B,EACJ,CAKA,eAAemD,GAAgC,CAC3C,IAAMnD,EAAY,SAAS,eAAe,2BAA2B,EACrE,GAAKA,EAEL,GAAI,CACA,IAAM6C,EAAS,IAAI,gBAEf,OAAO,QAAU,OAAO,cAAgB,OAAO,aAAa,aAAaA,EAAO,IAAI,UAAW,OAAO,aAAa,WAAW,EAC9HxD,IAASA,EAAK,OAASA,EAAK,QAAU,IAAIwD,EAAO,IAAI,SAAUxD,EAAK,KAAK,EAK7E,IAAM+D,EAAO,MAHA,MAAM,MAAM,wCAAwCP,EAAO,SAAS,CAAC,GAAI,CAClF,YAAa,aACjB,CAAC,GACuB,KAAK,EAEvBQ,EAAYD,GAAQA,EAAK,MAAS,CAAC,EAGnCrB,EAAW/B,EAAU,iBAAiB,iBAAiB,EAC7D,GAAI+B,GAAYA,EAAS,OAAS,EAAG,CACjC,GAAI,CACA,IAAMuB,EAAgB,MAAM,KAAKvB,CAAQ,EAAE,IAAIL,GAAMA,EAAG,QAAQ,OAAO,EAAE,OAAO,OAAO,EACjF6B,GAAeF,GAAY,CAAC,GAAG,IAAIG,GAAKA,EAAE,IAAI,EAIpD,GADaF,EAAc,SAAWC,EAAY,QAAUD,EAAc,MAAM,CAACG,EAAGC,IAAMD,IAAMF,EAAYG,CAAC,CAAC,EACpG,CACN9D,EAAmB,EACnB,MACJ,CACJ,OAAS+D,EAAK,CAEV,QAAQ,KAAK,+CAAgDA,CAAG,CACpE,CAGA,GAAIN,EAAS,SAAW,EAAG,MAC/B,CAGA,GAAI,CAACA,GAAYA,EAAS,SAAW,EAAG,CACpCrD,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQtB,MACJ,CAGA,IAAM4D,EAAO,SAAS,uBAAuB,EAC7CP,EAAS,QAAQ,CAACG,EAAGP,IAAQ,CACzB,IAAMY,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,mFACpBA,EAAQ,QAAQ,QAAUL,EAAE,KAG5BK,EAAQ,MAAM,UAAY,6BAC1BA,EAAQ,MAAM,eAAiB,GAAGZ,EAAM,EAAE,KAE1C,IAAMd,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,KAAO,QACbA,EAAM,KAAO,iBACbA,EAAM,MAAQqB,EAAE,KAChBrB,EAAM,GAAK,WAAWqB,EAAE,IAAI,GAC5BrB,EAAM,UAAY,eACdc,IAAQ,IAAGd,EAAM,QAAU,IAE/B,IAAM2B,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,aAAa,MAAO3B,EAAM,EAAE,EAClC2B,EAAM,UAAY,6IAElBA,EAAM,UAAY;AAAA;AAAA;AAAA,8BAGJN,EAAE,SAAW,aAAaA,EAAE,QAAQ,sBAAsBA,EAAE,IAAI,KAAO,2BAA2BA,EAAE,KAAK,YAAY,CAAC,SAAS;AAAA;AAAA;AAAA,mFAG1E,UAAU,WAAWA,EAAE,IAAI,CAAC;AAAA,kFAC7B,UAAU,WAAWA,EAAE,aAAe,EAAE,CAAC;AAAA,8BAC7FA,EAAE,SAAW,8DAA8D,UAAU,WAAWA,EAAE,QAAQ,CAAC,OAAS,EAAE;AAAA,8BACtHA,EAAE,aAAe,4DAA4DA,EAAE,YAAY,OAAS,EAAE;AAAA;AAAA;AAAA,kBAKpHK,EAAQ,YAAY1B,CAAK,EACzB0B,EAAQ,YAAYC,CAAK,EAGzB,IAAM7C,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,4FACtBA,EAAU,UAAY,8NACtB4C,EAAQ,YAAY5C,CAAS,EAE7B2C,EAAK,YAAYC,CAAO,EAGpBL,EAAE,YAAcA,EAAE,iBAClBO,EAAqBP,EAAE,UAAU,EAAE,MAAMG,IAAO,QAAQ,MAAM,yBAA0BA,EAAG,CAAC,CAEpG,CAAC,EAGD3D,EAAU,gBAAgB4D,CAAI,EAG9BhE,EAAmB,CAEvB,OAASG,EAAO,CACZ,QAAQ,MAAM,mCAAoCA,CAAK,CAC3D,CACJ,CAEA,SAASgE,EAAqBC,EAAgB,CAC1C,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CACpC,GAAI,OAAO,QAAU,OAAO,yBAA2BF,EAAgB,CAEnEC,EAAQ,EACR,MACJ,CAMA,GAHA,OAAO,uBAAyBD,EAG5B,OAAO,OAAQ,CACfG,EAAmBH,CAAc,EACjCC,EAAQ,EACR,MACJ,CAEA,IAAMG,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,IAAM,4BACbA,EAAO,MAAQ,GACfA,EAAO,OAAS,IAAM,CAClB,GAAI,CACAD,EAAmBH,CAAc,EACjCC,EAAQ,CACZ,OAASN,EAAK,CACVO,EAAOP,CAAG,CACd,CACJ,EACAS,EAAO,QAAW3D,GAAMyD,EAAOzD,CAAC,EAChC,SAAS,KAAK,YAAY2D,CAAM,CACpC,CAAC,CACL,CAEA,SAASD,EAAmBH,EAAgB,CACxC,GAAI,OAAO,OAAW,IAAa,MAAM,IAAI,MAAM,0BAA0B,EAE7E,GAAI,CACA,IAAMK,EAAS,OAAOL,CAAc,EAE9BM,EADWD,EAAO,SAAS,EACT,OAAO,MAAM,EAC/BE,EAAa,SAAS,eAAe,cAAc,EACrDA,IAEAA,EAAW,UAAY,GACvBD,EAAO,MAAM,eAAe,EAG5BA,EAAO,GAAG,SAAW7D,GAAM,CACvB,IAAM+D,EAAe,SAAS,eAAe,aAAa,EACtDA,IAAcA,EAAa,YAAc/D,EAAE,MAAQA,EAAE,MAAM,QAAU,GAC7E,CAAC,EAGD,OAAO,eAAiB4D,EACxB,OAAO,WAAaC,EAE5B,OAASX,EAAK,CACV,cAAQ,MAAM,sCAAuCA,CAAG,EAClDA,CACV,CACJ,EAGC,UAA4B,CAEzB,SAAS,iBAAiB,mBAAoB,IAAM,CAChD,WAAW,IAAM,CACbR,EAA8B,CAClC,EAAG,EAAE,CACT,CAAC,CACL,GAAG,EAIH,SAASD,EAAmBuB,EAAM,CAC9B,IAAMC,EAAiB,SAAS,eAAe,eAAe,EACxDC,EAAe,SAAS,eAAe,aAAa,EAM1D,GAJID,IACAA,EAAe,YAAcD,EAAO,EAAI,UAAU,YAAYA,CAAI,EAAI,QAGtEE,GAAgBtF,EAAM,CACtB,IAAMuF,GAASvF,EAAK,OAAS,GAAKoF,EAClCE,EAAa,YAAc,UAAU,YAAYC,CAAK,CAC1D,CACJ,CAEA,SAASrD,GAAyB,CAC9B,IAAMsD,EAAW,SAAS,cAAc,uCAAuC,EAC/E,OAAKA,GAILvF,EAAa,gBAAkBuF,EAAS,MACjC,KAJH,MAAM,MAAM,kCAAkC,EACvC,GAIf,CAEA,SAAShF,GAAyB,CAC9B,IAAMiF,EAAS,SAAS,eAAe,sBAAsB,EACvDC,EAAQ,SAAS,eAAe,qBAAqB,EAC3D,GAAI,CAACD,GAAU,CAACC,EAAO,OAEvBD,EAAO,iBAAiB,QAAS,IAAM,CACnC,IAAME,EAASD,EAAM,UAAU,OAAO,QAAQ,EAC9CD,EAAO,aAAa,iBAAkB,CAACE,GAAQ,SAAS,CAAC,EACzD,IAAMC,EAAUH,EAAO,cAAc,KAAK,EACtCG,GAASA,EAAQ,UAAU,OAAO,aAAc,CAACD,CAAM,CAC/D,CAAC,EAGD,IAAME,EAAW,OAAO,iBAAiBH,CAAK,EAAE,UAAY,QAAUA,EAAM,UAAU,SAAS,QAAQ,EACvGD,EAAO,aAAa,iBAAkB,CAACI,GAAU,SAAS,CAAC,CAC/D,CAEA,SAAS1D,GAAwB,CAC7B,IAAMqD,EAAW,SAAS,cAAc,sCAAsC,EACxExC,EAAO,SAAS,eAAe,cAAc,EAGnD,GAFAZ,EAAgBY,CAAI,EAEhB,CAACwC,EAAU,CAEX,IAAM7E,EAAY,SAAS,eAAe,2BAA2B,GAAKqC,EAC1E,OAAAV,EAAgB3B,EAAW,iCAAiC,EAC5DiC,EAAkBjC,CAAS,EACpB,EACX,CAEA,IAAMmF,EAAON,EAAS,MAGtB,GAAIM,IAAS,SAAU,CACnB,IAAMC,EAAS,SAAS,eAAe,iBAAiB,EACxD,GAAI,CAACA,GAAU,CAACA,EAAO,MAAM,KAAK,EAC9B,OAAAzD,EAAgByD,GAAU/C,EAAM,8BAA8B,EAC9DJ,EAAkBI,CAAI,EACf,GAGX,GAAI,CAAC,OAAO,WACR,OAAAV,EAAgB,SAAS,eAAe,cAAc,GAAKU,EAAM,kDAAkD,EAC5G,EAEf,CAEA,GAAI8C,IAAS,QAAS,CAClB,IAAMzD,EAAK,SAAS,eAAe,cAAc,EACjD,GAAI,CAACA,GAAM,CAACA,EAAG,MAAM,KAAK,EACtB,OAAAC,EAAgBD,GAAMW,EAAM,kCAAkC,EAC9DJ,EAAkBI,CAAI,EACf,EAEf,CAEA,GAAI8C,IAAS,QAAS,CAClB,IAAMzD,EAAK,SAAS,eAAe,cAAc,EACjD,GAAI,CAACA,GAAM,CAACA,EAAG,MAAM,KAAK,EACtB,OAAAC,EAAgBD,GAAMW,EAAM,kCAAkC,EAC9DJ,EAAkBI,CAAI,EACf,EAEf,CAGA,OAAA/C,EAAa,eAAiB6F,EACvB,EACX,CAEA,SAASvF,GAAqB,CAC1B,IAAMyF,EAAwB,SAAS,eAAe,kBAAkB,EAClEC,EAAqB,SAAS,eAAe,sBAAsB,EAEzED,GAAuB,iBAAiB,SAAW5E,GAAM,CACrDnB,EAAa,iBAAmBmB,EAAE,OAAO,QACzC6E,GAAoB,UAAU,OAAO,SAAU7E,EAAE,OAAO,OAAO,CACnE,CAAC,EAEsB,SAAS,iBAAiB,8BAA8B,EAChE,QAAQsC,GAAU,CAC7B,IAAMwC,EAAW9E,GAAM,CAEnB,SAAS,iBAAiB,qBAAqB,EAAE,QAAQ4B,GAAQ,CAC7DA,EAAK,UAAU,IAAI,QAAQ,CAC/B,CAAC,EAGD,IAAM8C,EAAO1E,EAAE,OAASA,EAAE,OAAO,MAASsC,EAAO,OAAS,KAC1D,GAAI,CAACoC,EAAM,OAEX,IAAIK,EAAa,SAAS,cAAc,uBAAuBL,CAAI,IAAI,EAClEK,IACDA,EAAa,SAAS,eAAe,GAAGL,CAAI,OAAO,GAGvDK,GAAY,UAAU,OAAO,QAAQ,CACzC,EAEAzC,EAAO,iBAAiB,SAAUwC,CAAO,EAGrCxC,EAAO,SACPwC,EAAQ,CAAE,OAAQxC,CAAO,CAAC,CAElC,CAAC,EAID,IAAM0C,EAAgB,SAAS,eAAe,iBAAiB,EACzDC,EAAiB,SAAS,eAAe,kBAAkB,EAG7DD,IAAkB,CAACC,GAAkB,CAACA,EAAe,QAAUA,EAAe,OAAO,SAAS,YAAY,IAC1GD,EAAc,iBAAiB,QAAS,MAAOhF,GAAM,CACjDA,EAAE,eAAe,EACjB,MAAMkF,EAAW,CACrB,CAAC,CAET,CAEA,eAAeA,GAAa,CACxB,GAAI,CAACnE,EAAsB,EAAG,OAE9B,IAAMiE,EAAgB,SAAS,eAAe,iBAAiB,EAC/DA,EAAc,SAAW,GACzBA,EAAc,UAAY,6VAE1B,GAAI,CACA,IAAMG,EAAa,SAAS,eAAe,aAAa,GAAG,MAG3D,GAFAtG,EAAa,MAAQsG,GAAc,GAE/B,CAACtG,EAAa,iBAAkB,CAChC,IAAMuG,EAAc,SAAS,eAAe,sBAAsB,EAClE,GAAIA,EAAa,CACb,IAAMvD,EAAW,IAAI,SAASuD,CAAW,EACzCvG,EAAa,gBAAkB,CAC3B,WAAYgD,EAAS,IAAI,oBAAoB,EAC7C,UAAWA,EAAS,IAAI,mBAAmB,EAC3C,eAAgBA,EAAS,IAAI,wBAAwB,EACrD,eAAgBA,EAAS,IAAI,wBAAwB,EACrD,KAAMA,EAAS,IAAI,cAAc,EACjC,MAAOA,EAAS,IAAI,eAAe,EACnC,YAAaA,EAAS,IAAI,qBAAqB,EAC/C,QAASA,EAAS,IAAI,iBAAiB,CAC3C,CACJ,CACJ,CAGA,IAAMwD,GADW,MAAM,YAAY,YAAYxG,CAAY,GACpC,KAEnBA,EAAa,iBAAmB,UAAYA,EAAa,iBAAmB,OAC5E,MAAMyG,EAAqBD,CAAK,EACzBxG,EAAa,iBAAmB,SACvC,MAAM0G,EAAqBF,CAAK,EAEhC,OAAO,SAAS,KAAO,WAAWA,EAAM,EAAE,gBAElD,OAAS/F,EAAO,CACZ,QAAQ,MAAM,yBAA0BA,CAAK,EAC7C,MAAM,MAAMA,EAAM,SAAW,0CAA0C,EAEvE0F,EAAc,SAAW,GACzBA,EAAc,YAAc,aAChC,CACJ,CAEA,eAAeM,EAAqBD,EAAO,CACvC,GAAI,CACA,IAAMG,EAAW,MAAM,YAAY,oBAAoBH,EAAM,EAAE,EACzD,CAAE,cAAAI,CAAc,EAAID,EAAS,KAC7BE,EAAkBF,EAAS,KAAK,iBAAmB,OAAO,yBAA2B,OAAO,eAAiB,OAAO,uBAAyB,MAEnJ,GAAI,OAAO,OAAW,KAAe,CAAC,OAAO,eACzC,MAAM,IAAI,MAAM,uBAAuB,EAI3C,IAAMG,EAAS,MADA,OAAO,gBAAkB,OAAOD,CAAe,GAClC,mBAAmBD,EAAe,CAC1D,eAAgB,CACZ,KAAM,OAAO,WACb,gBAAiB,CACb,KAAM,GAAG5G,EAAa,iBAAiB,UAAU,IAAIA,EAAa,iBAAiB,SAAS,EAChG,CACJ,CACJ,CAAC,EAED,GAAI8G,EAAO,MACP,MAAM,IAAI,MAAMA,EAAO,MAAM,OAAO,EAGxC,OAAO,SAAS,KAAO,WAAWN,EAAM,EAAE,gBAC9C,OAAS/F,EAAO,CACZ,QAAQ,MAAM,yBAA0BA,CAAK,EAC7C,MAAM,MAAMA,EAAM,SAAW,mCAAmC,EAEhE,IAAM0F,EAAgB,SAAS,eAAe,iBAAiB,EAC/DA,EAAc,SAAW,GACzBA,EAAc,YAAc,aAChC,CACJ,CAEA,eAAeO,EAAqBF,EAAO,CACvC,GAAI,CACA,IAAMG,EAAW,MAAM,YAAY,kBAAkBH,EAAM,EAAE,EACvD,CAAE,aAAAO,CAAa,EAAIJ,EAAS,KAClC,OAAO,SAAS,KAAOI,CAC3B,OAAStG,EAAO,CACZ,QAAQ,MAAM,yBAA0BA,CAAK,EAC7C,MAAM,MAAMA,EAAM,SAAW,mCAAmC,EAEhE,IAAM0F,EAAgB,SAAS,eAAe,iBAAiB,EAC/DA,EAAc,SAAW,GACzBA,EAAc,YAAc,aAChC,CACJ,CAEA,SAASa,GAAU,CACfjH,EAAO,KACPC,EAAe,CACX,iBAAkB,KAClB,gBAAiB,KACjB,iBAAkB,GAClB,gBAAiB,KACjB,eAAgB,KAChB,MAAO,EACX,EACAC,EAAc,CAClB,CAEA,MAAO,CACH,KAAAC,EACA,QAAA8G,CACJ,CACJ,GAAE,EAEF,OAAO,aAAepH,GACfD,GAAQC,KCx1Bf,IAAAqH,GAAA,GAAAC,EAAAD,GAAA,aAAAE,KAAA,IAKMC,GAsNCD,GA3NPE,GAAAC,EAAA,KAKMF,IAAe,UAAW,CAC5B,aAEA,eAAeG,GAAO,CAClBC,EAAgB,EAChB,MAAMC,EAAgB,CAC1B,CAEA,SAASD,GAAkB,CACvB,IAAME,EAAO,SAAS,eAAe,cAAc,EACnD,GAAI,CAACA,EAAM,OAEX,IAAMC,EAAY,cAAc,OAAOD,EAAM,CACzC,KAAM,CACF,SAAU,GACV,UAAW,EACX,UAAW,GACf,EACA,MAAO,CACH,SAAU,GACV,MAAO,EACX,EACA,QAAS,CACL,SAAU,GACV,UAAW,EACX,UAAW,GACf,EACA,QAAS,CACL,SAAU,GACV,UAAW,GACX,UAAW,GACf,CACJ,CAAC,EAEDA,EAAK,iBAAiB,SAAU,MAAOE,GAAM,CAGzC,GAFAA,EAAE,eAAe,EAEb,CAACD,EAAU,SAAS,EAAG,CACvB,MAAM,MAAM,+CAA+C,EAC3D,MACJ,CAEA,IAAME,EAAYH,EAAK,cAAc,uBAAuB,EACtDI,EAAeD,EAAU,YAC/BA,EAAU,SAAW,GACrBA,EAAU,UAAY,6VAEtB,GAAI,CACA,IAAME,EAAW,IAAI,SAASL,CAAI,EAC5BM,EAAO,CACT,KAAMD,EAAS,IAAI,MAAM,EACzB,MAAOA,EAAS,IAAI,OAAO,EAC3B,MAAOA,EAAS,IAAI,OAAO,EAC3B,QAASA,EAAS,IAAI,SAAS,EAC/B,QAASA,EAAS,IAAI,SAAS,CACnC,EAEA,MAAM,WAAW,kBAAkBC,CAAI,EAEvC,MAAM,QAAQ,yDAA0D,EACxEN,EAAK,MAAM,EACXC,EAAU,YAAY,EAEtBM,EAAiB,CACrB,OAASC,EAAO,CACZ,MAAM,MAAMA,EAAM,SAAW,2CAA2C,CAC5E,QAAE,CACEL,EAAU,SAAW,GACrBA,EAAU,YAAcC,CAC5B,CACJ,CAAC,CACL,CAEA,SAASG,GAAmB,CACxB,IAAMP,EAAO,SAAS,eAAe,cAAc,EAC7CS,EAAmB,SAAS,eAAe,iBAAiB,EAE9DT,GAAQS,IACRT,EAAK,UAAU,IAAI,QAAQ,EAC3BS,EAAiB,UAAU,OAAO,QAAQ,EAC1CA,EAAiB,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAe7B,SAAS,eAAe,kBAAkB,GAAG,iBAAiB,QAAS,IAAM,CACzET,EAAK,UAAU,OAAO,QAAQ,EAC9BS,EAAiB,UAAU,IAAI,QAAQ,CAC3C,CAAC,EAET,CAEA,eAAeV,GAAkB,CAC7B,IAAMW,EAAY,SAAS,eAAe,cAAc,EACxD,GAAKA,EAEL,GAAI,CAEA,IAAMC,GADW,MAAM,SAAS,eAAe,GACzB,KAEtB,GAAI,CAACA,EAAM,OAEXD,EAAU,UAAY;AAAA;AAAA,sBAEZC,EAAK,QAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2DAUsB,UAAU,WAAWA,EAAK,OAAO,CAAC;AAAA;AAAA;AAAA,sBAGrE,EAAE;AAAA;AAAA,sBAEJA,EAAK,MAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CASYA,EAAK,KAAK,kDAAkD,UAAU,WAAWA,EAAK,KAAK,CAAC;AAAA;AAAA;AAAA,sBAGnH,EAAE;AAAA;AAAA,sBAEJA,EAAK,MAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDASeA,EAAK,KAAK,kDAAkD,UAAU,WAAWA,EAAK,KAAK,CAAC;AAAA;AAAA;AAAA,sBAGtH,EAAE;AAAA;AAAA,sBAEJA,EAAK,eAAiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2DASe,UAAU,WAAWA,EAAK,cAAc,CAAC;AAAA;AAAA;AAAA,sBAG5E,EAAE;AAAA;AAAA,sBAEJA,EAAK,cAAgB,OAAO,KAAKA,EAAK,YAAY,EAAE,OAAS,EAAI;AAAA;AAAA;AAAA;AAAA,kCAIrDA,EAAK,aAAa,SAAW;AAAA,+CAChBA,EAAK,aAAa,QAAQ;AAAA;AAAA;AAAA,kCAGrC,EAAE;AAAA,kCACJA,EAAK,aAAa,UAAY;AAAA,+CACjBA,EAAK,aAAa,SAAS;AAAA;AAAA;AAAA,kCAGtC,EAAE;AAAA,kCACJA,EAAK,aAAa,QAAU;AAAA,+CACfA,EAAK,aAAa,OAAO;AAAA;AAAA;AAAA,kCAGpC,EAAE;AAAA,kCACJA,EAAK,aAAa,QAAU;AAAA,+CACfA,EAAK,aAAa,OAAO;AAAA;AAAA;AAAA,kCAGpC,EAAE;AAAA;AAAA;AAAA,sBAGd,EAAE;AAAA;AAAA,aAGlB,OAASH,EAAO,CACZ,QAAQ,MAAM,+BAAgCA,CAAK,CACvD,CACJ,CAEA,SAASI,GAAU,CAAC,CAEpB,MAAO,CACH,KAAAf,EACA,QAAAe,CACJ,CACJ,GAAG,EAEH,OAAO,YAAclB,GACdD,GAAQC,KC3Nf,IAAAmB,GAAA,GAAAC,EAAAD,GAAA,aAAAE,KAAA,IAKMC,GA6UCD,GAlVPE,GAAAC,EAAA,KAKMF,IAAW,UAAW,CACxB,aAEA,IAAIG,EAAa,CAAC,EAElB,eAAeC,GAAO,CAElB,IAAMC,EAAkB,SAAS,eAAe,UAAU,EACtDA,GAAmBA,EAAgB,cAAc,WAAW,EAE5DC,EAA0B,EAG1B,MAAMC,EAAS,EAEnBC,EAAW,CACf,CAEA,SAASF,GAA4B,CAEjC,IAAMG,EAAe,SAAS,iBAAiB,eAAe,EACxDC,EAAiB,SAAS,iBAAiB,eAAe,EAEhED,EAAa,QAAQE,GAAO,CACxBA,EAAI,iBAAiB,QAAUC,GAAM,CACjCA,EAAE,eAAe,EAGjBH,EAAa,QAAQI,GAAK,CACtBA,EAAE,UAAU,OAAO,iBAAkB,YAAY,EACjDA,EAAE,UAAU,IAAI,cAAe,eAAe,CAClD,CAAC,EACDF,EAAI,UAAU,IAAI,iBAAkB,YAAY,EAChDA,EAAI,UAAU,OAAO,cAAe,eAAe,EAEnD,IAAMG,EAAWH,EAAI,QAAQ,SAGzBG,IAAa,MACbJ,EAAe,QAAQK,GAAOA,EAAI,UAAU,OAAO,QAAQ,CAAC,EAE5DL,EAAe,QAAQK,GAAO,CAC1BA,EAAI,UAAU,OAAO,SAAUA,EAAI,QAAQ,WAAaD,CAAQ,CACpE,CAAC,EAIL,IAAME,EAAc,SAAS,eAAe,YAAY,EACpDA,IAAaA,EAAY,MAAQ,IACrC,SAAS,iBAAiB,WAAW,EAAE,QAAQC,GAAQA,EAAK,UAAU,OAAO,QAAQ,CAAC,CAC1F,CAAC,CACL,CAAC,EAGwB,SAAS,iBAAiB,mBAAmB,EACrD,QAAQC,GAAU,CAC/BA,EAAO,iBAAiB,QAAS,IAAM,CACnC,IAAMD,EAAOC,EAAO,QAAQ,kBAAkB,EACxCC,EAAUF,EAAK,cAAc,oBAAoB,EACjDG,EAAOH,EAAK,cAAc,iBAAiB,EAC3CI,EAAS,CAACF,EAAQ,UAAU,SAAS,QAAQ,EAGnD,SAAS,iBAAiB,kBAAkB,EAAE,QAAQG,GAAa,CAC3DA,IAAcL,IACdK,EAAU,cAAc,oBAAoB,GAAG,UAAU,IAAI,QAAQ,EACrEA,EAAU,cAAc,iBAAiB,GAAG,UAAU,OAAO,YAAY,EAEjF,CAAC,EAGID,GAIDF,EAAQ,UAAU,IAAI,QAAQ,EAC9BC,EAAK,UAAU,OAAO,YAAY,IAJlCD,EAAQ,UAAU,OAAO,QAAQ,EACjCC,EAAK,UAAU,IAAI,YAAY,EAKvC,CAAC,CACL,CAAC,CACL,CAEA,eAAeb,GAAW,CACtB,IAAMgB,EAAY,SAAS,eAAe,eAAe,EACzD,GAAKA,EAEL,QAAO,KAAKA,EAAW,UAAU,EAEjC,GAAI,CAEA,IAAMC,GADW,MAAM,SAAS,QAAQ,GAClB,MAAQ,CAAC,EAE/B,GAAIA,EAAK,SAAW,EAAG,CACnBD,EAAU,UAAY,iFACtB,MACJ,CAEApB,EAAasB,EAAgBD,CAAI,EACjCE,EAAWvB,CAAU,CACzB,OAASwB,EAAO,CACZ,QAAQ,MAAM,uBAAwBA,CAAK,EAC3CJ,EAAU,UAAY,mEAC1B,EACJ,CAEA,SAASE,EAAgBD,EAAM,CAC3B,IAAMI,EAAU,CAAC,EAEjB,OAAAJ,EAAK,QAAQK,GAAO,CAChB,IAAMf,EAAWe,EAAI,UAAY,UAC5BD,EAAQd,CAAQ,IACjBc,EAAQd,CAAQ,EAAI,CAAC,GAEzBc,EAAQd,CAAQ,EAAE,KAAKe,CAAG,CAC9B,CAAC,EAEMD,CACX,CAEA,SAASF,EAAWI,EAAiBC,EAAa,GAAI,CAClD,IAAMR,EAAY,SAAS,eAAe,eAAe,EACzD,GAAI,CAACA,EAAW,OAEhB,IAAMS,EAAgB,OAAO,KAAKF,CAAe,EAEjD,GAAIE,EAAc,SAAW,EAAG,CAC5BT,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA,4DAK0BQ,EAAa,SAAS,UAAU,WAAWA,CAAU,CAAC,IAAM,EAAE;AAAA;AAAA,cAG9G,MACJ,CAEAR,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAORS,EAAc,IAAIjB,GAAO;AAAA,qMACsJ,UAAU,WAAWA,CAAG,CAAC;AAAA,8BAChM,UAAU,WAAWA,CAAG,CAAC;AAAA;AAAA,qBAElC,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAMbiB,EAAc,IAAIlB,GAAY;AAAA,+DACe,UAAU,WAAWA,CAAQ,CAAC;AAAA,+EACd,UAAU,WAAWA,CAAQ,CAAC;AAAA;AAAA,8BAE/EgB,EAAgBhB,CAAQ,EAAE,IAAIe,GAAOI,EAAcJ,EAAKE,CAAU,CAAC,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,iBAG1F,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,UAInBG,EAAiB,EACjBC,EAAc,CAClB,CAEA,SAASF,EAAcJ,EAAKE,EAAa,GAAI,CACzC,IAAIK,EAAW,UAAU,WAAWP,EAAI,QAAQ,EAC5CQ,EAASR,EAAI,OAEjB,GAAIE,EAAY,CACZ,IAAMO,EAAQ,IAAI,OAAO,IAAIP,EAAW,QAAQ,sBAAuB,MAAM,CAAC,IAAK,IAAI,EACvFK,EAAWA,EAAS,QAAQE,EAAO,uCAAuC,EAC1ED,EAASA,EAAO,QAAQC,EAAO,uCAAuC,CAC1E,CAEA,MAAO;AAAA;AAAA;AAAA,mEAGoDF,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAOjDC,CAAM;AAAA;AAAA;AAAA;AAAA,SAK5B,CAEA,SAASH,GAAmB,CACxB,IAAMzB,EAAe,SAAS,iBAAiB,mBAAmB,EAC5DC,EAAiB,SAAS,iBAAiB,eAAe,EAEhED,EAAa,QAAQE,GAAO,CACxBA,EAAI,iBAAiB,QAAS,IAAM,CAChCF,EAAa,QAAQI,GAAK,CACtBA,EAAE,UAAU,OAAO,iBAAkB,kBAAkB,EACvDA,EAAE,UAAU,IAAI,cAAe,eAAe,CAClD,CAAC,EACDF,EAAI,UAAU,IAAI,iBAAkB,kBAAkB,EACtDA,EAAI,UAAU,OAAO,cAAe,eAAe,EAEnD,IAAMG,EAAWH,EAAI,QAAQ,SAE7BD,EAAe,QAAQ6B,GAAS,CACxBzB,IAAa,OAASyB,EAAM,QAAQ,WAAazB,EACjDyB,EAAM,UAAU,OAAO,QAAQ,EAE/BA,EAAM,UAAU,IAAI,QAAQ,CAEpC,CAAC,CACL,CAAC,CACL,CAAC,CACL,CAEA,SAASJ,GAAgB,CACJ,SAAS,iBAAiB,cAAc,EAEhD,QAAQK,GAAW,CACxBA,EAAQ,iBAAiB,QAAS,IAAM,CACpC,IAAMvB,EAAOuB,EAAQ,QAAQ,WAAW,EAClCrB,EAAUF,EAAK,cAAc,cAAc,EAC3CG,EAAOH,EAAK,cAAc,WAAW,EACrCI,EAAS,CAACF,EAAQ,UAAU,SAAS,QAAQ,EAGnD,SAAS,iBAAiB,WAAW,EAAE,QAAQG,GAAa,CACpDA,IAAcL,IACdK,EAAU,cAAc,cAAc,GAAG,UAAU,IAAI,QAAQ,EAC/DA,EAAU,cAAc,WAAW,GAAG,UAAU,OAAO,YAAY,EAE3E,CAAC,EAGDH,EAAQ,UAAU,OAAO,QAAQ,EACjCC,EAAK,UAAU,OAAO,YAAY,CACtC,CAAC,CACL,CAAC,CACL,CAEA,SAASZ,GAAa,CAClB,IAAMQ,EAAc,SAAS,eAAe,YAAY,EACxD,GAAI,CAACA,EAAa,OAElB,IAAIyB,EAAgB,KAEpBzB,EAAY,iBAAiB,QAAUJ,GAAM,CACzC,IAAM8B,EAAQ9B,EAAE,OAAO,MAAM,KAAK,EAAE,YAAY,EAEhD,aAAa6B,CAAa,EAC1BA,EAAgB,WAAW,IAAM,CAI7B,GAFuB,SAAS,cAAc,mBAAmB,EAI7DE,EAAyBD,CAAK,UACvBvC,GAAc,OAAO,KAAKA,CAAU,EAAE,OAAS,EAAG,CAEzD,GAAIuC,EAAM,OAAS,EAAG,CAClBhB,EAAWvB,CAAU,EACrB,MACJ,CAEA,IAAMyC,EAAW,CAAC,EAClB,OAAO,QAAQzC,CAAU,EAAE,QAAQ,CAAC,CAACW,EAAUU,CAAI,IAAM,CACrD,IAAMqB,EAAerB,EAAK,OAAOK,GAC7BA,EAAI,SAAS,YAAY,EAAE,SAASa,CAAK,GACzCb,EAAI,OAAO,YAAY,EAAE,SAASa,CAAK,CAC3C,EACIG,EAAa,OAAS,IACtBD,EAAS9B,CAAQ,EAAI+B,EAE7B,CAAC,EAEDnB,EAAWkB,EAAUF,CAAK,CAC9B,CACJ,EAAG,GAAG,CACV,CAAC,CACL,CAEA,SAASC,EAAyBD,EAAO,CACrC,IAAMI,EAAW,SAAS,iBAAiB,WAAW,EAChDpC,EAAiB,SAAS,iBAAiB,eAAe,EAC1DqC,EAAY,SAAS,eAAe,YAAY,EAElDC,EAAe,EAEnBF,EAAS,QAAQ7B,GAAQ,CACrB,IAAMgC,EAAahC,EAAK,cAAc,qCAAqC,EACrEiC,EAAYjC,EAAK,cAAc,oBAAoB,EAEnDmB,EAAWa,EAAaA,EAAW,YAAY,YAAY,EAAI,GAC/DZ,EAASa,EAAYA,EAAU,YAAY,YAAY,EAAI,GAE7D,CAACR,GAASN,EAAS,SAASM,CAAK,GAAKL,EAAO,SAASK,CAAK,GAC3DzB,EAAK,UAAU,OAAO,QAAQ,EAC9B+B,KAEA/B,EAAK,UAAU,IAAI,QAAQ,CAEnC,CAAC,EAGDP,EAAe,QAAQK,GAAO,CAC1B,IAAMoC,EAAepC,EAAI,iBAAiB,wBAAwB,EAClEA,EAAI,UAAU,OAAO,SAAUoC,EAAa,SAAW,CAAC,CAC5D,CAAC,EAGGJ,GACAA,EAAU,UAAU,OAAO,SAAUC,EAAe,CAAC,CAE7D,CAEA,SAASI,GAAU,CACfjD,EAAa,CAAC,CAClB,CAEA,MAAO,CACH,KAAAC,EACA,QAAAgD,CACJ,CACJ,GAAG,EAEH,OAAO,QAAUpD,GACVD,GAAQC,KClVf,IAAAqD,GAAA,GAAAC,EAAAD,GAAA,kBAAAE,KAIO,SAASA,GAAaC,EAAU,CAEnC,IAAMC,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,KAAO,eAAeD,EAAS,IAAI,IACxCC,EAAK,UAAY,cAGjB,IAAMC,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,gEAGtB,IAAIC,EAAS,GAcb,GAZI,OAAOH,EAAS,WAAc,UAAYA,EAAS,UAAWG,EAASH,EAAS,UAC3E,OAAOA,EAAS,OAAU,UAAYA,EAAS,MAAOG,EAASH,EAAS,MACxEA,EAAS,OAAS,OAAOA,EAAS,OAAU,SAAUG,EAASH,EAAS,MAAM,KAAOA,EAAS,MAAM,KAAOA,EAAS,WAAa,GACjI,OAAOA,EAAS,cAAiB,UAAYA,EAAS,aAAcG,EAASH,EAAS,aACtFA,EAAS,cAAgB,OAAOA,EAAS,cAAiB,SAAUG,EAASH,EAAS,aAAa,KAAOA,EAAS,aAAa,KAAO,GACvI,OAAOA,EAAS,YAAe,UAAYA,EAAS,WAAYG,EAASH,EAAS,WAClFA,EAAS,YAAc,OAAOA,EAAS,YAAe,SAAUG,EAASH,EAAS,WAAW,KAAOA,EAAS,WAAW,KAAO,GAC/H,OAAOA,EAAS,WAAc,UAAYA,EAAS,UAAWG,EAASH,EAAS,UAChFA,EAAS,WAAa,OAAOA,EAAS,WAAc,WAAUG,EAASH,EAAS,UAAU,KAAOA,EAAS,UAAU,KAAO,IAIhIG,EAAQ,CACR,IAAMC,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,IAAMD,EACVC,EAAI,IAAMJ,EAAS,MAAQ,GAC3BI,EAAI,UAAY,qFAChBA,EAAI,QAAU,OACdA,EAAI,SAAW,QAEfA,EAAI,QAAWC,GAAQ,CACnB,GAAI,CACAD,EAAI,OAAO,EACX,IAAME,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,UAAY,mGACrBA,EAAS,UAAY,ubACrBJ,EAAU,YAAYI,CAAQ,CAClC,MAAY,CAAC,CACjB,EACAJ,EAAU,YAAYE,CAAG,CAC7B,KAAO,CACH,IAAME,EAAW,SAAS,cAAc,KAAK,EAC7CA,EAAS,UAAY,mGACrBA,EAAS,UAAY,ubACrBJ,EAAU,YAAYI,CAAQ,CAClC,CAEA,IAAMC,EAAU,SAAS,cAAc,KAAK,EAE5CA,EAAQ,UAAY,oFACpBL,EAAU,YAAYK,CAAO,EAC7BN,EAAK,YAAYC,CAAS,EAE1B,IAAMM,EAAO,SAAS,cAAc,IAAI,EAKxC,GAJAA,EAAK,UAAY,qHACjBA,EAAK,YAAcR,EAAS,KAC5BC,EAAK,YAAYO,CAAI,EAEjBR,EAAS,cAAe,CACxB,IAAMS,EAAQ,SAAS,cAAc,GAAG,EACxCA,EAAM,UAAY,wDAClBA,EAAM,YAAc,GAAGT,EAAS,aAAa,YAC7CC,EAAK,YAAYQ,CAAK,CAC1B,CAEA,OAAOR,CACX,CAzEA,IAAAS,GAAAC,EAAA,QCAA,IAAAC,GAAA,GAAAC,EAAAD,GAAA,aAAAE,KAAA,IAKMC,GAkpBCD,GAvpBPE,GAAAC,EAAA,KAKMF,IAAY,UAAW,CACzB,aAEA,IAAIG,EAAqB,KAEzB,eAAeC,GAAO,CAClB,MAAM,QAAQ,IAAI,CACdC,EAAgB,EAChBC,EAAqB,EACrBC,EAAuB,EACvBC,EAAgB,EAChBC,EAAe,EACfC,EAAmB,EACnBC,EAAgB,EAChBC,EAAiB,CACrB,CAAC,EACDC,EAAmB,CACvB,CAGI,eAAeD,GAAmB,CAC9B,IAAME,EAAY,SAAS,eAAe,mBAAmB,EAC7D,GAAKA,EACL,QAAO,KAAKA,EAAW,UAAU,EACjC,GAAI,CAEA,IAAIC,EAAqB,MAAM,cAAc,cAAc,CAAE,SAAU,EAAG,SAAU,EAAK,CAAC,EACtFC,EAAaD,GAAoB,MAAM,SAAWA,GAAoB,MAAQA,GAAoB,SAAW,CAAC,EAC9GE,EAAa,CAAC,EAElB,QAAWC,KAAYF,EAAY,CAC/B,IAAIG,EAAmB,MAAM,YAAY,YAAY,CAAE,SAAUD,EAAS,GAAI,SAAU,GAAM,SAAU,CAAE,CAAC,EACvGE,EAAWD,GAAkB,MAAM,SAAWA,GAAkB,MAAQA,GAAkB,SAAW,CAAC,EAC1G,QAAWE,KAAWD,EAAU,CAC5B,IAAIE,EAAkB,MAAM,YAAY,WAAWD,EAAQ,GAAI,CAAE,SAAU,CAAE,CAAC,EAC1EE,EAAUD,GAAiB,MAAM,SAAWA,GAAiB,MAAQA,GAAiB,SAAW,CAAC,EAEtGC,EAAQ,QAAQC,GAAK,CACjBA,EAAE,SAAWH,EACbG,EAAE,UAAYN,CAClB,CAAC,EACDD,EAAW,KAAK,GAAGM,CAAO,CAC9B,CACJ,CAEA,GADAT,EAAU,UAAY,GAClB,CAACG,EAAW,OAAQ,CACpBH,EAAU,UAAY,2EACtB,MACJ,CAEAG,EAAaA,EAAW,MAAM,EAAG,CAAC,EAClCA,EAAW,QAAQQ,GAAU,CACzB,IAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,wEACjBA,EAAK,UAAY;AAAA;AAAA;AAAA,kCAGHD,EAAO,MAAM,aAAa,CAAC,GAAKA,EAAO,MAAM,WAAW,CAAC,GAAK,GAAG;AAAA;AAAA;AAAA,2FAGRA,EAAO,MAAM,YAAcA,EAAO,MAAM,UAAY,WAAW;AAAA,yFACjEA,EAAO,WAAa,IAAI,KAAKA,EAAO,UAAU,EAAE,mBAAmB,EAAI,EAAE;AAAA;AAAA;AAAA;AAAA,8BAIpI,gcAAgc,OAAO,KAAK,MAAMA,EAAO,QAAU,CAAC,CAAC,CAAC;AAAA;AAAA,wFAE5a,UAAU,WAAWA,EAAO,OAAS,EAAE,CAAC;AAAA,iFAC/C,UAAU,WAAWA,EAAO,SAAW,EAAE,CAAC;AAAA,uGACpBA,EAAO,UAAY,UAAU,WAAWA,EAAO,UAAU,IAAI,EAAI,EAAE,GAAGA,EAAO,SAAW,MAAQ,UAAU,WAAWA,EAAO,SAAS,IAAI,EAAI,EAAE;AAAA,sBAElOX,EAAU,YAAYY,CAAI,CAC9B,CAAC,CACL,OAASC,EAAO,CACZ,QAAQ,MAAM,+BAAgCA,CAAK,EACnDb,EAAU,UAAY,mGAC1B,EACJ,CACJ,eAAeH,GAAkB,CAC7B,IAAMG,EAAY,SAAS,eAAe,cAAc,EACxD,GAAI,CAACA,EAAW,OAEhB,IAAMc,EAAOd,EAAU,cAAc,gBAAgB,GAAKA,EAC1D,OAAO,KAAKc,EAAM,UAAU,EAE5B,GAAI,CAEA,IAAMC,EAAW,MAAM,YAAY,YAAY,CAAE,WAAY,GAAM,SAAU,CAAE,CAAC,EAC1ET,EAAWS,EAAS,MAAM,SAAWA,EAAS,MAAQA,EAAS,SAAW,CAAC,EAEjF,GAAIT,EAAS,SAAW,EAAG,CACvBQ,EAAK,UAAY,2EACjB,MACJ,CAEAA,EAAK,UAAYR,EAAS,IAAIC,GAAW,CAErC,IAAIS,EAAQ,KACZ,OAAIT,EAAQ,kBAAoBA,EAAQ,iBAAmB,IACvDS,EAAQ,IAAIT,EAAQ,gBAAgB,KAEjC,YAAY,OAAOA,EAAS,CAAE,UAAW,CAAC,CAACS,EAAO,MAAAA,EAAO,UAAW,OAAQ,CAAC,CACxF,CAAC,EAAE,KAAK,EAAE,EAEV,GAAI,CACaF,EAAK,iBAAiB,KAAK,EACnC,QAAQ,CAACG,EAAKC,IAAM,CACjBA,EAAI,IACJD,EAAI,aAAa,UAAW,OAAO,EACnCA,EAAI,aAAa,gBAAiB,MAAM,EACxCA,EAAI,aAAa,WAAY,OAAO,EAE5C,CAAC,CACL,MAAQ,CAAC,CACT,YAAY,WAAWH,CAAI,CAC/B,OAASD,EAAO,CACZ,QAAQ,MAAM,+BAAgCA,CAAK,EACnDC,EAAK,UAAY,+FACrB,CACJ,CAEA,eAAevB,GAAkB,CAC7B,IAAMS,EAAY,SAAS,eAAe,aAAa,EACvD,GAAKA,EAEL,GAAI,CACA,IAAMe,EAAW,MAAM,SAAS,WAAW,WAAW,EAChDI,EAAUJ,EAAS,MAAM,SAAWA,EAAS,MAAQA,EAAS,SAAW,CAAC,EAEhF,GAAII,EAAQ,SAAW,EAAG,CACtBnB,EAAU,UAAY,GACtB,MACJ,CAEAA,EAAU,UAAY;AAAA;AAAA;AAAA,0BAGRmB,EAAQ,IAAI,CAACC,EAAQC,IAAU;AAAA,qDACJA,IAAU,EAAI,GAAK,QAAQ,+BAA+BA,CAAK;AAAA,2CACzED,EAAO,UAAY,GAAG;AAAA;AAAA,+CAElBA,EAAO,KAAK;AAAA,+CACZ,UAAU,WAAWA,EAAO,OAAS,EAAE,CAAC;AAAA;AAAA,mDAEpCC,IAAU,EAAI,QAAU,MAAM;AAAA;AAAA;AAAA,sCAG3CD,EAAO,OAASA,EAAO,SAAW;AAAA;AAAA;AAAA,kDAGtBA,EAAO,MAAQ,0EAA0E,UAAU,WAAWA,EAAO,KAAK,CAAC,QAAU,EAAE;AAAA,kDACvIA,EAAO,SAAW,oDAAoD,UAAU,WAAWA,EAAO,QAAQ,CAAC,OAAS,EAAE;AAAA,kDACrHA,EAAO,WAAaA,EAAO,YAAe;AAAA;AAAA,0DAEnC,UAAU,WAAWA,EAAO,WAAaA,EAAO,WAAW,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,kDAKlE,EAAE;AAAA;AAAA;AAAA,sCAGd,EAAE;AAAA;AAAA;AAAA,yBAGjB,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,sBAEbD,EAAQ,OAAS,EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAYbA,EAAQ,IAAI,CAACG,EAAGD,IAAU;AAAA,wFACgCA,IAAU,EAAI,6BAA+B,+EAA+E,iBAAiBA,CAAK,6BAA6BA,EAAQ,CAAC;AAAA,6BACnP,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,sBAEf,EAAE;AAAA;AAAA,cAIVF,EAAQ,OAAS,GACjBI,EAAeJ,EAAQ,MAAM,CAErC,OAASN,EAAO,CAEZ,QAAQ,KAAK,4BAA6BA,GAAO,QAAUA,CAAK,CACpE,CACJ,CAEA,SAASU,EAAeC,EAAa,CACjC,IAAIC,EAAe,EACbC,EAAS,SAAS,iBAAiB,aAAa,EAChDC,EAAO,SAAS,iBAAiB,mBAAmB,EACpDC,EAAU,SAAS,cAAc,YAAY,EAC7CC,EAAU,SAAS,cAAc,YAAY,EAEnD,SAASC,EAAUT,EAAO,CACtBK,EAAOD,CAAY,EAAE,UAAU,IAAI,QAAQ,EAC3CE,EAAKF,CAAY,GAAG,UAAU,OAAO,UAAU,EAC/CE,EAAKF,CAAY,GAAG,UAAU,IAAI,aAAa,EAE/CA,GAAgBJ,EAAQG,GAAeA,EAEvCE,EAAOD,CAAY,EAAE,UAAU,OAAO,QAAQ,EAC9CE,EAAKF,CAAY,GAAG,UAAU,IAAI,UAAU,EAC5CE,EAAKF,CAAY,GAAG,UAAU,OAAO,aAAa,CACtD,CAEAG,GAAS,iBAAiB,QAAS,IAAM,CACrCE,EAAUL,EAAe,CAAC,EAC1BM,EAAc,CAClB,CAAC,EAEDF,GAAS,iBAAiB,QAAS,IAAM,CACrCC,EAAUL,EAAe,CAAC,EAC1BM,EAAc,CAClB,CAAC,EAEDJ,EAAK,QAAQ,CAACK,EAAKX,IAAU,CACzBW,EAAI,iBAAiB,QAAS,IAAM,CAChCF,EAAUT,CAAK,EACfU,EAAc,CAClB,CAAC,CACL,CAAC,EAED,SAASA,GAAgB,CACjB1C,GACA,cAAcA,CAAkB,EAEpCA,EAAqB,YAAY,IAAMyC,EAAUL,EAAe,CAAC,EAAG,GAAI,CAC5E,CAGA,GAAI,CACA,IAAMQ,EAAkB,SAAS,cAAc,cAAc,EACzDC,EAAc,EAClBD,GAAiB,iBAAiB,aAAeE,GAAM,CACnDD,EAAcC,EAAE,QAAQ,CAAC,EAAE,OAC/B,EAAG,CAAE,QAAS,EAAK,CAAC,EACpBF,GAAiB,iBAAiB,WAAaE,GAAM,CAEjD,IAAMC,EADYD,EAAE,eAAe,CAAC,EAAE,QACfD,EACnB,KAAK,IAAIE,CAAE,EAAI,KACXA,EAAK,EACLN,EAAUL,EAAe,CAAC,EAE1BK,EAAUL,EAAe,CAAC,EAE9BM,EAAc,EAEtB,CAAC,CACL,MAAc,CAEd,CAEAA,EAAc,CAClB,CAEA,eAAevC,GAAuB,CAClC,IAAMQ,EAAY,SAAS,eAAe,mBAAmB,EAC7D,GAAI,CAACA,EAAW,OAEhB,IAAMc,EAAOd,EAAU,cAAc,gBAAgB,GAAKA,EAC1D,OAAO,KAAKc,EAAM,UAAU,EAE5B,GAAI,CACA,IAAMC,EAAW,MAAM,YAAY,YAAY,CAAC,EAC1CT,EAAWS,EAAS,MAAM,SAAWA,EAAS,MAAQA,EAAS,SAAW,CAAC,EAEjF,GAAIT,EAAS,SAAW,EAAG,CACvBQ,EAAK,UAAY,gFACjB,MACJ,CAEAA,EAAK,UAAYR,EAAS,IAAIC,GAAW,CACrC,IAAIS,EAAQ,KACZ,OAAIT,EAAQ,kBAAoBA,EAAQ,iBAAmB,IACvDS,EAAQ,IAAIT,EAAQ,gBAAgB,KAEjC,YAAY,OAAOA,EAAS,CAAE,UAAW,CAAC,CAACS,EAAO,MAAAA,EAAO,UAAW,OAAQ,CAAC,CACxF,CAAC,EAAE,KAAK,EAAE,EAEV,GAAI,CACaF,EAAK,iBAAiB,KAAK,EACnC,QAAQ,CAACG,EAAKC,IAAM,CACjBA,EAAI,IACJD,EAAI,aAAa,UAAW,OAAO,EACnCA,EAAI,aAAa,gBAAiB,MAAM,EACxCA,EAAI,aAAa,WAAY,OAAO,EAE5C,CAAC,CACL,MAAQ,CAAC,CACT,YAAY,WAAWH,CAAI,CAC/B,OAASD,EAAO,CACZ,QAAQ,MAAM,oCAAqCA,CAAK,EACxDC,EAAK,UAAY,+FACrB,CACJ,CAEA,eAAerB,GAAyB,CACpC,IAAMO,EAAY,SAAS,eAAe,qBAAqB,EAC/D,GAAKA,EAIL,QAAO,KAAKA,EAAW,UAAU,EAEjC,GAAI,CAEA,GAAI,CAAE,OAAO,WAAW,WAAW,qBAAqB,CAAG,MAAY,CAAC,CACxE,IAAMe,EAAW,MAAM,OAAO,UAAU,IAAI,eAAgB,CAAE,UAAW,EAAG,YAAa,EAAK,EAAG,CAAE,SAAU,EAAM,CAAC,EAE9Gb,EAAaa,EAAS,MAAM,SAAWA,EAAS,MAAQA,EAAS,SAAW,CAAC,EAEnF,GAAIb,EAAW,SAAW,EAAG,CACzBF,EAAU,UAAY,GACtB,MACJ,CAGA,IAAIqC,EACJ,GAAI,CACAA,GAAgB,KAAM,wCAAyC,YACnE,OAASF,EAAG,CACR,QAAQ,MAAM,iCAAkCA,CAAC,EACjD,MACJ,CAEAnC,EAAU,UAAY,GAEtBE,EAAW,QAAQE,GAAY,CAC3B,IAAMQ,EAAOyB,EAAajC,CAAQ,EAElC,GAAI,CACA,IAAMkC,EAAQ1B,EAAK,cAAc,KAAK,EACtC,QAAQ,KAAK,wBAAyBR,EAAS,KAAMkC,EAAQA,EAAM,IAAM,UAAU,CACvF,MAAY,CAA8B,CAC1CtC,EAAU,YAAYY,CAAI,CAC9B,CAAC,EACDZ,EAAU,UAAU,IAAI,OAAO,cAAc,iBAAiB,iBAAiB,iBAAiB,QAAQ,UAAU,CACtH,OAASa,EAAO,CACZ,QAAQ,MAAM,6BAA8BA,CAAK,EACjDb,EAAU,UAAY,EAC1B,EACJ,CAEA,eAAeN,GAAkB,CAC7B,IAAMM,EAAY,SAAS,eAAe,cAAc,EACxD,GAAI,CAACA,EAAW,OAEhB,IAAMc,EAAOd,EAAU,cAAc,gBAAgB,GAAKA,EAC1D,OAAO,KAAKc,EAAM,UAAU,EAE5B,GAAI,CACA,IAAMC,EAAW,MAAM,YAAY,eAAe,CAAC,EAC7CT,EAAWS,EAAS,MAAM,SAAWA,EAAS,MAAQA,EAAS,SAAW,CAAC,EAEjF,GAAIT,EAAS,SAAW,EAAG,CACvBQ,EAAK,UAAY,2EACjB,MACJ,CAEAA,EAAK,UAAYR,EAAS,IAAIC,GAAW,CACrC,IAAIS,EAAQ,KACZ,OAAIT,EAAQ,kBAAoBA,EAAQ,iBAAmB,IACvDS,EAAQ,IAAIT,EAAQ,gBAAgB,KAEjC,YAAY,OAAOA,EAAS,CAAE,UAAW,CAAC,CAACS,EAAO,MAAAA,EAAO,UAAW,OAAQ,CAAC,CACxF,CAAC,EAAE,KAAK,EAAE,EAEV,GAAI,CACaF,EAAK,iBAAiB,KAAK,EACnC,QAAQ,CAACG,EAAKC,IAAM,CACjBA,EAAI,IACJD,EAAI,aAAa,UAAW,OAAO,EACnCA,EAAI,aAAa,gBAAiB,MAAM,EACxCA,EAAI,aAAa,WAAY,OAAO,EAE5C,CAAC,CACL,MAAQ,CAAC,CACT,YAAY,WAAWH,CAAI,CAC/B,OAASD,EAAO,CACZ,QAAQ,MAAM,+BAAgCA,CAAK,EACnDC,EAAK,UAAY,uEACrB,CACJ,CAEA,eAAenB,GAAiB,CAC5B,IAAMK,EAAY,SAAS,eAAe,mBAAmB,GAAK,SAAS,eAAe,mBAAmB,EAC7G,GAAKA,EAEL,GAAI,CACA,IAAMe,EAAW,MAAM,SAAS,cAAc,EAC1CwB,EAAaxB,GAAU,MAAM,SAAWA,GAAU,SAAWA,GAAU,MAAQ,CAAC,EASpF,GARK,MAAM,QAAQwB,CAAU,IACrBA,GAAc,OAAOA,GAAe,SACpCA,EAAa,MAAM,QAAQA,EAAW,KAAK,EAAIA,EAAW,MAAQ,CAACA,CAAU,EAE7EA,EAAa,CAAC,GAIlBA,EAAW,SAAW,EAAG,CACzBvC,EAAU,UAAY,GACtB,MACJ,CAEA,IAAMwC,EAAQD,EAAW,CAAC,GAAK,CAAC,EAChCvC,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAQA,UAAU,WAAWwC,EAAM,OAASA,EAAM,MAAQ,EAAE,CAAC;AAAA;AAAA,8BAEzDA,EAAM,YAAc;AAAA,oEACkB,UAAU,WAAWA,EAAM,WAAW,CAAC;AAAA,8BAC3E,EAAE;AAAA,8BACJA,EAAM,eAAiB;AAAA;AAAA,sCAEfA,EAAM,gBAAkB,aAAe,GAAGA,EAAM,cAAc,QAAU,QAAQ,UAAU,YAAYA,EAAM,cAAc,CAAC,EAAE;AAAA;AAAA,8BAEnI,EAAE;AAAA;AAAA;AAAA,8BAGJA,EAAM,KAAO;AAAA;AAAA;AAAA,wGAG6D,UAAU,WAAWA,EAAM,IAAI,CAAC;AAAA;AAAA,8BAExG,EAAE;AAAA,4DAC0BA,EAAM,IAAM,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAUlE,OAAS3B,EAAO,CACZ,QAAQ,KAAK,0BAA2BA,GAAO,QAAUA,CAAK,EAC9Db,EAAU,UAAY,EAC1B,CACJ,CAEA,eAAeJ,GAAqB,CAChC,IAAMI,EAAY,SAAS,eAAe,kBAAkB,EAG5D,GAFI,CAACA,GAEDA,EAAU,SAAS,OAAQ,OAC/BA,EAAU,QAAQ,OAAS,IAG3BA,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAYtB,IAAMyC,EAAW,OAAO,gBAAkB,CAAC,EACrCC,EAAYD,EAAS,iBAAmB,qBACxCE,EAAaF,EAAS,kBAAoB,cAEhD,GAAI,CAEA,IAAIvC,EAAa,CAAC,EAClB,GAAI,OAAO,aAAiB,KAAe,aAAa,cACpD,GAAI,CACA,IAAMa,EAAW,MAAM,aAAa,cAAc,CAAE,SAAU,GAAM,SAAU,CAAE,CAAC,EACjFb,EAAaa,GAAU,MAAM,SAAWA,GAAU,MAAQA,GAAU,SAAW,CAAC,CACpF,OAASoB,EAAG,CACR,QAAQ,KAAK,oCAAqCA,CAAC,CACvD,CAGJnC,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAwCJE,EAAW,OAAS,EAAI;AAAA;AAAA;AAAA;AAAA,0CAIZA,EAAW,MAAM,EAAG,CAAC,EAAE,IAAI0C,GAAO;AAAA,uDACrBD,CAAU,YAAYC,EAAI,IAAI;AAAA,kDACnCA,EAAI,KAAO,SAASA,EAAI,IAAI,UAAY,EAAE;AAAA,kDAC1C,UAAU,WAAWA,EAAI,IAAI,CAAC;AAAA;AAAA,yCAEvC,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,8BAGnB,EAAE;AAAA;AAAA,2CAESF,CAAS;AAAA;AAAA;AAAA;AAAA,2CAITC,CAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aA6C7C,OAAS9B,EAAO,CACZ,QAAQ,KAAK,mCAAoCA,CAAK,EAEtDb,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA,+BAIH0C,CAAS;AAAA;AAAA;AAAA;AAAA,aAKhC,CACJ,CAEA,SAAS3C,GAAqB,CAC1B,IAAM8C,EAAO,SAAS,eAAe,iBAAiB,EACjDA,GAELA,EAAK,iBAAiB,SAAU,MAAOV,GAAM,CACzCA,EAAE,eAAe,EAEjB,IAAMW,EAAaD,EAAK,cAAc,qBAAqB,EACrDE,EAAYF,EAAK,cAAc,uBAAuB,EACtDG,EAAQF,GAAY,OAAO,KAAK,EAEtC,GAAI,CAACE,EAAO,CACR,MAAM,MAAM,kCAAkC,EAC9C,MACJ,CAEA,IAAMC,EAAeF,EAAU,YAC/BA,EAAU,SAAW,GACrBA,EAAU,UAAY,6VAEtB,GAAI,CACA,MAAM,WAAW,kBAAkB,CAAE,MAAAC,EAAO,KAAM,YAAa,CAAC,EAChE,MAAM,QAAQ,4BAA4B,EAC1CF,EAAW,MAAQ,EACvB,OAASjC,EAAO,CACZ,MAAM,MAAMA,EAAM,SAAW,wCAAwC,CACzE,QAAE,CACEkC,EAAU,SAAW,GACrBA,EAAU,YAAcE,CAC5B,CACJ,CAAC,CACL,CAEA,SAASC,GAAU,CACX7D,IACA,cAAcA,CAAkB,EAChCA,EAAqB,KAE7B,CAEA,MAAO,CACH,KAAAC,EACA,QAAA4D,CACJ,CACJ,GAAG,EAEH,OAAO,SAAWhE,GACXD,GAAQC,KCvpBf,IAAAiE,GAAA,GAAAC,EAAAD,GAAA,aAAAE,KAAA,IAKMC,GA0JCD,GA/JPE,GAAAC,EAAA,KAKMF,IAAa,UAAW,CAC1B,aAEA,eAAeG,GAAO,CAClB,IAAMC,EAAWC,EAAmB,EAChCD,GACA,MAAME,EAAiBF,CAAQ,EAEnCG,EAAoB,CACxB,CAEA,SAASF,GAAqB,CAC1B,IAAMG,EAAO,OAAO,SAAS,SAE7B,GAAIA,EAAK,SAAS,SAAS,EAAG,MAAO,iBACrC,GAAIA,EAAK,SAAS,OAAO,EAAG,MAAO,mBACnC,GAAIA,EAAK,SAAS,QAAQ,GAAKA,EAAK,SAAS,QAAQ,EAAG,MAAO,gBAC/D,GAAIA,EAAK,SAAS,UAAU,EAAG,MAAO,kBACtC,GAAIA,EAAK,SAAS,QAAQ,EAAG,MAAO,gBAEpC,IAAMC,EAAQD,EAAK,MAAM,mBAAmB,EAC5C,OAAOC,EAAQA,EAAM,CAAC,EAAI,IAC9B,CAEA,eAAeH,EAAiBF,EAAU,CACtC,IAAMM,EAAY,SAAS,eAAe,eAAe,EACzD,GAAKA,EAEL,QAAO,KAAKA,EAAW,UAAU,EAEjC,GAAI,CAEA,IAAMC,GADW,MAAM,SAAS,aAAaP,CAAQ,GAC/B,KAEtB,GAAI,CAACO,EAAM,CACPD,EAAU,UAAY,gEACtB,MACJ,CAEA,SAAS,MAAQ,GAAGC,EAAK,KAAK,aAE9BC,EAAgBD,CAAI,CACxB,OAASE,EAAO,CACZ,QAAQ,MAAM,6BAA8BA,CAAK,EACjDH,EAAU,UAAY,sEAC1B,EACJ,CAEA,SAASE,EAAgBD,EAAM,CAC3B,IAAMD,EAAY,SAAS,eAAe,eAAe,EACnDI,EAAiB,SAAS,eAAe,aAAa,EACtDC,EAAe,SAAS,eAAe,mBAAmB,EAWhE,GATID,IACAA,EAAe,UAAY;AAAA,2EACoC,UAAU,WAAWH,EAAK,KAAK,CAAC;AAAA,kBACzFA,EAAK,aAAe;AAAA,0EACoC,UAAU,WAAWA,EAAK,YAAY,CAAC;AAAA,kBAC7F,EAAE;AAAA,eAIVD,IACAA,EAAU,UAAY;AAAA;AAAA,sBAEZC,EAAK,OAAO;AAAA;AAAA,cAKlBI,GAAc,CACd,IAAMC,EAAWN,EAAU,iBAAiB,QAAQ,EACpD,GAAIM,EAAS,OAAS,EAAG,CACrB,IAAIC,EAAU,0BACdD,EAAS,QAAQ,CAACE,EAASC,IAAU,CACjC,IAAMC,EAAK,WAAWD,CAAK,GAC3BD,EAAQ,GAAKE,EAEb,IAAMC,EAAQH,EAAQ,UAAY,KAAO,OAAS,OAClDD,GAAW;AAAA,wCACKG,CAAE,0BAA0BC,CAAK;AAAA,kCACvCH,EAAQ,WAAW;AAAA;AAAA,yBAGjC,CAAC,EACDD,GAAW,SACXF,EAAa,UAAYE,CAC7B,CACJ,CAER,CAEA,SAASV,GAAsB,CACV,SAAS,iBAAiB,sBAAsB,EAExD,QAAQe,GAAQ,CACrBA,EAAK,iBAAiB,QAAUC,GAAM,CAClCA,EAAE,eAAe,EACjB,IAAMC,EAAWF,EAAK,aAAa,MAAM,EAAE,MAAM,CAAC,EAC5CG,EAAS,SAAS,eAAeD,CAAQ,EAE/C,GAAIC,EAAQ,CAER,IAAMC,EAAiBD,EAAO,sBAAsB,EAAE,IAAM,OAAO,YAAc,IAEjF,OAAO,SAAS,CACZ,IAAKC,EACL,SAAU,QACd,CAAC,CACL,CACJ,CAAC,CACL,CAAC,EAGD,IAAMC,EAAkB,CACpB,WAAY,sBACZ,UAAW,CACf,EAEMC,EAAW,IAAI,qBAAsBC,GAAY,CACnDA,EAAQ,QAAQC,GAAS,CACrB,IAAMV,EAAKU,EAAM,OAAO,GAClBC,EAAU,SAAS,cAAc,+BAA+BX,CAAE,IAAI,EAExEU,EAAM,iBACN,SAAS,iBAAiB,sBAAsB,EAAE,QAAQR,GAAQ,CAC9DA,EAAK,UAAU,OAAO,mBAAoB,aAAa,EACvDA,EAAK,UAAU,IAAI,eAAe,CACtC,CAAC,EAEGS,IACAA,EAAQ,UAAU,IAAI,mBAAoB,aAAa,EACvDA,EAAQ,UAAU,OAAO,eAAe,GAGpD,CAAC,CACL,EAAGJ,CAAe,EAElB,SAAS,iBAAiB,sCAAsC,EAAE,QAAQT,GAAW,CAC7EA,EAAQ,IACRU,EAAS,QAAQV,CAAO,CAEhC,CAAC,CACL,CAEA,SAASc,GAAU,CAAC,CAEpB,MAAO,CACH,KAAA7B,EACA,QAAA6B,CACJ,CACJ,GAAG,EAEH,OAAO,UAAYhC,GACZD,GAAQC,KC/Jf,IAAAiC,GAAA,GAAAC,EAAAD,GAAA,aAAAE,KAAA,IAKMC,GA+aCD,GApbPE,GAAAC,EAAA,KAKMF,IAAc,UAAW,CAC3B,aAEA,IAAIG,EAAc,EACdC,EAAgB,MAEpB,eAAeC,GAAO,CAClB,GAAI,CAAC,UAAU,YAAY,EAAG,OAE9B,IAAMC,EAAUC,EAAkB,EAC9BD,EACA,MAAME,EAAgBF,CAAO,GAE7B,MAAMG,EAAW,EACjBC,EAAY,EAEpB,CAEA,SAASH,GAAoB,CAEzB,IAAMI,EADO,OAAO,SAAS,SACV,MAAM,oBAAoB,EAC7C,OAAOA,EAAQA,EAAM,CAAC,EAAI,IAC9B,CAEA,eAAeF,GAAa,CACxB,IAAMG,EAAY,SAAS,eAAe,aAAa,EACvD,GAAKA,EAEL,QAAO,KAAKA,EAAW,UAAU,EAEjC,GAAI,CACA,IAAMC,EAAS,CACX,KAAMV,EACN,MAAO,EACX,EAEIC,IAAkB,QAClBS,EAAO,OAAST,GAGpB,IAAMU,EAAW,MAAM,UAAU,OAAOD,CAAM,EACxCE,EAASD,EAAS,MAAQ,CAAC,EAC3BE,EAAOF,EAAS,MAAQ,CAAC,EAE/BG,EAAaF,EAAQC,CAAI,CAC7B,OAASE,EAAO,CACZ,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CN,EAAU,UAAY,qEAC1B,EACJ,CAEA,SAASK,EAAaF,EAAQC,EAAM,CAChC,IAAMJ,EAAY,SAAS,eAAe,aAAa,EACvD,GAAI,CAACA,EAAW,OAEhB,GAAIG,EAAO,SAAW,EAAG,CACrBH,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAYtB,MACJ,CAEAA,EAAU,UAAY;AAAA;AAAA,kBAEZG,EAAO,IAAII,GAASC,EAAgBD,CAAK,CAAC,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,cAExDH,EAAK,YAAc,EAAI;AAAA,2DACsB,WAAW,OAAO,CACzD,YAAaA,EAAK,cAAgBb,EAClC,WAAYa,EAAK,YACjB,WAAYA,EAAK,KACrB,CAAC,CAAC;AAAA,cACF,EAAE;AAAA,UAGkB,SAAS,eAAe,mBAAmB,GAClD,iBAAiB,QAAUK,GAAM,CAClD,IAAMC,EAAUD,EAAE,OAAO,QAAQ,aAAa,EAC1CC,IACAnB,EAAc,SAASmB,EAAQ,QAAQ,IAAI,EAC3Cb,EAAW,EACX,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,QAAS,CAAC,EAEtD,CAAC,CACL,CAEA,SAASW,EAAgBD,EAAO,CAU5B,IAAMI,EATgB,CAClB,QAAS,gCACT,WAAY,4BACZ,QAAS,gCACT,UAAW,8BACX,UAAW,0BACX,SAAU,2BACd,EAEkCJ,EAAM,MAAM,GAAK,4BAC7CK,EAAQL,EAAM,OAAS,CAAC,EACxBM,EAAeD,EAAM,MAAM,EAAG,CAAC,EAC/BE,EAAiBF,EAAM,OAAS,EAEtC,MAAO;AAAA;AAAA;AAAA;AAAA,kEAImD,UAAU,WAAWL,EAAM,cAAgBA,EAAM,EAAE,CAAC;AAAA,qEACjD,UAAU,WAAWA,EAAM,UAAU,CAAC;AAAA;AAAA;AAAA,kFAGzBI,CAAW;AAAA,8BAC/D,UAAU,WAAWJ,EAAM,gBAAkBA,EAAM,MAAM,CAAC;AAAA;AAAA,2CAE7CA,EAAM,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAOzBM,EAAa,IAAIE,GAAQ;AAAA;AAAA;AAAA,gDAGHA,EAAK,SAAS,OAAS,gCAAgC;AAAA;AAAA;AAAA,mFAGpB,UAAU,WAAWA,EAAK,SAAS,MAAQA,EAAK,YAAY,CAAC;AAAA,4EACpEA,EAAK,QAAQ;AAAA;AAAA;AAAA,yBAGhE,EAAE,KAAK,EAAE,CAAC;AAAA,0BACTD,EAAiB,EAAI;AAAA;AAAA,uEAEwBA,CAAc;AAAA;AAAA,0BAEzD,EAAE;AAAA;AAAA;AAAA;AAAA,8BAIAF,EAAM,MAAM,IAAIA,EAAM,SAAW,EAAI,OAAS,OAAO;AAAA;AAAA,wEAEX,UAAU,YAAYL,EAAM,KAAK,CAAC;AAAA;AAAA;AAAA;AAAA,SAKtG,CAEA,eAAeX,EAAgBF,EAAS,CACpC,IAAMM,EAAY,SAAS,eAAe,cAAc,EACxD,GAAKA,EAEL,QAAO,KAAKA,EAAW,UAAU,EAEjC,GAAI,CAEA,IAAMO,GADW,MAAM,UAAU,QAAQb,CAAO,GACzB,KAEvB,GAAI,CAACa,EAAO,CACR,OAAO,SAAS,KAAO,WACvB,MACJ,CAEAS,EAAkBT,CAAK,CAC3B,OAASD,EAAO,CACZ,QAAQ,MAAM,wBAAyBA,CAAK,EAC5CN,EAAU,UAAY,4EAC1B,EACJ,CAEA,SAASgB,EAAkBT,EAAO,CAC9B,IAAMP,EAAY,SAAS,eAAe,cAAc,EACxD,GAAI,CAACA,EAAW,OAWhB,IAAMW,EATgB,CAClB,QAAS,gCACT,WAAY,4BACZ,QAAS,gCACT,UAAW,8BACX,UAAW,0BACX,SAAU,2BACd,EAEkCJ,EAAM,MAAM,GAAK,4BAC7CK,EAAQL,EAAM,OAAS,CAAC,EAE9BP,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iFAcmD,UAAU,WAAWO,EAAM,cAAgBA,EAAM,EAAE,CAAC;AAAA,yEAC5D,UAAU,WAAWA,EAAM,UAAU,CAAC;AAAA;AAAA,oFAE3BI,CAAW;AAAA,8BACjE,UAAU,WAAWJ,EAAM,gBAAkBA,EAAM,MAAM,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAMtEA,EAAM,UAAYA,EAAM,SAAS,OAAS,EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAM9BA,EAAM,SAAS,IAAI,CAACU,EAAOC,IAAU;AAAA;AAAA,2FAEoBA,IAAU,EAAI,iBAAmB,aAAa;AAAA,uFAClD,UAAU,WAAWD,EAAM,MAAM,CAAC;AAAA,2EAC9C,UAAU,WAAWA,EAAM,UAAW,CAAE,YAAa,EAAK,CAAC,CAAC;AAAA,0CAC7FA,EAAM,KAAO,yCAAyC,UAAU,WAAWA,EAAM,IAAI,CAAC,OAAS,EAAE;AAAA;AAAA,iCAE1G,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA;AAAA,kBAIvB,EAAE;AAAA;AAAA;AAAA,kBAGJV,EAAM,gBAAkB;AAAA;AAAA;AAAA;AAAA;AAAA,6EAKmC,UAAU,WAAWA,EAAM,eAAe,CAAC;AAAA;AAAA,8BAE1FA,EAAM,aAAe;AAAA,2CACRA,EAAM,YAAY;AAAA;AAAA;AAAA,8BAG7B,EAAE;AAAA;AAAA;AAAA,kBAGd,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAMIK,EAAM,IAAIG,GAAQ;AAAA;AAAA;AAAA,gDAGIA,EAAK,SAAS,OAAS,gCAAgC;AAAA;AAAA;AAAA;AAAA;AAAA,oFAKnB,UAAU,WAAWA,EAAK,SAAS,MAAQA,EAAK,YAAY,CAAC;AAAA,8CACnGA,EAAK,QAAU,oCAAoC,UAAU,WAAWA,EAAK,QAAQ,MAAQA,EAAK,YAAY,CAAC,OAAS,EAAE;AAAA,oFACpFA,EAAK,QAAQ;AAAA;AAAA,+EAElB,UAAU,YAAYA,EAAK,MAAQA,EAAK,QAAQ,CAAC;AAAA;AAAA,sCAE1FA,EAAK,SAAS,KAAO;AAAA,6DACEA,EAAK,QAAQ,IAAI;AAAA;AAAA;AAAA,sCAGtC,EAAE;AAAA;AAAA;AAAA,yBAGjB,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAQTR,EAAM,iBAAmB;AAAA,+DACY,UAAU,WAAWA,EAAM,iBAAiB,WAAa,GAAGA,EAAM,iBAAiB,UAAU,IAAIA,EAAM,iBAAiB,SAAS,EAAE,CAAC;AAAA,+DACpI,UAAU,WAAWA,EAAM,iBAAiB,cAAc,CAAC;AAAA,8BAC5FA,EAAM,iBAAiB,eAAiB,oCAAoC,UAAU,WAAWA,EAAM,iBAAiB,cAAc,CAAC,OAAS,EAAE;AAAA,+DACjH,UAAU,WAAWA,EAAM,iBAAiB,IAAI,CAAC,KAAK,UAAU,WAAWA,EAAM,iBAAiB,OAAS,EAAE,CAAC,IAAI,UAAU,WAAWA,EAAM,iBAAiB,WAAW,CAAC;AAAA,+DAC1K,UAAU,WAAWA,EAAM,iBAAiB,OAAO,CAAC;AAAA,0BACvF,oDAAoD;AAAA;AAAA;AAAA;AAAA,0BAItDA,EAAM,gBAAkB;AAAA,+DACa,UAAU,WAAWA,EAAM,gBAAgB,WAAa,GAAGA,EAAM,gBAAgB,UAAU,IAAIA,EAAM,gBAAgB,SAAS,EAAE,CAAC;AAAA,+DACjI,UAAU,WAAWA,EAAM,gBAAgB,cAAc,CAAC;AAAA,8BAC3FA,EAAM,gBAAgB,eAAiB,oCAAoC,UAAU,WAAWA,EAAM,gBAAgB,cAAc,CAAC,OAAS,EAAE;AAAA,+DAC/G,UAAU,WAAWA,EAAM,gBAAgB,IAAI,CAAC,KAAK,UAAU,WAAWA,EAAM,gBAAgB,OAAS,EAAE,CAAC,IAAI,UAAU,WAAWA,EAAM,gBAAgB,WAAW,CAAC;AAAA,+DACvK,UAAU,WAAWA,EAAM,gBAAgB,OAAO,CAAC;AAAA,0BACtF,uDAAuD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wDAU3B,UAAU,YAAYA,EAAM,UAAY,CAAC,CAAC;AAAA;AAAA,0BAExEA,EAAM,gBAAkB;AAAA;AAAA;AAAA,yCAGT,UAAU,YAAYA,EAAM,eAAe,CAAC;AAAA;AAAA,0BAEzD,EAAE;AAAA;AAAA;AAAA,wDAG0BA,EAAM,cAAgB,EAAI,UAAU,YAAYA,EAAM,aAAa,EAAI,MAAM;AAAA;AAAA,0BAE3GA,EAAM,WAAa;AAAA;AAAA;AAAA,4DAGe,UAAU,YAAYA,EAAM,UAAU,CAAC;AAAA;AAAA,0BAEvE,EAAE;AAAA;AAAA;AAAA,oEAGsC,UAAU,YAAYA,EAAM,KAAK,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQpFA,EAAM,SAAW,YAAc;AAAA,0KACyHA,EAAM,EAAE;AAAA;AAAA;AAAA,kBAG9J,EAAE;AAAA,kBACJ,CAAC,UAAW,YAAY,EAAE,SAASA,EAAM,MAAM,EAAI;AAAA,mLAC8GA,EAAM,EAAE;AAAA;AAAA;AAAA,kBAGvK,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,UAOdY,EAAsBZ,CAAK,CAC/B,CAEA,SAASY,EAAsBZ,EAAO,CAClC,IAAMa,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAY,SAAS,eAAe,kBAAkB,EACtDC,EAAW,SAAS,eAAe,mBAAmB,EAE5DF,GAAY,iBAAiB,QAAS,SAAY,CAC9C,GAAI,CACA,MAAM,UAAU,QAAQb,EAAM,EAAE,EAChC,MAAM,QAAQ,sBAAsB,EACpC,SAAS,cAAc,IAAI,YAAY,cAAc,CAAC,EACtD,OAAO,SAAS,KAAO,QAC3B,OAASD,EAAO,CACZ,MAAM,MAAMA,EAAM,SAAW,oBAAoB,CACrD,CACJ,CAAC,EAEDe,GAAW,iBAAiB,QAAS,SAAY,CAQ7C,GAPkB,MAAM,MAAM,QAAQ,CAClC,MAAO,eACP,QAAS,4EACT,YAAa,eACb,WAAY,YAChB,CAAC,EAGG,GAAI,CACA,MAAM,UAAU,OAAOd,EAAM,EAAE,EAC/B,MAAM,QAAQ,kBAAkB,EAChC,OAAO,SAAS,OAAO,CAC3B,OAASD,EAAO,CACZ,MAAM,MAAMA,EAAM,SAAW,yBAAyB,CAC1D,CAER,CAAC,EAEDgB,GAAU,iBAAiB,QAAS,IAAM,CACtC,OAAO,MAAM,CACjB,CAAC,CACL,CAEA,SAASxB,GAAc,CACnB,IAAMyB,EAAa,SAAS,iBAAiB,sBAAsB,EAEnEA,EAAW,QAAQC,GAAO,CACtBA,EAAI,iBAAiB,QAAS,IAAM,CAChCD,EAAW,QAAQE,GAAK,CACpBA,EAAE,UAAU,OAAO,iBAAkB,kBAAkB,EACvDA,EAAE,UAAU,IAAI,eAAe,CACnC,CAAC,EACDD,EAAI,UAAU,IAAI,iBAAkB,kBAAkB,EACtDA,EAAI,UAAU,OAAO,eAAe,EAEpChC,EAAgBgC,EAAI,QAAQ,aAC5BjC,EAAc,EACdM,EAAW,CACf,CAAC,CACL,CAAC,CACL,CAEA,SAAS6B,GAAU,CACfnC,EAAc,EACdC,EAAgB,KACpB,CAEA,MAAO,CACH,KAAAC,EACA,QAAAiC,CACJ,CACJ,GAAG,EAEH,OAAO,WAAatC,GACbD,GAAQC,KCpbf,IAAAuC,GAAAC,GAAA,KAKA,IAAMC,IAAiB,UAAW,CAC9B,aAEA,IAAMC,EAAW,OAAO,gBAAkB,CAAC,EACrCC,EAAYD,EAAS,iBAAmB,qBACxCE,EAAaF,EAAS,kBAAoB,cAKhD,eAAeG,GAAc,CACzB,MAAM,QAAQ,IAAI,CACdC,EAAuB,EACvBC,EAAqB,EACrBC,EAAU,CACd,CAAC,CACL,CAKA,eAAeF,GAAyB,CACpC,IAAMG,EAAY,SAAS,eAAe,qBAAqB,EAC/D,GAAKA,EAEL,GAAI,CACA,IAAMC,EAAW,MAAM,aAAa,cAAc,CAAE,SAAU,GAAM,SAAU,CAAE,CAAC,EAC3EC,EAAaD,GAAU,MAAM,SAAWA,GAAU,MAAQA,GAAU,SAAW,CAAC,EAEtF,GAAIC,EAAW,SAAW,EAAG,CACzBF,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAUtB,MACJ,CAEAA,EAAU,UAAYE,EAAW,IAAIC,GAAYC,EAAmBD,CAAQ,CAAC,EAAE,KAAK,EAAE,CAC1F,OAASE,EAAO,CACZ,QAAQ,MAAM,uCAAwCA,CAAK,EAC3DL,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAS1B,CACJ,CAKA,SAASI,EAAmBD,EAAU,CAClC,IAAMG,EAAWH,EAAS,OAAO,KAAOA,EAAS,OAASA,EAAS,WAAa,GAC1EI,EAAWD,GAAYA,EAAS,OAAS,EACzCE,EAAa,WAAW,aAAgBC,GAAMA,GAC9CC,EAAc,WAAW,cAAiB,GAAM,SAAI,CAAC,IAE3D,MAAO;AAAA,uBACQf,CAAU,YAAYQ,EAAS,IAAI;AAAA;AAAA,kBAExCI,EAAW;AAAA;AAAA,oCAEOD,CAAQ,UAAUE,EAAWL,EAAS,IAAI,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,kBAK3D;AAAA;AAAA,0BAEMA,EAAS,KAAO,0BAA0BA,EAAS,IAAI,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA,yBAKpE;AAAA;AAAA,iBAER;AAAA;AAAA;AAAA;AAAA;AAAA,8BAKaK,EAAWL,EAAS,IAAI,CAAC;AAAA;AAAA,0BAE7BA,EAAS,KAAO,0BAA0BA,EAAS,IAAI,UAAY,EAAE;AAAA;AAAA;AAAA,sBAGzEA,EAAS,YAAc;AAAA;AAAA,8BAEfK,EAAWL,EAAS,WAAW,CAAC;AAAA;AAAA,sBAEtC,EAAE;AAAA;AAAA;AAAA,0BAGAA,EAAS,WAAa;AAAA;AAAA,4FAE4CO,EAAYP,EAAS,UAAU,CAAC;AAAA;AAAA,0BAEhG,eAAe;AAAA,0BACjBA,EAAS,qBAAuBA,EAAS,oBAAsB;AAAA;AAAA,kCAEvDA,EAAS,mBAAmB,IAAIA,EAAS,mBAAmB;AAAA;AAAA,0BAElE,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,8BAKAA,EAAS,gBAAkB;AAAA;AAAA;AAAA;AAAA,8BAIzB,EAAE;AAAA,8BACJA,EAAS,iBAAmB;AAAA;AAAA;AAAA;AAAA,8BAI1B,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAU9B,CAKA,eAAeL,GAAuB,CAClC,IAAME,EAAY,SAAS,eAAe,oBAAoB,EACzDA,GAILA,EAAU,QAAQ,SAAS,GAAG,UAAU,IAAI,QAAQ,CACxD,CAKA,eAAeD,GAAY,CACvB,IAAMY,EAAiB,SAAS,eAAe,gBAAgB,EAC/D,GAAI,CAACA,EAAgB,OAGrB,IAAMC,EAAQ,CACV,YAAa,OACb,eAAgB,OAChB,UAAW,KACf,EAEAD,EAAe,UAAY;AAAA;AAAA;AAAA,yFAGsDC,EAAM,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA,yFAKjBA,EAAM,cAAc;AAAA;AAAA;AAAA;AAAA;AAAA,yFAKpBA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,SAKpG,CAKA,eAAeC,EAAmBC,EAAc,CAC5C,IAAMC,EAAmB,SAAS,eAAe,kBAAkB,EACnE,GAAI,GAACA,GAAoB,CAACD,GAE1B,GAAI,CACA,IAAMX,EAAW,MAAM,aAAa,YAAYW,CAAY,EACtDE,EAAU,MAAM,aAAa,mBAAmBb,EAAS,EAAE,EAEjEc,EAAsBF,EAAkBC,CAAO,CACnD,OAASX,EAAO,CACZ,QAAQ,MAAM,mCAAoCA,CAAK,CAC3D,CACJ,CAKA,SAASY,EAAsBjB,EAAWgB,EAAS,CAC/C,GAAI,CAACA,GAAWA,EAAQ,SAAW,EAAG,CAClChB,EAAU,UAAY,mEACtB,MACJ,CAEAA,EAAU,UAAYgB,EAAQ,IAAIE,GAAU;AAAA;AAAA,+EAE2B,UAAU,WAAWA,EAAO,IAAI,CAAC;AAAA,kBAC9FA,EAAO,YAAc,4DAA4D,UAAU,WAAWA,EAAO,WAAW,CAAC,OAAS,EAAE;AAAA;AAAA,sBAEhIA,EAAO,SAAS,IAAIC,GAAU;AAAA;AAAA,2CAETD,EAAO,eAAiB,WAAa,OAAO,kBAAkBA,EAAO,EAAE,YAAYC,EAAO,EAAE;AAAA;AAAA,0FAE7C,UAAU,WAAWA,EAAO,IAAI,CAAC;AAAA,kCACzFA,EAAO,gBAAkBA,EAAO,iBAAmB,OAAS;AAAA,uGACS,UAAU,YAAYA,EAAO,cAAc,CAAC;AAAA,kCAC/G,EAAE;AAAA;AAAA;AAAA,qBAGjB,EAAE,KAAK,EAAE,GAAK,EAAE;AAAA;AAAA;AAAA,SAG5B,EAAE,KAAK,EAAE,CACd,CAKA,eAAeC,GAAkB,CAC7B,IAAMpB,EAAY,SAAS,eAAe,mBAAmB,EAC7D,GAAKA,EAEL,QAAO,KAAKA,EAAW,UAAU,EAEjC,GAAI,CACA,IAAMC,EAAW,MAAM,aAAa,eAAe,EAC7CoB,EAAYpB,GAAU,MAAM,SAAWA,GAAU,MAAQA,GAAU,SAAW,CAAC,EAErF,GAAIoB,EAAU,SAAW,EAAG,CACxBrB,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAOHN,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,kBAM5B,MACJ,CAEAM,EAAU,UAAYqB,EAAU,IAAIC,GAAYC,EAAmBD,CAAQ,CAAC,EAAE,KAAK,EAAE,CACzF,OAASjB,EAAO,CACZ,QAAQ,MAAM,6BAA8BA,CAAK,EACjDL,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA,aAK1B,EACJ,CAKA,SAASuB,EAAmBD,EAAU,CAClC,IAAME,EAAe,CACjB,QAAW,2EACX,OAAU,mEACV,SAAY,2EACZ,YAAe,2EACf,OAAU,2EACV,SAAY,mEACZ,UAAa,uEACb,UAAa,+DACb,SAAY,kEAChB,EAEMC,EAAe,CACjB,QAAW,iBACX,OAAU,aACV,SAAY,iBACZ,YAAe,cACf,OAAU,eACV,SAAY,WACZ,UAAa,YACb,UAAa,YACb,SAAY,UAChB,EAEMC,EAAcF,EAAaF,EAAS,MAAM,GAAK,4BAC/CK,EAAcF,EAAaH,EAAS,MAAM,GAAKA,EAAS,OAE9D,MAAO;AAAA,uBACQ3B,CAAU,SAAS2B,EAAS,eAAe;AAAA;AAAA;AAAA,8EAGYA,EAAS,eAAe;AAAA,0FACZ,UAAU,WAAWA,EAAS,OAASA,EAAS,UAAU,MAAQ,cAAc,CAAC;AAAA;AAAA,8EAE7FI,CAAW,KAAKC,CAAW;AAAA;AAAA,kBAEvFL,EAAS,YAAc;AAAA,4FACmD,UAAU,WAAWA,EAAS,WAAW,CAAC;AAAA,kBAClH,EAAE;AAAA;AAAA;AAAA,0BAGI,IAAI,KAAKA,EAAS,UAAU,EAAE,mBAAmB,CAAC;AAAA;AAAA,sBAEtDA,EAAS,aAAeA,EAAS,gBAAkB;AAAA;AAAA,8BAE3C,UAAU,YAAYA,EAAS,aAAeA,EAAS,eAAe,CAAC;AAAA;AAAA,sBAE7E,EAAE;AAAA;AAAA;AAAA,SAItB,CAKA,eAAeM,EAAWC,EAAgB,CACjCA,GAGL,MAAM,QAAQ,IAAI,CACdC,EAAmBD,CAAc,EACjCE,EAAgBF,CAAc,CAClC,CAAC,CACL,CAKA,eAAeC,EAAmBD,EAAgB,CAE9C,GADwB,SAAS,eAAe,iBAAiB,EAGjE,GAAI,CACA,IAAMG,EAAS,MAAM,aAAa,kBAAkBH,CAAc,CAEtE,MAAgB,CAChB,CACJ,CAKA,SAASE,EAAgBF,EAAgB,CACrC,IAAMI,EAAO,SAAS,eAAe,cAAc,EAC9CA,GAELA,EAAK,iBAAiB,SAAU,MAAOC,GAAM,CACzCA,EAAE,eAAe,EAEjB,IAAMC,EAAeF,EAAK,cAAc,0BAA0B,EAC5DG,EAAYH,EAAK,cAAc,uBAAuB,EACtDI,EAAUF,GAAc,OAAO,KAAK,EAE1C,GAAI,CAACE,EAAS,CACV,MAAM,MAAM,wBAAwB,EACpC,MACJ,CAEA,IAAMC,EAAeF,EAAU,UAC/BA,EAAU,SAAW,GACrBA,EAAU,UAAY,6VAEtB,GAAI,CACA,MAAM,aAAa,YAAYP,EAAgBQ,CAAO,EACtD,MAAM,QAAQ,2BAA2B,EACzCF,EAAa,MAAQ,GAErB,SAAS,OAAO,CACpB,OAAS9B,EAAO,CACZ,MAAM,MAAMA,EAAM,SAAW,wBAAwB,CACzD,QAAE,CACE+B,EAAU,SAAW,GACrBA,EAAU,UAAYE,CAC1B,CACJ,CAAC,CACL,CAEA,MAAO,CACH,YAAA1C,EACA,mBAAAiB,EACA,gBAAAO,EACA,WAAAQ,EACA,uBAAA/B,EACA,mBAAAO,EACA,mBAAAmB,CACJ,CACJ,GAAG,EAEH,OAAO,cAAgB/B,KC1ZvB,IAAA+C,GAAA,GAAAC,EAAAD,GAAA,aAAAE,KAAA,IAKMC,GAm8BCD,GAx8BPE,GAAAC,EAAA,KAKMF,IAAe,UAAW,CAC5B,aAEA,IAAIG,EAAiB,KACjBC,EAAkB,KAClBC,EAAU,KACVC,EAAc,GACdC,EAAiB,GAErB,eAAeC,GAAO,CAElB,GAAIF,EAAa,OACjBA,EAAc,GAEd,IAAMG,EAAY,SAAS,eAAe,gBAAgB,EAC1D,GAAI,CAACA,EAAW,OAGhB,IAAMC,EAAmBD,EAAU,cAAc,IAAI,GAAKA,EAAU,QAAQ,UAG5E,GAFAF,EAAiB,EAAQG,EAErBA,EAAkB,CAElBP,EAAiB,CACb,GAAIM,EAAU,QAAQ,UACtB,KAAMA,EAAU,QAAQ,WAC5B,EACAE,EAAmB,EACnB,MACJ,CAGA,IAAMC,EAAcC,EAAsB,EAC1C,GAAI,CAACD,EAAa,CACd,OAAO,SAAS,KAAO,aACvB,MACJ,CAEA,MAAME,EAAYF,CAAW,CACjC,CAEA,SAASD,GAAqB,CAE1BI,EAAqB,EAErBC,EAA0B,EAE1BC,EAAyB,EACzBC,EAA2B,EACvB,eAAeA,GAA6B,CACxC,IAAMC,EAAM,SAAS,eAAe,qBAAqB,EACzD,GAAI,CAACA,EAAK,OACV,IAAMC,EAAY,SAAS,eAAe,gBAAgB,GAAG,QAAQ,UACrE,GAAKA,GACD,SAAO,YAAgB,KAC3B,GAAI,CACA,IAAMC,EAAO,MAAM,YAAY,YAAY,CAAE,SAAU,GAAI,CAAC,EACxDA,EAAK,SAAWA,EAAK,MAAM,QACbA,EAAK,KAAK,MAAM,KAAKC,GAAQA,EAAK,aAAeF,GAAaE,EAAK,UAAYF,CAAS,GAElGD,EAAI,cAAc,KAAK,GAAG,aAAa,OAAQ,cAAc,EAC7DA,EAAI,UAAU,IAAI,cAAc,IAEhCA,EAAI,cAAc,KAAK,GAAG,aAAa,OAAQ,MAAM,EACrDA,EAAI,UAAU,OAAO,cAAc,GAG/C,MAAY,CAAC,CACjB,CAEJI,EAAiC,EAEjCC,EAAwB,EAExBC,EAAqB,CACzB,CAEA,SAASA,GAAuB,CAC5B,IAAMC,EAAa,SAAS,iBAAiB,UAAU,EACjDC,EAAc,SAAS,iBAAiB,cAAc,EAE5DD,EAAW,QAAQP,GAAO,CACtBA,EAAI,iBAAiB,QAAS,IAAM,CAChC,IAAMS,EAAUT,EAAI,QAAQ,IAG5BO,EAAW,QAAQG,GAAK,CACpBA,EAAE,UAAU,OAAO,qBAAsB,kBAAkB,EAC3DA,EAAE,UAAU,IAAI,qBAAsB,eAAe,CACzD,CAAC,EACDV,EAAI,UAAU,IAAI,qBAAsB,kBAAkB,EAC1DA,EAAI,UAAU,OAAO,qBAAsB,eAAe,EAG1DQ,EAAY,QAAQG,GAAW,CACvBA,EAAQ,KAAO,GAAGF,CAAO,OACzBE,EAAQ,UAAU,OAAO,QAAQ,EAEjCA,EAAQ,UAAU,IAAI,QAAQ,CAEtC,CAAC,CACL,CAAC,CACL,CAAC,CACL,CAmBA,SAASd,GAA4B,CACjC,IAAMG,EAAM,SAAS,eAAe,iBAAiB,EAChDA,GAELA,EAAI,iBAAiB,QAAS,SAAY,CACtC,IAAMC,EAAY,SAAS,eAAe,gBAAgB,GAAG,QAAQ,UAC/DW,EAAW,SAAS,SAAS,eAAe,UAAU,GAAG,KAAK,GAAK,EAEnEC,EAAc,CAAC,CADA,SAAS,cAAc,uBAAuB,EAE7DC,EAAY,SAAS,cAAc,+BAA+B,GAAG,MAE3E,GAAI,CAACb,EAAW,OAGhB,GAAIY,GAAe,CAACC,EAAW,CAC3B,MAAM,QAAQ,gDAAgD,EAC9D,MACJ,CAEAd,EAAI,SAAW,GACf,IAAMe,EAAef,EAAI,UACzBA,EAAI,UAAY,6VAIhB,GAAI,CAEA,MAAM,QAAQ,QAAQC,EAAWW,EAAUE,GAAa,IAAI,EAE5D,MAAM,QAAQ,gBAAgB,EAC9B,SAAS,cAAc,IAAI,YAAY,cAAc,CAAC,CAC1D,OAASE,EAAO,CACZ,MAAM,MAAMA,EAAM,SAAW,wBAAwB,CACzD,QAAE,CACEhB,EAAI,SAAW,GACfA,EAAI,UAAYe,CACpB,CACJ,CAAC,CACL,CAEA,SAASjB,GAA2B,CAChC,IAAME,EAAM,SAAS,eAAe,qBAAqB,EACpDA,GAELA,EAAI,iBAAiB,QAAS,SAAY,CACtC,IAAMC,EAAY,SAAS,eAAe,gBAAgB,GAAG,QAAQ,UACrE,GAAKA,EAEL,IAAI,OAAO,QAAY,KAAe,CAAC,QAAQ,gBAAgB,EAAG,CAC9D,MAAM,QAAQ,6CAA6C,EAC3D,OAAO,SAAS,KAAO,wBAA0B,mBAAmB,OAAO,SAAS,QAAQ,EAC5F,MACJ,CAEA,GAAI,CAEA,IAAIgB,EAAa,GACjB,GAAI,OAAO,YAAgB,IAAa,CACpC,IAAMf,EAAO,MAAM,YAAY,YAAY,CAAE,SAAU,GAAI,CAAC,EACxDA,EAAK,SAAWA,EAAK,MAAM,QAC3Be,EAAaf,EAAK,KAAK,MAAM,KAAKC,GAAQA,EAAK,aAAeF,GAAaE,EAAK,UAAYF,CAAS,EAE7G,CACA,GAAIgB,EAAY,CAIZ,IAAMd,GADO,MAAM,YAAY,YAAY,CAAE,SAAU,GAAI,CAAC,GAC1C,KAAK,MAAM,KAAKA,GAAQA,EAAK,aAAeF,GAAaE,EAAK,UAAYF,CAAS,EACjGE,IACA,MAAM,YAAY,WAAWA,EAAK,EAAE,EACpC,MAAM,QAAQ,wBAAwB,EACtCH,EAAI,cAAc,KAAK,GAAG,aAAa,OAAQ,MAAM,EACrDA,EAAI,UAAU,OAAO,cAAc,EAE3C,MAEI,MAAM,YAAY,QAAQC,CAAS,EACnC,MAAM,QAAQ,oBAAoB,EAClCD,EAAI,cAAc,KAAK,GAAG,aAAa,OAAQ,cAAc,EAC7DA,EAAI,UAAU,IAAI,cAAc,CAExC,OAASgB,EAAO,CACZ,MAAM,MAAMA,EAAM,SAAW,yBAAyB,CAC1D,EACJ,CAAC,CACL,CAEA,SAASZ,GAAmC,CAClB,SAAS,iBAAiB,uBAAuB,EACzD,QAAQc,GAAS,CAC3BA,EAAM,iBAAiB,SAAU,IAAM,CACnCjC,EAAkBiC,EAAM,MAExB,IAAMC,EAAQD,EAAM,QAAQ,MAC5B,GAAIC,EAAO,CACP,IAAMC,EAAU,SAAS,eAAe,eAAe,EACnDA,GAAW,OAAO,WAAW,cAC7BA,EAAQ,YAAc,OAAO,UAAU,YAAY,WAAWD,CAAK,CAAC,EAE5E,CACJ,CAAC,CACL,CAAC,CACL,CAEA,SAASd,GAA0B,CAGb,SAAS,eAAe,YAAY,GAC3C,iBAAiB,QAAS,IAAM,CAE3C,CAAC,CACL,CAEA,SAASX,GAAwB,CAE7B,IAAM2B,EADO,OAAO,SAAS,SACV,MAAM,sBAAsB,EAC/C,OAAOA,EAAQA,EAAM,CAAC,EAAI,IAC9B,CAEA,eAAe1B,EAAY2B,EAAM,CAC7B,IAAMhC,EAAY,SAAS,eAAe,gBAAgB,EAC1D,GAAKA,EAEL,QAAO,KAAKA,EAAW,UAAU,EAEjC,GAAI,CAIA,GAFAN,GADiB,MAAM,YAAY,UAAUsC,CAAI,GACvB,KAEtB,CAACtC,EAAgB,CACjB,OAAO,SAAS,KAAO,QACvB,MACJ,CAEA,SAAS,MAAQ,GAAGA,EAAe,IAAI,aAEvCuC,EAAcvC,CAAc,EAC5B,MAAM,QAAQ,IAAI,CACdwC,EAAgBxC,CAAc,EAC9ByC,EAAoBzC,CAAc,EAClC0C,EAAY1C,CAAc,CAC9B,CAAC,EAED2C,EAAiB3C,CAAc,CACnC,OAASgC,EAAO,CACZ,QAAQ,MAAM,0BAA2BA,CAAK,EAC9C1B,EAAU,UAAY,wFAC1B,EACJ,CAGA,SAAS,iBAAiB,mBAAoB,MAAOsC,GAAM,CACvD,GAAI,CACI,CAACxC,GAAkBJ,GAAkBA,EAAe,KACpD,MAAMW,EAAYX,EAAe,IAAI,EAGrC,SAAS,OAAO,CAExB,MAAc,CACd,CACJ,CAAC,EAED,SAASuC,EAAcM,EAAS,CAC5B,IAAMvC,EAAY,SAAS,eAAe,gBAAgB,EAC1D,GAAI,CAACA,EAAW,OAEhB,IAAMwC,EAASD,EAAQ,QAAU,CAAC,EAC5BE,EAAYF,EAAQ,OAASC,EAAO,CAAC,GAAG,OAAS,iCACjDjB,EAAcgB,EAAQ,UAAYA,EAAQ,SAAS,OAAS,EAC5DG,EAAUH,EAAQ,eAAiB,GAAKA,EAAQ,SAChDI,EAASJ,EAAQ,YAAcA,EAAQ,WAAaA,EAAQ,MAElEvC,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA,6HAI+FuC,GAAS,QAAQ,KAAO,KAAK;AAAA;AAAA,mCAEvHE,CAAS;AAAA,mCACT,UAAU,WAAWF,EAAQ,IAAI,CAAC;AAAA;AAAA;AAAA;AAAA,0BAI3CI,EAAS;AAAA;AAAA;AAAA;AAAA,0BAIP,EAAE;AAAA,0BACHD,EAIC,GAJS;AAAA;AAAA;AAAA;AAAA,yBAIP;AAAA;AAAA,sBAERF,EAAO,OAAS,EAAI;AAAA;AAAA,8BAEZA,EAAO,IAAI,CAACI,EAAKC,IAAU;AAAA;AAAA,mHAE0DA,IAAU,EAAI,qBAAuB,oBAAoB;AAAA,kDAC1HD,EAAI,KAAK;AAAA,kDACTC,CAAK;AAAA;AAAA,gDAEPD,EAAI,KAAK;AAAA;AAAA,6BAE5B,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,sBAEf,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAMJL,EAAQ,MAAQ;AAAA,oDACcA,EAAQ,MAAM,EAAE;AAAA,8BACtC,UAAU,WAAWA,EAAQ,MAAM,IAAI,CAAC;AAAA;AAAA,sBAE9C,EAAE;AAAA;AAAA;AAAA;AAAA,0BAIA,UAAU,WAAWA,EAAQ,IAAI,CAAC;AAAA;AAAA;AAAA;AAAA,sBAItCA,EAAQ,eAAiB;AAAA;AAAA;AAAA,kCAGb,UAAU,YAAYA,EAAQ,cAAc,CAAC;AAAA;AAAA;AAAA,kCAG7CA,EAAQ,eAAe,QAAQ,CAAC,CAAC,KAAKA,EAAQ,cAAgB,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAMzE,EAAE;AAAA;AAAA;AAAA;AAAA,0BAIA,MAAM,OAAO,CACX,MAAOA,EAAQ,eAAiBA,EAAQ,iBAAmBA,EAAQ,MACnE,UAAWA,EAAQ,sBAAwBA,EAAQ,WACnD,KAAM,OACV,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA,sBAIJA,EAAQ,kBAAoB;AAAA,wDACM,UAAU,WAAWA,EAAQ,iBAAiB,CAAC;AAAA,sBAC/E,EAAE;AAAA;AAAA;AAAA,sBAGJhB,EAAcuB,EAAeP,EAAQ,QAAQ,EAAI,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAoB9BA,EAAQ,gBAAkB,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAYzCA,EAAQ,eAAiB;AAAA,sEACeA,EAAQ,cAAc;AAAA,8BAC5D,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAOCG,EAAuB,GAAb,UAAe;AAAA;AAAA;AAAA;AAAA;AAAA,kCAK1BA,EAAU,cAAgB,cAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mDAMvBH,EAAQ,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAWnCA,EAAQ,IAAM;AAAA;AAAA;AAAA,8DAGsB,UAAU,WAAWA,EAAQ,GAAG,CAAC;AAAA;AAAA,0BAEnE,EAAE;AAAA,0BACJA,EAAQ,SAAW;AAAA;AAAA;AAAA,uDAGUA,EAAQ,SAAS,IAAI;AAAA,sCACtC,UAAU,WAAWA,EAAQ,SAAS,IAAI,CAAC;AAAA;AAAA;AAAA,0BAGrD,EAAE;AAAA,0BACJA,EAAQ,MAAQA,EAAQ,KAAK,OAAS;AAAA;AAAA;AAAA;AAAA,sCAI1BA,EAAQ,KAAK,IAAIQ,GAAO;AAAA,kEACIA,EAAI,IAAI;AAAA,8CAC5B,UAAU,WAAWA,EAAI,IAAI,CAAC;AAAA;AAAA,qCAEvC,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,0BAGnB,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAiCJR,EAAQ,gBAAkB,OAAO,KAAKA,EAAQ,cAAc,EAAE,OAAS;AAAA;AAAA;AAAA;AAAA,0BAIrE,EAAE;AAAA;AAAA,uCAESA,EAAQ,cAAgB,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAOlCA,EAAQ,aAAe,wDAAwD;AAAA;AAAA;AAAA,sBAGvFA,EAAQ,gBAAkB,OAAO,KAAKA,EAAQ,cAAc,EAAE,OAAS;AAAA;AAAA;AAAA;AAAA,sCAIvD,OAAO,QAAQA,EAAQ,cAAc,EAAE,IAAI,CAAC,CAACS,EAAKC,CAAK,IAAM;AAAA;AAAA,uGAEI,UAAU,WAAWD,CAAG,CAAC;AAAA,qFAC3C,UAAU,WAAW,OAAOC,CAAK,CAAC,CAAC;AAAA;AAAA,qCAEnF,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA;AAAA,sBAIvB,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAUlBC,EAAY,EACZ5C,EAAqB,EACrB6C,EAAc,EACdC,EAAa,EACbC,EAAU,EACV,KAAK,KAAK,CACd,CAEA,SAASP,EAAeQ,EAAU,CAC9B,IAAMC,EAAU,CAAC,EACjB,OAAAD,EAAS,QAAQE,GAAW,CACnBD,EAAQC,EAAQ,cAAc,IAC/BD,EAAQC,EAAQ,cAAc,EAAI,CAAC,GAEvCD,EAAQC,EAAQ,cAAc,EAAE,KAAKA,CAAO,CAChD,CAAC,EAEM,OAAO,QAAQD,CAAO,EAAE,IAAI,CAAC,CAACE,EAAUC,CAAO,IAAM;AAAA;AAAA,mEAED,UAAU,WAAWD,CAAQ,CAAC;AAAA;AAAA,sBAE3EC,EAAQ,IAAI,CAACC,EAAKd,IAAU;AAAA;AAAA,uGAEqDA,IAAU,EAAI,oDAAsD,uCAAuC;AAAA,+CACnKc,EAAI,EAAE;AAAA,0CACXA,EAAI,iBAAmBA,EAAI,OAAS,EAAE;AAAA,0CACtCA,EAAI,gBAAkB,CAAC;AAAA;AAAA,8BAEnC,UAAU,WAAWA,EAAI,KAAK,CAAC;AAAA,+BAC7BA,EAAI,iBAAmBA,EAAI,QAAWA,EAAI,QAAUjE,EAAe,MAAU;AAAA,uEACtC,UAAU,YAAYiE,EAAI,iBAAmBA,EAAI,KAAK,CAAC;AAAA,8BAC9F,EAAE;AAAA;AAAA,qBAEb,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,SAGtB,EAAE,KAAK,EAAE,CACd,CAEA,SAAST,GAAc,CACnB,IAAMU,EAAa,SAAS,iBAAiB,YAAY,EACnDnB,EAAY,SAAS,eAAe,oBAAoB,EAE9DmB,EAAW,QAAQC,GAAS,CACxBA,EAAM,iBAAiB,QAAS,IAAM,CAClCD,EAAW,QAAQE,GAAKA,EAAE,UAAU,OAAO,oBAAoB,CAAC,EAChED,EAAM,UAAU,IAAI,oBAAoB,EACxCpB,EAAU,IAAMoB,EAAM,QAAQ,KAClC,CAAC,CACL,CAAC,EAEDpB,GAAW,iBAAiB,QAAS,IAAM,CACvC,IAAMD,EAAS9C,EAAe,QAAQ,IAAIkD,GAAOA,EAAI,KAAK,GAAK,CAAClD,EAAe,KAAK,EAC9EqE,EAAe,SAAS,SAAS,cAAc,+BAA+B,GAAG,QAAQ,KAAK,GAAK,EACzG,eAAe,aAAavB,EAAQuB,CAAY,CACpD,CAAC,CACL,CAEA,SAASzD,GAAuB,CAC5B,IAAM0D,EAAW,SAAS,eAAe,kBAAkB,EACrDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAc,SAAS,cAAc,eAAe,EAE1DD,GAAa,iBAAiB,QAAS,IAAM,CACzC,IAAME,EAAU,SAASH,EAAS,KAAK,GAAK,EACxCG,EAAU,IACVH,EAAS,MAAQG,EAAU,EAEnC,CAAC,EAEDD,GAAa,iBAAiB,QAAS,IAAM,CACzC,IAAMC,EAAU,SAASH,EAAS,KAAK,GAAK,EACtCI,EAAM,SAASJ,EAAS,GAAG,GAAK,GAClCG,EAAUC,IACVJ,EAAS,MAAQG,EAAU,EAEnC,CAAC,EAED,IAAME,EAAc,SAAS,iBAAiB,cAAc,EAC5DA,EAAY,QAAQ3D,GAAO,CACvBA,EAAI,iBAAiB,QAAS,IAAM,CAUhC,GATA2D,EAAY,QAAQjD,GAAK,CACrBA,EAAE,UAAU,OAAO,qBAAsB,gBAAiB,kBAAkB,EAC5EA,EAAE,UAAU,IAAI,iBAAiB,CACrC,CAAC,EACDV,EAAI,UAAU,IAAI,qBAAsB,gBAAiB,kBAAkB,EAC3EA,EAAI,UAAU,OAAO,iBAAiB,EAEtCf,EAAkBe,EAAI,QAAQ,UAE1BA,EAAI,QAAQ,MAAO,CACnB,IAAM4D,EAAiB,SAAS,cAAc,qBAAqB,EAC/DA,IACAA,EAAe,UAAY,MAAM,OAAO,CACpC,MAAO,WAAW5D,EAAI,QAAQ,KAAK,EACnC,KAAM,OACV,CAAC,EAET,CACJ,CAAC,CACL,CAAC,EAEG2D,EAAY,OAAS,IACrB1E,EAAkB0E,EAAY,CAAC,EAAE,QAAQ,UAEjD,CAEA,SAASlB,GAAgB,CACrB,IAAMzC,EAAM,SAAS,eAAe,iBAAiB,EAChDA,GAELA,EAAI,iBAAiB,QAAS,SAAY,CACtC,IAAMY,EAAW,SAAS,SAAS,eAAe,kBAAkB,GAAG,KAAK,GAAK,EAEjFZ,EAAI,SAAW,GACfA,EAAI,UAAY,qVAEhB,GAAI,CACA,MAAM,QAAQ,QAAQhB,EAAe,GAAI4B,EAAU3B,GAAmB,IAAI,EAE1E,MAAM,QAAQ,gBAAgB,EAC9B,SAAS,cAAc,IAAI,YAAY,cAAc,CAAC,CAC1D,OAAS+B,EAAO,CACZ,MAAM,MAAMA,EAAM,SAAW,wBAAwB,CACzD,QAAE,CACEhB,EAAI,SAAW,GACfA,EAAI,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA,iBAMpB,CACJ,CAAC,CACL,CAEA,SAAS0C,GAAe,CACpB,IAAM1C,EAAM,SAAS,eAAe,qBAAqB,EACpDA,GAELA,EAAI,iBAAiB,QAAS,SAAY,CACtC,GAAI,CAAC,QAAQ,gBAAgB,EAAG,CAC5B,MAAM,QAAQ,6CAA6C,EAC3D,OAAO,SAAS,KAAO,wBAA0B,mBAAmB,OAAO,SAAS,QAAQ,EAC5F,MACJ,CAEA,GAAI,CACA,MAAM,YAAY,QAAQhB,EAAe,EAAE,EAC3C,MAAM,QAAQ,oBAAoB,EAElCgB,EAAI,cAAc,KAAK,EAAE,aAAa,OAAQ,cAAc,EAC5DA,EAAI,UAAU,IAAI,cAAc,CACpC,OAASgB,EAAO,CACRA,EAAM,SAAS,SAAS,SAAS,EACjC,MAAM,KAAK,wCAAwC,EAEnD,MAAM,MAAMA,EAAM,SAAW,4BAA4B,CAEjE,CACJ,CAAC,CACL,CAEA,SAAS2B,GAAY,CACjB,IAAMkB,EAAY,SAAS,iBAAiB,YAAY,EAClDC,EAAM,mBAAmB,OAAO,SAAS,IAAI,EAC7CC,EAAQ,mBAAmB/E,GAAgB,MAAQ,SAAS,KAAK,EAEvE6E,EAAU,QAAQ7D,GAAO,CACrBA,EAAI,iBAAiB,QAAS,IAAM,CAChC,IAAMgE,EAAWhE,EAAI,QAAQ,SACzBiE,EAAW,GAEf,OAAQD,EAAU,CACd,IAAK,WACDC,EAAW,gDAAgDH,CAAG,GAC9D,MACJ,IAAK,UACDG,EAAW,wCAAwCH,CAAG,SAASC,CAAK,GACpE,MACJ,IAAK,YACD,IAAMG,EAAQ,mBAAmBlF,GAAgB,OAAS,EAAE,EAC5DiF,EAAW,gDAAgDH,CAAG,UAAUI,CAAK,gBAAgBH,CAAK,GAClG,MACJ,IAAK,OACD,UAAU,UAAU,UAAU,OAAO,SAAS,IAAI,EAC7C,KAAK,IAAM,MAAM,QAAQ,2BAA2B,CAAC,EACrD,MAAM,IAAM,MAAM,MAAM,sBAAsB,CAAC,EACpD,MACR,CAEIE,GACA,OAAO,KAAKA,EAAU,SAAU,sBAAsB,CAE9D,CAAC,CACL,CAAC,CACL,CAEA,eAAezC,EAAgBK,EAAS,CACpC,IAAMvC,EAAY,SAAS,eAAe,aAAa,EACvD,GAAI,CAACA,EAAW,OAEhB,IAAM6E,EAAQ,CACV,CAAE,MAAO,OAAQ,IAAK,GAAI,EAC1B,CAAE,MAAO,WAAY,IAAK,YAAa,CAC3C,EAEA,GAAItC,EAAQ,SACR,GAAI,GACiB,MAAM,cAAc,eAAeA,EAAQ,SAAS,EAAE,GAClC,MAAQ,CAAC,GAC1B,QAAQuC,GAAO,CAC/BD,EAAM,KAAK,CAAE,MAAOC,EAAI,KAAM,IAAK,eAAeA,EAAI,IAAI,GAAI,CAAC,CACnE,CAAC,CACL,MAAgB,CACZD,EAAM,KAAK,CAAE,MAAOtC,EAAQ,SAAS,KAAM,IAAK,eAAeA,EAAQ,SAAS,IAAI,GAAI,CAAC,CAC7F,CAGJsC,EAAM,KAAK,CAAE,MAAOtC,EAAQ,IAAK,CAAC,EAElCvC,EAAU,UAAY,WAAW,OAAO6E,CAAK,CACjD,CAEA,eAAe1C,EAAoBI,EAAS,CACxC,IAAMvC,EAAY,SAAS,eAAe,kBAAkB,EAC5D,GAAKA,EAEL,GAAI,CAEA,IAAM+E,GADW,MAAM,YAAY,WAAWxC,EAAQ,GAAI,CAAE,MAAO,CAAE,CAAC,GAC5C,MAAQ,CAAC,EAEnC,GAAIwC,EAAS,SAAW,EAAG,CACvB/E,EAAU,UAAY,GACtB,MACJ,CAEAA,EAAU,UAAY;AAAA;AAAA;AAAA,sBAGZ+E,EAAS,IAAIC,GAAK,YAAY,OAAOA,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,cAI3D,YAAY,WAAWhF,CAAS,CACpC,OAAS0B,EAAO,CACZ,QAAQ,MAAM,mCAAoCA,CAAK,EACvD1B,EAAU,UAAY,EAC1B,CACJ,CAEA,eAAeoC,EAAYG,EAAS,CAChC,IAAMvC,EAAY,SAAS,eAAe,mBAAmB,EAC7D,GAAKA,EAEL,QAAO,KAAKA,EAAW,SAAS,EAEhC,GAAI,CAEA,IAAMiF,GADW,MAAM,YAAY,WAAW1C,EAAQ,EAAE,GAC/B,MAAQ,CAAC,EAElCvC,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA,wEAIsCuC,EAAQ,gBAAgB,QAAQ,CAAC,GAAK,KAAK;AAAA;AAAA,8BAErF,UAAU,YAAYA,EAAQ,gBAAkB,CAAC,CAAC;AAAA;AAAA,kEAEdA,EAAQ,cAAgB,CAAC;AAAA;AAAA,sBAErE,QAAQ,gBAAgB,EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAM1B;AAAA;AAAA;AAAA,gEAGwC,mBAAmB,OAAO,SAAS,QAAQ,CAAC;AAAA;AAAA;AAAA;AAAA,qBAIvF;AAAA;AAAA;AAAA;AAAA,kBAIH0C,EAAQ,OAAS,EAAI;AAAA;AAAA,0BAEbA,EAAQ,IAAIC,GAAU;AAAA;AAAA;AAAA;AAAA,mFAImCA,EAAO,MAAM,aAAa,CAAC,GAAKA,EAAO,MAAM,QAAQ,CAAC,GAAK,KAAK,YAAY,CAAC;AAAA;AAAA;AAAA;AAAA,sFAI1E,UAAU,WAAWA,EAAO,MAAM,YAAc,WAAW,CAAC;AAAA,8CACpGA,EAAO,kBAAoB;AAAA;AAAA,8CAEzB,EAAE;AAAA;AAAA;AAAA,8CAGJ,UAAU,YAAYA,EAAO,MAAM,CAAC;AAAA,kFACA,UAAU,WAAWA,EAAO,UAAU,CAAC;AAAA;AAAA,0CAE/EA,EAAO,MAAQ,8CAA8C,UAAU,WAAWA,EAAO,KAAK,CAAC,QAAU,EAAE;AAAA,wEAC7E,UAAU,WAAWA,EAAO,OAAO,CAAC;AAAA;AAAA;AAAA;AAAA,yBAInF,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,kBAEf;AAAA;AAAA,iBAEH;AAAA,cAGL,SAAS,eAAe,kBAAkB,GAAG,iBAAiB,QAAS,IAAM,CACzEC,EAAe5C,CAAO,CAC1B,CAAC,CACL,OAASb,EAAO,CACZ,QAAQ,MAAM,0BAA2BA,CAAK,EAC9C1B,EAAU,UAAY,qDAC1B,EACJ,CAEA,SAASmF,EAAe5C,EAAS,CAC7B,MAAM,KAAK,CACP,MAAO,iBACP,QAAS;AAAA;AAAA;AAAA;AAAA;AAAA,8BAKS,CAAC,EAAG,EAAG,EAAG,EAAG,CAAC,EAAE,IAAI6C,GAAK;AAAA,6HACsEA,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,6BAKjG,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAc3B,YAAa,gBACb,UAAW,SAAY,CACnB,IAAMC,EAAS,SAAS,SAAS,eAAe,eAAe,EAAE,KAAK,EAChEZ,EAAQ,SAAS,eAAe,cAAc,EAAE,MAAM,KAAK,EAC3Da,EAAU,SAAS,eAAe,gBAAgB,EAAE,MAAM,KAAK,EAErE,GAAI,CAACD,GAAUA,EAAS,EACpB,aAAM,MAAM,yBAAyB,EAC9B,GAGX,GAAI,CAACC,EACD,aAAM,MAAM,wBAAwB,EAC7B,GAGX,GAAI,CACA,aAAM,YAAY,aAAa/C,EAAQ,GAAI,CAAE,OAAA8C,EAAQ,MAAAZ,EAAO,QAAAa,CAAQ,CAAC,EACrE,MAAM,QAAQ,4BAA4B,EAC1ClD,EAAYG,CAAO,EACZ,EACX,OAASb,EAAO,CACZ,aAAM,MAAMA,EAAM,SAAW,0BAA0B,EAChD,EACX,CACJ,CACJ,CAAC,EAED,IAAM6D,EAAQ,SAAS,iBAAiB,cAAc,EAChDC,EAAc,SAAS,eAAe,eAAe,EAE3DD,EAAM,QAAQE,GAAQ,CAClBA,EAAK,iBAAiB,QAAS,IAAM,CACjC,IAAMJ,EAAS,SAASI,EAAK,QAAQ,MAAM,EAC3CD,EAAY,MAAQH,EAEpBE,EAAM,QAAQ,CAACG,EAAGN,IAAM,CAChBA,EAAIC,GACJK,EAAE,UAAU,OAAO,eAAe,EAClCA,EAAE,UAAU,IAAI,iBAAiB,IAEjCA,EAAE,UAAU,IAAI,eAAe,EAC/BA,EAAE,UAAU,OAAO,iBAAiB,EAE5C,CAAC,CACL,CAAC,CACL,CAAC,CACL,CAEA,eAAerD,EAAiBE,EAAS,CACrC,GAAI,CACA,MAAM,YAAY,UAAUA,EAAQ,EAAE,CAC1C,MAAgB,CAEhB,CACJ,CAEA,SAASoD,GAAU,CACfjG,EAAiB,KACjBC,EAAkB,KAClBC,EAAU,KACVC,EAAc,EAClB,CAEA,MAAO,CACH,KAAAE,EACA,QAAA4F,CACJ,CACJ,GAAG,EAEH,OAAO,YAAcpG,GACdD,GAAQC,KCx8Bf,IAAAqG,GAAA,GAAAC,EAAAD,GAAA,aAAAE,KAAA,IAKMC,GAmeCD,GAxePE,GAAAC,EAAA,KAKMF,IAAc,UAAW,CAC3B,aAEA,IAAIG,EAAe,GACfC,EAAc,EACdC,EAAiB,CAAC,EAClBC,EAAkB,KAClBC,EAAc,GAElB,eAAeC,GAAO,CAElB,GAAID,EAAa,OACjBA,EAAc,GAGd,IAAME,EAAmB,SAAS,eAAe,gBAAgB,GAAK,SAAS,eAAe,eAAe,EAG7G,GAFyBA,GAAoBA,EAAiB,cAAc,kCAAkC,EAExF,CAElBC,EAAe,EACfC,EAAY,EACZC,EAAY,EACZC,EAAe,EACf,MACJ,CAEAV,EAAeW,EAAgB,EAC/BT,EAAiBU,EAAkB,EACnCX,EAAc,SAAS,IAAI,gBAAgB,OAAO,SAAS,MAAM,EAAE,IAAI,MAAM,CAAC,GAAK,EAGnF,MAAMY,EAAa,EAEnBN,EAAe,EACfC,EAAY,EACZC,EAAY,EACZC,EAAe,CACnB,CAEA,SAASA,GAAiB,CACtB,IAAMI,EAAU,SAAS,eAAe,WAAW,EAC7CC,EAAU,SAAS,eAAe,WAAW,EAEnDD,GAAS,iBAAiB,QAAS,IAAM,CACrCA,EAAQ,UAAU,IAAI,iBAAkB,kBAAkB,EAC1DA,EAAQ,UAAU,OAAO,eAAe,EACxCC,GAAS,UAAU,OAAO,iBAAkB,kBAAkB,EAC9DA,GAAS,UAAU,IAAI,eAAe,EACtC,SAAS,IAAI,kBAAmB,MAAM,EACtCF,EAAa,CACjB,CAAC,EAEDE,GAAS,iBAAiB,QAAS,IAAM,CACrCA,EAAQ,UAAU,IAAI,iBAAkB,kBAAkB,EAC1DA,EAAQ,UAAU,OAAO,eAAe,EACxCD,GAAS,UAAU,OAAO,iBAAkB,kBAAkB,EAC9DA,GAAS,UAAU,IAAI,eAAe,EACtC,SAAS,IAAI,kBAAmB,MAAM,EACtCD,EAAa,CACjB,CAAC,CACL,CAEA,eAAeA,GAAe,CAC1B,IAAMP,EAAmB,SAAS,eAAe,gBAAgB,GAAK,SAAS,eAAe,eAAe,EACvGU,EAAe,SAAS,eAAe,eAAe,GAAK,SAAS,eAAe,eAAe,EAExG,GAAKV,EAEL,CAAIH,GACAA,EAAgB,MAAM,EAE1BA,EAAkB,IAAI,gBAEtB,OAAO,KAAKG,EAAkB,UAAU,EAExC,GAAI,CACA,IAAMW,EAAS,CACX,KAAMhB,EACN,SAAU,GACV,GAAGC,CACP,EAQA,GANIF,IACAiB,EAAO,OAASjB,GAIP,OAAO,SAAS,WAChB,eAAgB,CAEzB,MAAMkB,EAAe,EACrB,MACJ,CAEA,IAAMC,EAAW,MAAM,YAAY,YAAYF,CAAM,EAC/CG,EAAW,MAAM,QAAQD,CAAQ,EAAIA,EAAYA,EAAS,MAAQA,EAAS,SAAW,CAAC,EACvFE,EAAOF,EAAS,MAAQ,CAAC,EAE3BH,IACIhB,EACAgB,EAAa,YAAc,GAAGK,EAAK,OAASD,EAAS,MAAM,iBAAiB,UAAU,WAAWpB,CAAY,CAAC,IAE9GgB,EAAa,YAAc,GAAGK,EAAK,OAASD,EAAS,MAAM,aAInEE,EAAcF,EAAUC,CAAI,EAC5B,MAAME,EAAkB,CAC5B,OAASC,EAAO,CACZ,GAAIA,EAAM,OAAS,aAAc,OACjC,QAAQ,MAAM,2BAA4BA,CAAK,EAC/ClB,EAAiB,UAAY,yFACjC,EACJ,CAEA,eAAeY,GAAiB,CAC5B,IAAMZ,EAAmB,SAAS,eAAe,gBAAgB,GAAK,SAAS,eAAe,eAAe,EACvGU,EAAe,SAAS,eAAe,eAAe,GAAK,SAAS,eAAe,eAAe,EAClGS,EAAY,SAAS,eAAe,YAAY,EAEtD,GAAKnB,EAEL,GAAI,CACA,IAAMa,EAAW,MAAM,cAAc,cAAc,CAAE,MAAO,EAAG,CAAC,EAC1DO,EAAa,MAAM,QAAQP,CAAQ,EAAIA,EAAYA,EAAS,MAAQA,EAAS,SAAW,CAAC,EAU/F,GARIM,IACAA,EAAU,YAAc,kBAGxBT,IACAA,EAAa,YAAc,GAAGU,EAAW,MAAM,eAG/CA,EAAW,SAAW,EAAG,CACzBpB,EAAiB,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAS7B,MACJ,CAEAA,EAAiB,UAAY;AAAA;AAAA,sBAEnBoB,EAAW,IAAIC,GAAO;AAAA,+CACGA,EAAI,IAAI;AAAA,yFACkC,SAAS,QAAQ,KAAO,KAAK;AAAA,kCACpFA,EAAI,MAAQ;AAAA,gDACEA,EAAI,KAAK,UAAU,UAAU,WAAWA,EAAI,IAAI,CAAC;AAAA,kCAC7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAMH;AAAA;AAAA;AAAA,yHAGwF,UAAU,WAAWA,EAAI,IAAI,CAAC;AAAA,kCACrHA,EAAI,cAAgB,yCAAyCA,EAAI,aAAa,gBAAkB,EAAE;AAAA;AAAA;AAAA,qBAG/G,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,aAGvB,OAASH,EAAO,CACZ,QAAQ,MAAM,6BAA8BA,CAAK,EACjDlB,EAAiB,UAAY,2FACjC,CACJ,CAEA,SAASK,GAAkB,CAEvB,OADe,IAAI,gBAAgB,OAAO,SAAS,MAAM,EAC3C,IAAI,GAAG,GAAK,EAC9B,CAEA,SAASC,GAAoB,CACzB,IAAMK,EAAS,IAAI,gBAAgB,OAAO,SAAS,MAAM,EACnDW,EAAU,CAAC,EAEjB,OAAIX,EAAO,IAAI,UAAU,IAAGW,EAAQ,SAAWX,EAAO,IAAI,UAAU,GAChEA,EAAO,IAAI,WAAW,IAAGW,EAAQ,SAAWX,EAAO,IAAI,WAAW,GAClEA,EAAO,IAAI,WAAW,IAAGW,EAAQ,SAAWX,EAAO,IAAI,WAAW,GAClEA,EAAO,IAAI,UAAU,IAAGW,EAAQ,SAAWX,EAAO,IAAI,UAAU,GAChEA,EAAO,IAAI,UAAU,IAAGW,EAAQ,QAAUX,EAAO,IAAI,UAAU,IAAM,QACrEA,EAAO,IAAI,MAAM,IAAGW,EAAQ,OAASX,EAAO,IAAI,MAAM,IAAM,QAC5DA,EAAO,IAAI,UAAU,IAAGW,EAAQ,SAAWX,EAAO,IAAI,UAAU,IAAM,QAEnEW,CACX,CAEA,SAASrB,GAAiB,CACtB,IAAMsB,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAc,SAAS,eAAe,cAAc,EAEtDA,IACAA,EAAY,MAAQ9B,GAGxB6B,GAAY,iBAAiB,SAAWE,GAAM,CAC1CA,EAAE,eAAe,EACjB,IAAMC,EAAQF,GAAa,MAAM,KAAK,EAElCE,IACAhC,EAAegC,EACf/B,EAAc,EACdgC,EAAU,EACVC,EAAc,EAEtB,CAAC,EAGD,IAAMC,EAAuB,SAAS,eAAe,oBAAoB,EACrEC,EAAgB,KAEpBN,GAAa,iBAAiB,QAAUC,GAAM,CAC1C,IAAMC,EAAQD,EAAE,OAAO,MAAM,KAAK,EAIlC,GAFA,aAAaK,CAAa,EAEtBJ,EAAM,OAAS,EAAG,CACdG,IACAA,EAAqB,UAAY,GACjCA,EAAqB,UAAU,IAAI,QAAQ,GAE/C,MACJ,CAEAC,EAAgB,WAAW,SAAY,CACnC,GAAI,CAEA,IAAMhB,GADW,MAAM,YAAY,OAAO,CAAE,EAAGY,EAAO,MAAO,CAAE,CAAC,GACtC,MAAQ,CAAC,EAE/BG,GAAwBf,EAAS,OAAS,IAC1Ce,EAAqB,UAAY;AAAA;AAAA,kCAEvBf,EAAS,IAAIiB,GAAW;AAAA,yDACDA,EAAQ,IAAI;AAAA,oDACjBA,EAAQ,OAAS,gCAAgC;AAAA;AAAA,2FAEV,UAAU,WAAWA,EAAQ,IAAI,CAAC;AAAA,kFAC3C,UAAU,YAAYA,EAAQ,eAAiBA,EAAQ,iBAAmBA,EAAQ,KAAK,CAAC;AAAA;AAAA;AAAA,iCAGzI,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,0BAGnBF,EAAqB,UAAU,OAAO,QAAQ,EAEtD,OAASX,EAAO,CACZ,QAAQ,MAAM,6BAA8BA,CAAK,CACrD,CACJ,EAAG,GAAG,CACV,CAAC,EAGDM,GAAa,iBAAiB,OAAQ,IAAM,CACxC,WAAW,IAAM,CACTK,GACAA,EAAqB,UAAU,IAAI,QAAQ,CAEnD,EAAG,GAAG,CACV,CAAC,CACL,CAEA,eAAeD,GAAgB,CAE3B,MAAMrB,EAAa,CACvB,CAKA,SAASS,EAAcF,EAAUC,EAAM,CACnC,IAAMiB,EAAY,SAAS,eAAe,gBAAgB,EAC1D,GAAI,CAACA,EAAW,OAEhB,GAAIlB,EAAS,SAAW,EAAG,CACvBkB,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4FAM0D,UAAU,WAAWtC,CAAY,CAAC;AAAA;AAAA;AAAA,cAIlH,MACJ,CAEA,IAAMuC,EAAW,QAAQ,IAAI,iBAAiB,GAAK,OAC7CC,EAAYD,IAAa,OACzB,YACA,gEAEND,EAAU,UAAY;AAAA,0BACJE,CAAS;AAAA,kBACjBpB,EAAS,IAAIiB,GAAW,YAAY,OAAOA,EAAS,CAAE,OAAQE,CAAS,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,cAEvFlB,EAAK,YAAc,EAAI;AAAA,2DACsB,WAAW,OAAO,CACzD,YAAaA,EAAK,cAAgBpB,EAClC,WAAYoB,EAAK,YACjB,WAAYA,EAAK,KACrB,CAAC,CAAC;AAAA,cACF,EAAE;AAAA,UAGV,YAAY,WAAWiB,CAAS,EAEJ,SAAS,eAAe,mBAAmB,GAClD,iBAAiB,QAAUP,GAAM,CAClD,IAAMU,EAAUV,EAAE,OAAO,QAAQ,aAAa,EAC1CU,IACAxC,EAAc,SAASwC,EAAQ,QAAQ,IAAI,EAC3CR,EAAU,EACVC,EAAc,EACd,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,QAAS,CAAC,EAEtD,CAAC,CACL,CAEA,eAAeX,GAAoB,CAC/B,IAAMmB,EAAsB,SAAS,eAAe,mBAAmB,EACvE,GAAKA,EAEL,GAAI,CAEA,IAAMhB,GADW,MAAM,cAAc,OAAO,CAAE,aAAc,GAAM,MAAO,EAAG,CAAC,GACjD,MAAQ,CAAC,EAErCgB,EAAoB,UAAY;AAAA;AAAA;AAAA,uEAG4BxC,EAAe,SAAuB,GAAZ,SAAc;AAAA;AAAA;AAAA,sBAG1FwB,EAAW,IAAIC,GAAO;AAAA;AAAA,yEAE6BA,EAAI,EAAE,KAAKzB,EAAe,WAAa,OAAOyB,EAAI,EAAE,EAAI,UAAY,EAAE;AAAA,uEACxE,UAAU,WAAWA,EAAI,IAAI,CAAC;AAAA;AAAA,qBAEhF,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,cAInBgB,EAAmB,CACvB,MAAgB,CAEhB,CACJ,CAEA,SAASA,GAAqB,CACH,SAAS,iBAAiB,wBAAwB,EAC1D,QAAQC,GAAS,CAC5BA,EAAM,iBAAiB,SAAWb,GAAM,CAChCA,EAAE,OAAO,MACT7B,EAAe,SAAW6B,EAAE,OAAO,MAEnC,OAAO7B,EAAe,SAE1BD,EAAc,EACdgC,EAAU,EACVC,EAAc,CAClB,CAAC,CACL,CAAC,CACL,CAEA,SAAS1B,GAAc,CACnB,IAAMqC,EAAgB,SAAS,eAAe,oBAAoB,EAC5DC,EAAkB,SAAS,eAAe,iBAAiB,EAC3DC,EAAkB,SAAS,eAAe,eAAe,EAE/DF,GAAe,iBAAiB,QAAS,IAAM,CAC3C,IAAMG,EAAW,SAAS,eAAe,kBAAkB,GAAG,MACxDC,EAAW,SAAS,eAAe,kBAAkB,GAAG,MAE1DD,EAAU9C,EAAe,UAAY8C,EACpC,OAAO9C,EAAe,UAEvB+C,EAAU/C,EAAe,UAAY+C,EACpC,OAAO/C,EAAe,UAE3BD,EAAc,EACdgC,EAAU,EACVC,EAAc,CAClB,CAAC,EAEDY,GAAiB,iBAAiB,SAAWf,GAAM,CAC3CA,EAAE,OAAO,QACT7B,EAAe,SAAW,GAE1B,OAAOA,EAAe,SAE1BD,EAAc,EACdgC,EAAU,EACVC,EAAc,CAClB,CAAC,EAEDa,GAAiB,iBAAiB,QAAS,IAAM,CAC7C7C,EAAiB,CAAC,EAClBD,EAAc,EAEd,SAAS,iBAAiB,wBAAwB,EAAE,QAAQiD,GAAK,CAC7DA,EAAE,QAAUA,EAAE,QAAU,EAC5B,CAAC,EAED,IAAMC,EAAW,SAAS,eAAe,kBAAkB,EACrDC,EAAW,SAAS,eAAe,kBAAkB,EACvDD,IAAUA,EAAS,MAAQ,IAC3BC,IAAUA,EAAS,MAAQ,IAE3BN,IAAiBA,EAAgB,QAAU,IAE/Cb,EAAU,EACVC,EAAc,CAClB,CAAC,EAGD,IAAMiB,EAAW,SAAS,eAAe,kBAAkB,EACrDC,EAAW,SAAS,eAAe,kBAAkB,EACvDD,GAAYjD,EAAe,YAAWiD,EAAS,MAAQjD,EAAe,WACtEkD,GAAYlD,EAAe,YAAWkD,EAAS,MAAQlD,EAAe,WACtE4C,GAAmB5C,EAAe,WAAU4C,EAAgB,QAAU,GAC9E,CAEA,SAASrC,GAAc,CACnB,IAAM4C,EAAa,SAAS,eAAe,aAAa,EACnDA,IAELA,EAAW,MAAQnD,EAAe,UAAY,GAE9CmD,EAAW,iBAAiB,SAAWtB,GAAM,CACrCA,EAAE,OAAO,MACT7B,EAAe,SAAW6B,EAAE,OAAO,MAEnC,OAAO7B,EAAe,SAE1BD,EAAc,EACdgC,EAAU,EACVC,EAAc,CAClB,CAAC,EACL,CAEA,SAASD,GAAY,CACjB,IAAMhB,EAAS,IAAI,gBAEfjB,GAAciB,EAAO,IAAI,IAAKjB,CAAY,EAC1CE,EAAe,UAAUe,EAAO,IAAI,WAAYf,EAAe,QAAQ,EACvEA,EAAe,WAAWe,EAAO,IAAI,YAAaf,EAAe,SAAS,EAC1EA,EAAe,WAAWe,EAAO,IAAI,YAAaf,EAAe,SAAS,EAC1EA,EAAe,UAAUe,EAAO,IAAI,WAAYf,EAAe,QAAQ,EACvEA,EAAe,UAAUe,EAAO,IAAI,WAAY,MAAM,EACtDhB,EAAc,GAAGgB,EAAO,IAAI,OAAQhB,CAAW,EAEnD,IAAMqD,EAAS,GAAG,OAAO,SAAS,QAAQ,IAAIrC,EAAO,SAAS,CAAC,GAC/D,OAAO,QAAQ,UAAU,CAAC,EAAG,GAAIqC,CAAM,CAC3C,CAEA,SAASC,GAAU,CACXpD,IACAA,EAAgB,MAAM,EACtBA,EAAkB,MAEtBH,EAAe,GACfC,EAAc,EACdC,EAAiB,CAAC,EAClBE,EAAc,EAClB,CAEA,MAAO,CACH,KAAAC,EACA,QAAAkD,CACJ,CACJ,GAAG,EAEH,OAAO,WAAa1D,GACbD,GAAQC,KCxef,IAAA2D,GAAA,GAAAC,EAAAD,GAAA,aAAAE,KAAA,IAKMC,GAygBCD,GA9gBPE,GAAAC,EAAA,KAKMF,IAAgB,UAAW,CAC7B,aAEA,IAAIG,EAAc,EAElB,eAAeC,GAAO,CACb,UAAU,YAAY,GAE3B,MAAMC,EAAa,CACvB,CAEA,SAASC,EAAoBC,EAAO,CAAC,EAAG,CACpC,IAAMC,EAAUD,EAAK,SAAWA,GAAQ,CAAC,EACnCE,EAAa,CACfF,EAAK,cACLC,EAAQ,cACRA,EAAQ,cACRA,EAAQ,MACR,MAAM,QAAQA,EAAQ,MAAM,EAAIA,EAAQ,OAAO,CAAC,EAAI,KACpDA,EAAQ,UACRA,EAAQ,SACZ,EAEME,EAAQC,GAAQ,CAClB,GAAI,CAACA,EAAK,MAAO,GACjB,GAAI,OAAOA,GAAQ,SAAU,OAAOA,EACpC,GAAI,OAAOA,GAAQ,SAAU,CACzB,GAAI,OAAOA,EAAI,OAAU,UAAYA,EAAI,MAAO,OAAOA,EAAI,MAC3D,GAAIA,EAAI,OAAS,OAAOA,EAAI,OAAU,SAAU,CAC5C,GAAI,OAAOA,EAAI,MAAM,KAAQ,UAAYA,EAAI,MAAM,IAAK,OAAOA,EAAI,MAAM,IACzE,GAAI,OAAOA,EAAI,MAAM,KAAQ,UAAYA,EAAI,MAAM,IAAK,OAAOA,EAAI,MAAM,GAC7E,CACA,GAAI,OAAOA,EAAI,KAAQ,UAAYA,EAAI,IAAK,OAAOA,EAAI,IACvD,GAAI,OAAOA,EAAI,KAAQ,UAAYA,EAAI,IAAK,OAAOA,EAAI,GAC3D,CACA,MAAO,EACX,EAEA,QAAWC,KAAaH,EAAY,CAChC,IAAMI,EAAMH,EAAKE,CAAS,EAC1B,GAAIC,EAAK,OAAOA,CACpB,CAEA,MAAO,EACX,CAEA,SAASC,EAAcP,EAAO,CAAC,EAAG,CAC9B,IAAMC,EAAUD,EAAK,SAAWA,GAAQ,CAAC,EAKnCQ,EAAcJ,GAAQ,CACxB,GAAIA,GAAQ,KAA2B,OAAO,KAC9C,IAAMK,EAAM,OAAOL,CAAG,EACtB,OAAO,OAAO,SAASK,CAAG,EAAIA,EAAM,IACxC,EAGMC,EAAkB,CACpBV,EAAK,cACLC,EAAQ,MACRD,EAAK,MACLA,EAAK,cACLA,EAAK,YACT,EAEIW,EAAQ,KACZ,QAAWC,KAAKF,EAEZ,GADAC,EAAQH,EAAWI,CAAC,EAChBD,IAAU,KAAM,MAIxB,IAAME,EAAiB,CACnBb,EAAK,mBACLC,EAAQ,WACRD,EAAK,UACT,EAEIc,EAAY,KAChB,QAAWC,KAAKF,EAEZ,GADAC,EAAYN,EAAWO,CAAC,EACpBD,IAAc,KAAM,MAG5B,MAAO,CACH,MAAOH,IAAU,KAAOA,EAAQ,EAChC,UAAWG,IAAc,KAAOA,EAAY,IAChD,CACJ,CAEA,eAAehB,GAAe,CAC1B,IAAMkB,EAAY,SAAS,eAAe,oBAAoB,EAC9D,GAAKA,EAEL,QAAO,KAAKA,EAAW,UAAU,EAEjC,GAAI,CACA,IAAMC,EAAW,MAAM,YAAY,YAAY,CAAE,KAAMrB,CAAY,CAAC,EAEhEsB,EAAQ,CAAC,EACTC,EAAO,CAAC,EAER,MAAM,QAAQF,CAAQ,EACtBC,EAAQD,EACDA,GAAY,OAAOA,GAAa,WAEvCC,EAAQD,EAAS,MAAQA,EAAS,SAAWA,EAAS,OAAS,CAAC,EAE5D,CAAC,MAAM,QAAQC,CAAK,GAAKD,EAAS,MAAQ,OAAOA,EAAS,MAAS,UACnEC,EAAQD,EAAS,KAAK,OAASA,EAAS,KAAK,SAAW,CAAC,EACzDE,EAAOF,EAAS,KAAK,MAAQA,EAAS,MAAQ,CAAC,GAE/CE,EAAOF,EAAS,MAAQ,CAAC,GAI5B,MAAM,QAAQC,CAAK,IAEpBA,EAAQA,GAAS,OAAOA,GAAU,SAAW,CAACA,CAAK,EAAI,CAAC,GAG5DE,EAAeF,EAAOC,CAAI,CAC9B,OAASE,EAAO,CACZ,IAAMC,EAAOD,IAAUA,EAAM,SAAWA,EAAM,SAAY,2BAG1D,GAAIA,GAASA,EAAM,SAAW,IAAK,CAE/B,UAAU,gBAAgB,EAC1B,MACJ,CAEAL,EAAU,UAAY,4CAA4C,UAAU,WAAWM,CAAG,CAAC,MAC/F,EACJ,CAEA,SAASF,EAAeF,EAAOC,EAAM,CACjC,IAAMH,EAAY,SAAS,eAAe,oBAAoB,EAC9D,GAAKA,EAEL,IAAIE,EAAM,SAAW,EAAG,CACpBF,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAYtB,MACJ,CAkBA,GAhBAA,EAAU,UAAY;AAAA;AAAA,4EAE8CE,EAAM,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAMtEA,EAAM,IAAIlB,GAAQuB,EAAmBvB,CAAI,CAAC,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,cAExDmB,EAAK,YAAc,EAAI;AAAA;AAAA,cAErB,EAAE;AAAA,UAINA,GAAQA,EAAK,YAAc,EAAG,CAC9B,IAAMK,EAAQ,SAAS,eAAe,qBAAqB,EAC3D,GAAIA,GAAS,OAAO,WAAY,CAC5B,IAAMC,EAAY,IAAI,OAAO,WAAW,CACpC,WAAYN,EAAK,YACjB,YAAaA,EAAK,cAAgBvB,EAClC,UAAW,iBACX,SAAW8B,GAAS,CAChB9B,EAAc8B,EACd5B,EAAa,EACb,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,QAAS,CAAC,CAClD,CACJ,CAAC,EACD0B,EAAM,UAAY,GAClBA,EAAM,YAAYC,EAAU,OAAO,CAAC,CACxC,CACJ,CAEAE,EAAW,EACf,CAEA,SAASJ,EAAmBvB,EAAM,CAC9B,GAAI,CACA,IAAMC,EAAUD,EAAK,SAAWA,GAAQ,CAAC,EACnC4B,EAAc5B,EAAK,cAAgBC,EAAQ,MAAQ,GACnD4B,EAAc7B,EAAK,cAAgBC,EAAQ,MAAQ,GACnD6B,EAAU9B,EAAK,cAAgB,OAAYA,EAAK,YAAeC,EAAQ,cAAgB,OAAYA,EAAQ,YAAeA,EAAQ,eAAiB,EACnJ8B,EAAWhC,EAAoBC,GAAQ,CAAC,CAAC,EACzCgC,EAAmB,CAAC,CAAChC,EAAK,qBAE5BiC,EAAW,CAAE,MAAO,EAAG,UAAW,IAAK,EAC3C,GAAI,CAAEA,EAAW1B,EAAcP,GAAQ,CAAC,CAAC,CAAG,MAAQ,CAAEiC,EAAW,CAAE,MAAO,EAAG,UAAW,IAAK,CAAG,CAChG,GAAM,CAAE,MAAAtB,EAAO,UAAAG,CAAU,EAAImB,EAEvBC,EAAcnB,GAAM,CACtB,GAAI,CAAE,OAAO,UAAU,WAAWA,GAAK,EAAE,CAAG,MAAQ,CAAE,OAAO,OAAOA,GAAK,EAAE,CAAG,CAClF,EAEMoB,EAAmBvB,GAAM,CAC3B,GAAI,CAAE,OAAO,MAAM,OAAO,CAAE,MAAOA,EAAE,MAAO,UAAWA,EAAE,SAAU,CAAC,CAAG,MAAQ,CAAE,MAAO,2BAA2BA,EAAE,OAAS,EAAE,SAAW,CAC/I,EAEMwB,EAAanC,GAAWA,EAAQ,SAAWA,EAAQ,OAAO,MAAQA,EAAQ,OAAO,OAASA,EAAQ,OAAO,OAAS,GAAGA,EAAQ,OAAO,KAAK,IAAIA,EAAQ,OAAO,MAAM,GAAK,QAAW,MAExL,MAAO;AAAA,yIACsHD,GAAQA,EAAK,GAAKA,EAAK,GAAK,EAAE,sBAAuBC,GAAWA,EAAQ,GAAMA,EAAQ,GAAMD,GAAQA,EAAK,QAAWA,EAAK,QAAU,EAAE,wBAAwBkC,EAAWL,CAAW,CAAC,gCAAgCG,CAAgB;AAAA,iEAC5SI,CAAS;AAAA,0BAChDpC,GAAQA,EAAK,oBAAsB;AAAA;AAAA,mCAE1BA,EAAK,mBAAmB;AAAA;AAAA,0BAE/B,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAMekC,EAAWL,CAAW,CAAC;AAAA,8BACtCE,EAAW;AAAA;AAAA,2CAEEA,CAAQ;AAAA,2CACRG,EAAWN,CAAW,CAAC;AAAA;AAAA;AAAA;AAAA,8BAIlC;AAAA;AAAA,6BAEH;AAAA;AAAA;AAAA;AAAA,0BAIH3B,GAAWA,EAAQ,SAAW;AAAA,mDACLiC,EAAWjC,EAAQ,SAAS,IAAI,CAAC;AAAA,kCAClDiC,EAAWjC,EAAQ,SAAS,IAAI,CAAC;AAAA;AAAA,0BAEvC,EAAE;AAAA;AAAA,iDAEmBiC,EAAWL,CAAW,CAAC;AAAA,kCACtCK,EAAWN,CAAW,CAAC;AAAA;AAAA;AAAA;AAAA,8BAI3BO,EAAgB,CAAE,MAAAxB,EAAO,UAAAG,CAAU,CAAC,CAAC;AAAA;AAAA,0BAEzCb,GAAWA,EAAQ,eAAiB;AAAA;AAAA,kCAE5B,UAAU,YAAYA,EAAQ,cAAc,CAAC;AAAA,uEACRA,EAAQ,cAAgB,CAAC;AAAA;AAAA,0BAEpE,EAAE;AAAA;AAAA;AAAA,8BAGC6B,EAAuB,GAAb,UAAe;AAAA;AAAA,8BAE1BE,EAAmB,iBAAoBF,EAAU,cAAgB,cAAe;AAAA;AAAA;AAAA,sBAGxF9B,GAAQA,EAAK,SAAW;AAAA;AAAA,qEAEuB,UAAU,WAAWA,EAAK,QAAQ,CAAC;AAAA;AAAA,sBAEhF,EAAE;AAAA;AAAA,aAGlB,MAAc,CACV,MAAO,oFACX,CACJ,CAEA,SAAS2B,GAAa,CAClB,IAAMU,EAAc,SAAS,eAAe,oBAAoB,EAC1DC,EAAgB,SAAS,iBAAiB,gBAAgB,EAC1DC,EAAsB,SAAS,eAAe,qBAAqB,EAEzEF,GAAa,iBAAiB,QAAS,SAAY,CAQ/C,GAPkB,MAAM,MAAM,QAAQ,CAClC,MAAO,iBACP,QAAS,gEACT,YAAa,YACb,WAAY,QAChB,CAAC,EAGG,GAAI,CACA,MAAM,YAAY,MAAM,EACxB,MAAM,QAAQ,mBAAmB,EACjC,MAAMvC,EAAa,CACvB,OAASuB,EAAO,CACZ,MAAM,MAAMA,EAAM,SAAW,2BAA2B,CAC5D,CAER,CAAC,EAEDiB,EAAc,QAAQtC,GAAQ,CAC1B,IAAMwC,EAASxC,EAAK,QAAQ,OACtByC,EAAYzC,EAAK,QAAQ,UAE/BA,EAAK,cAAc,aAAa,GAAG,iBAAiB,QAAS,SAAY,CACrE,GAAI,CACA,MAAM,YAAY,WAAWwC,CAAM,EACnC,MAAM,QAAQ,wBAAwB,EACtCxC,EAAK,OAAO,EAEM,SAAS,iBAAiB,gBAAgB,EAC9C,SAAW,GACrB,MAAMF,EAAa,CAE3B,OAASuB,EAAO,CACZ,MAAM,MAAMA,EAAM,SAAW,wBAAwB,CACzD,CACJ,CAAC,EAEDrB,EAAK,cAAc,kBAAkB,GAAG,iBAAiB,QAAS,MAAO0C,GAAM,CAC3E,IAAMC,EAAMD,EAAE,OACd,GAAIC,EAAI,SAAU,OAElBA,EAAI,SAAW,GACfA,EAAI,YAAc,YAElB,IAAMd,EAAc7B,EAAK,QAAQ,aAAe,GAIhD,GAHyBA,EAAK,QAAQ,qBAAuB,QAAUA,EAAK,QAAQ,qBAAuB,QAAUA,EAAK,QAAQ,qBAAuB,IAGnI,CAElB4C,EAAkB5C,CAAI,EACtB,MACJ,CAEA,GAAI,CACA,MAAM,QAAQ,QAAQyC,EAAW,CAAC,EAClC,MAAM,QAAQ,gBAAgB,EAC9B,SAAS,cAAc,IAAI,YAAY,cAAc,CAAC,CAC1D,OAASpB,EAAO,CASZ,GAPwB,GACpBA,IACKA,EAAM,QAAUA,EAAM,OAAO,YAC7BA,EAAM,SAAW,OAAOA,EAAM,SAAY,UAAYA,EAAM,QAAQ,YAAY,EAAE,SAAS,SAAS,IAIxF,CACjB,MAAM,KAAK,+EAA+E,EAE1F,IAAIwB,EAAOhB,EACX,GAAI,CAACgB,EAAM,CACP,IAAMC,EAAO9C,EAAK,cAAc,GAAG,GAAG,aAAa,MAAM,EACzD,GAAI8C,EAAM,CACN,IAAMC,EAAID,EAAK,MAAM,sBAAsB,EACvCC,IAAGF,EAAOE,EAAE,CAAC,EACrB,CACJ,CACA,GAAIF,EAAM,CACN,OAAO,SAAS,KAAO,aAAaA,CAAI,IACxC,MACJ,CACJ,CAEA,MAAM,MAAMxB,EAAM,SAAW,wBAAwB,CACzD,QAAE,CACEsB,EAAI,SAAW,GACfA,EAAI,YAAc,aACtB,CACJ,CAAC,CACL,CAAC,CAGL,CAEA,SAASK,EAAoBC,EAAU,CACnC,IAAMC,EAAU,CAAC,EACjB,OAAAD,EAAS,QAAQE,GAAW,CACnBD,EAAQC,EAAQ,cAAc,IAAGD,EAAQC,EAAQ,cAAc,EAAI,CAAC,GACzED,EAAQC,EAAQ,cAAc,EAAE,KAAKA,CAAO,CAChD,CAAC,EAEM,OAAO,QAAQD,CAAO,EAAE,IAAI,CAAC,CAACE,EAAUC,CAAO,IAAM;AAAA;AAAA,mEAED,UAAU,WAAWD,CAAQ,CAAC;AAAA,oFACb,UAAU,QAAQA,CAAQ,CAAC;AAAA,sBACzFC,EAAQ,IAAI,CAACC,EAAKC,IAAU;AAAA,wIACsFA,IAAU,EAAI,oDAAsD,uCAAuC,sBAAsBD,EAAI,EAAE,iBAAiBA,EAAI,iBAAmBA,EAAI,OAAS,EAAE,iBAAiBA,EAAI,gBAAkB,CAAC;AAAA,8BAChV,UAAU,WAAWA,EAAI,KAAK,CAAC;AAAA,8BAC9BA,EAAI,iBAAmBA,EAAI,MAAS,yCAAyC,UAAU,YAAYA,EAAI,iBAAmBA,EAAI,KAAK,CAAC,WAAa,EAAE;AAAA;AAAA,qBAE7J,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,SAGtB,EAAE,KAAK,EAAE,CACd,CAEA,eAAeV,EAAkB5C,EAAM,CAEnC,IAAM6C,EAAO7C,EAAK,cAAgBA,EAAK,SAAS,aAAe,GACzDwD,EAAKxD,EAAK,SAAWA,EAAK,SAAS,WAAa,GAEtD,GAAI,CAEA,IAAIyD,EACJ,GAAI,OAAO,YAAgB,KAAe,YAAY,WAClDA,EAAM,MAAM,YAAY,WAAWZ,GAAQW,CAAE,MAC1C,CACH,IAAME,EAAY,OAAO,kBAAoB,OAAO,iBAAiB,MAAS,OAC9ED,EAAM,MAAM,UAAU,IAAI,aAAaZ,GAAQW,CAAE,IAAK,CAAE,SAAAE,CAAS,CAAC,CACtE,CAEA,GAAI,CAACD,GAAO,CAACA,EAAI,SAAW,CAACA,EAAI,KAAM,CACnC,IAAMnC,EAAMmC,GAAOA,EAAI,QAAUA,EAAI,QAAU,mCAC/C,MAAM,MAAMnC,CAAG,EACf,MACJ,CAEA,IAAMrB,EAAUwD,EAAI,KACdR,EAAWhD,EAAQ,UAAY,CAAC,EACtC,GAAI,CAACgD,EAAS,OAAQ,CAElB,OAAO,SAAS,KAAO,aAAahD,EAAQ,MAAQ4C,GAAQW,CAAE,IAC9D,MACJ,CAEA,IAAMG,EAAa1D,EAAQ,SAAS,CAAC,GAAG,OAASA,EAAQ,eAAiBA,EAAQ,OAAS,GAErF2D,EAAU;AAAA;AAAA;AAAA,0BAGFD,EAAa,aAAaA,CAAU,mDAAmD,UAAU,WAAW1D,EAAQ,IAAI,CAAC,KAAO,qDAAqD;AAAA;AAAA;AAAA,4DAGnJ,UAAU,WAAWA,EAAQ,IAAI,CAAC;AAAA,0FACJ,UAAU,YAAYgD,IAAW,CAAC,GAAG,iBAAmBA,IAAW,CAAC,GAAG,OAAShD,EAAQ,KAAK,CAAC;AAAA;AAAA,8BAE1J+C,EAAoBC,CAAQ,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAUzCY,EAAY,MAAM,MAAM,KAAK,CAC/B,MAAO,iBACP,QAAAD,EACA,YAAa,cACb,WAAY,SACZ,KAAM,KACN,UAAW,SAAY,CAGnB,IAAMjB,EADS,SAAS,cAAc,gDAAgD,GAChE,SAAS,cAAc,6BAA6B,EAC1E,GAAI,CAACA,EACD,aAAM,MAAM,0BAA0B,EAC/B,GAEX,IAAMmB,EAAYnB,EAAI,QAAQ,UACxBoB,EAAM,SAAS,SAAS,eAAe,sBAAsB,GAAG,KAAK,GAAK,EAEhF,GAAI,CACA,aAAM,QAAQ,QAAQ9D,EAAQ,GAAI8D,EAAKD,CAAS,EAChD,MAAM,QAAQ,gBAAgB,EAC9B,SAAS,cAAc,IAAI,YAAY,cAAc,CAAC,EAC/C,EACX,OAASE,EAAK,CACV,aAAM,MAAMA,EAAI,SAAW,wBAAwB,EAC5C,EACX,CACJ,CACJ,CAAC,EAGD,WAAW,IAAM,CACb,IAAMC,EAAc,SAAS,iBAAiB,6BAA6B,EAC3EA,EAAY,QAAQtB,GAAO,CACvBA,EAAI,iBAAiB,QAAS,IAAM,CAChCsB,EAAY,QAAQC,GAAKA,EAAE,UAAU,OAAO,qBAAsB,gBAAiB,kBAAkB,CAAC,EACtGvB,EAAI,UAAU,IAAI,qBAAsB,gBAAiB,kBAAkB,EAE3E,IAAMhC,EAAQgC,EAAI,QAAQ,MAC1B,GAAIhC,IAAU,OAAW,CACrB,IAAMwD,EAAU,SAAS,eAAe,wBAAwB,EAC5DA,IAASA,EAAQ,YAAc,UAAU,YAAYxD,CAAK,EAClE,CACJ,CAAC,CACL,CAAC,EAED,IAAMyD,EAAQ,SAAS,cAAc,6BAA6B,EAC9DA,GAAOA,EAAM,MAAM,CAC3B,EAAG,EAAE,CAET,MAAgB,CACZ,MAAM,MAAM,0BAA0B,CAC1C,CACJ,CAEA,SAASC,GAAU,CACfzE,EAAc,CAClB,CAEA,MAAO,CACH,KAAAC,EACA,QAAAwE,CACJ,CACJ,GAAG,EAEH,OAAO,aAAe5E,GACfD,GAAQC,00BC9gBf,IAAA6E,GAAAC,GAAA,KAKAC,KAaqCC,KAXrC,IAAMC,IAAO,UAAW,CACpB,aAGA,IAAMC,EAAkB,CAAC,EAErBC,EAAc,KACdC,EAAoB,KAExB,eAAeC,EAAmBC,EAAM,CACpC,GAAI,CACA,IAAMC,EAAM,MAAaC,GAAA,WAAWF,CAAI,OACxC,OAAOC,EAAI,SAAWA,CAC1B,MAAY,CAER,OAAO,IACX,CACJ,CAEA,SAASE,GAAO,CACZC,EAAkB,EAClBC,EAAqB,EACrBC,EAAgB,EAChBC,EAAc,EACdC,EAAkB,EAClBC,EAAyB,EACzBC,EAAe,EACfC,EAAqB,CAEzB,CACA,eAAeH,GAAoB,CAE/B,GAAI,CAEA,GAAI,CAAC,QAAQ,gBAAgB,EAAG,CAC5B,IAAMI,EAAM,aAAa,QAAQ,UAAU,EAC3C,GAAIA,EAAK,CACL,IAAMC,EAAS,KAAK,MAAMD,CAAG,EAC7B,YAAY,YAAYC,CAAM,EAC9B,IAAMC,EAAQD,EAAO,OAAUA,EAAO,MAAQA,EAAO,KAAK,OAAU,CAAC,EACrEE,EAAoBD,CAAK,CAC7B,MAEIC,EAAoB,CAAC,CAAC,EAE1B,MACJ,CAGA,IAAMC,GADW,MAAM,YAAY,YAAY,CAAE,SAAU,GAAI,CAAC,GACvC,MAAQ,CAAC,EAC5BF,EAAQE,EAAQ,OAASA,EAAQ,MAAQ,CAAC,EAChD,YAAY,YAAYA,CAAO,EAC/BD,EAAoBD,CAAK,CAC7B,MAAgB,CACZ,GAAI,CACA,IAAMF,EAAM,aAAa,QAAQ,UAAU,EAC3C,GAAIA,EAAK,CACL,IAAMC,EAAS,KAAK,MAAMD,CAAG,EAC7B,YAAY,YAAYC,CAAM,EAC9B,IAAMC,EAAQD,EAAO,OAAUA,EAAO,MAAQA,EAAO,KAAK,OAAU,CAAC,EACrEE,EAAoBD,CAAK,CAC7B,CACJ,MAAY,CAEZ,CACJ,CACJ,CAGA,IAAIG,EAAqB,CAAC,EAG1B,SAASF,EAAoBD,EAAO,CAChC,GAAI,CACAG,EAAqBH,GAAS,CAAC,EAE/B,IAAMI,EAAU,CAAC,EACXC,EAAY,CAAC,GAElBL,GAAS,CAAC,GAAG,QAAQM,GAAM,CAExB,IAAMC,EAAOD,EAAG,SAAWA,EAAG,YAAeA,EAAG,SAAWA,EAAG,QAAQ,IAAO,KACvEE,EAAQF,EAAG,cAAiBA,EAAG,SAAWA,EAAG,QAAQ,MAAS,KAC9DG,EAAKH,EAAG,IAAMA,EAAG,IAAMA,EAAG,MAAQA,EAAG,MAAQ,KAC/CC,IAAKH,EAAQ,OAAOG,CAAG,CAAC,EAAIE,GAAM,IAClCD,IAAOH,EAAU,OAAOG,CAAK,CAAC,EAAIC,GAAM,GAChD,CAAC,EAED,SAAS,iBAAiB,eAAe,EAAE,QAAQC,GAAO,CACtD,GAAI,CACA,IAAMC,EAAMD,EAAI,cAAc,KAAK,EAC7BE,EAAWD,GAAK,cAAc,aAAa,EAC3CE,EAAYH,EAAI,QAAQ,WAAaA,EAAI,QAAQ,mBAAmB,GAAG,QAAQ,UAC/EI,EAAcJ,EAAI,QAAQ,aAAeA,EAAI,QAAQ,qBAAqB,GAAG,QAAQ,YAEvFK,EAAS,KACTF,GAAaT,EAAQ,eAAe,OAAOS,CAAS,CAAC,EAAGE,EAASX,EAAQ,OAAOS,CAAS,CAAC,EACrFC,GAAeT,EAAU,eAAe,OAAOS,CAAW,CAAC,IAAGC,EAASV,EAAU,OAAOS,CAAW,CAAC,GAEzGC,GACAL,EAAI,QAAQ,eAAiBK,EAC7BL,EAAI,UAAU,IAAI,cAAc,EAChCA,EAAI,aAAa,eAAgB,MAAM,EACvCC,GAAK,UAAU,IAAI,cAAc,EAC7BC,IAAUA,EAAS,MAAM,QAAU,OAEvCF,EAAI,gBAAgB,uBAAuB,EAC3CA,EAAI,UAAU,OAAO,cAAc,EACnCA,EAAI,aAAa,eAAgB,OAAO,EACxCC,GAAK,UAAU,OAAO,cAAc,EAChCC,IAAUA,EAAS,MAAM,QAAU,KAE/C,MAAY,CAEZ,CACJ,CAAC,CACL,MAAY,CAEZ,CACJ,EAGC,UAAW,CACR,GAAI,OAAO,iBAAqB,IAAa,OAC7C,IAAII,EAAgB,KACH,IAAI,iBAAiB,SAASC,EAAW,CACtD,IAAIC,EAAQ,GACZ,QAAWC,KAAKF,EAAW,CACvB,GAAIE,EAAE,YAAcA,EAAE,WAAW,QAC7B,QAAWC,KAAKD,EAAE,WACd,GAAIC,EAAE,WAAa,IAAMA,EAAE,UAAU,eAAe,GAAKA,EAAE,gBAAgB,eAAe,GAAKA,EAAE,gBAAgB,eAAe,GAAI,CAChIF,EAAQ,GAAM,KAClB,EAGR,GAAIA,EAAO,KACf,CACIA,IACA,aAAaF,CAAa,EAC1BA,EAAgB,WAAW,IAAM,CAC7B,GAAI,CAAEf,EAAoBE,CAAkB,CAAG,MAAY,CAAC,CAChE,EAAG,GAAG,EAEd,CAAC,EACQ,QAAQ,SAAS,KAAM,CAAE,UAAW,GAAM,QAAS,EAAK,CAAC,CACtE,GAAG,EAwBH,SAASb,GAAoB,CACzB,IAAM+B,EAAO,OAAO,SAAS,SACvBC,EAAO,SAAS,KAGtB,GAAIA,EAAK,QAAQ,KAAM,CACnBvC,EAAcuC,EAAK,QAAQ,KAC3B,MACJ,CAIA,IAAKD,EAAK,WAAW,YAAY,GAAKA,EAAK,WAAW,WAAW,IAAM,EAAEA,EAAK,WAAW,mBAAmB,GAAKA,EAAK,WAAW,kBAAkB,GAAI,CACnJtC,EAAc,KACd,MACJ,CAGIsC,IAAS,KAAOA,IAAS,SACzBtC,EAAc,OACPsC,IAAS,gBAAkBA,IAAS,aAC3CtC,EAAc,SACPsC,EAAK,WAAW,cAAc,GAAKA,IAAS,eACnDtC,EAAc,WACPsC,EAAK,WAAW,YAAY,GAAKA,IAAS,aACjDtC,EAAc,UACPsC,IAAS,YAAcA,EAAK,WAAW,SAAS,EACvDtC,EAAc,SACPsC,EAAK,WAAW,OAAO,EAC9BtC,EAAc,OACPsC,EAAK,WAAW,WAAW,EAClCtC,EAAc,WACPsC,IAAS,YAAcA,EAAK,WAAW,WAAW,GAAKA,EAAK,WAAW,mBAAmB,EACjGtC,EAAc,UACPsC,EAAK,WAAW,SAAS,EAChCtC,EAAc,SACPsC,EAAK,WAAW,WAAW,EAClCtC,EAAc,WACPsC,EAAK,WAAW,UAAU,EACjCtC,EAAc,UACPsC,EAAK,WAAW,MAAM,EAC7BtC,EAAc,OACPsC,EAAK,SAAS,SAAS,GAAKA,EAAK,SAAS,OAAO,GAAKA,EAAK,SAAS,OAAO,GAAKA,EAAK,SAAS,QAAQ,KAC7GtC,EAAc,QAEtB,CAEA,SAASQ,GAAuB,CAKxB,OAAO,KAAS,KAAe,SAAS,cAAc,aAAa,GACnE,KAAK,KAAK,EAIV,OAAO,SAAa,KACpB,SAAS,iBAAiB,yBAAyB,EAAE,QAAQgC,GAAW,CACpE,IAAMC,EAAWD,EAAQ,QAAQ,eAC3BE,EAAS,SAAS,eAAeD,CAAQ,EAC3CC,GACA,SAAS,OAAOF,EAAS,CAAE,QAASE,EAAO,SAAU,CAAC,CAE9D,CAAC,EAIL,GAAI,CAAEC,GAAkB,CAAG,MAAY,CAAe,CAC1D,CAEA,eAAelC,GAAkB,CAC7B,GAAI,CAACT,EAAa,OAElB,GAAI,CACIC,GAAqB,OAAOA,EAAkB,SAAY,YAC1DA,EAAkB,QAAQ,CAElC,MAAY,CAAe,CAE3B,IAAM2C,EAAa,MAAM1C,EAAmBF,CAAW,EACvD,GAAI4C,GAAc,OAAOA,EAAW,MAAS,WAAY,CACrD3C,EAAoB2C,EACpB,GAAI,CAAE,MAAM3C,EAAkB,KAAK,CAAG,OAAS4C,EAAG,CAAE,QAAQ,MAAM,iCAAkCA,CAAC,CAAG,CAC5G,CACJ,CAGA,GAAI,CACI,kBAAmB,WACnB,UAAU,cAAc,SAAS,kBAAkB,EAAE,MAAM,IAAM,CAAC,CAAC,CAE3E,MAAY,CAAe,CAE3B,eAAenC,GAAgB,CAE3B,GADmB,SAAS,iBAAiB,mBAAmB,EAChD,OAChB,GAAI,CAEA,IAAMoC,GADW,MAAM,QAAQ,QAAQ,GAChB,MAAM,YAAc,EAE3C,GAAI,CAAE,aAAa,QAAQ,OAAQ,KAAK,UAAU,CAAE,WAAYA,EAAO,QAAS,KAAK,IAAI,CAAE,CAAC,CAAC,CAAG,MAAW,CAAC,CAC5GC,EAAgBD,CAAK,CACzB,MAAgB,CAEZ,GAAI,CACA,IAAM/B,EAAM,aAAa,QAAQ,MAAM,EACvC,GAAIA,EAAK,CAEL,IAAM+B,EADS,KAAK,MAAM/B,CAAG,GACP,YAAc,EACpCgC,EAAgBD,CAAK,EACrB,MACJ,CACJ,OAASD,EAAG,CACR,QAAQ,MAAM,qCAAsCA,CAAC,CACzD,CAEJ,CACJ,CAEA,eAAeG,EAAmBlB,EAAW,CACzC,GAAI,CAKA,SAJiB,MAAM,YAAY,YAAY,CAAE,SAAU,GAAI,CAAC,GACvC,MAAQ,CAAC,GACZ,OAAS,CAAC,GACZ,KAAKmB,GAAQ,OAAOA,EAAK,OAAO,IAAM,OAAOnB,CAAS,CAAC,GAC7D,IAAM,IACxB,MAAgB,CACZ,OAAO,IACX,CACJ,CAEA,SAASiB,EAAgBD,EAAO,CACT,SAAS,iBAAiB,mBAAmB,EACrD,QAAQI,GAAS,CACxBA,EAAM,YAAcJ,EAAQ,GAAK,MAAQA,EACzCI,EAAM,UAAU,OAAO,SAAUJ,IAAU,CAAC,CAChD,CAAC,CACL,CAEA,SAASlC,GAA2B,CAEhC,SAAS,iBAAiB,eAAgB,SAAY,CAClD,MAAMF,EAAc,CACxB,CAAC,EAGD,SAAS,iBAAiB,mBAAoB,SAAY,CACtD,MAAMC,EAAkB,CAC5B,CAAC,EAGD,SAAS,iBAAiB,aAAc,IAAM,CAC1CwC,EAAa,EAAI,CACrB,CAAC,EAED,SAAS,iBAAiB,cAAe,IAAM,CAC3CA,EAAa,EAAK,CACtB,CAAC,EAGD,SAAS,iBAAiB,eAAe,EAAE,QAAQxB,GAAO,CACtD,GAAI,CACA,IAAMC,EAAMD,EAAI,cAAc,KAAK,EAC7BE,EAAWD,GAAK,cAAc,aAAa,EAC7CD,EAAI,UAAU,SAAS,cAAc,GACrCC,GAAK,UAAU,IAAI,cAAc,EAC7BC,IAAUA,EAAS,MAAM,QAAU,MAEnCA,IAAUA,EAAS,MAAM,QAAU,IAE/C,MAAY,CAEZ,CACJ,CAAC,EAGD,SAAS,iBAAiB,QAAS,MAAOgB,GAAM,CAC5C,IAAMO,EAAcP,EAAE,OAAO,QAAQ,wDAAwD,EAC7F,GAAIO,EAAa,CACbP,EAAE,eAAe,EACjB,IAAMf,EAAYsB,EAAY,QAAQ,WAAaA,EAAY,QAAQ,UAAYA,EAAY,QAAQ,UACvG,GAAI,CAACtB,EAAW,OAEhBsB,EAAY,SAAW,GACvB,IAAMC,EAAeD,EAAY,UACjCA,EAAY,UAAY,6VAExB,GAAI,CACA,MAAM,QAAQ,QAAQtB,EAAW,CAAC,EAClC,MAAM,QAAQ,gBAAgB,EAC9B,SAAS,cAAc,IAAI,YAAY,cAAc,CAAC,CAC1D,OAASwB,EAAO,CACZ,MAAM,MAAMA,EAAM,SAAW,wBAAwB,CACzD,QAAE,CACEF,EAAY,SAAW,GACvBA,EAAY,UAAYC,CAC5B,CACJ,CACJ,CAAC,EAGD,SAAS,iBAAiB,QAAS,MAAOR,GAAM,CAC5C,IAAMU,EAAcV,EAAE,OAAO,QAAQ,uCAAuC,EAC5E,GAAIU,EAAa,CAGb,GAFAV,EAAE,eAAe,EAEb,CAAC,QAAQ,gBAAgB,EAAG,CAC5B,MAAM,QAAQ,6CAA6C,EAC3D,OAAO,SAAS,KAAO,wBAA0B,mBAAmB,OAAO,SAAS,QAAQ,EAC5F,MACJ,CAEA,IAAMf,EAAYyB,EAAY,QAAQ,gBAAkBA,EAAY,QAAQ,WAAaA,EAAY,QAAQ,mBAAmB,GAAG,QAAQ,UAK3IA,EAAY,SAAW,GACvB,IAAIC,EAAiBD,EAAY,QAAQ,gBAAkB,GAEvD,CAACC,GAAkBD,EAAY,UAAU,SAAS,cAAc,IAChEC,EAAiB,MAAMR,EAAmBlB,CAAS,GAAK,IAI5D,IAAM2B,EADWF,EAAY,UAAU,SAAS,cAAc,GAC7BC,EAEjC,GAAI,CACA,GAAIC,EAAc,CACd,IAAMC,EAAM,MAAM,YAAY,WAAWF,CAAc,EACvDD,EAAY,UAAU,OAAO,cAAc,EAC3CA,EAAY,aAAa,eAAgB,OAAO,EAChDA,EAAY,cAAc,KAAK,GAAG,UAAU,OAAO,cAAc,EACjE,IAAM1B,EAAW0B,EAAY,cAAc,KAAK,GAAG,cAAc,aAAa,EAC1E1B,IAAUA,EAAS,MAAM,QAAU,KACvC0B,EAAY,gBAAgB,uBAAuB,EACnD,MAAM,QAAQ,wBAAwB,CAC1C,KAAO,CACH,IAAMI,EAAW,MAAM,YAAY,QAAQ7B,CAAS,EAC9C8B,EAAYD,EAAS,MAAM,IAAMA,EAAS,MAAM,MAAM,IAAM,MAAMX,EAAmBlB,CAAS,EAChG8B,IACAL,EAAY,QAAQ,eAAiBK,GAEzCL,EAAY,UAAU,IAAI,cAAc,EACxCA,EAAY,aAAa,eAAgB,MAAM,EAC/CA,EAAY,cAAc,KAAK,GAAG,UAAU,IAAI,cAAc,EAC9D,IAAM1B,EAAW0B,EAAY,cAAc,KAAK,GAAG,cAAc,aAAa,EAC1E1B,IAAUA,EAAS,MAAM,QAAU,KACvC,MAAM,QAAQ8B,EAAS,SAAW,oBAAoB,CAC1D,CACJ,OAASL,EAAO,CACZ,QAAQ,MAAM,iBAAkBA,CAAK,EACrC,MAAM,MAAMA,EAAM,SAAW,4BAA4B,CAC7D,QAAE,CACEC,EAAY,SAAW,EAC3B,CACJ,CACJ,CAAC,EAGD,SAAS,iBAAiB,QAAUV,GAAM,CACtC,IAAMgB,EAAehB,EAAE,OAAO,QAAQ,oCAAoC,EAC1E,GAAIgB,EAAc,CACdhB,EAAE,eAAe,EACjB,IAAMf,EAAY+B,EAAa,QAAQ,WAAaA,EAAa,QAAQ,UACnE9B,EAAc8B,EAAa,QAAQ,YAErC9B,EACA,OAAO,SAAS,KAAO,aAAaA,CAAW,IACxCD,IAEH,OAAO,MAAU,KAAe,MAAM,cACtC,MAAM,cAAcA,CAAS,EAE7B,OAAO,SAAS,KAAO,aAAaA,CAAS,IAGzD,CACJ,CAAC,EAGD,SAAS,iBAAiB,QAAS,MAAOe,GAAM,CAE5C,GADkBA,EAAE,OAAO,QAAQ,eAAe,EACnC,CACXA,EAAE,eAAe,EAEjB,GAAI,CACA,MAAM,QAAQ,OAAO,EACrB,MAAM,QAAQ,0BAA0B,EACxC,SAAS,cAAc,IAAI,YAAY,aAAa,CAAC,EACrD,OAAO,SAAS,KAAO,GAC3B,MAAgB,CACZ,MAAM,MAAM,mBAAmB,CACnC,CACJ,CACJ,CAAC,EAGD,IAAMiB,EAAe,SAAS,eAAe,aAAa,EACtDA,IACA,OAAO,iBAAiB,SAAU,SAAS,SAAS,IAAM,CAClD,OAAO,QAAU,IACjBA,EAAa,UAAU,OAAO,YAAa,qBAAqB,EAEhEA,EAAa,UAAU,IAAI,YAAa,qBAAqB,CAErE,EAAG,GAAG,CAAC,EAEPA,EAAa,iBAAiB,QAAS,IAAM,CACzC,OAAO,SAAS,CAAE,IAAK,EAAG,SAAU,QAAS,CAAC,CAClD,CAAC,EAET,CAEA,SAASX,EAAaY,EAAY,CACT,SAAS,iBAAiB,mBAAmB,EAErD,QAAQC,GAAM,CACvB,IAAMC,EAAQD,EAAG,QAAQ,UACrBC,IAAU,YACVD,EAAG,UAAU,OAAO,SAAU,CAACD,CAAU,EAClCE,IAAU,cACjBD,EAAG,UAAU,OAAO,SAAUD,CAAU,CAEhD,CAAC,CACL,CAEA,SAASlD,GAAiB,CACtB,IAAMqD,EAAU,SAAS,eAAe,iBAAiB,EACnDC,EAAW,SAAS,eAAe,mBAAmB,EACtDC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAU,SAAS,eAAe,qBAAqB,EAE7D,SAASC,GAAW,CAChBF,GAAY,UAAU,OAAO,kBAAkB,EAC/CC,GAAS,UAAU,OAAO,QAAQ,EAClC,SAAS,KAAK,UAAU,IAAI,iBAAiB,CACjD,CAEA,SAASE,GAAY,CACjBH,GAAY,UAAU,IAAI,kBAAkB,EAC5CC,GAAS,UAAU,IAAI,QAAQ,EAC/B,SAAS,KAAK,UAAU,OAAO,iBAAiB,CACpD,CAEAH,GAAS,iBAAiB,QAASI,CAAQ,EAC3CH,GAAU,iBAAiB,QAASI,CAAS,EAC7CF,GAAS,iBAAiB,QAASE,CAAS,CAChD,CAIA,SAASzD,GAAuB,CAC5B,IAAM0D,EAAc,SAAS,cAAc,0BAA0B,EAC/DC,EAAmB,SAAS,eAAe,mBAAmB,EAEhED,GAAeC,IACf,SAAS,OAAOD,EAAaC,CAAgB,EAE7CA,EAAiB,iBAAiB,iBAAiB,EAAE,QAAQxB,GAAQ,CACjEA,EAAK,iBAAiB,QAAS,SAAY,CACvC,IAAMyB,EAAOzB,EAAK,QAAQ,SAE1B,GAAI,CACA,MAAM,gBAAgB,YAAYyB,CAAI,EACtC,QAAQ,IAAI,WAAYA,CAAI,EAC5B,OAAO,SAAS,OAAO,CAC3B,MAAgB,CACZ,MAAM,MAAM,4BAA4B,CAC5C,CACJ,CAAC,CACL,CAAC,EAET,CAEA,SAASC,GAAU,CACX1E,GAAqB,OAAOA,EAAkB,SAAY,YAC1DA,EAAkB,QAAQ,EAE9BD,EAAc,KACdC,EAAoB,IACxB,CAEA,MAAO,CACH,KAAAK,EACA,QAAAqE,EACA,eAAgB,IAAM3E,EACtB,gBAAA+C,CACJ,CACJ,GAAG,EAGC,SAAS,aAAe,UACxB,SAAS,iBAAiB,mBAAoBjD,GAAI,IAAI,EAEtDA,GAAI,KAAK,EAGb,OAAO,IAAMA",
  "names": ["clsx", "classes", "c", "createElement", "tag", "id", "className", "attrs", "html", "text", "el", "key", "value", "addListener", "event", "handler", "options", "createFocusTrap", "container", "focusableElements", "firstElement", "lastElement", "e", "generateId", "createBackdrop", "keyboard", "init_utils", "__esmMin", "BaseComponent", "init_BaseComponent", "__esmMin", "init_utils", "_BaseComponent", "options", "generateId", "tag", "className", "attrs", "html", "createElement", "selector", "target", "event", "handler", "cleanup", "addListener", "listener", "e", "classes", "force", "name", "value", "attributes", "key", "content", "element", "property", "styles", "Alert_exports", "__export", "Alert", "init_Alert", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "typeConfig", "config", "alertElement", "clsx", "html", "message", "msgEl", "AlertDialog_exports", "__export", "AlertDialog", "init_AlertDialog", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "containerElement", "clsx", "backdrop", "createBackdrop", "dialogElement", "header", "title", "messageDiv", "footer", "cancelBtn", "confirmBtn", "confirmBtnClasses", "createFocusTrap", "Avatar_exports", "__export", "Avatar", "init_Avatar", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "sizeClasses", "baseClasses", "clsx", "src", "alt", "initials", "bgColor", "bgClass", "Badge_exports", "__export", "Badge", "init_Badge", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "baseClasses", "variantClasses", "sizeClasses", "badgeElement", "clsx", "label", "Button_exports", "__export", "Button", "init_Button", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "baseClasses", "variantClasses", "sizeClasses", "buttonElement", "clsx", "label", "disabled", "loading", "ButtonGroup_exports", "__export", "ButtonGroup", "init_ButtonGroup", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "orientationClass", "groupElement", "clsx", "btnConfig", "index", "btn", "label", "onClick", "Breadcrumb_exports", "__export", "Breadcrumb", "init_Breadcrumb", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "breadcrumbElement", "clsx", "item", "index", "separator", "createElement", "span", "link", "label", "href", "Card_exports", "__export", "Card", "init_Card", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "baseClasses", "hoverClass", "cardElement", "clsx", "headerElement", "createElement", "html", "contentElement", "footerElement", "content", "contentDiv", "element", "Carousel_exports", "__export", "Carousel", "init_Carousel", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "containerElement", "clsx", "slidesElement", "createElement", "item", "index", "slide", "img", "titleElement", "prevBtn", "nextBtn", "dotsElement", "_", "dot", "slides", "dots", "Chart_exports", "__export", "Chart", "init_Chart", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "containerElement", "clsx", "titleElement", "createElement", "svgElement", "maxValue", "d", "width", "height", "padding", "svg", "barWidth", "i", "barHeight", "x", "y", "rect", "text", "data", "newElement", "Checkbox_exports", "__export", "Checkbox", "init_Checkbox", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "containerElement", "clsx", "checkboxClasses", "inputElement", "labelElement", "checked", "disabled", "Collapsible_exports", "__export", "Collapsible", "init_Collapsible", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "containerElement", "clsx", "triggerElement", "createElement", "titleSpan", "chevron", "contentElement", "innerContent", "content", "inner", "Command_exports", "__export", "Command", "init_Command", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "containerElement", "clsx", "backdrop", "createElement", "paletteElement", "inputElement", "resultsElement", "renderResults", "query", "filtered", "cmd", "noResults", "currentCategory", "categoryHeader", "cmdElement", "label", "shortcut", "e", "Combobox_exports", "__export", "Combobox", "init_Combobox", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "containerElement", "inputElement", "clsx", "listElement", "createElement", "renderList", "query", "filtered", "item", "noResults", "option", "e", "value", "i", "ContextMenu_exports", "__export", "ContextMenu", "init_ContextMenu", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "containerElement", "menuElement", "clsx", "item", "itemElement", "createElement", "iconSpan", "labelSpan", "e", "x", "y", "label", "onClick", "icon", "DatePicker_exports", "__export", "DatePicker", "init_DatePicker", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "containerElement", "inputElement", "clsx", "e", "nativeInput", "date", "year", "month", "day", "value", "Dialog_exports", "__export", "Dialog", "init_Dialog", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "containerElement", "clsx", "backdrop", "createBackdrop", "sizeClasses", "dialogElement", "header", "title", "closeBtn", "contentDiv", "e", "keyboard", "createFocusTrap", "content", "DropdownMenu_exports", "__export", "DropdownMenu", "init_DropdownMenu", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "containerElement", "triggerBtn", "positionClass", "alignClass", "menuElement", "clsx", "item", "divider", "itemElement", "createElement", "iconSpan", "labelSpan", "e", "label", "onClick", "icon", "Drawer_exports", "__export", "Drawer", "init_Drawer", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "containerElement", "clsx", "backdrop", "createBackdrop", "positionClasses", "drawerElement", "header", "title", "closeBtn", "contentDiv", "e", "keyboard", "translateClass", "Empty_exports", "__export", "Empty", "init_Empty", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "containerElement", "clsx", "iconElement", "createElement", "titleElement", "messageElement", "actionBtn", "Form_exports", "__export", "Form", "init_Form", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "formElement", "clsx", "e", "field", "fieldContainer", "createElement", "label", "input", "errorDiv", "submitBtn", "formData", "name", "values", "value", "fieldName", "message", "HoverCard_exports", "__export", "HoverCard", "init_HoverCard", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "containerElement", "triggerElement", "cardElement", "clsx", "positions", "content", "Input_exports", "__export", "Input", "init_Input", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "inputElement", "clsx", "value", "disabled", "placeholder", "InputGroup_exports", "__export", "InputGroup", "init_InputGroup", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "groupElement", "clsx", "prefixEl", "createElement", "inputEl", "suffixEl", "InputOTP_exports", "__export", "InputOTP", "init_InputOTP", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "containerElement", "clsx", "i", "input", "e", "value", "Item_exports", "__export", "Item", "init_Item", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "baseClasses", "stateClasses", "itemElement", "clsx", "html", "selected", "disabled", "Label_exports", "__export", "Label", "init_Label", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "labelElement", "clsx", "html", "text", "required", "requiredSpan", "Kbd_exports", "__export", "Kbd", "init_Kbd", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "kbdElement", "clsx", "label", "NativeSelect_exports", "__export", "NativeSelect", "init_NativeSelect", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "selectElement", "clsx", "placeholderOption", "item", "optionElement", "value", "disabled", "label", "option", "Tooltip_exports", "__export", "Tooltip", "init_Tooltip", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "containerElement", "tooltipElement", "clsx", "arrow", "positions", "arrowPositions", "content", "Toggle_exports", "__export", "Toggle", "init_Toggle", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "baseClasses", "variantClasses", "sizeClasses", "toggleElement", "clsx", "pressed", "disabled", "ToggleGroup_exports", "__export", "ToggleGroup", "init_ToggleGroup", "__esmMin", "init_BaseComponent", "init_utils", "BaseComponent", "options", "orientationClass", "groupElement", "clsx", "item", "index", "isSelected", "btnClasses", "btn", "createElement", "value", "Toast_exports", "__export", "Toast", "init_Toast", "__esmMin", "init_BaseComponent", "init_utils", "_Toast", "BaseComponent", "options", "el", "onDone", "container", "position", "key", "createElement", "clsx", "containerElement", "toastElement", "iconElement", "messageElement", "closeBtn", "pos", "positions", "types", "icons", "message", "toast", "element", "style", "initLazyHydration", "root", "selector", "threshold", "observer", "entries", "obs", "entry", "el", "spec", "modulePath", "initName", "mod", "loader", "MODULE_REGISTRY", "fn", "e", "init_lazyHydrate", "__esmMin", "account_exports", "__export", "account_default", "AccountPage", "init_account", "__esmMin", "currentUser", "init", "loadUserProfile", "setupAvatarHandlers", "initProfileTabs", "initProfileForm", "initPasswordForm", "initAddressManagement", "renderProfile", "tabs", "panels", "setActive", "target", "panel", "btn", "isActive", "initial", "container", "name", "memberSince", "avatarImg", "initTabs", "form", "firstNameInput", "lastNameInput", "emailInput", "phoneInput", "e", "formData", "data", "submitBtn", "error", "avatarInput", "avatarBtn", "removeBtn", "file", "currentPassword", "newPassword", "confirmPassword", "loadAddresses", "showAddressModal", "addresses", "addr", "bindAddressEvents", "addressId", "response", "address", "isEdit", "destroy", "cart_exports", "__export", "cart_default", "CartPage", "init_cart", "__esmMin", "cart", "setActiveCurrency", "parseAmount", "value", "numeric", "formatCartPrice", "amount", "init", "loadCart", "initCouponForm", "container", "renderCart", "error", "cartData", "items", "summary", "subtotalValue", "discountValue", "taxValue", "totalValue", "couponCode", "item", "renderCartItem", "bindCartEvents", "product", "variant", "productSlug", "productName", "productImage", "priceAtAdd", "currentPrice", "lineTotal", "showOriginal", "cartItems", "clearCartBtn", "removeCouponBtn", "e", "cartItem", "itemId", "qtyInput", "removeItem", "current", "updateQuantity", "max", "quantity", "clearCart", "removeCoupon", "form", "code", "submitBtn", "destroy", "category_exports", "__export", "category_default", "CategoryPage", "init_category", "__esmMin", "currentFilters", "currentPage", "currentCategory", "abortController", "initialized", "init", "categorySlug", "getCategorySlugFromUrl", "headerContainer", "initFilterHandlers", "initSortHandler", "initViewToggle", "getFiltersFromUrl", "loadCategory", "match", "params", "filters", "attributes", "slug", "productsContainer", "filtersContainer", "categoryResponse", "renderCategoryHeader", "loadBreadcrumbs", "loadFilters", "loadProducts", "loadSubcategories", "error", "category", "container", "breadcrumbs", "items", "item", "filterOptions", "attr", "value", "bindFilterEvents", "applyPriceBtn", "inStockCheckbox", "onSaleCheckbox", "clearBtn", "attributeCheckboxes", "minPrice", "maxPrice", "applyFilters", "e", "checkbox", "updateAttributeFilters", "checkboxes", "cb", "updateUrl", "newUrl", "key", "response", "products", "meta", "renderProducts", "viewMode", "gridClass", "product", "paginationContainer", "pageBtn", "subcategories", "sub", "mobileFilterBtn", "filterSidebar", "closeFilterBtn", "sortSelect", "gridBtn", "listBtn", "destroy", "checkout_exports", "__export", "checkout_default", "CheckoutPage", "init_checkout", "__esmMin", "cart", "checkoutData", "currentStep", "init", "loadCart", "loadUserAddresses", "initStepNavigation", "initFormValidation", "initOrderSummaryToggle", "renderOrderSummary", "error", "container", "item", "addresses", "shippingContainer", "addr", "bindAddressSelection", "addressRadios", "newAddressForm", "radio", "e", "steps", "stepIndicators", "nextBtns", "prevBtns", "showStep", "stepNumber", "step", "indicator", "indicatorStep", "btn", "validateCurrentStep", "loadShippingMethods", "validateShippingAddress", "validateShippingMethod", "validatePaymentMethod", "clearStepErrors", "el", "showInlineError", "fieldEl", "message", "name", "existing", "msg", "focusFirstInvalid", "first", "input", "savedAddressRadio", "form", "formData", "address", "missing", "field", "selector", "l", "emailEl", "params", "methods", "method", "index", "idx", "updateShippingCost", "fetchAndRenderPaymentGateways", "data", "gateways", "existingCodes", "remoteCodes", "g", "c", "i", "err", "frag", "wrapper", "label", "loadStripeJsIfNeeded", "publishableKey", "resolve", "reject", "initStripeElements", "script", "stripe", "cardEl", "mountPoint", "errContainer", "cost", "shippingCostEl", "orderTotalEl", "total", "selected", "toggle", "block", "hidden", "chevron", "isHidden", "code", "nameEl", "sameAsBillingCheckbox", "billingAddressForm", "handler", "targetForm", "placeOrderBtn", "placeOrderForm", "placeOrder", "orderNotes", "billingForm", "order", "processStripePayment", "processPayPalPayment", "response", "client_secret", "publishable_key", "result", "approval_url", "destroy", "contact_exports", "__export", "contact_default", "ContactPage", "init_contact", "__esmMin", "init", "initContactForm", "loadContactInfo", "form", "validator", "e", "submitBtn", "originalText", "formData", "data", "showSuccessState", "error", "successContainer", "container", "info", "destroy", "faq_exports", "__export", "faq_default", "FAQPage", "init_faq", "__esmMin", "categories", "init", "existingFAQList", "bindServerRenderedContent", "loadFAQs", "initSearch", "categoryBtns", "categoryGroups", "btn", "e", "b", "category", "cat", "searchInput", "item", "toggle", "content", "icon", "isOpen", "otherItem", "container", "faqs", "groupByCategory", "renderFAQs", "error", "grouped", "faq", "categorizedFaqs", "searchTerm", "categoryNames", "renderFAQItem", "bindCategoryTabs", "bindAccordion", "question", "answer", "regex", "group", "trigger", "debounceTimer", "query", "filterServerRenderedFAQs", "filtered", "matchingFaqs", "faqItems", "noResults", "visibleCount", "questionEl", "contentEl", "visibleItems", "destroy", "CategoryCard_exports", "__export", "CategoryCard", "category", "card", "cardInner", "imgSrc", "img", "err", "fallback", "overlay", "name", "count", "init_CategoryCard", "__esmMin", "home_exports", "__export", "home_default", "HomePage", "init_home", "__esmMin", "heroSliderInterval", "init", "loadHeroBanners", "loadFeaturedProducts", "loadCategoriesShowcase", "loadNewArrivals", "loadPromotions", "loadCustomOrderCTA", "loadBestSellers", "loadTestimonials", "initNewsletterForm", "container", "categoriesResponse", "categories", "allReviews", "category", "productsResponse", "products", "product", "reviewsResponse", "reviews", "r", "review", "card", "error", "grid", "response", "badge", "img", "i", "banners", "banner", "index", "_", "initHeroSlider", "totalSlides", "currentSlide", "slides", "dots", "prevBtn", "nextBtn", "goToSlide", "resetAutoplay", "dot", "slidesContainer", "touchStartX", "e", "dx", "CategoryCard", "imgEl", "promotions", "promo", "routeMap", "wizardUrl", "landingUrl", "cat", "form", "emailInput", "submitBtn", "email", "originalText", "destroy", "legal_exports", "__export", "legal_default", "LegalPage", "init_legal", "__esmMin", "init", "pageType", "getPageTypeFromUrl", "loadLegalContent", "initTableOfContents", "path", "match", "container", "page", "renderLegalPage", "error", "titleContainer", "tocContainer", "headings", "tocHtml", "heading", "index", "id", "level", "link", "e", "targetId", "target", "targetPosition", "observerOptions", "observer", "entries", "entry", "tocLink", "destroy", "orders_exports", "__export", "orders_default", "OrdersPage", "init_orders", "__esmMin", "currentPage", "currentFilter", "init", "orderId", "getOrderIdFromUrl", "loadOrderDetail", "loadOrders", "initFilters", "match", "container", "params", "response", "orders", "meta", "renderOrders", "error", "order", "renderOrderCard", "e", "pageBtn", "statusClass", "items", "displayItems", "remainingCount", "item", "renderOrderDetail", "event", "index", "bindOrderDetailEvents", "reorderBtn", "cancelBtn", "printBtn", "filterBtns", "btn", "b", "destroy", "require_preorders", "__commonJSMin", "PreordersPage", "routeMap", "wizardUrl", "landingUrl", "initLanding", "loadFeaturedCategories", "loadPopularTemplates", "loadStats", "container", "response", "categories", "category", "renderCategoryCard", "error", "imageUrl", "hasImage", "escapeHtml", "s", "formatPrice", "statsContainer", "stats", "initCategoryDetail", "categorySlug", "optionsContainer", "options", "renderCategoryOptions", "option", "choice", "initMyPreorders", "preorders", "preorder", "renderPreorderCard", "statusColors", "statusLabels", "statusClass", "statusLabel", "initDetail", "preorderNumber", "loadPreorderStatus", "initMessageForm", "status", "form", "e", "messageInput", "submitBtn", "message", "originalText", "product_exports", "__export", "product_default", "ProductPage", "init_product", "__esmMin", "currentProduct", "selectedVariant", "gallery", "initialized", "serverRendered", "init", "container", "isServerRendered", "bindExistingEvents", "productSlug", "getProductSlugFromUrl", "loadProduct", "initQuantityControls", "initAddToCartFromExisting", "initWishlistFromExisting", "markWishlistButtonIfNeeded", "btn", "productId", "resp", "item", "initVariantSelectionFromExisting", "initGalleryFromExisting", "initTabsFromExisting", "tabButtons", "tabContents", "tabName", "b", "content", "quantity", "hasVariants", "variantId", "originalHtml", "error", "inWishlist", "input", "price", "priceEl", "match", "slug", "renderProduct", "loadBreadcrumbs", "loadRelatedProducts", "loadReviews", "trackProductView", "e", "product", "images", "mainImage", "inStock", "onSale", "img", "index", "renderVariants", "tag", "key", "value", "initGallery", "initAddToCart", "initWishlist", "initShare", "variants", "grouped", "variant", "attrName", "options", "opt", "thumbnails", "thumb", "t", "currentIndex", "qtyInput", "decreaseBtn", "increaseBtn", "current", "max", "variantBtns", "priceContainer", "shareBtns", "url", "title", "platform", "shareUrl", "image", "items", "cat", "products", "p", "reviews", "review", "showReviewForm", "i", "rating", "comment", "stars", "ratingInput", "star", "s", "destroy", "search_exports", "__export", "search_default", "SearchPage", "init_search", "__esmMin", "currentQuery", "currentPage", "currentFilters", "abortController", "initialized", "init", "resultsContainer", "initSearchForm", "initFilters", "initSorting", "initViewToggle", "getQueryFromUrl", "getFiltersFromUrl", "loadProducts", "gridBtn", "listBtn", "resultsCount", "params", "loadCategories", "response", "products", "meta", "renderResults", "loadFilterOptions", "error", "pageTitle", "categories", "cat", "filters", "searchForm", "searchInput", "e", "query", "updateUrl", "performSearch", "suggestionsContainer", "debounceTimer", "product", "container", "viewMode", "gridClass", "pageBtn", "categoriesContainer", "bindCategoryFilter", "radio", "applyPriceBtn", "inStockCheckbox", "clearFiltersBtn", "minPrice", "maxPrice", "r", "minInput", "maxInput", "sortSelect", "newUrl", "destroy", "wishlist_exports", "__export", "wishlist_default", "WishlistPage", "init_wishlist", "__esmMin", "currentPage", "init", "loadWishlist", "resolveProductImage", "item", "product", "candidates", "pick", "val", "candidate", "url", "resolvePrices", "pickNumber", "num", "priceCandidates", "price", "p", "saleCandidates", "salePrice", "s", "container", "response", "items", "meta", "renderWishlist", "error", "msg", "renderWishlistItem", "mount", "paginator", "page", "bindEvents", "productName", "productSlug", "inStock", "imageUrl", "requiresVariants", "priceObj", "safeEscape", "safePriceRender", "aspectCss", "clearAllBtn", "wishlistItems", "paginationContainer", "itemId", "productId", "e", "btn", "showVariantPicker", "slug", "href", "m", "renderModalVariants", "variants", "grouped", "variant", "attrName", "options", "opt", "index", "id", "res", "currency", "firstImage", "content", "confirmed", "variantId", "qty", "err", "variantBtns", "b", "priceEl", "first", "destroy", "require_app", "__commonJSMin", "init_lazyHydrate", "init_", "App", "pageControllers", "currentPage", "currentController", "loadPageController", "page", "mod", "globImport_pages_js", "init", "detectCurrentPage", "initGlobalComponents", "initCurrentPage", "initCartBadge", "initWishlistBadge", "initGlobalEventListeners", "initMobileMenu", "initLanguageSelector", "raw", "parsed", "items", "syncWishlistButtons", "payload", "_lastWishlistItems", "mapById", "mapBySlug", "it", "pid", "pslug", "id", "btn", "svg", "fillPath", "productId", "productSlug", "itemId", "debounceTimer", "mutations", "found", "m", "n", "path", "body", "trigger", "targetId", "target", "initLazyHydration", "controller", "e", "count", "updateCartBadge", "findWishlistItemId", "item", "badge", "updateAuthUI", "quickAddBtn", "originalHtml", "error", "wishlistBtn", "wishlistItemId", "shouldRemove", "res", "response", "createdId", "quickViewBtn", "backToTopBtn", "isLoggedIn", "el", "state", "menuBtn", "closeBtn", "mobileMenu", "overlay", "openMenu", "closeMenu", "languageBtn", "languageDropdown", "lang", "destroy"]
}
